import{c as h,g as y}from"./_commonjsHelpers-Cpj98o6Y.js";import{_ as x,r as k,o as _,a as P,b as E,l as j,d as v}from"./index-eAD1fMAz.js";var b={exports:{}};(function(I,g){(function(A,d){I.exports=d()})(h,function(){function A(n){var l=[];return n.AMapUI&&l.push(d(n.AMapUI)),n.Loca&&l.push(p(n.Loca)),Promise.all(l)}function d(n){return new Promise(function(l,a){var i=[];if(n.plugins)for(var u=0;u<n.plugins.length;u+=1)e.AMapUI.plugins.indexOf(n.plugins[u])==-1&&i.push(n.plugins[u]);if(t.AMapUI===o.failed)a("前次请求 AMapUI 失败");else if(t.AMapUI===o.notload){t.AMapUI=o.loading,e.AMapUI.version=n.version||e.AMapUI.version,u=e.AMapUI.version;var c=document.body||document.head,r=document.createElement("script");r.type="text/javascript",r.src="https://webapi.amap.com/ui/"+u+"/main.js",r.onerror=function(s){t.AMapUI=o.failed,a("请求 AMapUI 失败")},r.onload=function(){if(t.AMapUI=o.loaded,i.length)window.AMapUI.loadUI(i,function(){for(var s=0,M=i.length;s<M;s++){var m=i[s].split("/").slice(-1)[0];window.AMapUI[m]=arguments[s]}for(l();f.AMapUI.length;)f.AMapUI.splice(0,1)[0]()});else for(l();f.AMapUI.length;)f.AMapUI.splice(0,1)[0]()},c.appendChild(r)}else t.AMapUI===o.loaded?n.version&&n.version!==e.AMapUI.version?a("不允许多个版本 AMapUI 混用"):i.length?window.AMapUI.loadUI(i,function(){for(var s=0,M=i.length;s<M;s++){var m=i[s].split("/").slice(-1)[0];window.AMapUI[m]=arguments[s]}l()}):l():n.version&&n.version!==e.AMapUI.version?a("不允许多个版本 AMapUI 混用"):f.AMapUI.push(function(s){s?a(s):i.length?window.AMapUI.loadUI(i,function(){for(var M=0,m=i.length;M<m;M++){var L=i[M].split("/").slice(-1)[0];window.AMapUI[L]=arguments[M]}l()}):l()})})}function p(n){return new Promise(function(l,a){if(t.Loca===o.failed)a("前次请求 Loca 失败");else if(t.Loca===o.notload){t.Loca=o.loading,e.Loca.version=n.version||e.Loca.version;var i=e.Loca.version,u=e.AMap.version.startsWith("2"),c=i.startsWith("2");if(u&&!c||!u&&c)a("JSAPI 与 Loca 版本不对应！！");else{u=e.key,c=document.body||document.head;var r=document.createElement("script");r.type="text/javascript",r.src="https://webapi.amap.com/loca?v="+i+"&key="+u,r.onerror=function(s){t.Loca=o.failed,a("请求 AMapUI 失败")},r.onload=function(){for(t.Loca=o.loaded,l();f.Loca.length;)f.Loca.splice(0,1)[0]()},c.appendChild(r)}}else t.Loca===o.loaded?n.version&&n.version!==e.Loca.version?a("不允许多个版本 Loca 混用"):l():n.version&&n.version!==e.Loca.version?a("不允许多个版本 Loca 混用"):f.Loca.push(function(s){s?a(s):a()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(n){n.notload="notload",n.loading="loading",n.loaded="loaded",n.failed="failed"})(o||(o={}));var e={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},f={AMap:[],AMapUI:[],Loca:[]},w=[],U=function(n){typeof n=="function"&&(t.AMap===o.loaded?n(window.AMap):w.push(n))};return{load:function(n){return new Promise(function(l,a){if(t.AMap==o.failed)a("");else if(t.AMap==o.notload){var i=n.key,u=n.version,c=n.plugins;i?(window.AMap&&location.host!=="lbs.amap.com"&&a("禁止多种API加载方式混用"),e.key=i,e.AMap.version=u||e.AMap.version,e.AMap.plugins=c||e.AMap.plugins,t.AMap=o.loading,u=document.body||document.head,window.___onAPILoaded=function(s){if(delete window.___onAPILoaded,s)t.AMap=o.failed,a(s);else for(t.AMap=o.loaded,A(n).then(function(){l(window.AMap)}).catch(a);w.length;)w.splice(0,1)[0]()},c=document.createElement("script"),c.type="text/javascript",c.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+e.AMap.version+"&key="+i+"&plugin="+e.AMap.plugins.join(","),c.onerror=function(s){t.AMap=o.failed,a(s)},u.appendChild(c)):a("请填写key")}else if(t.AMap==o.loaded)if(n.key&&n.key!==e.key)a("多个不一致的 key");else if(n.version&&n.version!==e.AMap.version)a("不允许多个版本 JSAPI 混用");else{if(i=[],n.plugins)for(u=0;u<n.plugins.length;u+=1)e.AMap.plugins.indexOf(n.plugins[u])==-1&&i.push(n.plugins[u]);i.length?window.AMap.plugin(i,function(){A(n).then(function(){l(window.AMap)}).catch(a)}):A(n).then(function(){l(window.AMap)}).catch(a)}else if(n.key&&n.key!==e.key)a("多个不一致的 key");else if(n.version&&n.version!==e.AMap.version)a("不允许多个版本 JSAPI 混用");else{var r=[];if(n.plugins)for(u=0;u<n.plugins.length;u+=1)e.AMap.plugins.indexOf(n.plugins[u])==-1&&r.push(n.plugins[u]);U(function(){r.length?window.AMap.plugin(r,function(){A(n).then(function(){l(window.AMap)}).catch(a)}):A(n).then(function(){l(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,e={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},f={AMap:[],AMapUI:[],Loca:[]}}}})})(b);var B=b.exports;const C=y(B),S={class:"mapbox"},J={class:"flex"},O={class:"text-box"},q={__name:"Amap",setup(I){const g=k(null);_(()=>{C.load({key:"632b77ebc2324f21e2d28593f8b7c15d",version:"2.0",plugins:[]}).then(d=>{g.value=new d.Map("map",{zoom:10}),g.value.setDefaultCursor("pointer");let p=0;function o(e,t){let f=new d.Marker({position:[e,t],content:`<div class="marker-icon"><img src="//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png"><span>${p}</span></div>`,offset:new d.Pixel(-16,-38)});f.setMap(null),f.setMap(g.value)}g.value.on("click",function(e){p++,document.getElementById("lnglat").value+=e.lnglat.getLng()+","+e.lnglat.getLat()+`, 
`,o(e.lnglat.getLng(),e.lnglat.getLat())})}).catch(d=>{console.error("高德地图加载失败:",d)})});const A=()=>{let d=document.querySelector(".amap-markers");d&&(idx=0,d.innerHTML="",document.getElementById("lnglat").value="")};return P(()=>{g.value.destroy(),g.value=null}),(d,p)=>(E(),j("div",S,[p[4]||(p[4]=v("h1",null,"高德地图坐标拾取",-1)),v("div",J,[p[3]||(p[3]=v("div",{id:"map"},null,-1)),v("div",O,[p[1]||(p[1]=v("p",null,"经纬度：",-1)),p[2]||(p[2]=v("textarea",{id:"lnglat",rows:"5",cols:"50"},null,-1)),v("p",null,[v("button",{onClick:p[0]||(p[0]=o=>A())},"清除标记")])])])]))}},$=x(q,[["__scopeId","data-v-1349e708"]]);export{$ as default};
