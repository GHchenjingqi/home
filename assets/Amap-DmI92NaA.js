import{_ as j,r as I,o as D,a as B,l as J,b as V,d as s,h as U,n as C,J as P,u as y,v as _,j as h,K as x}from"./index-BW9tvWnl.js";import{g as q}from"./_commonjsHelpers-Cpj98o6Y.js";import"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/mds/pathList.js";var L={exports:{}},z=L.exports,S;function O(){return S||(S=1,(function(k,v){(function(A,d){k.exports=d()})(z,function(){function A(e){var i=[];return e.AMapUI&&i.push(d(e.AMapUI)),e.Loca&&i.push(g(e.Loca)),Promise.all(i)}function d(e){return new Promise(function(i,n){var a=[];if(e.plugins)for(var u=0;u<e.plugins.length;u+=1)t.AMapUI.plugins.indexOf(e.plugins[u])==-1&&a.push(e.plugins[u]);if(l.AMapUI===o.failed)n("前次请求 AMapUI 失败");else if(l.AMapUI===o.notload){l.AMapUI=o.loading,t.AMapUI.version=e.version||t.AMapUI.version,u=t.AMapUI.version;var c=document.body||document.head,p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/ui/"+u+"/main.js",p.onerror=function(r){l.AMapUI=o.failed,n("请求 AMapUI 失败")},p.onload=function(){if(l.AMapUI=o.loaded,a.length)window.AMapUI.loadUI(a,function(){for(var r=0,M=a.length;r<M;r++){var b=a[r].split("/").slice(-1)[0];window.AMapUI[b]=arguments[r]}for(i();m.AMapUI.length;)m.AMapUI.splice(0,1)[0]()});else for(i();m.AMapUI.length;)m.AMapUI.splice(0,1)[0]()},c.appendChild(p)}else l.AMapUI===o.loaded?e.version&&e.version!==t.AMapUI.version?n("不允许多个版本 AMapUI 混用"):a.length?window.AMapUI.loadUI(a,function(){for(var r=0,M=a.length;r<M;r++){var b=a[r].split("/").slice(-1)[0];window.AMapUI[b]=arguments[r]}i()}):i():e.version&&e.version!==t.AMapUI.version?n("不允许多个版本 AMapUI 混用"):m.AMapUI.push(function(r){r?n(r):a.length?window.AMapUI.loadUI(a,function(){for(var M=0,b=a.length;M<b;M++){var E=a[M].split("/").slice(-1)[0];window.AMapUI[E]=arguments[M]}i()}):i()})})}function g(e){return new Promise(function(i,n){if(l.Loca===o.failed)n("前次请求 Loca 失败");else if(l.Loca===o.notload){l.Loca=o.loading,t.Loca.version=e.version||t.Loca.version;var a=t.Loca.version,u=t.AMap.version.startsWith("2"),c=a.startsWith("2");if(u&&!c||!u&&c)n("JSAPI 与 Loca 版本不对应！！");else{u=t.key,c=document.body||document.head;var p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/loca?v="+a+"&key="+u,p.onerror=function(r){l.Loca=o.failed,n("请求 AMapUI 失败")},p.onload=function(){for(l.Loca=o.loaded,i();m.Loca.length;)m.Loca.splice(0,1)[0]()},c.appendChild(p)}}else l.Loca===o.loaded?e.version&&e.version!==t.Loca.version?n("不允许多个版本 Loca 混用"):i():e.version&&e.version!==t.Loca.version?n("不允许多个版本 Loca 混用"):m.Loca.push(function(r){r?n(r):n()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(o||(o={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},m={AMapUI:[],Loca:[]},w=[],f=function(e){typeof e=="function"&&(l.AMap===o.loaded?e(window.AMap):w.push(e))};return{load:function(e){return new Promise(function(i,n){if(l.AMap==o.failed)n("");else if(l.AMap==o.notload){var a=e.key,u=e.version,c=e.plugins;a?(window.AMap&&location.host!=="lbs.amap.com"&&n("禁止多种API加载方式混用"),t.key=a,t.AMap.version=u||t.AMap.version,t.AMap.plugins=c||t.AMap.plugins,l.AMap=o.loading,u=document.body||document.head,window.___onAPILoaded=function(r){if(delete window.___onAPILoaded,r)l.AMap=o.failed,n(r);else for(l.AMap=o.loaded,A(e).then(function(){i(window.AMap)}).catch(n);w.length;)w.splice(0,1)[0]()},c=document.createElement("script"),c.type="text/javascript",c.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+a+"&plugin="+t.AMap.plugins.join(","),c.onerror=function(r){l.AMap=o.failed,n(r)},u.appendChild(c)):n("请填写key")}else if(l.AMap==o.loaded)if(e.key&&e.key!==t.key)n("多个不一致的 key");else if(e.version&&e.version!==t.AMap.version)n("不允许多个版本 JSAPI 混用");else{if(a=[],e.plugins)for(u=0;u<e.plugins.length;u+=1)t.AMap.plugins.indexOf(e.plugins[u])==-1&&a.push(e.plugins[u]);a.length?window.AMap.plugin(a,function(){A(e).then(function(){i(window.AMap)}).catch(n)}):A(e).then(function(){i(window.AMap)}).catch(n)}else if(e.key&&e.key!==t.key)n("多个不一致的 key");else if(e.version&&e.version!==t.AMap.version)n("不允许多个版本 JSAPI 混用");else{var p=[];if(e.plugins)for(u=0;u<e.plugins.length;u+=1)t.AMap.plugins.indexOf(e.plugins[u])==-1&&p.push(e.plugins[u]);f(function(){p.length?window.AMap.plugin(p,function(){A(e).then(function(){i(window.AMap)}).catch(n)}):A(e).then(function(){i(window.AMap)}).catch(n)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},m={AMap:[],AMapUI:[],Loca:[]}}}})})(L)),L.exports}var T=O();const $=q(T),N={class:"mapbox"},R={class:"flex"},W={class:"text-box"},F={style:{"margin-top":".2rem"}},H={class:"br",style:{"margin-bottom":"1rem"}},K={class:"br",style:{"margin-bottom":"1rem"}},Z={class:"br"},G={__name:"Amap",setup(k){const v=I(null);let A=0,d=I(0);const g=I(null),o=I(null),t=I(null);D(()=>{window._AMapSecurityConfig={securityJsCode:"a35d130dcf0b7378372e987bfe77add1"},$.load({key:"632b77ebc2324f21e2d28593f8b7c15d",version:"2.0",plugins:[]}).then(f=>{v.value=new f.Map("map",{zoom:10}),v.value.setDefaultCursor("pointer");let e=v.value.getCenter();e&&(g.value=e.lng,o.value=e.lat);function i(n,a){let u=new f.Marker({position:[n,a],content:`<div class="marker-icon"><img src="//a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png"><span>${A}</span></div>`,offset:new f.Pixel(-16,-38)});u.setMap(null),u.setMap(v.value)}v.value.on("click",function(n){A++,document.getElementById("lnglat").value+=n.lnglat.getLng()+","+n.lnglat.getLat()+`, 
`,i(n.lnglat.getLng(),n.lnglat.getLat())})}).catch(f=>{console.error("高德地图加载失败:",f)})});const l=()=>{g.value&&o.value&&v.value.setCenter([g.value,o.value],!0,1e3)},m=()=>{t.value&&window.AMap.plugin("AMap.DistrictSearch",()=>{new window.AMap.DistrictSearch({level:"city",subdistrict:0}).search(t.value,(e,i)=>{if(e==="complete"&&i.districtList.length>0){const a=i.districtList[0].center;v.value.setCenter(a),v.value.setZoom(10)}})})},w=()=>{let f=document.querySelector(".amap-markers");f&&(A=0,f.innerHTML="",document.getElementById("lnglat").value="")};return B(()=>{v.value.destroy(),v.value=null}),(f,e)=>(V(),J("div",N,[e[12]||(e[12]=s("h1",null,"高德地图坐标拾取",-1)),s("div",R,[e[11]||(e[11]=s("div",{id:"map"},null,-1)),s("div",W,[s("h5",F,[s("span",{class:C({active:y(d)==0}),onClick:e[0]||(e[0]=()=>{P(d)?d.value=0:d=0})},"经纬度",2),s("span",{class:C({active:y(d)==1}),onClick:e[1]||(e[1]=()=>{P(d)?d.value=1:d=1})},"城市",2)]),U(s("div",H,[s("p",null,[e[6]||(e[6]=h("经度：",-1)),U(s("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>g.value=i),class:"input"},null,512),[[x,g.value]])]),s("p",null,[e[7]||(e[7]=h("纬度：",-1)),U(s("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=i=>o.value=i),class:"input"},null,512),[[x,o.value]])]),s("p",null,[s("button",{onClick:l},"前往")])],512),[[_,y(d)==0]]),U(s("div",K,[s("p",null,[e[8]||(e[8]=h("城市：",-1)),U(s("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=i=>t.value=i),class:"input"},null,512),[[x,t.value]])]),s("p",null,[s("button",{onClick:m},"前往")])],512),[[_,y(d)==1]]),s("div",Z,[e[9]||(e[9]=s("p",{style:{"font-size":"0.96rem","margin-bottom":"0.3rem","margin-top":"0.8rem"}},"标记位置信息：",-1)),e[10]||(e[10]=s("textarea",{id:"lnglat",rows:"5",cols:"50"},null,-1)),s("p",null,[s("button",{onClick:e[5]||(e[5]=i=>w())},"清除标记")])])])])]))}},ee=j(G,[["__scopeId","data-v-5d18be24"]]);export{ee as default};
