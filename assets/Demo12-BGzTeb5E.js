import{u as A,L as I}from"./Loading-D1uzv2GI.js";import{u as B}from"./useRay-Bc21SAK3.js";import{_ as j,b as C,o as N,c as D,w as z,a as u,u as _}from"./index-t5OL7HwM.js";import"./allscreen-nR12o5Qs.js";import"./loading-C6BlpobF.js";const F={__name:"Demo12",setup(G){let a=null,i=null,o={mesh:null,moveListener:!1},p,b;const L=({THREE:n,scene:t,controls:d,camera:s,renderer:r})=>{r.shadowMap.enabled=!0,r.shadowMap.type=n.PCFSoftShadowMap;const M=new n.TextureLoader().load("/home//public/images/bj.webp");t.background=M;let m=.1;const v=t.children.find(e=>e.name==="table");v.scale.set(2,2,2),v.position.set(0,.2-m,0),t.getObjectByName("node_id30").castShadow=!0,t.getObjectByName("node_id30").receiveShadow=!0;const c=t.children.find(e=>e.name==="chair");c.scale.set(.7,.7,.7),c.position.set(0,.28-m,1),c.rotation.y=Math.PI/2,c.children[0].castShadow=!0,o.mesh=c;const w=t.children.find(e=>e.name==="compute");w.scale.set(.6,.6,.6),w.position.set(0,.524-m,.25);const y=t.children.find(e=>e.name==="bird");y.scale.set(.1,.1,.1),y.position.set(-.3,.474-m,.55);const h=t.children.find(e=>e.name==="home");h.rotation.y=Math.PI/2,h.scale.set(.6,.6,.6),h.position.set(3.5,-.1,2.8),h.receiveShadow=!0;const g=t.children.find(e=>e.name==="lamp");g.scale.set(.4,.4,.4),g.position.set(-.3711616376237567,.5238102031262872-m,.3548526176053807),d.minPolarAngle=Math.PI*1.4/4,d.maxPolarAngle=Math.PI*1.5/4,d.minAzimuthAngle=-Math.PI*1/6,d.maxAzimuthAngle=Math.PI*2.5/6,b=function(e){switch(e.code){case"Space":S();break}},document.body.addEventListener("keydown",b);let l=null;const S=()=>{let e=document.getElementById("box");l?(e.style.display="block",t.remove(l),l=null):(e.style.display="none",l=new n.PointLight(6710886,1.5,60),l.position.set(-.36,.58,.46),t.add(l),l.castShadow=!0)};let f=new n.Group;f.add(c),f.add(g),t.add(f),p=async function(e){i=await B({el:"#canvas",camera:s,group:f,event:e}),i!=null&&i.object&&(a&&(a=null),o&&o.moveListener&&(o.moveListener=!1),a=i.object,a.name==="node_id42"||a.name==="node_id40"?l.color=new n.Color(Math.random()*16777215):a.name==="tripo_node_286c52cb-1ad1-46f0-a987-4d93f1e5ffe5"&&(o.moveListener=!0),s.lookAt(a.position))},document.body.addEventListener("click",p)},x=({scene:n,camera:t,renderer:d,controls:s,stats:r})=>{o&&(o!=null&&o.moveListener)&&(o.mesh.rotation.y+=.01),s==null||s.update(),d.render(n,t),r==null||r.update()},{loading:k,pregress:P}=A({el:"#canvas",background:"#111",cameraPosition:[0,.6,1.5],modelPath:["public/glbs/compute.glb","public/glbs/table.glb","public/glbs/cute_bird.glb","public/glbs/chair.glb","public/glbs/home.fbx","public/glbs/light.glb"],modelName:["compute","table","bird","chair","home","lamp"],modelScale:[0,0,0],control:!0,controlAutoSpeed:!1,transformControls:!0,helper:!1,light:!1,creatMesh:L,animation:x});return C(()=>{o=null,a=null,i=null,document.body.removeEventListener("click",p),document.body.removeEventListener("keydown",b),p=b=null}),(n,t)=>(N(),D(I,{loading:_(k),pregress:_(P)},{default:z(()=>t[0]||(t[0]=[u("canvas",{id:"canvas"},null,-1),u("div",{id:"box"},[u("div",{class:"box"},[u("p",null,"空格开灯"),u("p",null,"点击灯，随机改变颜色"),u("p",null,"点击凳子，旋转移动")])],-1)])),_:1},8,["loading","pregress"]))}},Q=j(F,[["__scopeId","data-v-28926e05"]]);export{Q as default};
