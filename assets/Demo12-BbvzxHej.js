import{u as j,L as A}from"./Loading-fvwP1RP7.js";import{u as I}from"./useRay-DOXWl-JR.js";import{_ as B,a as C,c as N,b as D,w as O,u as _,d}from"./index-GomNjU0M.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-CUko5Aew.js";import"./loading-CARvSZNY.js";import"https://ghchenjingqi.github.io/resources/mds/pathList.js";const z={__name:"Demo12",setup(F){let a=null,c=null,o={mesh:null,moveListener:!1},m,u;const L=({THREE:n,scene:t,controls:i,camera:p,renderer:h})=>{h.shadowMap.enabled=!0,h.shadowMap.type=n.PCFSoftShadowMap;const M=new n.TextureLoader().load("/home//public/images/bj.webp");t.background=M;let r=.1;const v=t.children.find(e=>e.name==="table");v.scale.set(2,2,2),v.position.set(0,.2-r,0),t.getObjectByName("node_id30").castShadow=!0,t.getObjectByName("node_id30").receiveShadow=!0;const s=t.children.find(e=>e.name==="chair");s.scale.set(.7,.7,.7),s.position.set(0,.28-r,1),s.rotation.y=Math.PI/2,s.children[0].castShadow=!0,o.mesh=s;const y=t.children.find(e=>e.name==="compute");y.scale.set(.6,.6,.6),y.position.set(0,.524-r,.25);const w=t.children.find(e=>e.name==="bird");w.scale.set(.1,.1,.1),w.position.set(-.3,.474-r,.55);const b=t.children.find(e=>e.name==="home");b.rotation.y=Math.PI/2,b.scale.set(.6,.6,.6),b.position.set(3.5,-.1,2.8),b.receiveShadow=!0;const g=t.children.find(e=>e.name==="lamp");g.scale.set(.4,.4,.4),g.position.set(-.3711616376237567,.5238102031262872-r,.3548526176053807),i.minPolarAngle=Math.PI*1.4/4,i.maxPolarAngle=Math.PI*1.5/4,i.minAzimuthAngle=-Math.PI*1/6,i.maxAzimuthAngle=Math.PI*2.5/6,u=function(e){switch(e.code){case"Space":S();break}},document.body.addEventListener("keydown",u);let l=null;const S=()=>{let e=document.getElementById("box");l?(e.style.display="block",t.remove(l),l=null):(e.style.display="none",l=new n.PointLight(6710886,1.5,60),l.position.set(-.36,.58,.46),t.add(l),l.castShadow=!0)};let f=new n.Group;f.add(s),f.add(g),t.add(f),m=async function(e){c=await I({el:"#canvas",camera:p,group:f,event:e}),c?.object&&(a&&(a=null),o&&o.moveListener&&(o.moveListener=!1),a=c.object,a.name==="node_id42"||a.name==="node_id40"?l.color=new n.Color(Math.random()*16777215):a.name==="tripo_node_286c52cb-1ad1-46f0-a987-4d93f1e5ffe5"&&(o.moveListener=!0),p.lookAt(a.position))},document.body.addEventListener("click",m)},x=({scene:n,camera:t,renderer:i,controls:p,stats:h})=>{o&&o?.moveListener&&(o.mesh.rotation.y+=.01),p?.update(),i.render(n,t),h?.update()},{loading:k,pregress:P}=j({el:"#canvas",background:"#111",cameraPosition:[0,.6,1.5],modelPath:["compute.glb","table.glb","cute_bird.glb","chair.glb","home.fbx","light.glb"],modelName:["compute","table","bird","chair","home","lamp"],modelScale:[0,0,0],control:!0,controlAutoSpeed:!1,transformControls:!0,helper:!1,light:!1,creatMesh:L,animation:x});return C(()=>{o=null,a=null,c=null,document.body.removeEventListener("click",m),document.body.removeEventListener("keydown",u),m=u=null}),(n,t)=>(D(),N(A,{loading:_(k),pregress:_(P)},{default:O(()=>[...t[0]||(t[0]=[d("canvas",{id:"canvas"},null,-1),d("div",{id:"box"},[d("div",{class:"box"},[d("p",null,"空格开灯"),d("p",null,"点击灯，随机改变颜色"),d("p",null,"点击凳子，旋转移动")])],-1)])]),_:1},8,["loading","pregress"]))}},Y=B(z,[["__scopeId","data-v-19f6efb2"]]);export{Y as default};
