import{u as A,L as I}from"./Loading-DA-72rh5.js";import{u as j}from"./useRay-b4HxpaKu.js";import{_ as B,b as C,o as N,c as D,w as z,u as _,a as r}from"./index-DkSijEpZ.js";import"./allscreen-ykBHzchp.js";import"./loading-BkqZj4ff.js";const F={__name:"Demo12",setup(G){let a=null,i=null,o={mesh:null,moveListener:!1},m,u;const L=({THREE:n,scene:t,controls:s,camera:p,renderer:b})=>{b.shadowMap.enabled=!0,b.shadowMap.type=n.PCFSoftShadowMap;const M=new n.TextureLoader().load("/home//public/images/bj.webp");t.background=M;let c=.1;const v=t.children.find(e=>e.name==="table");v.scale.set(2,2,2),v.position.set(0,.2-c,0),t.getObjectByName("node_id30").castShadow=!0,t.getObjectByName("node_id30").receiveShadow=!0;const d=t.children.find(e=>e.name==="chair");d.scale.set(.7,.7,.7),d.position.set(0,.28-c,1),d.rotation.y=Math.PI/2,d.children[0].castShadow=!0,o.mesh=d;const w=t.children.find(e=>e.name==="compute");w.scale.set(.6,.6,.6),w.position.set(0,.524-c,.25);const y=t.children.find(e=>e.name==="bird");y.scale.set(.1,.1,.1),y.position.set(-.3,.474-c,.55);const h=t.children.find(e=>e.name==="home");h.rotation.y=Math.PI/2,h.scale.set(.6,.6,.6),h.position.set(3.5,-.1,2.8),h.receiveShadow=!0;const g=t.children.find(e=>e.name==="lamp");g.scale.set(.4,.4,.4),g.position.set(-.3711616376237567,.5238102031262872-c,.3548526176053807),s.minPolarAngle=Math.PI*1.4/4,s.maxPolarAngle=Math.PI*1.5/4,s.minAzimuthAngle=-Math.PI*1/6,s.maxAzimuthAngle=Math.PI*2.5/6,u=function(e){switch(e.code){case"Space":S();break}},document.body.addEventListener("keydown",u);let l=null;const S=()=>{let e=document.getElementById("box");l?(e.style.display="block",t.remove(l),l=null):(e.style.display="none",l=new n.PointLight(6710886,1.5,60),l.position.set(-.36,.58,.46),t.add(l),l.castShadow=!0)};let f=new n.Group;f.add(d),f.add(g),t.add(f),m=async function(e){i=await j({el:"#canvas",camera:p,group:f,event:e}),i!=null&&i.object&&(a&&(a=null),o&&o.moveListener&&(o.moveListener=!1),a=i.object,a.name==="node_id42"||a.name==="node_id40"?l.color=new n.Color(Math.random()*16777215):a.name==="tripo_node_286c52cb-1ad1-46f0-a987-4d93f1e5ffe5"&&(o.moveListener=!0),p.lookAt(a.position))},document.body.addEventListener("click",m)},x=({scene:n,camera:t,renderer:s,controls:p,stats:b})=>{o&&o.moveListener&&(o.mesh.rotation.y+=.01),p.update(),s.render(n,t),b.update()},{loading:k,pregress:P}=A({el:"#canvas",background:"#111",cameraPosition:[0,.6,1.5],modelPath:["public/glbs/compute.glb","public/glbs/table.glb","public/glbs/cute_bird.glb","public/glbs/chair.glb","public/glbs/home.fbx","public/glbs/light.glb"],modelName:["compute","table","bird","chair","home","lamp"],modelScale:[0,0,0],control:!0,controlAutoSpeed:!1,transformControls:!0,helper:!1,light:!1,creatMesh:L,animation:x});return C(()=>{o=null,a=null,i=null,document.body.removeEventListener("click",m),document.body.removeEventListener("keydown",u),m=u=null}),(n,t)=>(N(),D(I,{loading:_(k),pregress:_(P)},{default:z(()=>t[0]||(t[0]=[r("canvas",{id:"canvas"},null,-1),r("div",{id:"box"},[r("div",{class:"box"},[r("p",null,"空格开灯"),r("p",null,"点击灯，随机改变颜色"),r("p",null,"点击凳子，旋转移动")])],-1)])),_:1},8,["loading","pregress"]))}},Q=B(F,[["__scopeId","data-v-c52e9532"]]);export{Q as default};
