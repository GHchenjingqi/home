import{u as j,L as B}from"./Loading-79aDrk5N.js";import{u as C}from"./useRay-CqR-vRIM.js";import{_ as N,d as D,o as z,c as F,w as G,u as x,p as K,a as O,b as c}from"./index-VRAcYr2a.js";import"./allscreen-BbwXwfjp.js";import"./loading-BwWTHRMq.js";const L=m=>(K("data-v-e73180a6"),m=m(),O(),m),U=L(()=>c("canvas",{id:"canvas"},null,-1)),V=L(()=>c("div",{id:"box"},[c("div",{class:"box"},[c("p",null,"空格开灯"),c("p",null,"点击灯，随机改变颜色"),c("p",null,"点击凳子，旋转移动")])],-1)),q={__name:"Demo12",setup(m){let a=null,i=null,o={mesh:null,moveListener:!1},u,p;const k=({THREE:n,scene:t,controls:s,camera:h,renderer:b})=>{b.shadowMap.enabled=!0,b.shadowMap.type=n.PCFSoftShadowMap;const M=new n.TextureLoader().load("/public/images/bj.webp");t.background=M;let r=.1;const v=t.children.find(e=>e.name==="table");v.scale.set(2,2,2),v.position.set(0,.2-r,0),t.getObjectByName("node_id30").castShadow=!0,t.getObjectByName("node_id30").receiveShadow=!0;const d=t.children.find(e=>e.name==="chair");d.scale.set(.7,.7,.7),d.position.set(0,.28-r,1),d.rotation.y=Math.PI/2,d.children[0].castShadow=!0,o.mesh=d;const w=t.children.find(e=>e.name==="compute");w.scale.set(.6,.6,.6),w.position.set(0,.524-r,.25);const y=t.children.find(e=>e.name==="bird");y.scale.set(.1,.1,.1),y.position.set(-.3,.474-r,.55);const f=t.children.find(e=>e.name==="home");f.rotation.y=Math.PI/2,f.scale.set(.6,.6,.6),f.position.set(3.5,-.1,2.8),f.receiveShadow=!0;const _=t.children.find(e=>e.name==="lamp");_.scale.set(.4,.4,.4),_.position.set(-.3711616376237567,.5238102031262872-r,.3548526176053807),s.minPolarAngle=Math.PI*1.4/4,s.maxPolarAngle=Math.PI*1.5/4,s.minAzimuthAngle=-Math.PI*1/6,s.maxAzimuthAngle=Math.PI*2.5/6,p=function(e){switch(e.code){case"Space":A();break}},document.body.addEventListener("keydown",p);let l=null;const A=()=>{let e=document.getElementById("box");l?(e.style.display="block",t.remove(l),l=null):(e.style.display="none",l=new n.PointLight(6710886,1.5,60),l.position.set(-.36,.58,.46),t.add(l),l.castShadow=!0)};let g=new n.Group;g.add(d),g.add(_),t.add(g),u=async function(e){i=await C({el:"#canvas",camera:h,group:g,event:e}),i!=null&&i.object&&(a&&(a=null),o&&o.moveListener&&(o.moveListener=!1),a=i.object,a.name==="node_id42"||a.name==="node_id40"?l.color=new n.Color(Math.random()*16777215):a.name==="tripo_node_286c52cb-1ad1-46f0-a987-4d93f1e5ffe5"&&(o.moveListener=!0),h.lookAt(a.position))},document.body.addEventListener("click",u)},S=({scene:n,camera:t,renderer:s,controls:h,stats:b})=>{o&&o.moveListener&&(o.mesh.rotation.y+=.01),h.update(),s.render(n,t),b.update()},{loading:P,pregress:I}=j({el:"#canvas",background:"#111",cameraPosition:[0,.6,1.5],modelPath:["/public/glbs/compute.glb","/public/glbs/table.glb","/public/glbs/cute_bird.glb","/public/glbs/chair.glb","/public/glbs/home.fbx","/public/glbs/light.glb"],modelName:["compute","table","bird","chair","home","lamp"],modelScale:[0,0,0],control:!0,controlAutoSpeed:!1,transformControls:!0,helper:!1,light:!1,creatMesh:k,animation:S});return D(()=>{o=null,a=null,i=null,document.body.removeEventListener("click",u),document.body.removeEventListener("keydown",p),u=p=null}),(n,t)=>(z(),F(B,{loading:x(P),pregress:x(I)},{default:G(()=>[U,V]),_:1},8,["loading","pregress"]))}},$=N(q,[["__scopeId","data-v-e73180a6"]]);export{$ as default};
