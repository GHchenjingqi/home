import{u as A,L as I}from"./Loading-C0ly20Nx.js";import{u as B}from"./useRay-D_SvASZk.js";import{_ as j,a as C,b as N,c as D,w as z,d as m,u as _}from"./index-ykgXmFBY.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-1ryrW8ip.js";import"./loading-BNZWhTlK.js";const F={__name:"Demo12",setup(G){let a=null,l=null,o={mesh:null,moveListener:!1},p,h;const L=({THREE:n,scene:t,controls:d,camera:r,renderer:s})=>{s.shadowMap.enabled=!0,s.shadowMap.type=n.PCFSoftShadowMap;const M=new n.TextureLoader().load("/home//public/images/bj.webp");t.background=M;let u=.1;const v=t.children.find(e=>e.name==="table");v.scale.set(2,2,2),v.position.set(0,.2-u,0),t.getObjectByName("node_id30").castShadow=!0,t.getObjectByName("node_id30").receiveShadow=!0;const c=t.children.find(e=>e.name==="chair");c.scale.set(.7,.7,.7),c.position.set(0,.28-u,1),c.rotation.y=Math.PI/2,c.children[0].castShadow=!0,o.mesh=c;const w=t.children.find(e=>e.name==="compute");w.scale.set(.6,.6,.6),w.position.set(0,.524-u,.25);const y=t.children.find(e=>e.name==="bird");y.scale.set(.1,.1,.1),y.position.set(-.3,.474-u,.55);const b=t.children.find(e=>e.name==="home");b.rotation.y=Math.PI/2,b.scale.set(.6,.6,.6),b.position.set(3.5,-.1,2.8),b.receiveShadow=!0;const g=t.children.find(e=>e.name==="lamp");g.scale.set(.4,.4,.4),g.position.set(-.3711616376237567,.5238102031262872-u,.3548526176053807),d.minPolarAngle=Math.PI*1.4/4,d.maxPolarAngle=Math.PI*1.5/4,d.minAzimuthAngle=-Math.PI*1/6,d.maxAzimuthAngle=Math.PI*2.5/6,h=function(e){switch(e.code){case"Space":S();break}},document.body.addEventListener("keydown",h);let i=null;const S=()=>{let e=document.getElementById("box");i?(e.style.display="block",t.remove(i),i=null):(e.style.display="none",i=new n.PointLight(6710886,1.5,60),i.position.set(-.36,.58,.46),t.add(i),i.castShadow=!0)};let f=new n.Group;f.add(c),f.add(g),t.add(f),p=async function(e){l=await B({el:"#canvas",camera:r,group:f,event:e}),l!=null&&l.object&&(a&&(a=null),o&&o.moveListener&&(o.moveListener=!1),a=l.object,a.name==="node_id42"||a.name==="node_id40"?i.color=new n.Color(Math.random()*16777215):a.name==="tripo_node_286c52cb-1ad1-46f0-a987-4d93f1e5ffe5"&&(o.moveListener=!0),r.lookAt(a.position))},document.body.addEventListener("click",p)},x=({scene:n,camera:t,renderer:d,controls:r,stats:s})=>{o&&(o!=null&&o.moveListener)&&(o.mesh.rotation.y+=.01),r==null||r.update(),d.render(n,t),s==null||s.update()},{loading:k,pregress:P}=A({el:"#canvas",background:"#111",cameraPosition:[0,.6,1.5],modelPath:["compute.glb","table.glb","cute_bird.glb","chair.glb","home.fbx","light.glb"],modelName:["compute","table","bird","chair","home","lamp"],modelScale:[0,0,0],control:!0,controlAutoSpeed:!1,transformControls:!0,helper:!1,light:!1,creatMesh:L,animation:x});return C(()=>{o=null,a=null,l=null,document.body.removeEventListener("click",p),document.body.removeEventListener("keydown",h),p=h=null}),(n,t)=>(N(),D(I,{loading:_(k),pregress:_(P)},{default:z(()=>t[0]||(t[0]=[m("canvas",{id:"canvas"},null,-1),m("div",{id:"box"},[m("div",{class:"box"},[m("p",null,"空格开灯"),m("p",null,"点击灯，随机改变颜色"),m("p",null,"点击凳子，旋转移动")])],-1)])),_:1},8,["loading","pregress"]))}},X=j(F,[["__scopeId","data-v-1e43635e"]]);export{X as default};
