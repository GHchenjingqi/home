import{u as j,L as J}from"./Loading-C_ZJTo4K.js";import{W as O,N as Q,B as X,V as v,M as u,a as w,S as Y,P as Z,C as $}from"./cannon-es-DfQPZTbc.js";import{_ as T}from"./index-k_b31qc0.js";import{q as H,e as R,o as E,w as ee,u as b,g as M}from"./vue-vendor-C-eO5OHd.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./three-vendor-FOuzmdZG.js";import"./loading-Dwx6fc8s.js";import"http://115.190.117.177:10086/mds/pathList.js";const ae={__name:"Demo14",setup(te){let a,o,s,d,l,y=[];const L=async({THREE:e,scene:t,controls:f,transControls:k,camera:g,renderer:r})=>{r.shadowMap.enabled=!0,r.shadowMap.type=e.PCFSoftShadowMap;const c=new e.SphereGeometry(1),C=new e.TextureLoader().load("http://115.190.117.177:10086/images/lq.gif"),A=new e.MeshPhongMaterial({color:13199362,map:C});o=new e.Mesh(c,A),o.position.y=15,o.castShadow=!0,t.add(o);const h=new e.Group,N=new e.PlaneGeometry(100,50),S=new e.MeshLambertMaterial({color:8947848}),i=new e.Mesh(N,S);i.quaternion.setFromAxisAngle(new e.Vector3(1,0,0),-Math.PI/2),i.castShadow=!0,i.receiveShadow=!0,h.add(i);let F=80,V=new e.BoxGeometry(1,1,1,10,10);for(let n=0;n<F;n++){const p=new e.Mesh(V,S);p.castShadow=!0,p.position.set(Math.random()*10-5,0,Math.random()*10-2),y.push(p),h.add(p)}t.add(h);let m=new e.PointLight(16777215,500,100);m.position.set(0,10,5),t.add(m),m.castShadow=!0,a=new O,a.gravity.set(0,-9.82,0),a.quatNormalizeSkip=0,a.quatNormalizeFast=!1,a.broadphase=new Q;const D=new X(new v(.5,.5,.5));let I=new u;d=new w({mass:5,shape:D,material:I}),d.position.set(0,10,2),a.addBody(d);const z=new Y(1),x=new u;s=new w({mass:1,shape:z,material:x}),s.position.set(0,15,0),a.addBody(s);const W=new Z,B=new u,_=new w({mass:0,shape:W,material:B});_.quaternion.setFromAxisAngle(new v(1,0,0),-Math.PI/2),a.addBody(_);const K=new $(B,x,{restitution:.8});a.addContactMaterial(K);const U=()=>{o.position.y=15,s.position.set(0,15,0),y.forEach(n=>{n.position.set(Math.random()*10-5,0,Math.random()*10-5)})};l=function(n){switch(n.code){case"Space":U();break}},document.body.addEventListener("keydown",l)},P=({THREE:e,scene:t,controls:f,transControls:k,camera:g,renderer:r,stats:c})=>{a.step(.016666666666666666),o.position.copy(s.position),o.quaternion.copy(s.quaternion),f.update(),r.render(t,g),c.update()},{loading:q,pregress:G}=j({el:"#canvas",background:"#111",cameraPosition:[0,10,20],control:!0,controlAutoSpeed:!0,helper:!1,light:!1,creatMesh:L,animation:P});return H(()=>{a=null,document.body.removeEventListener("keydown",l)}),(e,t)=>(E(),R(J,{loading:b(q),pregress:b(G)},{default:ee(()=>[...t[0]||(t[0]=[M("canvas",{id:"canvas"},null,-1),M("div",{class:"text-box"},[M("p",null,"按”空格“重复播放碰撞动画")],-1)])]),_:1},8,["loading","pregress"]))}},me=T(ae,[["__scopeId","data-v-f43342a0"]]);export{me as default};
