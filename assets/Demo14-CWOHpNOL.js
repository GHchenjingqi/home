import{u as j,L as J}from"./Loading-OXfqHBgR.js";import{W as O,N as Q,B as X,V as _,M as u,a as w,S as Y,P as Z,C as $}from"./cannon-es-BWPdSu6A.js";import{_ as T,a as H,b as R,c as E,w as ee,d as M,u as v}from"./index-BR8Qbv2l.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-mUXeyqnj.js";import"./loading-D6t-YtYf.js";const ae={__name:"Demo14",setup(te){let a,o,s,p,l,y=[];const L=async({THREE:e,scene:t,controls:S,transControls:q,camera:g,renderer:r})=>{r.shadowMap.enabled=!0,r.shadowMap.type=e.PCFSoftShadowMap;const c=new e.SphereGeometry(1),C=new e.TextureLoader().load("/home//public/images/lq.gif"),A=new e.MeshPhongMaterial({color:13199362,map:C});o=new e.Mesh(c,A),o.position.y=15,o.castShadow=!0,t.add(o);const h=new e.Group,N=new e.PlaneGeometry(100,50),f=new e.MeshLambertMaterial({color:8947848}),i=new e.Mesh(N,f);i.quaternion.setFromAxisAngle(new e.Vector3(1,0,0),-Math.PI/2),i.castShadow=!0,i.receiveShadow=!0,h.add(i);let F=80,V=new e.BoxGeometry(1,1,1,10,10);for(let n=0;n<F;n++){const d=new e.Mesh(V,f);d.castShadow=!0,d.position.set(Math.random()*10-5,0,Math.random()*10-2),y.push(d),h.add(d)}t.add(h);let m=new e.PointLight(16777215,500,100);m.position.set(0,10,5),t.add(m),m.castShadow=!0,a=new O,a.gravity.set(0,-9.82,0),a.quatNormalizeSkip=0,a.quatNormalizeFast=!1,a.broadphase=new Q;const D=new X(new _(.5,.5,.5));let I=new u;p=new w({mass:5,shape:D,material:I}),p.position.set(0,10,2),a.addBody(p);const z=new Y(1),x=new u;s=new w({mass:1,shape:z,material:x}),s.position.set(0,15,0),a.addBody(s);const W=new Z,B=new u,b=new w({mass:0,shape:W,material:B});b.quaternion.setFromAxisAngle(new _(1,0,0),-Math.PI/2),a.addBody(b);const K=new $(B,x,{restitution:.8});a.addContactMaterial(K);const U=()=>{o.position.y=15,s.position.set(0,15,0),y.forEach(n=>{n.position.set(Math.random()*10-5,0,Math.random()*10-5)})};l=function(n){switch(n.code){case"Space":U();break}},document.body.addEventListener("keydown",l)},P=({THREE:e,scene:t,controls:S,transControls:q,camera:g,renderer:r,stats:c})=>{a.step(.016666666666666666),o.position.copy(s.position),o.quaternion.copy(s.quaternion),S.update(),r.render(t,g),c.update()},{loading:G,pregress:k}=j({el:"#canvas",background:"#111",cameraPosition:[0,10,20],control:!0,controlAutoSpeed:!0,helper:!1,light:!1,creatMesh:L,animation:P});return H(()=>{a=null,document.body.removeEventListener("keydown",l)}),(e,t)=>(R(),E(J,{loading:v(G),pregress:v(k)},{default:ee(()=>t[0]||(t[0]=[M("canvas",{id:"canvas"},null,-1),M("div",{class:"text-box"},[M("p",null,"按”空格“重复播放碰撞动画")],-1)])),_:1},8,["loading","pregress"]))}},ce=T(ae,[["__scopeId","data-v-2b3ee2a8"]]);export{ce as default};
