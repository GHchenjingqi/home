import{u as E,L as H}from"./Loading-C9r_95tB.js";import{m as R,k as j}from"./creatMesh-BGa3uyBb.js";import{u as tt}from"./useRay-zS9yMuUL.js";import{C as Y,u as ot,K as D}from"./camera-controls.module-Cdpwvt8E.js";import{c as et,g as nt}from"./_commonjsHelpers-Cpj98o6Y.js";import{_ as it,g as at,o as st,c as rt,w as lt,a as y,u as G}from"./index-4p0r8sbT.js";import"./allscreen-Biami5zf.js";import"./loading-yF3_BPAS.js";const Z=[{url:"/public/images/2.jpg",rotation:{x:0,y:Math.PI,z:0},scale:{x:1.6,y:1.6,z:1},position:{x:-2.480360132066057,y:1.02914583548867,z:-3.8840465703459124}},{url:"/public/images/1.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.616760671057668,y:1.0103806696280644,z:-2.9235002018346625}},{url:"/public/images/3.jpg",rotation:{x:0,y:-Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:-5.263541604983203,y:.9416043550166153,z:-.8699767840378825}},{url:"/public/images/4.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.516760671057668,y:1.0103806696280644,z:-.5235002018346626}},{url:"/public/images/5.jpg",rotation:{x:0,y:-Math.PI*2,z:0},scale:{x:1,y:1,z:1},position:{x:-3.997948866131494,y:.8198050714546645,z:2.5871518341211726}},{url:"/public/images/6.jpg",position:{x:1.363645229509038,y:.9849856905460515,z:2},scale:{x:.6,y:.6,z:1},rotation:{x:0,y:1.5707963267948966,z:0}}];var O={exports:{}};(function(A,n){(function(h,m){A.exports=m()})(et,function(){let h=!1,m=!1,a,z,r;const o={config:{}};o.mount=function(i={}){const e=document.getElementById("zoomtastic-container");e&&e.remove(),o.config.size=i.size||"95%",o.config.easing=i.easing||"ease",o.config.duration=i.duration||300,o.config.background=i.background||"rgba(0, 0, 0, 0.9)",o.config.filter=i.filter||"drop-shadow(0 2px 16px rgba(0, 0, 0, 0.3))",o.config.animation=i.animation||"slide",a=b("zoomtastic-container",{top:"0",left:"0",width:"100%",height:"100vh",display:"flex",position:"fixed",alignItems:"center",justifyContent:"center",maxHeight:"100dvh",cursor:"zoom-out",zIndex:"16777271",visibility:"hidden"}),z=b("zoomtastic-background",{width:"100%",height:"100%",zIndex:"0",opacity:"0",userSelect:"none",position:"absolute",background:o.config.background,transitionProperty:"opacity",transitionTimingFunction:o.config.easing,transitionDuration:parseInt(o.config.duration*.75)+"ms"}),r=b("zoomtastic-image",{width:o.config.size,height:o.config.size,opacity:"0",zIndex:"16777271",userSelect:"none",pointerEvents:"none",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",transitionProperty:"all",transitionTimingFunction:o.config.easing,transitionDuration:parseInt(o.config.duration)+"ms",transform:"translateY(0) scale(1)",filter:o.config.filter}),o.config.animation==="slide"&&(r.style.transform="translateY(5%) scale(1)"),o.config.animation==="zoom"&&(r.style.transform="scale(0.95)"),o.config.animation==="drop"&&(r.style.transform="scale(1.1)"),a.addEventListener("click",()=>{m||(m=!0,o.hide())}),a.appendChild(r),a.appendChild(z),document.body.appendChild(a),m=!1,h=!0},o.listen=function(i="[zoomtastic]",e="src"){if(h||o.mount(),typeof i=="string"&&(i=document.querySelectorAll(i)),i instanceof HTMLElement&&(i=[i]),!!i)for(let s=0;s<i.length;s++){const p=i[s];p.style.cursor="zoom-in",p.addEventListener("click",v=>{v.preventDefault();const f=p.getAttribute(e);f&&o.show(f)})}},o.show=function(i){if(!i)throw new TypeError("URL is not specified");h||o.mount(),r.style.backgroundImage=`url("${encodeURI(i)}")`,a.style.visibility="visible",setTimeout(()=>{o.config.animation==="slide"&&(r.style.transform="translateY(0) scale(1)"),(o.config.animation==="zoom"||o.config.animation==="drop")&&(r.style.transform="translateY(0) scale(1)"),r.style.opacity="1",z.style.opacity="1",m=!1})},o.hide=function(){h||o.mount(),setTimeout(()=>{o.config.animation==="slide"&&(r.style.transform="translateY(5%) scale(1)"),o.config.animation==="zoom"&&(r.style.transform="translateY(0) scale(0.95)"),o.config.animation==="drop"&&(r.style.transform="translateY(0) scale(1.1)"),r.style.opacity="0",z.style.opacity="0"}),setTimeout(()=>{r.style.backgroundImage="none",a.style.visibility="hidden",m=!1},parseInt(o.config.duration))};function b(i,e={}){const s=document.createElement("div");for(const p in e)s.style[p]=e[p];return s.id=i,s}return o})})(O);var ct=O.exports;const F=nt(ct),N=!1,dt={__name:"Demo27",setup(A){let n=null,h=-1,m=null,a=null,z=null;const r=async({THREE:e,scene:s,transControls:p,renderer:v,camera:f,gridHelper:K,axesHelper:ut})=>{Y.install({THREE:e}),F.mount();const{keyEvent:L,clearKeys:U,getKeyTime:mt}=await ot();z=U;const I=new e.Group;let w=Z[0].position;const M=R({size:[100,100],position:[0,0,0],shadow:!0,type:"standard"});M.rotation.x=-Math.PI/2,M.position.y=h-.05,M.name="plane",I.add(M);const S=j(s.children,"home");S.rotation.y=-Math.PI/8,S.scale.set(15,15,15),S.position.set(0,2.8,-4);const P=new e.Group,V=j(s.children,"light");V.scale.set(3,3,3),P.add(V);const C=new e.PointLight(16777215,80,0);C.position.set(0,h,.7),C.lookAt(0,-3,.7),C.castShadow=!0,n=new Y(f,v.domElement),n.enableTransition=!0,n.transitionTime=1,n.minZoom=.5,n.maxZoom=1,n.mouseButtons.wheel=Y.ACTION.ZOOM,n.saveState(),n.update(),P.position.set(-2.0809,4.78445,-1.37862),P.add(C),s.add(P);const W=L(D.W,16.666),X=L(D.A,16.666),q=L(D.S,16.666),T=L(D.D,16.666);X.addEventListener("holding",function(t){n.truck(-.001,0,!1)}),T.addEventListener("holding",function(t){n.truck(.001,0,!1)}),W.addEventListener("holding",function(t){n.forward(.001,!1)}),q.addEventListener("holding",function(t){n.forward(-.001,!1)});const $=new e.TextureLoader,J=1,_=1.5;Z.forEach(t=>{$.load("/home/"+t.url,c=>{const{width:k,height:u}=c.image;c.image.width>_?(t.width=_,t.height=_/k*u):(t.height=J,t.width=_/u*k);const l=new e.BoxGeometry(t.width,t.height,.05),x=new e.MeshLambertMaterial({map:c,color:16777215}),g=new e.MeshBasicMaterial({color:"#ffffff"}),d=new e.Mesh(l,[g,g,g,g,g,x]);d.name="pic",d.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),d.scale.set(t.scale.x,t.scale.y,t.scale.z),d.position.set(t.position.x,t.position.y,t.position.z),d.orginData=t,w=d.position,I.add(d)})}),s.add(I),n.setLookAt(1,1,1,w.x,w.y,w.z,!0);const Q=(t,c,k)=>{if(!n)return;n.saveState();const u=.01,l=new e.Vector3(t.x,t.y,t.z);l.lerp(new e.Vector3(c.x,c.y,c.z),u);const x=new e.Vector3,g=new e.Vector3;n.getPosition(x),n.getTarget(g),new e.Vector3(t.x,t.y,t.z).lerp(new e.Vector3(c.x,c.y,c.z),u),n.setLookAt(t.x,t.y,t.z,l.x,l.y,l.z,!0)};let B=[];document.body.addEventListener("mousedown",t=>{B=[t.clientX,t.clientY]}),document.body.addEventListener("mouseup",async t=>{const[c,k]=B;if(Math.abs(c-t.clientX)>2||Math.abs(k-t.clientY)>2)return;let u=await tt({el:"#canvas",camera:f,group:I,event:t});if(u!=null&&u.object){if(a&&(a=null),a=u.object,a.name=="plane"){const l=u.point;if(l.x<1.64&&l.x>-5.04&&l.z>-3.96&&l.z<1.977){const x={x:l.x,y:.5,z:l.z};Q(x,w)}}if(a.name=="pic"){let{x:l,y:x,z:g}=a.position;w={x:l,y:x,z:g};let d=n.getPosition();n.setLookAt(d.x,d.y,d.z,l,x,g,!0)}a!=null&&a.orginData&&F.show("/home/"+(a==null?void 0:a.orginData.url))}})},o=({renderer:e,scene:s,clock:p,camera:v,stats:f})=>{const K=p.getDelta();n==null||n.update(K),f==null||f.update(),e.render(s,v)},{loading:b,pregress:i}=E({el:"#canvas",background:"#111111",cameraPosition:[0,1.5,1],modelPath:["public/glbs/home.glb","public/glbs/light2.glb"],modelName:["home","light"],control:!1,transformControls:N,helper:N,light:!1,showStats:!1,creatMesh:r,animation:o});return at(()=>{z(),document.body.removeEventListener("click",m),m=null,n=null}),(e,s)=>(st(),rt(H,{loading:G(b),pregress:G(i)},{default:lt(()=>s[0]||(s[0]=[y("canvas",{id:"canvas"},null,-1),y("div",{class:"tips"},[y("p",null,"鼠标点击相册，预览图片，点击地面相机视角移动！"),y("p",null,"cameraControls相机控制："),y("ul",null,[y("li",null,"W 前进"),y("li",null,"S 后退"),y("li",null,"A 向左"),y("li",null,"D 向右")])],-1)])),_:1},8,["loading","pregress"]))}},bt=it(dt,[["__scopeId","data-v-f32caccf"]]);export{bt as default};
