import{u as mt,L as gt}from"./Loading-BE0QEejk.js";import{m as pt,k as D,i as ft}from"./creatMesh-f-UvoTu7.js";import{u as ht}from"./useRay-wmltVzSU.js";import{u as yt,K as j}from"./keyCodes-DQn5NxYo.js";import{C as W}from"./camera-controls.module-CggtOxtI.js";import{W as xt}from"./Water-U9-ZjwQv.js";import{_ as wt,g as zt,c as bt,b as vt,w as Mt,u as $,d as f}from"./index-B2PJnxXl.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-HmwLBpeI.js";import"./loading-DYhx7uO4.js";const J=[{url:"/public/images/2.jpg",rotation:{x:0,y:Math.PI,z:0},scale:{x:1.6,y:1.6,z:1},position:{x:-2.480360132066057,y:1.02914583548867,z:-3.8840465703459124}},{url:"/public/images/1.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.616760671057668,y:1.0103806696280644,z:-2.9235002018346625}},{url:"/public/images/3.jpg",rotation:{x:0,y:-Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:-5.263541604983203,y:.9416043550166153,z:-.8699767840378825}},{url:"/public/images/4.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.516760671057668,y:1.0103806696280644,z:-.5235002018346626}},{url:"/public/images/5.jpg",rotation:{x:0,y:-Math.PI*2,z:0},scale:{x:1,y:1,z:1},position:{x:-3.997948866131494,y:.8198050714546645,z:2.5871518341211726}},{url:"/public/images/6.jpg",position:{x:1.363645229509038,y:.9849856905460515,z:2},scale:{x:.6,y:.6,z:1},rotation:{x:0,y:1.5707963267948966,z:0}}];let _=!1,v=!1,y,A,l;const e={config:{}};e.mount=function(a={}){const o=document.getElementById("zoomtastic-container");o&&o.remove(),e.config.size=a.size||"95%",e.config.easing=a.easing||"ease",e.config.duration=a.duration||300,e.config.background=a.background||"rgba(0, 0, 0, 0.9)",e.config.filter=a.filter||"drop-shadow(0 2px 16px rgba(0, 0, 0, 0.3))",e.config.animation=a.animation||"slide",y=O("zoomtastic-container",{top:"0",left:"0",width:"100%",height:"100vh",display:"flex",position:"fixed",alignItems:"center",justifyContent:"center",maxHeight:"100dvh",cursor:"zoom-out",zIndex:"16777271",visibility:"hidden"}),A=O("zoomtastic-background",{width:"100%",height:"100%",zIndex:"0",opacity:"0",userSelect:"none",position:"absolute",background:e.config.background,transitionProperty:"opacity",transitionTimingFunction:e.config.easing,transitionDuration:parseInt(e.config.duration*.75)+"ms"}),l=O("zoomtastic-image",{width:e.config.size,height:e.config.size,opacity:"0",zIndex:"16777271",userSelect:"none",pointerEvents:"none",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",transitionProperty:"all",transitionTimingFunction:e.config.easing,transitionDuration:parseInt(e.config.duration)+"ms",transform:"translateY(0) scale(1)",filter:e.config.filter}),e.config.animation==="slide"&&(l.style.transform="translateY(5%) scale(1)"),e.config.animation==="zoom"&&(l.style.transform="scale(0.95)"),e.config.animation==="drop"&&(l.style.transform="scale(1.1)"),y.addEventListener("click",()=>{v||(v=!0,e.hide())}),y.appendChild(l),y.appendChild(A),document.body.appendChild(y),v=!1,_=!0};e.listen=function(a="[zoomtastic]",o="src"){if(_||e.mount(),typeof a=="string"&&(a=document.querySelectorAll(a)),a instanceof HTMLElement&&(a=[a]),!!a)for(let d=0;d<a.length;d++){const g=a[d];g.style.cursor="zoom-in",g.addEventListener("click",u=>{u.preventDefault();const z=g.getAttribute(o);z&&e.show(z)})}};e.show=function(a){if(!a)throw new TypeError("URL is not specified");_||e.mount(),l.style.backgroundImage=`url("${encodeURI(a)}")`,y.style.visibility="visible",setTimeout(()=>{e.config.animation==="slide"&&(l.style.transform="translateY(0) scale(1)"),(e.config.animation==="zoom"||e.config.animation==="drop")&&(l.style.transform="translateY(0) scale(1)"),l.style.opacity="1",A.style.opacity="1",v=!1})};e.hide=function(){_||e.mount(),setTimeout(()=>{e.config.animation==="slide"&&(l.style.transform="translateY(5%) scale(1)"),e.config.animation==="zoom"&&(l.style.transform="translateY(0) scale(0.95)"),e.config.animation==="drop"&&(l.style.transform="translateY(0) scale(1.1)"),l.style.opacity="0",A.style.opacity="0"}),setTimeout(()=>{l.style.backgroundImage="none",y.style.visibility="hidden",v=!1},parseInt(e.config.duration))};function O(a,o={}){const d=document.createElement("div");for(const g in o)d.style[g]=o[g];return d.id=a,d}const Q=!1,Lt={__name:"Demo27",setup(a){let o=null,d=-1,g=null,u=null,z=null,x=null,V=null;const T=async({THREE:n,scene:s,transControls:N,renderer:Y,camera:M,gridHelper:K,axesHelper:B})=>{W.install({THREE:n}),e.mount();const{keyEvent:L,clearKeys:tt,getKeyTime:kt}=await yt();z=tt;const k=new n.Group;let w=J[0].position;const I=pt({size:[10,64],position:[0,0,0],shadow:!0,type:"standard",color:13606249});I.rotation.x=-Math.PI/2,I.position.y=d-.05,I.name="plane",k.add(I);const G=D(s.children,"home");G.rotation.y=-Math.PI/8,G.scale.set(15,15,15),G.position.set(0,2.8,-4);const U=D(s.children,"tree");U.scale.set(15,15,15),U.position.set(5.55,2.707,-2.471),V=D(s.children,"michelle"),V.scale.set(1.2,1.2,1.2),V.position.set(3.8736,-1,4.935);const P=new n.Group,X=D(s.children,"light");X.scale.set(3,3,3),P.add(X);const C=new n.PointLight(16777215,80,0);C.position.set(0,d,.7),C.lookAt(0,-3,.7),C.castShadow=!0;const et=new n.SphereGeometry(20,32,32),ot=new n.MeshStandardMaterial({color:15114812,emissive:15114812,emissiveIntensity:1e3,roughness:.5,metalness:0}),Z=new n.Mesh(et,ot);Z.position.set(0,250,1e3),s.background=new n.Color(265780),s.add(Z);const nt=new n.AmbientLight(16777215,.4);s.add(nt);let F=[{nubmer:1850,color:16777215,size:1.5,scalar:1,multiple:1e3}];for(let t=0;t<F.length;t++){const i=ft(F[t]);i.rotation.x=Math.random()*6,i.rotation.y=Math.random()*6,i.rotation.z=Math.random()*6,i.matrixAutoUpdate=!1,i.updateMatrix(),i.position.set(0,0,0),s.add(i)}const at=new n.PlaneGeometry(1e3,1e3);x=new xt(at,{textureWidth:512,textureHeight:512,waterNormals:new n.TextureLoader().load("/home//public/images/waternormals.jpg",function(t){t.wrapS=t.wrapT=n.RepeatWrapping}),sunDirection:new n.Vector3,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:s.fog!==void 0}),x.rotation.x=-Math.PI/2,x.position.y=d-.25,s.add(x),o=new W(M,Y.domElement),o.enableTransition=!0,o.transitionTime=1,o.minZoom=.5,o.maxZoom=1,o.mouseButtons.wheel=W.ACTION.ZOOM,o.saveState(),o.update(),P.position.set(-2.0809,4.78445,-1.37862),P.add(C),s.add(P);const it=L(j.W,16.666),st=L(j.A,16.666),rt=L(j.S,16.666),lt=L(j.D,16.666);st.addEventListener("holding",function(t){o.truck(-.001,0,!1)}),lt.addEventListener("holding",function(t){o.truck(.001,0,!1)}),it.addEventListener("holding",function(t){o.forward(.001,!1)}),rt.addEventListener("holding",function(t){o.forward(-.001,!1)});const ct=new n.TextureLoader,dt=1,S=1.5;J.forEach(t=>{ct.load("/home/"+t.url,i=>{const{width:b,height:p}=i.image;i.image.width>S?(t.width=S,t.height=S/b*p):(t.height=dt,t.width=S/p*b);const r=new n.BoxGeometry(t.width,t.height,.05),h=new n.MeshLambertMaterial({map:i,color:16777215}),m=new n.MeshBasicMaterial({color:"#ffffff"}),c=new n.Mesh(r,[m,m,m,m,m,h]);c.name="pic",c.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),c.scale.set(t.scale.x,t.scale.y,t.scale.z),c.position.set(t.position.x,t.position.y,t.position.z),c.orginData=t,w=c.position,k.add(c)})}),s.add(k),o.setLookAt(1,1,1,w.x,w.y,w.z,!0);const ut=(t,i,b)=>{if(!o)return;o.saveState();const p=.01,r=new n.Vector3(t.x,t.y,t.z);r.lerp(new n.Vector3(i.x,i.y,i.z),p);const h=new n.Vector3,m=new n.Vector3;o.getPosition(h),o.getTarget(m),new n.Vector3(t.x,t.y,t.z).lerp(new n.Vector3(i.x,i.y,i.z),p),o.setLookAt(t.x,t.y,t.z,r.x,r.y,r.z,!0)};let q=[];document.body.addEventListener("mousedown",t=>{q=[t.clientX,t.clientY]}),document.body.addEventListener("mouseup",async t=>{const[i,b]=q;if(Math.abs(i-t.clientX)>2||Math.abs(b-t.clientY)>2)return;let p=await ht({el:"#canvas",camera:M,group:k,event:t});if(p?.object){if(u&&(u=null),u=p.object,u.name=="plane"){const r=p.point;if(r.x<1.64&&r.x>-5.04&&r.z>-3.96&&r.z<1.977){const h={x:r.x,y:.5,z:r.z};ut(h,w)}}if(u.name=="pic"){let{x:r,y:h,z:m}=u.position;w={x:r,y:h,z:m};let c=o.getPosition();o.setLookAt(c.x,c.y,c.z,r,h,m,!0)}u?.orginData&&e.show("/home/"+u?.orginData.url)}})},H=({renderer:n,scene:s,clock:N,camera:Y,stats:M,mixer:K})=>{const B=N.getDelta();o?.update(B),M?.update(),x&&(x.material.uniforms.time.value+=1/60),K&&K.update(B),n.render(s,Y)},{loading:R,pregress:E}=mt({el:"#canvas",background:"#111111",cameraPosition:[0,1.5,1],modelPath:["home.glb","light2.glb","tree.glb","michelle.glb"],modelName:["home","light","tree","michelle"],control:!1,transformControls:Q,helper:Q,light:!1,showStats:!1,creatMesh:T,animation:H});return zt(()=>{z(),document.body.removeEventListener("click",g),g=null,o=null}),(n,s)=>(vt(),bt(gt,{loading:$(R),pregress:$(E)},{default:Mt(()=>[...s[0]||(s[0]=[f("canvas",{id:"canvas"},null,-1),f("div",{class:"tips"},[f("p",null,"鼠标点击相册，预览图片，点击地面相机视角移动！"),f("p",null,"cameraControls相机控制："),f("ul",null,[f("li",null,"W 前进"),f("li",null,"S 后退"),f("li",null,"A 向左"),f("li",null,"D 向右")])],-1)])]),_:1},8,["loading","pregress"]))}},Bt=wt(Lt,[["__scopeId","data-v-123dc025"]]);export{Bt as default};
