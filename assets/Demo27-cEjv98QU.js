import{u as rt,L as lt}from"./Loading-D9E3OPV5.js";import{m as ct,k as _,i as dt}from"./creatMesh-DRrs8pgY.js";import{u as mt}from"./useRay-YzwZgRCW.js";import{u as ut,K as A}from"./keyCodes-C-Yisdo5.js";import{C as j}from"./camera-controls.module-CggtOxtI.js";import{c as pt,g as gt}from"./_commonjsHelpers-Cpj98o6Y.js";import{W as ft}from"./Water-CYxhYxzN.js";import{_ as ht,h as yt,b as xt,c as wt,w as zt,d as y,u as O}from"./index-C8lrHyf0.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-CUBxCzDl.js";import"./loading-DwfZUjuh.js";const X=[{url:"/public/images/2.jpg",rotation:{x:0,y:Math.PI,z:0},scale:{x:1.6,y:1.6,z:1},position:{x:-2.480360132066057,y:1.02914583548867,z:-3.8840465703459124}},{url:"/public/images/1.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.616760671057668,y:1.0103806696280644,z:-2.9235002018346625}},{url:"/public/images/3.jpg",rotation:{x:0,y:-Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:-5.263541604983203,y:.9416043550166153,z:-.8699767840378825}},{url:"/public/images/4.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.516760671057668,y:1.0103806696280644,z:-.5235002018346626}},{url:"/public/images/5.jpg",rotation:{x:0,y:-Math.PI*2,z:0},scale:{x:1,y:1,z:1},position:{x:-3.997948866131494,y:.8198050714546645,z:2.5871518341211726}},{url:"/public/images/6.jpg",position:{x:1.363645229509038,y:.9849856905460515,z:2},scale:{x:.6,y:.6,z:1},rotation:{x:0,y:1.5707963267948966,z:0}}];var J={exports:{}};(function(G,n){(function(g,u){G.exports=u()})(pt,function(){let g=!1,u=!1,s,w,a;const e={config:{}};e.mount=function(i={}){const f=document.getElementById("zoomtastic-container");f&&f.remove(),e.config.size=i.size||"95%",e.config.easing=i.easing||"ease",e.config.duration=i.duration||300,e.config.background=i.background||"rgba(0, 0, 0, 0.9)",e.config.filter=i.filter||"drop-shadow(0 2px 16px rgba(0, 0, 0, 0.3))",e.config.animation=i.animation||"slide",s=v("zoomtastic-container",{top:"0",left:"0",width:"100%",height:"100vh",display:"flex",position:"fixed",alignItems:"center",justifyContent:"center",maxHeight:"100dvh",cursor:"zoom-out",zIndex:"16777271",visibility:"hidden"}),w=v("zoomtastic-background",{width:"100%",height:"100%",zIndex:"0",opacity:"0",userSelect:"none",position:"absolute",background:e.config.background,transitionProperty:"opacity",transitionTimingFunction:e.config.easing,transitionDuration:parseInt(e.config.duration*.75)+"ms"}),a=v("zoomtastic-image",{width:e.config.size,height:e.config.size,opacity:"0",zIndex:"16777271",userSelect:"none",pointerEvents:"none",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",transitionProperty:"all",transitionTimingFunction:e.config.easing,transitionDuration:parseInt(e.config.duration)+"ms",transform:"translateY(0) scale(1)",filter:e.config.filter}),e.config.animation==="slide"&&(a.style.transform="translateY(5%) scale(1)"),e.config.animation==="zoom"&&(a.style.transform="scale(0.95)"),e.config.animation==="drop"&&(a.style.transform="scale(1.1)"),s.addEventListener("click",()=>{u||(u=!0,e.hide())}),s.appendChild(a),s.appendChild(w),document.body.appendChild(s),u=!1,g=!0},e.listen=function(i="[zoomtastic]",f="src"){if(g||e.mount(),typeof i=="string"&&(i=document.querySelectorAll(i)),i instanceof HTMLElement&&(i=[i]),!!i)for(let h=0;h<i.length;h++){const o=i[h];o.style.cursor="zoom-in",o.addEventListener("click",l=>{l.preventDefault();const M=o.getAttribute(f);M&&e.show(M)})}},e.show=function(i){if(!i)throw new TypeError("URL is not specified");g||e.mount(),a.style.backgroundImage=`url("${encodeURI(i)}")`,s.style.visibility="visible",setTimeout(()=>{e.config.animation==="slide"&&(a.style.transform="translateY(0) scale(1)"),(e.config.animation==="zoom"||e.config.animation==="drop")&&(a.style.transform="translateY(0) scale(1)"),a.style.opacity="1",w.style.opacity="1",u=!1})},e.hide=function(){g||e.mount(),setTimeout(()=>{e.config.animation==="slide"&&(a.style.transform="translateY(5%) scale(1)"),e.config.animation==="zoom"&&(a.style.transform="translateY(0) scale(0.95)"),e.config.animation==="drop"&&(a.style.transform="translateY(0) scale(1.1)"),a.style.opacity="0",w.style.opacity="0"}),setTimeout(()=>{a.style.backgroundImage="none",s.style.visibility="hidden",u=!1},parseInt(e.config.duration))};function v(i,f={}){const h=document.createElement("div");for(const o in f)h.style[o]=f[o];return h.id=i,h}return e})})(J);var bt=J.exports;const q=gt(bt),$=!1,vt={__name:"Demo27",setup(G){let n=null,g=-1,u=null,s=null,w=null,a=null,e=null;const v=async({THREE:o,scene:l,transControls:M,renderer:V,camera:z,gridHelper:Y,axesHelper:K})=>{j.install({THREE:o}),q.mount();const{keyEvent:k,clearKeys:Q,getKeyTime:Mt}=await ut();w=Q;const I=new o.Group;let b=X[0].position;const P=ct({size:[10,64],position:[0,0,0],shadow:!0,type:"standard",color:13606249});P.rotation.x=-Math.PI/2,P.position.y=g-.05,P.name="plane",I.add(P);const B=_(l.children,"home");B.rotation.y=-Math.PI/8,B.scale.set(15,15,15),B.position.set(0,2.8,-4);const W=_(l.children,"tree");W.scale.set(15,15,15),W.position.set(5.55,2.707,-2.471),e=_(l.children,"michelle"),e.scale.set(1.2,1.2,1.2),e.position.set(3.8736,-1,4.935);const C=new o.Group,N=_(l.children,"light");N.scale.set(3,3,3),C.add(N);const S=new o.PointLight(16777215,80,0);S.position.set(0,g,.7),S.lookAt(0,-3,.7),S.castShadow=!0;const T=new o.SphereGeometry(20,32,32),H=new o.MeshStandardMaterial({color:15114812,emissive:15114812,emissiveIntensity:1e3,roughness:.5,metalness:0}),U=new o.Mesh(T,H);U.position.set(0,250,1e3),l.background=new o.Color(265780),l.add(U);const R=new o.AmbientLight(16777215,.4);l.add(R);let Z=[{nubmer:1850,color:16777215,size:1.5,scalar:1,multiple:1e3}];for(let t=0;t<Z.length;t++){const r=dt(Z[t]);r.rotation.x=Math.random()*6,r.rotation.y=Math.random()*6,r.rotation.z=Math.random()*6,r.matrixAutoUpdate=!1,r.updateMatrix(),r.position.set(0,0,0),l.add(r)}const E=new o.PlaneGeometry(1e3,1e3);a=new ft(E,{textureWidth:512,textureHeight:512,waterNormals:new o.TextureLoader().load("/home//public/images/waternormals.jpg",function(t){t.wrapS=t.wrapT=o.RepeatWrapping}),sunDirection:new o.Vector3,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:l.fog!==void 0}),a.rotation.x=-Math.PI/2,a.position.y=g-.25,l.add(a),n=new j(z,V.domElement),n.enableTransition=!0,n.transitionTime=1,n.minZoom=.5,n.maxZoom=1,n.mouseButtons.wheel=j.ACTION.ZOOM,n.saveState(),n.update(),C.position.set(-2.0809,4.78445,-1.37862),C.add(S),l.add(C);const tt=k(A.W,16.666),et=k(A.A,16.666),ot=k(A.S,16.666),nt=k(A.D,16.666);et.addEventListener("holding",function(t){n.truck(-.001,0,!1)}),nt.addEventListener("holding",function(t){n.truck(.001,0,!1)}),tt.addEventListener("holding",function(t){n.forward(.001,!1)}),ot.addEventListener("holding",function(t){n.forward(-.001,!1)});const it=new o.TextureLoader,at=1,D=1.5;X.forEach(t=>{it.load("/home/"+t.url,r=>{const{width:L,height:m}=r.image;r.image.width>D?(t.width=D,t.height=D/L*m):(t.height=at,t.width=D/m*L);const c=new o.BoxGeometry(t.width,t.height,.05),x=new o.MeshLambertMaterial({map:r,color:16777215}),p=new o.MeshBasicMaterial({color:"#ffffff"}),d=new o.Mesh(c,[p,p,p,p,p,x]);d.name="pic",d.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),d.scale.set(t.scale.x,t.scale.y,t.scale.z),d.position.set(t.position.x,t.position.y,t.position.z),d.orginData=t,b=d.position,I.add(d)})}),l.add(I),n.setLookAt(1,1,1,b.x,b.y,b.z,!0);const st=(t,r,L)=>{if(!n)return;n.saveState();const m=.01,c=new o.Vector3(t.x,t.y,t.z);c.lerp(new o.Vector3(r.x,r.y,r.z),m);const x=new o.Vector3,p=new o.Vector3;n.getPosition(x),n.getTarget(p),new o.Vector3(t.x,t.y,t.z).lerp(new o.Vector3(r.x,r.y,r.z),m),n.setLookAt(t.x,t.y,t.z,c.x,c.y,c.z,!0)};let F=[];document.body.addEventListener("mousedown",t=>{F=[t.clientX,t.clientY]}),document.body.addEventListener("mouseup",async t=>{const[r,L]=F;if(Math.abs(r-t.clientX)>2||Math.abs(L-t.clientY)>2)return;let m=await mt({el:"#canvas",camera:z,group:I,event:t});if(m!=null&&m.object){if(s&&(s=null),s=m.object,s.name=="plane"){const c=m.point;if(c.x<1.64&&c.x>-5.04&&c.z>-3.96&&c.z<1.977){const x={x:c.x,y:.5,z:c.z};st(x,b)}}if(s.name=="pic"){let{x:c,y:x,z:p}=s.position;b={x:c,y:x,z:p};let d=n.getPosition();n.setLookAt(d.x,d.y,d.z,c,x,p,!0)}s!=null&&s.orginData&&q.show("/home/"+(s==null?void 0:s.orginData.url))}})},i=({renderer:o,scene:l,clock:M,camera:V,stats:z,mixer:Y})=>{const K=M.getDelta();n==null||n.update(K),z==null||z.update(),a&&(a.material.uniforms.time.value+=1/60),Y&&Y.update(K),o.render(l,V)},{loading:f,pregress:h}=rt({el:"#canvas",background:"#111111",cameraPosition:[0,1.5,1],modelPath:["home.glb","light2.glb","tree.glb","michelle.glb"],modelName:["home","light","tree","michelle"],control:!1,transformControls:$,helper:$,light:!1,showStats:!1,creatMesh:v,animation:i});return yt(()=>{w(),document.body.removeEventListener("click",u),u=null,n=null}),(o,l)=>(xt(),wt(lt,{loading:O(f),pregress:O(h)},{default:zt(()=>l[0]||(l[0]=[y("canvas",{id:"canvas"},null,-1),y("div",{class:"tips"},[y("p",null,"鼠标点击相册，预览图片，点击地面相机视角移动！"),y("p",null,"cameraControls相机控制："),y("ul",null,[y("li",null,"W 前进"),y("li",null,"S 后退"),y("li",null,"A 向左"),y("li",null,"D 向右")])],-1)])),_:1},8,["loading","pregress"]))}},Kt=ht(vt,[["__scopeId","data-v-e60b2df6"]]);export{Kt as default};
