import{u as P,L as F}from"./Loading-OXfqHBgR.js";import{g as x}from"./comfun-BiQWa5Ul.js";import{_ as I,r as J,o as U,a as C,b as N,c as W,w as X,d as b,t as g,u as V}from"./index-BR8Qbv2l.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-mUXeyqnj.js";import"./loading-D6t-YtYf.js";const Z={class:"box-position"},q={__name:"Demo33",setup(Q){let t=null,s=null,d=null,i=null,f=null,l=null,h=null,r=65280;const u=J([0,0,0]),L=async({THREE:e,scene:a,camera:w,axesHelper:B})=>{d=e;let n=new e.PlaneGeometry(20,20,100,100);n.rotateX(-Math.PI/2);const c=new e.MeshBasicMaterial({color:6710886}),y=new e.Mesh(n,c);y.position.y=-.5,a.add(y);let _=new e.BoxGeometry(1,1,1),A=new e.MeshBasicMaterial({color:16711680});t=new e.Mesh(_,A),t.position.set(x(-3,3),0,x(1,4)),a.add(t),s=new e.Group;let p=new e.Mesh(_,A);p.position.x=1,p.material=new e.MeshBasicMaterial({color:16776960});let K=p.clone();K.position.x=-1;let k=p.clone();k.position.x=0,k.position.z=-1;let D=new e.Mesh(new e.PlaneGeometry(1,1),new e.MeshBasicMaterial({color:65280}));D.rotateX(-Math.PI/2).translateZ(-.49),s.add(p,K,k),a.add(s,D),i=new e.Box3().setFromObject(t),f=new e.Box3().setFromObject(s),l=new e.Box3Helper(i,r),h=new e.Box3Helper(f,r),a.add(l,h)},j=()=>(i=new d.Box3().setFromObject(t),f=new d.Box3().setFromObject(s),i.intersectsBox(f)),S=({THREE:e,controls:a,scene:w,camera:B,renderer:n,stats:c,gridHelper:y})=>{c==null||c.update(),a==null||a.update(),j()?r=16711680:z(),u.value=[t.position.x,t.position.y,t.position.z],h.material.color.set(r),w.remove(l),l=new e.Box3Helper(i,r),w.add(l),n==null||n.render(w,B)},{loading:G}=P({el:"#canvas",background:"#333333",cameraPosition:[2,2,6],control:!0,controlAutoSpeed:!1,helper:!1,light:!0,showStats:!0,creatMesh:L,animation:S});let m=.01,O=.5,o={forward:!1,backward:!1,left:!1,right:!1,canJump:!1};const v=function(e){switch(e.code){case"ArrowUp":case"KeyW":o.forward=!0;break;case"ArrowLeft":case"KeyA":o.left=!0;break;case"ArrowDown":case"KeyS":o.backward=!0;break;case"ArrowRight":case"KeyD":o.right=!0;break;case"Space":o.canJump=!0;break}},M=function(e){switch(e.code){case"ArrowUp":case"KeyW":o.forward=!1;break;case"ArrowLeft":case"KeyA":o.left=!1;break;case"ArrowDown":case"KeyS":o.backward=!1;break;case"ArrowRight":case"KeyD":o.right=!1;break;case"Space":o.canJump=!1;break}},z=()=>{o.forward&&(t.position.z-=m),o.backward&&(t.position.z+=m),o.left&&(t.position.x-=m),o.right&&(t.position.x+=m),o.canJump?t.position.y=O:t.position.y=0};return U(()=>{document.addEventListener("keydown",v),document.addEventListener("keyup",M),document.getElementById("reset").onclick=()=>{t.position.set(x(-3,3),0,x(1,4)),r=65280}}),C(()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",M),o=null,d=null}),(e,a)=>(N(),W(F,{loading:V(G)},{default:X(()=>[a[0]||(a[0]=b("div",{id:"canvas"},null,-1)),b("div",Z,[b("p",null,"盒子位置：x轴"+g(u.value[0])+",y轴"+g(u.value[1])+",z轴"+g(u.value[2]),1)]),a[1]||(a[1]=b("div",{class:"btn",id:"reset"},"重置",-1))]),_:1},8,["loading"]))}},oe=I(q,[["__scopeId","data-v-d7022a0d"]]);export{oe as default};
