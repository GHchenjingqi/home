import{u as P,L as F}from"./Loading-B9D1ONT4.js";import{g as w}from"./comfun-BiQWa5Ul.js";import{_ as I,r as J,o as U,a as C,c as N,b as W,w as X,u as V,d as x,t as g}from"./index-Cwm8dSFv.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-3GX4xVpJ.js";import"./loading-BQeJsGIp.js";const Z={class:"box-position"},q={__name:"Demo33",setup(Q){let t=null,n=null,c=null,s=null,d=null,l=null,b=null,r=65280;const p=J([0,0,0]),L=async({THREE:e,scene:a,camera:u,axesHelper:B})=>{c=e;let m=new e.PlaneGeometry(20,20,100,100);m.rotateX(-Math.PI/2);const h=new e.MeshBasicMaterial({color:6710886}),y=new e.Mesh(m,h);y.position.y=-.5,a.add(y);let _=new e.BoxGeometry(1,1,1),A=new e.MeshBasicMaterial({color:16711680});t=new e.Mesh(_,A),t.position.set(w(-3,3),0,w(1,4)),a.add(t),n=new e.Group;let i=new e.Mesh(_,A);i.position.x=1,i.material=new e.MeshBasicMaterial({color:16776960});let K=i.clone();K.position.x=-1;let k=i.clone();k.position.x=0,k.position.z=-1;let D=new e.Mesh(new e.PlaneGeometry(1,1),new e.MeshBasicMaterial({color:65280}));D.rotateX(-Math.PI/2).translateZ(-.49),n.add(i,K,k),a.add(n,D),s=new e.Box3().setFromObject(t),d=new e.Box3().setFromObject(n),l=new e.Box3Helper(s,r),b=new e.Box3Helper(d,r),a.add(l,b)},j=()=>(s=new c.Box3().setFromObject(t),d=new c.Box3().setFromObject(n),s.intersectsBox(d)),S=({THREE:e,controls:a,scene:u,camera:B,renderer:m,stats:h,gridHelper:y})=>{h?.update(),a?.update(),j()?r=16711680:z(),p.value=[t.position.x,t.position.y,t.position.z],b.material.color.set(r),u.remove(l),l=new e.Box3Helper(s,r),u.add(l),m?.render(u,B)},{loading:G}=P({el:"#canvas",background:"#333333",cameraPosition:[2,2,6],control:!0,controlAutoSpeed:!1,helper:!1,light:!0,showStats:!0,creatMesh:L,animation:S});let f=.01,O=.5,o={forward:!1,backward:!1,left:!1,right:!1,canJump:!1};const v=function(e){switch(e.code){case"ArrowUp":case"KeyW":o.forward=!0;break;case"ArrowLeft":case"KeyA":o.left=!0;break;case"ArrowDown":case"KeyS":o.backward=!0;break;case"ArrowRight":case"KeyD":o.right=!0;break;case"Space":o.canJump=!0;break}},M=function(e){switch(e.code){case"ArrowUp":case"KeyW":o.forward=!1;break;case"ArrowLeft":case"KeyA":o.left=!1;break;case"ArrowDown":case"KeyS":o.backward=!1;break;case"ArrowRight":case"KeyD":o.right=!1;break;case"Space":o.canJump=!1;break}},z=()=>{o.forward&&(t.position.z-=f),o.backward&&(t.position.z+=f),o.left&&(t.position.x-=f),o.right&&(t.position.x+=f),o.canJump?t.position.y=O:t.position.y=0};return U(()=>{document.addEventListener("keydown",v),document.addEventListener("keyup",M),document.getElementById("reset").onclick=()=>{t.position.set(w(-3,3),0,w(1,4)),r=65280}}),C(()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",M),o=null,c=null}),(e,a)=>(W(),N(F,{loading:V(G)},{default:X(()=>[a[0]||(a[0]=x("div",{id:"canvas"},null,-1)),x("div",Z,[x("p",null,"盒子位置：x轴"+g(p.value[0])+",y轴"+g(p.value[1])+",z轴"+g(p.value[2]),1)]),a[1]||(a[1]=x("div",{class:"btn",id:"reset"},"重置",-1))]),_:1},8,["loading"]))}},oe=I(q,[["__scopeId","data-v-7d7fb136"]]);export{oe as default};
