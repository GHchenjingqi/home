import{u as P,L as F}from"./Loading-C_ZJTo4K.js";import{g as w}from"./comfun-BiQWa5Ul.js";import{_ as I}from"./index-k_b31qc0.js";import{s as J,i as U,q as C,e as N,o as W,w as X,u as q,g as x,t as g}from"./vue-vendor-C-eO5OHd.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./three-vendor-FOuzmdZG.js";import"./loading-Dwx6fc8s.js";import"http://115.190.117.177:10086/mds/pathList.js";const V={class:"box-position"},Z={__name:"Demo33",setup(Q){let t=null,n=null,c=null,s=null,p=null,i=null,b=null,r=65280;const d=J([0,0,0]),L=async({THREE:e,scene:a,camera:u,axesHelper:B})=>{c=e;let m=new e.PlaneGeometry(20,20,100,100);m.rotateX(-Math.PI/2);const h=new e.MeshBasicMaterial({color:6710886}),y=new e.Mesh(m,h);y.position.y=-.5,a.add(y);let _=new e.BoxGeometry(1,1,1),A=new e.MeshBasicMaterial({color:16711680});t=new e.Mesh(_,A),t.position.set(w(-3,3),0,w(1,4)),a.add(t),n=new e.Group;let l=new e.Mesh(_,A);l.position.x=1,l.material=new e.MeshBasicMaterial({color:16776960});let K=l.clone();K.position.x=-1;let k=l.clone();k.position.x=0,k.position.z=-1;let D=new e.Mesh(new e.PlaneGeometry(1,1),new e.MeshBasicMaterial({color:65280}));D.rotateX(-Math.PI/2).translateZ(-.49),n.add(l,K,k),a.add(n,D),s=new e.Box3().setFromObject(t),p=new e.Box3().setFromObject(n),i=new e.Box3Helper(s,r),b=new e.Box3Helper(p,r),a.add(i,b)},j=()=>(s=new c.Box3().setFromObject(t),p=new c.Box3().setFromObject(n),s.intersectsBox(p)),S=({THREE:e,controls:a,scene:u,camera:B,renderer:m,stats:h,gridHelper:y})=>{h?.update(),a?.update(),j()?r=16711680:z(),d.value=[t.position.x,t.position.y,t.position.z],b.material.color.set(r),u.remove(i),i=new e.Box3Helper(s,r),u.add(i),m?.render(u,B)},{loading:G}=P({el:"#canvas",background:"#333333",cameraPosition:[2,2,6],control:!0,controlAutoSpeed:!1,helper:!1,light:!0,showStats:!0,creatMesh:L,animation:S});let f=.01,O=.5,o={forward:!1,backward:!1,left:!1,right:!1,canJump:!1};const v=function(e){switch(e.code){case"ArrowUp":case"KeyW":o.forward=!0;break;case"ArrowLeft":case"KeyA":o.left=!0;break;case"ArrowDown":case"KeyS":o.backward=!0;break;case"ArrowRight":case"KeyD":o.right=!0;break;case"Space":o.canJump=!0;break}},M=function(e){switch(e.code){case"ArrowUp":case"KeyW":o.forward=!1;break;case"ArrowLeft":case"KeyA":o.left=!1;break;case"ArrowDown":case"KeyS":o.backward=!1;break;case"ArrowRight":case"KeyD":o.right=!1;break;case"Space":o.canJump=!1;break}},z=()=>{o.forward&&(t.position.z-=f),o.backward&&(t.position.z+=f),o.left&&(t.position.x-=f),o.right&&(t.position.x+=f),o.canJump?t.position.y=O:t.position.y=0};return U(()=>{document.addEventListener("keydown",v),document.addEventListener("keyup",M),document.getElementById("reset").onclick=()=>{t.position.set(w(-3,3),0,w(1,4)),r=65280}}),C(()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",M),o=null,c=null}),(e,a)=>(W(),N(F,{loading:q(G)},{default:X(()=>[a[0]||(a[0]=x("div",{id:"canvas"},null,-1)),x("div",V,[x("p",null,"盒子位置：x轴"+g(d.value[0])+",y轴"+g(d.value[1])+",z轴"+g(d.value[2]),1)]),a[1]||(a[1]=x("div",{class:"btn",id:"reset"},"重置",-1))]),_:1},8,["loading"]))}},ae=I(Z,[["__scopeId","data-v-7d7fb136"]]);export{ae as default};
