import{x as It,y as St,z as at,j as F,V as pt,I as Pt,J as Tt,S as Nt,P as mt,B as Ct,F as xt,K as Lt,T as ct,u as jt,L as Gt}from"./Loading-fvwP1RP7.js";import"./transform-DlOzM7pa.js";import"./useLabel-DC2Qq1PI.js";import{_ as Bt,c as Ot,b as Vt,w as Et,u as kt,d as qt}from"./index-GomNjU0M.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-CUko5Aew.js";import"./loading-CARvSZNY.js";import"https://ghchenjingqi.github.io/resources/mds/pathList.js";const Wt=Lt;class lt extends It{constructor(O){super(O),this.defaultDPI=90,this.defaultUnit="px"}load(O,U,E,G){const d=this,R=new St(d.manager);R.setPath(d.path),R.setRequestHeader(d.requestHeader),R.setWithCredentials(d.withCredentials),R.load(O,function(Z){try{U(d.parse(Z))}catch(J){G?G(J):console.error(J),d.manager.itemError(O)}},E,G)}parse(O){const U=this;function E(r,s){if(r.nodeType!==1)return;const e=b(r);let t=!1,c=null;switch(r.nodeName){case"svg":s=D(r,s);break;case"style":d(r);break;case"g":s=D(r,s);break;case"path":s=D(r,s),r.hasAttribute("d")&&(c=G(r));break;case"rect":s=D(r,s),c=J(r);break;case"polygon":s=D(r,s),c=X(r);break;case"polyline":s=D(r,s),c=H(r);break;case"circle":s=D(r,s),c=C(r);break;case"ellipse":s=D(r,s),c=q(r);break;case"line":s=D(r,s),c=nt(r);break;case"defs":t=!0;break;case"use":s=D(r,s);const y=(r.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),g=r.viewportElement.getElementById(y);g?E(g,s):console.warn("SVGLoader: 'use node' references non-existent node id: "+y);break}c&&(s.fill!==void 0&&s.fill!=="none"&&c.color.setStyle(s.fill,Wt),T(c,st),I.push(c),c.userData={node:r,style:s});const p=r.childNodes;for(let i=0;i<p.length;i++){const y=p[i];t&&y.nodeName!=="style"&&y.nodeName!=="defs"||E(y,s)}e&&(z.pop(),z.length>0?st.copy(z[z.length-1]):st.identity())}function G(r){const s=new ct,e=new F,t=new F,c=new F;let p=!0,i=!1;const y=r.getAttribute("d");if(y===""||y==="none")return null;const g=y.match(/[a-df-z][^a-df-z]*/ig);for(let w=0,a=g.length;w<a;w++){const f=g[w],k=f.charAt(0),M=f.slice(1).trim();p===!0&&(i=!0,p=!1);let o;switch(k){case"M":o=u(M);for(let n=0,A=o.length;n<A;n+=2)e.x=o[n+0],e.y=o[n+1],t.x=e.x,t.y=e.y,n===0?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y),n===0&&c.copy(e);break;case"H":o=u(M);for(let n=0,A=o.length;n<A;n++)e.x=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"V":o=u(M);for(let n=0,A=o.length;n<A;n++)e.y=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"L":o=u(M);for(let n=0,A=o.length;n<A;n+=2)e.x=o[n+0],e.y=o[n+1],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"C":o=u(M);for(let n=0,A=o.length;n<A;n+=6)s.bezierCurveTo(o[n+0],o[n+1],o[n+2],o[n+3],o[n+4],o[n+5]),t.x=o[n+2],t.y=o[n+3],e.x=o[n+4],e.y=o[n+5],n===0&&i===!0&&c.copy(e);break;case"S":o=u(M);for(let n=0,A=o.length;n<A;n+=4)s.bezierCurveTo(m(e.x,t.x),m(e.y,t.y),o[n+0],o[n+1],o[n+2],o[n+3]),t.x=o[n+0],t.y=o[n+1],e.x=o[n+2],e.y=o[n+3],n===0&&i===!0&&c.copy(e);break;case"Q":o=u(M);for(let n=0,A=o.length;n<A;n+=4)s.quadraticCurveTo(o[n+0],o[n+1],o[n+2],o[n+3]),t.x=o[n+0],t.y=o[n+1],e.x=o[n+2],e.y=o[n+3],n===0&&i===!0&&c.copy(e);break;case"T":o=u(M);for(let n=0,A=o.length;n<A;n+=2){const V=m(e.x,t.x),et=m(e.y,t.y);s.quadraticCurveTo(V,et,o[n+0],o[n+1]),t.x=V,t.y=et,e.x=o[n+0],e.y=o[n+1],n===0&&i===!0&&c.copy(e)}break;case"A":o=u(M,[3,4],7);for(let n=0,A=o.length;n<A;n+=7){if(o[n+5]==e.x&&o[n+6]==e.y)continue;const V=e.clone();e.x=o[n+5],e.y=o[n+6],t.x=e.x,t.y=e.y,R(s,o[n],o[n+1],o[n+2],o[n+3],o[n+4],V,e),n===0&&i===!0&&c.copy(e)}break;case"m":o=u(M);for(let n=0,A=o.length;n<A;n+=2)e.x+=o[n+0],e.y+=o[n+1],t.x=e.x,t.y=e.y,n===0?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y),n===0&&c.copy(e);break;case"h":o=u(M);for(let n=0,A=o.length;n<A;n++)e.x+=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"v":o=u(M);for(let n=0,A=o.length;n<A;n++)e.y+=o[n],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"l":o=u(M);for(let n=0,A=o.length;n<A;n+=2)e.x+=o[n+0],e.y+=o[n+1],t.x=e.x,t.y=e.y,s.lineTo(e.x,e.y),n===0&&i===!0&&c.copy(e);break;case"c":o=u(M);for(let n=0,A=o.length;n<A;n+=6)s.bezierCurveTo(e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3],e.x+o[n+4],e.y+o[n+5]),t.x=e.x+o[n+2],t.y=e.y+o[n+3],e.x+=o[n+4],e.y+=o[n+5],n===0&&i===!0&&c.copy(e);break;case"s":o=u(M);for(let n=0,A=o.length;n<A;n+=4)s.bezierCurveTo(m(e.x,t.x),m(e.y,t.y),e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3]),t.x=e.x+o[n+0],t.y=e.y+o[n+1],e.x+=o[n+2],e.y+=o[n+3],n===0&&i===!0&&c.copy(e);break;case"q":o=u(M);for(let n=0,A=o.length;n<A;n+=4)s.quadraticCurveTo(e.x+o[n+0],e.y+o[n+1],e.x+o[n+2],e.y+o[n+3]),t.x=e.x+o[n+0],t.y=e.y+o[n+1],e.x+=o[n+2],e.y+=o[n+3],n===0&&i===!0&&c.copy(e);break;case"t":o=u(M);for(let n=0,A=o.length;n<A;n+=2){const V=m(e.x,t.x),et=m(e.y,t.y);s.quadraticCurveTo(V,et,e.x+o[n+0],e.y+o[n+1]),t.x=V,t.y=et,e.x=e.x+o[n+0],e.y=e.y+o[n+1],n===0&&i===!0&&c.copy(e)}break;case"a":o=u(M,[3,4],7);for(let n=0,A=o.length;n<A;n+=7){if(o[n+5]==0&&o[n+6]==0)continue;const V=e.clone();e.x+=o[n+5],e.y+=o[n+6],t.x=e.x,t.y=e.y,R(s,o[n],o[n+1],o[n+2],o[n+3],o[n+4],V,e),n===0&&i===!0&&c.copy(e)}break;case"Z":case"z":s.currentPath.autoClose=!0,s.currentPath.curves.length>0&&(e.copy(c),s.currentPath.currentPoint.copy(e),p=!0);break;default:console.warn(f)}i=!1}return s}function d(r){if(!(!r.sheet||!r.sheet.cssRules||!r.sheet.cssRules.length))for(let s=0;s<r.sheet.cssRules.length;s++){const e=r.sheet.cssRules[s];if(e.type!==1)continue;const t=e.selectorText.split(/,/gm).filter(Boolean).map(c=>c.trim());for(let c=0;c<t.length;c++){const p=Object.fromEntries(Object.entries(e.style).filter(([,i])=>i!==""));v[t[c]]=Object.assign(v[t[c]]||{},p)}}}function R(r,s,e,t,c,p,i,y){if(s==0||e==0){r.lineTo(y.x,y.y);return}t=t*Math.PI/180,s=Math.abs(s),e=Math.abs(e);const g=(i.x-y.x)/2,w=(i.y-y.y)/2,a=Math.cos(t)*g+Math.sin(t)*w,f=-Math.sin(t)*g+Math.cos(t)*w;let k=s*s,M=e*e;const o=a*a,n=f*f,A=o/k+n/M;if(A>1){const ht=Math.sqrt(A);s=ht*s,e=ht*e,k=s*s,M=e*e}const V=k*n+M*o,et=(k*M-V)/V;let ot=Math.sqrt(Math.max(0,et));c===p&&(ot=-ot);const _=ot*s*f/e,rt=-ot*e*a/s,ft=Math.cos(t)*_-Math.sin(t)*rt+(i.x+y.x)/2,gt=Math.sin(t)*_+Math.cos(t)*rt+(i.y+y.y)/2,ut=Z(1,0,(a-_)/s,(f-rt)/e),dt=Z((a-_)/s,(f-rt)/e,(-a-_)/s,(-f-rt)/e)%(Math.PI*2);r.currentPath.absellipse(ft,gt,s,e,ut,ut+dt,p===0,t)}function Z(r,s,e,t){const c=r*e+s*t,p=Math.sqrt(r*r+s*s)*Math.sqrt(e*e+t*t);let i=Math.acos(Math.max(-1,Math.min(1,c/p)));return r*t-s*e<0&&(i=-i),i}function J(r){const s=l(r.getAttribute("x")||0),e=l(r.getAttribute("y")||0),t=l(r.getAttribute("rx")||r.getAttribute("ry")||0),c=l(r.getAttribute("ry")||r.getAttribute("rx")||0),p=l(r.getAttribute("width")),i=l(r.getAttribute("height")),y=1-.551915024494,g=new ct;return g.moveTo(s+t,e),g.lineTo(s+p-t,e),(t!==0||c!==0)&&g.bezierCurveTo(s+p-t*y,e,s+p,e+c*y,s+p,e+c),g.lineTo(s+p,e+i-c),(t!==0||c!==0)&&g.bezierCurveTo(s+p,e+i-c*y,s+p-t*y,e+i,s+p-t,e+i),g.lineTo(s+t,e+i),(t!==0||c!==0)&&g.bezierCurveTo(s+t*y,e+i,s,e+i-c*y,s,e+i-c),g.lineTo(s,e+c),(t!==0||c!==0)&&g.bezierCurveTo(s,e+c*y,s+t*y,e,s+t,e),g}function X(r){function s(p,i,y){const g=l(i),w=l(y);c===0?t.moveTo(g,w):t.lineTo(g,w),c++}const e=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,t=new ct;let c=0;return r.getAttribute("points").replace(e,s),t.currentPath.autoClose=!0,t}function H(r){function s(p,i,y){const g=l(i),w=l(y);c===0?t.moveTo(g,w):t.lineTo(g,w),c++}const e=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,t=new ct;let c=0;return r.getAttribute("points").replace(e,s),t.currentPath.autoClose=!1,t}function C(r){const s=l(r.getAttribute("cx")||0),e=l(r.getAttribute("cy")||0),t=l(r.getAttribute("r")||0),c=new mt;c.absarc(s,e,t,0,Math.PI*2);const p=new ct;return p.subPaths.push(c),p}function q(r){const s=l(r.getAttribute("cx")||0),e=l(r.getAttribute("cy")||0),t=l(r.getAttribute("rx")||0),c=l(r.getAttribute("ry")||0),p=new mt;p.absellipse(s,e,t,c,0,Math.PI*2);const i=new ct;return i.subPaths.push(p),i}function nt(r){const s=l(r.getAttribute("x1")||0),e=l(r.getAttribute("y1")||0),t=l(r.getAttribute("x2")||0),c=l(r.getAttribute("y2")||0),p=new ct;return p.moveTo(s,e),p.lineTo(t,c),p.currentPath.autoClose=!1,p}function D(r,s){s=Object.assign({},s);let e={};if(r.hasAttribute("class")){const i=r.getAttribute("class").split(/\s/).filter(Boolean).map(y=>y.trim());for(let y=0;y<i.length;y++)e=Object.assign(e,v["."+i[y]])}r.hasAttribute("id")&&(e=Object.assign(e,v["#"+r.getAttribute("id")]));function t(i,y,g){g===void 0&&(g=function(a){return a.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),a}),r.hasAttribute(i)&&(s[y]=g(r.getAttribute(i))),e[i]&&(s[y]=g(e[i])),r.style&&r.style[i]!==""&&(s[y]=g(r.style[i]))}function c(i){return Math.max(0,Math.min(1,l(i)))}function p(i){return Math.max(0,l(i))}return t("fill","fill"),t("fill-opacity","fillOpacity",c),t("fill-rule","fillRule"),t("opacity","opacity",c),t("stroke","stroke"),t("stroke-opacity","strokeOpacity",c),t("stroke-width","strokeWidth",p),t("stroke-linejoin","strokeLineJoin"),t("stroke-linecap","strokeLineCap"),t("stroke-miterlimit","strokeMiterLimit",p),t("visibility","visibility"),s}function m(r,s){return r-(s-r)}function u(r,s,e){if(typeof r!="string")throw new TypeError("Invalid input: "+typeof r);const t={WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},c=0,p=1,i=2,y=3;let g=c,w=!0,a="",f="";const k=[];function M(V,et,ot){const _=new SyntaxError('Unexpected character "'+V+'" at index '+et+".");throw _.partial=ot,_}function o(){a!==""&&(f===""?k.push(Number(a)):k.push(Number(a)*Math.pow(10,Number(f)))),a="",f=""}let n;const A=r.length;for(let V=0;V<A;V++){if(n=r[V],Array.isArray(s)&&s.includes(k.length%e)&&t.FLAGS.test(n)){g=p,a=n,o();continue}if(g===c){if(t.WHITESPACE.test(n))continue;if(t.DIGIT.test(n)||t.SIGN.test(n)){g=p,a=n;continue}if(t.POINT.test(n)){g=i,a=n;continue}t.COMMA.test(n)&&(w&&M(n,V,k),w=!0)}if(g===p){if(t.DIGIT.test(n)){a+=n;continue}if(t.POINT.test(n)){a+=n,g=i;continue}if(t.EXP.test(n)){g=y;continue}t.SIGN.test(n)&&a.length===1&&t.SIGN.test(a[0])&&M(n,V,k)}if(g===i){if(t.DIGIT.test(n)){a+=n;continue}if(t.EXP.test(n)){g=y;continue}t.POINT.test(n)&&a[a.length-1]==="."&&M(n,V,k)}if(g===y){if(t.DIGIT.test(n)){f+=n;continue}if(t.SIGN.test(n)){if(f===""){f+=n;continue}f.length===1&&t.SIGN.test(f)&&M(n,V,k)}}t.WHITESPACE.test(n)?(o(),g=c,w=!1):t.COMMA.test(n)?(o(),g=c,w=!0):t.SIGN.test(n)?(o(),g=p,a=n):t.POINT.test(n)?(o(),g=i,a=n):M(n,V,k)}return o(),k}const x=["mm","cm","in","pt","pc","px"],B={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function l(r){let s="px";if(typeof r=="string"||r instanceof String)for(let t=0,c=x.length;t<c;t++){const p=x[t];if(r.endsWith(p)){s=p,r=r.substring(0,r.length-p.length);break}}let e;return s==="px"&&U.defaultUnit!=="px"?e=B.in[U.defaultUnit]/U.defaultDPI:(e=B[s][U.defaultUnit],e<0&&(e=B[s].in*U.defaultDPI)),e*parseFloat(r)}function b(r){if(!(r.hasAttribute("transform")||r.nodeName==="use"&&(r.hasAttribute("x")||r.hasAttribute("y"))))return null;const s=S(r);return z.length>0&&s.premultiply(z[z.length-1]),st.copy(s),z.push(s),s}function S(r){const s=new at,e=tt;if(r.nodeName==="use"&&(r.hasAttribute("x")||r.hasAttribute("y"))){const t=l(r.getAttribute("x")),c=l(r.getAttribute("y"));s.translate(t,c)}if(r.hasAttribute("transform")){const t=r.getAttribute("transform").split(")");for(let c=t.length-1;c>=0;c--){const p=t[c].trim();if(p==="")continue;const i=p.indexOf("("),y=p.length;if(i>0&&i<y){const g=p.slice(0,i),w=u(p.slice(i+1));switch(e.identity(),g){case"translate":if(w.length>=1){const a=w[0];let f=0;w.length>=2&&(f=w[1]),e.translate(a,f)}break;case"rotate":if(w.length>=1){let a=0,f=0,k=0;a=w[0]*Math.PI/180,w.length>=3&&(f=w[1],k=w[2]),Q.makeTranslation(-f,-k),j.makeRotation(a),h.multiplyMatrices(j,Q),Q.makeTranslation(f,k),e.multiplyMatrices(Q,h)}break;case"scale":if(w.length>=1){const a=w[0];let f=a;w.length>=2&&(f=w[1]),e.scale(a,f)}break;case"skewX":w.length===1&&e.set(1,Math.tan(w[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":w.length===1&&e.set(1,0,0,Math.tan(w[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":w.length===6&&e.set(w[0],w[2],w[4],w[1],w[3],w[5],0,0,1);break}}s.premultiply(e)}}return s}function T(r,s){function e(i){Y.set(i.x,i.y,1).applyMatrix3(s),i.set(Y.x,Y.y)}function t(i){const y=i.xRadius,g=i.yRadius,w=Math.cos(i.aRotation),a=Math.sin(i.aRotation),f=new pt(y*w,y*a,0),k=new pt(-g*a,g*w,0),M=f.applyMatrix3(s),o=k.applyMatrix3(s),n=tt.set(M.x,o.x,0,M.y,o.y,0,0,0,1),A=Q.copy(n).invert(),ot=j.copy(A).transpose().multiply(A).elements,_=K(ot[0],ot[1],ot[4]),rt=Math.sqrt(_.rt1),ft=Math.sqrt(_.rt2);if(i.xRadius=1/rt,i.yRadius=1/ft,i.aRotation=Math.atan2(_.sn,_.cs),!((i.aEndAngle-i.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const ut=Q.set(rt,0,0,0,ft,0,0,0,1),dt=j.set(_.cs,_.sn,0,-_.sn,_.cs,0,0,0,1),ht=ut.multiply(dt).multiply(n),bt=wt=>{const{x:Mt,y:At}=new pt(Math.cos(wt),Math.sin(wt),0).applyMatrix3(ht);return Math.atan2(At,Mt)};i.aStartAngle=bt(i.aStartAngle),i.aEndAngle=bt(i.aEndAngle),N(s)&&(i.aClockwise=!i.aClockwise)}}function c(i){const y=L(s),g=W(s);i.xRadius*=y,i.yRadius*=g;const w=y>Number.EPSILON?Math.atan2(s.elements[1],s.elements[0]):Math.atan2(-s.elements[3],s.elements[4]);i.aRotation+=w,N(s)&&(i.aStartAngle*=-1,i.aEndAngle*=-1,i.aClockwise=!i.aClockwise)}const p=r.subPaths;for(let i=0,y=p.length;i<y;i++){const w=p[i].curves;for(let a=0;a<w.length;a++){const f=w[a];f.isLineCurve?(e(f.v1),e(f.v2)):f.isCubicBezierCurve?(e(f.v0),e(f.v1),e(f.v2),e(f.v3)):f.isQuadraticBezierCurve?(e(f.v0),e(f.v1),e(f.v2)):f.isEllipseCurve&&($.set(f.aX,f.aY),e($),f.aX=$.x,f.aY=$.y,P(s)?t(f):c(f))}}}function N(r){const s=r.elements;return s[0]*s[4]-s[1]*s[3]<0}function P(r){const s=r.elements,e=s[0]*s[3]+s[1]*s[4];if(e===0)return!1;const t=L(r),c=W(r);return Math.abs(e/(t*c))>Number.EPSILON}function L(r){const s=r.elements;return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function W(r){const s=r.elements;return Math.sqrt(s[3]*s[3]+s[4]*s[4])}function K(r,s,e){let t,c,p,i,y;const g=r+e,w=r-e,a=Math.sqrt(w*w+4*s*s);return g>0?(t=.5*(g+a),y=1/t,c=r*y*e-s*y*s):g<0?c=.5*(g-a):(t=.5*a,c=-.5*a),w>0?p=w+a:p=w-a,Math.abs(p)>2*Math.abs(s)?(y=-2*s/p,i=1/Math.sqrt(1+y*y),p=y*i):Math.abs(s)===0?(p=1,i=0):(y=-.5*p/s,p=1/Math.sqrt(1+y*y),i=y*p),w>0&&(y=p,p=-i,i=y),{rt1:t,rt2:c,cs:p,sn:i}}const I=[],v={},z=[],tt=new at,Q=new at,j=new at,h=new at,$=new F,Y=new pt,st=new at,it=new DOMParser().parseFromString(O,"image/svg+xml");return E(it.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:I,xml:it.documentElement}}static createShapes(O){const E={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},G={loc:E.ORIGIN,t:0};function d(m,u,x,B){const l=m.x,b=u.x,S=x.x,T=B.x,N=m.y,P=u.y,L=x.y,W=B.y,K=(T-S)*(N-L)-(W-L)*(l-S),I=(b-l)*(N-L)-(P-N)*(l-S),v=(W-L)*(b-l)-(T-S)*(P-N),z=K/v,tt=I/v;if(v===0&&K!==0||z<=0||z>=1||tt<0||tt>1)return null;if(K===0&&v===0){for(let Q=0;Q<2;Q++)if(R(Q===0?x:B,m,u),G.loc==E.ORIGIN){const j=Q===0?x:B;return{x:j.x,y:j.y,t:G.t}}else if(G.loc==E.BETWEEN){const j=+(l+G.t*(b-l)).toPrecision(10),h=+(N+G.t*(P-N)).toPrecision(10);return{x:j,y:h,t:G.t}}return null}else{for(let h=0;h<2;h++)if(R(h===0?x:B,m,u),G.loc==E.ORIGIN){const $=h===0?x:B;return{x:$.x,y:$.y,t:G.t}}const Q=+(l+z*(b-l)).toPrecision(10),j=+(N+z*(P-N)).toPrecision(10);return{x:Q,y:j,t:z}}}function R(m,u,x){const B=x.x-u.x,l=x.y-u.y,b=m.x-u.x,S=m.y-u.y,T=B*S-b*l;if(m.x===u.x&&m.y===u.y){G.loc=E.ORIGIN,G.t=0;return}if(m.x===x.x&&m.y===x.y){G.loc=E.DESTINATION,G.t=1;return}if(T<-Number.EPSILON){G.loc=E.LEFT;return}if(T>Number.EPSILON){G.loc=E.RIGHT;return}if(B*b<0||l*S<0){G.loc=E.BEHIND;return}if(Math.sqrt(B*B+l*l)<Math.sqrt(b*b+S*S)){G.loc=E.BEYOND;return}let N;B!==0?N=b/B:N=S/l,G.loc=E.BETWEEN,G.t=N}function Z(m,u){const x=[],B=[];for(let l=1;l<m.length;l++){const b=m[l-1],S=m[l];for(let T=1;T<u.length;T++){const N=u[T-1],P=u[T],L=d(b,S,N,P);L!==null&&x.find(W=>W.t<=L.t+Number.EPSILON&&W.t>=L.t-Number.EPSILON)===void 0&&(x.push(L),B.push(new F(L.x,L.y)))}}return B}function J(m,u,x){const B=new F;u.getCenter(B);const l=[];return x.forEach(b=>{b.boundingBox.containsPoint(B)&&Z(m,b.points).forEach(T=>{l.push({identifier:b.identifier,isCW:b.isCW,point:T})})}),l.sort((b,S)=>b.point.x-S.point.x),l}function X(m,u,x,B,l){(l==null||l==="")&&(l="nonzero");const b=new F;m.boundingBox.getCenter(b);const S=[new F(x,b.y),new F(B,b.y)],T=J(S,m.boundingBox,u);T.sort((I,v)=>I.point.x-v.point.x);const N=[],P=[];T.forEach(I=>{I.identifier===m.identifier?N.push(I):P.push(I)});const L=N[0].point.x,W=[];let K=0;for(;K<P.length&&P[K].point.x<L;)W.length>0&&W[W.length-1]===P[K].identifier?W.pop():W.push(P[K].identifier),K++;if(W.push(m.identifier),l==="evenodd"){const I=W.length%2===0,v=W[W.length-2];return{identifier:m.identifier,isHole:I,for:v}}else if(l==="nonzero"){let I=!0,v=null,z=null;for(let tt=0;tt<W.length;tt++){const Q=W[tt];I?(z=u[Q].isCW,I=!1,v=Q):z!==u[Q].isCW&&(z=u[Q].isCW,I=!0)}return{identifier:m.identifier,isHole:I,for:v}}else console.warn('fill-rule: "'+l+'" is currently not implemented.')}let H=999999999,C=-999999999,q=O.subPaths.map(m=>{const u=m.getPoints();let x=-999999999,B=999999999,l=-999999999,b=999999999;for(let S=0;S<u.length;S++){const T=u[S];T.y>x&&(x=T.y),T.y<B&&(B=T.y),T.x>l&&(l=T.x),T.x<b&&(b=T.x)}return C<=l&&(C=l+1),H>=b&&(H=b-1),{curves:m.curves,points:u,isCW:Tt.isClockWise(u),identifier:-1,boundingBox:new Pt(new F(b,B),new F(l,x))}});q=q.filter(m=>m.points.length>1);for(let m=0;m<q.length;m++)q[m].identifier=m;const nt=q.map(m=>X(m,q,H,C,O.userData?O.userData.style.fillRule:void 0)),D=[];return q.forEach(m=>{if(!nt[m.identifier].isHole){const x=new Nt;x.curves=m.curves,nt.filter(l=>l.isHole&&l.for===m.identifier).forEach(l=>{const b=q[l.identifier],S=new mt;S.curves=b.curves,x.holes.push(S)}),D.push(x)}}),D}static getStrokeStyle(O,U,E,G,d){return O=O!==void 0?O:1,U=U!==void 0?U:"#000",E=E!==void 0?E:"miter",G=G!==void 0?G:"butt",d=d!==void 0?d:4,{strokeColor:U,strokeWidth:O,strokeLineJoin:E,strokeLineCap:G,strokeMiterLimit:d}}static pointsToStroke(O,U,E,G){const d=[],R=[],Z=[];if(lt.pointsToStrokeWithBuffers(O,U,E,G,d,R,Z)===0)return null;const J=new Ct;return J.setAttribute("position",new xt(d,3)),J.setAttribute("normal",new xt(R,3)),J.setAttribute("uv",new xt(Z,2)),J}static pointsToStrokeWithBuffers(O,U,E,G,d,R,Z,J){const X=new F,H=new F,C=new F,q=new F,nt=new F,D=new F,m=new F,u=new F,x=new F,B=new F,l=new F,b=new F,S=new F,T=new F,N=new F,P=new F,L=new F;E=E!==void 0?E:12,G=G!==void 0?G:.001,J=J!==void 0?J:0,O=w(O);const W=O.length;if(W<2)return 0;const K=O[0].equals(O[W-1]);let I,v=O[0],z;const tt=U.strokeWidth/2,Q=1/(W-1);let j=0,h,$,Y,st,it=!1,yt=0,r=J*3,s=J*2;e(O[0],O[1],X).multiplyScalar(tt),u.copy(O[0]).sub(X),x.copy(O[0]).add(X),B.copy(u),l.copy(x);for(let a=1;a<W;a++){I=O[a],a===W-1?K?z=O[1]:z=void 0:z=O[a+1];const f=X;if(e(v,I,f),C.copy(f).multiplyScalar(tt),b.copy(I).sub(C),S.copy(I).add(C),h=j+Q,$=!1,z!==void 0){e(I,z,H),C.copy(H).multiplyScalar(tt),T.copy(I).sub(C),N.copy(I).add(C),Y=!0,C.subVectors(z,v),f.dot(C)<0&&(Y=!1),a===1&&(it=Y),C.subVectors(z,I),C.normalize();const k=Math.abs(f.dot(C));if(k>Number.EPSILON){const M=tt/k;C.multiplyScalar(-M),q.subVectors(I,v),nt.copy(q).setLength(M).add(C),P.copy(nt).negate();const o=nt.length(),n=q.length();q.divideScalar(n),D.subVectors(z,I);const A=D.length();switch(D.divideScalar(A),q.dot(P)<n&&D.dot(P)<A&&($=!0),L.copy(nt).add(I),P.add(I),st=!1,$?Y?(N.copy(P),S.copy(P)):(T.copy(P),b.copy(P)):p(),U.strokeLineJoin){case"bevel":i(Y,$,h);break;case"round":y(Y,$),Y?c(I,b,T,h,0):c(I,N,S,h,1);break;case"miter":case"miter-clip":default:const V=tt*U.strokeMiterLimit/o;if(V<1)if(U.strokeLineJoin!=="miter-clip"){i(Y,$,h);break}else y(Y,$),Y?(D.subVectors(L,b).multiplyScalar(V).add(b),m.subVectors(L,T).multiplyScalar(V).add(T),t(b,h,0),t(D,h,0),t(I,h,.5),t(I,h,.5),t(D,h,0),t(m,h,0),t(I,h,.5),t(m,h,0),t(T,h,0)):(D.subVectors(L,S).multiplyScalar(V).add(S),m.subVectors(L,N).multiplyScalar(V).add(N),t(S,h,1),t(D,h,1),t(I,h,.5),t(I,h,.5),t(D,h,1),t(m,h,1),t(I,h,.5),t(m,h,1),t(N,h,1));else $?(Y?(t(x,j,1),t(u,j,0),t(L,h,0),t(x,j,1),t(L,h,0),t(P,h,1)):(t(x,j,1),t(u,j,0),t(L,h,1),t(u,j,0),t(P,h,0),t(L,h,1)),Y?T.copy(L):N.copy(L)):Y?(t(b,h,0),t(L,h,0),t(I,h,.5),t(I,h,.5),t(L,h,0),t(T,h,0)):(t(S,h,1),t(L,h,1),t(I,h,.5),t(I,h,.5),t(L,h,1),t(N,h,1)),st=!0;break}}else p()}else p();!K&&a===W-1&&g(O[0],B,l,Y,!0,j),j=h,v=I,u.copy(T),x.copy(N)}if(!K)g(I,b,S,Y,!1,h);else if($&&d){let a=L,f=P;it!==Y&&(a=P,f=L),Y?(st||it)&&(f.toArray(d,0),f.toArray(d,9),st&&a.toArray(d,3)):(st||!it)&&(f.toArray(d,3),f.toArray(d,9),st&&a.toArray(d,0))}return yt;function e(a,f,k){return k.subVectors(f,a),k.set(-k.y,k.x).normalize()}function t(a,f,k){d&&(d[r]=a.x,d[r+1]=a.y,d[r+2]=0,R&&(R[r]=0,R[r+1]=0,R[r+2]=1),r+=3,Z&&(Z[s]=f,Z[s+1]=k,s+=2)),yt+=3}function c(a,f,k,M,o){X.copy(f).sub(a).normalize(),H.copy(k).sub(a).normalize();let n=Math.PI;const A=X.dot(H);Math.abs(A)<1&&(n=Math.abs(Math.acos(A))),n/=E,C.copy(f);for(let V=0,et=E-1;V<et;V++)q.copy(C).rotateAround(a,n),t(C,M,o),t(q,M,o),t(a,M,.5),C.copy(q);t(q,M,o),t(k,M,o),t(a,M,.5)}function p(){t(x,j,1),t(u,j,0),t(b,h,0),t(x,j,1),t(b,h,0),t(S,h,1)}function i(a,f,k){f?a?(t(x,j,1),t(u,j,0),t(b,h,0),t(x,j,1),t(b,h,0),t(P,h,1),t(b,k,0),t(T,k,0),t(P,k,.5)):(t(x,j,1),t(u,j,0),t(S,h,1),t(u,j,0),t(P,h,0),t(S,h,1),t(S,k,1),t(P,k,0),t(N,k,1)):a?(t(b,k,0),t(T,k,0),t(I,k,.5)):(t(S,k,1),t(N,k,0),t(I,k,.5))}function y(a,f){f&&(a?(t(x,j,1),t(u,j,0),t(b,h,0),t(x,j,1),t(b,h,0),t(P,h,1),t(b,j,0),t(I,h,.5),t(P,h,1),t(I,h,.5),t(T,j,0),t(P,h,1)):(t(x,j,1),t(u,j,0),t(S,h,1),t(u,j,0),t(P,h,0),t(S,h,1),t(S,j,1),t(P,h,0),t(I,h,.5),t(I,h,.5),t(P,h,0),t(N,j,1)))}function g(a,f,k,M,o,n){switch(U.strokeLineCap){case"round":o?c(a,k,f,n,.5):c(a,f,k,n,.5);break;case"square":if(o)X.subVectors(f,a),H.set(X.y,-X.x),C.addVectors(X,H).add(a),q.subVectors(H,X).add(a),M?(C.toArray(d,3),q.toArray(d,0),q.toArray(d,9)):(C.toArray(d,3),Z[7]===1?q.toArray(d,9):C.toArray(d,9),q.toArray(d,0));else{X.subVectors(k,a),H.set(X.y,-X.x),C.addVectors(X,H).add(a),q.subVectors(H,X).add(a);const A=d.length;M?(C.toArray(d,A-3),q.toArray(d,A-6),q.toArray(d,A-12)):(q.toArray(d,A-6),C.toArray(d,A-3),q.toArray(d,A-12))}break}}function w(a){let f=!1;for(let M=1,o=a.length-1;M<o;M++)if(a[M].distanceTo(a[M+1])<G){f=!0;break}if(!f)return a;const k=[];k.push(a[0]);for(let M=1,o=a.length-1;M<o;M++)a[M].distanceTo(a[M+1])>=G&&k.push(a[M]);return k.push(a[a.length-1]),k}}}const Ft={__name:"Demo35",setup(Rt){const O=async({THREE:d,scene:R,renderer:Z,camera:J,control:X})=>{const H=new lt,C=.01,q=m=>{const u=new d.Group,x=new d.MeshPhongMaterial({color:43775,side:d.DoubleSide,flatShading:!0});u.scale.set(C,C,C),u.position.set(0,0,0),m.paths.forEach(b=>{b.toShapes(!0).forEach(T=>{const N={depth:50,bevelEnabled:!0,bevelThickness:2,bevelSize:1,bevelSegments:3},P=new d.ExtrudeGeometry(T,N),L=new d.Mesh(P,x);u.add(L)})});const l=new d.Box3().setFromObject(u).getCenter(new d.Vector3);u.position.x=-l.x,u.position.y=-l.y,R.add(u)},nt=m=>{const u=m.paths,x=new d.Group;x.scale.set(C,C,C),x.position.set(0,0,1);for(let b=0;b<u.length;b++){const S=u[b],T=new d.MeshBasicMaterial({color:S.color,side:d.DoubleSide,depthWrite:!1}),N=lt.createShapes(S);for(let P=0;P<N.length;P++){const L=N[P],W=new d.ShapeGeometry(L),K=new d.Mesh(W,T);x.add(K)}}const l=new d.Box3().setFromObject(x).getCenter(new d.Vector3);x.position.x=-l.x,x.position.y=-l.y,R.add(x)},D=m=>{const u=m.paths,x=new d.Group;x.scale.set(C,C,C),x.position.set(0,0,1.5);for(let b=0;b<u.length;b++){const S=u[b],T=new d.LineBasicMaterial({color:16711935,linewidth:1}),N=lt.createShapes(S);for(let P=0;P<N.length;P++){const L=N[P],W=new d.ShapeGeometry(L),K=new d.EdgesGeometry(W),I=new d.LineSegments(K,T);x.add(I)}}const l=new d.Box3().setFromObject(x).getCenter(new d.Vector3);x.position.x=-l.x,x.position.y=-l.y,R.add(x)};H.load("/home//public/svg/xuchang.svg",function(m){q(m),nt(m),D(m)},void 0,function(m){console.error("SVG加载失败:",m)})},U=({scene:d,camera:R,renderer:Z,controls:J,stats:X,THREE:H})=>{J.update(),Z.render(d,R),X.update()},{loading:E,pregress:G}=jt({el:"#canvas",background:"#02284c",cameraPosition:[0,0,6],controlAuto:!1,helper:!1,light:!0,creatMesh:O,animation:U});return(d,R)=>(Vt(),Ot(Gt,{loading:kt(E),pregress:kt(G)},{default:Et(()=>[...R[0]||(R[0]=[qt("div",{id:"canvas"},null,-1)])]),_:1},8,["loading","pregress"]))}},Kt=Bt(Ft,[["__scopeId","data-v-58395d13"]]);export{Kt as default};
