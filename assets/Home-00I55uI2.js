import{_ as hn,r as jt,y as zo,N as Fa,b as st,k as lt,d as Re,F as un,q as xr,n as Wo,t as Vo,E as Ma,i as Xo,v as Ho,G as cn,o as Er,h as La,w as Ia,u as lo,x as Ra}from"./index-BLTPNdxz.js";import{u as Yo}from"./allscreen-CMxb6Fem.js";import{U as Pa,k as Oa,R as Ba,ah as Ga,ai as Na,aj as Jo,a as Wn,c as Fr,h as Nn,ak as ja,al as uo,am as za,an as Wa,ao as Va,ae as co,ap as Xa,M as Ha,D as Ya,f as Ja,V as Mr,P as Lr,u as Ka,L as Qa}from"./Loading-WLE57plb.js";import{C as hr}from"./camera-controls.module-CggtOxtI.js";import{k as tt,o as Za,i as qa}from"./creatMesh-BE3RtILY.js";import{u as $a}from"./useRay-DSHxow8h.js";import{T as ei,E as ti,r as ni}from"./tween.esm-Dp1EtNfj.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./loading-C7vXKyxm.js";const ri={class:"accordion solution"},oi=["onClick"],ai={class:"left-top"},ii=["innerHTML"],si={class:"right"},li={class:"box"},ui=["title","onClick"],ci={__name:"Accordion",props:{items:{type:Array,default:()=>[]}},setup(s){const n=jt(0),u=zo(),c=Fa(),t=Yo(),e=l=>l.replace(/([a-zA-Z]+)/g,'<span style="font-size:20px">$1</span>'),r=l=>e(l),i=async(l,f)=>{c.showLoading(),await u.push(l),o(f)},o=async l=>{t.setFlagStatus(!1),await Ma();const f=document.getElementById("menu");if(f){const d=f.getElementsByClassName("menu-item");d[l]&&(f.scrollTop=d[l].offsetTop)}c.hideLoading()},a=l=>{n.value=l};return(l,f)=>(st(),lt("div",ri,[Re("ul",null,[(st(!0),lt(un,null,xr(s.items,(d,h)=>(st(),lt("li",{key:h,class:Wo(["accordion-item",{on:n.value===h}]),onClick:p=>a(h)},[f[0]||(f[0]=Re("div",{class:"left"},null,-1)),Re("div",ai,[Re("div",{innerHTML:r(d.title)},null,8,ii)]),Re("div",si,[Re("dl",null,[Re("div",li,[(st(!0),lt(un,null,xr(d.children,(p,m)=>(st(),lt("dd",{key:m,title:p.name,onClick:g=>i(p.path,m)},Vo(p.name),9,ui))),128))])])])],10,oi))),128))])]))}},fi=hn(ci,[["__scopeId","data-v-3869e40b"]]),di={class:"book-boom"},hi={class:"know-rec box"},pi={__name:"KnowHome",props:{show:{type:Boolean,default:!1},menus:{type:Array,default:()=>[]}},emits:["bookHide"],setup(s,{emit:n}){const u=n,c=()=>{u("bookHide")};return(t,e)=>Xo((st(),lt("div",di,[Re("div",{class:"boom-layer",onClick:c}),Re("div",hi,[cn(fi,{items:s.menus},null,8,["items"])])],512)),[[Ho,s.show]])}},vi=hn(pi,[["__scopeId","data-v-264d42f9"]]),mi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANtJREFUSEvdlLsRwkAMRN9GRDQChCRQCBWQUQ8NELoJMjJC6AUSMWIMwxxnnzzjC8ChLe2zfisqP6qszx8CzOwITICtpGukhWY2Aw7AXdL6M+erRWZ2AlbABdiUIK14A8w9R9KiBPC/eSf0QVLxXGx2yJHESIxX0rlFfQJR8V6Af8wJtf0NtbAI6ID46+dAI0sQOrSkEgeExEMVZKoYF5CZw3gtqjrkqmsa2fNITHbI0cSuO0m9a2yzO0talszO3fQG7EpO+hJqq94D0yIg4v9DYkKXPEQwjf19wANzaZwZ7Qyu6QAAAABJRU5ErkJggg==",gi=[{id:100,name:"智慧地磅系统",des:"贵州磷化地磅称重系统",resumeID:"101",path:"/dfsj/db/",cover:"003.jpg",imgs:["001.jpg","002.jpg","003.jpg","004.jpg","006.jpg","007.jpg","008.jpg","009.jpg","010.jpg","011.jpg","012.jpg","013.jpg","014.jpg","015.jpg","016.jpg","017.jpg","018.jpg","019.jpg","020.jpg","021.jpg","022.jpg","023.jpg","024.jpg","025.jpg","026.jpg"]},{id:200,name:"非现中心平台-web",des:"非现场治超管理平台",resumeID:"201",path:"/dfsj/feixian/web/",cover:"pc02.jpg",imgs:["openpage01.png","openpage02.png","pc01.jpg","pc02.jpg","pc03.jpg","pc04.jpg","pc05.jpg","pc06.jpg","pc06_1.jpg","pc07.jpg","pc08.jpg","pc08_1.jpg","pc09.jpg","pc09_1.jpg","pc09_2.jpg","pc10.jpg","pc11.jpg","pc12.jpg","pc13.jpg","pc14.jpg","pc15.jpg","pc16.jpg","pc17.jpg","pc18.jpg","pc19.jpg","publicpage01.jpg","publicpage02.jpg","publicpage03.jpg"]},{id:210,name:"非现中心平台-web新版",des:"非现场治超管理平台",resumeID:"201",path:"/dfsj/feixian/webnew/",cover:"004.jpg",imgs:["001.jpg","002.jpg","003.jpg","004.jpg","005.jpg","006.jpg","007.jpg","008.jpg","009.jpg","010.jpg","011.jpg","012.jpg","013.jpg","014.jpg","015.jpg","016.jpg","017.jpg","018.jpg","019.jpg","020.jpg","020_1.jpg","021.jpg","022.jpg","023.jpg","024.jpg","025.jpg","026.jpg","027.jpg","028.jpg","029.jpg","030.jpg","031.jpg","032.jpg","033.jpg","034.jpg"]},{id:220,name:"非现中心平台-App/小程序",des:"非现场治超管理平台",resumeID:"201",isApp:!0,path:"/dfsj/feixian/xcx/",cover:"xcx01.jpg",imgs:["xcx00.jpg","xcx01.jpg","xcx02.jpg","xcx03.jpg","xcx04.jpg","xcx05.jpg","xcx06.jpg","xcx07.jpg","xcx08.jpg","xcx09.jpg","xcx10.jpg","xcx11.jpg","xcx12.jpg","xcx13.jpg","xcx14.jpg"]},{id:310,name:"智慧服务区安心停车-小程序",des:"山东葛洲坝集团《人工智能技术在高速公路场景研究及应用》智慧服务区场景",resumeID:"301",isApp:!0,path:"/dfsj/gzb/xcx/",cover:"003.jpg",imgs:["001.jpg","002.jpg","003.jpg","004.jpg","005.jpg","006.jpg","007.jpg","008.jpg"]},{id:320,name:"智慧服务区：安心停车-小程序管理端",des:"山东葛洲坝集团《人工智能技术在高速公路场景研究及应用》智慧服务区场景",resumeID:"301",path:"/dfsj/gzb/xcxweb/",cover:"001.jpg",imgs:["001.jpg","002.jpg","003.png","004.jpg","005.png","006.jpg"]},{id:330,name:"智慧收费站：超限提示应用",des:"山东葛洲坝集团《人工智能技术在高速公路场景研究及应用》智慧收费站场景",resumeID:"301",path:"/dfsj/gzb/cx/",cover:"002.png",imgs:["001.png","002.png","003.png","004.jpg"]},{id:330,name:"智慧高速：事件告警平台",des:"山东葛洲坝集团《人工智能技术在高速公路场景研究及应用》智慧高速场景",resumeID:"301",path:"/dfsj/gzb/sj/",cover:"002.png",imgs:["001.png","002.png","003.png","004.png","005.png","006.png"]}];class Ko{constructor(n={}){this.images=n.images||[],this.currentIndex=n.thumbnailIndex||0,this.onCloseCallback=n.onClose||null,this.init()}init(){this.images.length!==0&&(this.createPreviewOverlay(),this.updateThumbnailList(),this.openPreview(this.currentIndex),this.addEventListeners())}injectStyles(){const n=document.createElement("style");n.textContent=`
            #previewOverlay {
                display: none;
                position: fixed;
                top: 0; left: 0;
                width: 100vw; height: 100vh;
                background-color: rgba(0,0,0,0.9);
                z-index: 999999;
                justify-content: center;
                align-items: center;
            }
            #previewImage {
                max-width: 90vw;
                max-height: 90vh;
                user-select: none;
                image-rendering: auto;
                transition: transform 0.3s ease;
            }
            #navLeft, #navRight {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                font-size: 32px;
                color: white;
                cursor: pointer;
                z-index: 9999999;
                user-select: none;
                opacity: 0.7;
                transition: opacity 0.2s;
            }
            #navLeft:hover, #navRight:hover {
                opacity: 1;
            }
            #closeBtn {
                position: absolute;
                top: 20px;
                right: 30px;
                color: white;
                font-size: 24px;
                cursor: pointer;
                z-index: 9999999;
                font-weight: bold;
            }
            #counter {
                position: absolute;
                top: 20px;
                left: 30px;
                color: white;
                font-size: 16px;
                z-index: 9999999;
                user-select: none;
            }
            #thumbnailList {
                display: flex;
                overflow-x: auto;
                position: absolute;
                bottom: 10px;
                left: 50%;
                transform: translateX(-50%);
                gap: 8px;
                padding: 8px;
                background-color: rgba(0,0,0,0.5);
                border-radius: 8px;
                max-width: 90vw;
            }
            #thumbnailList img {
                width: 60px;
                height: 60px;
                object-fit: cover;
                cursor: pointer;
                border-radius: 4px;
            }
        `,document.head.appendChild(n)}createPreviewOverlay(){if(document.getElementById("previewOverlay"))return;this.injectStyles();const u=document.createElement("div");u.id="previewOverlay";const c=document.createElement("img");c.id="previewImage";const t=document.createElement("span");t.id="closeBtn",t.innerHTML="&times;";const e=document.createElement("div");e.id="navLeft",e.innerHTML="&#10094;",e.style.left="20px";const r=document.createElement("div");r.id="navRight",r.innerHTML="&#10095;",r.style.right="20px";const i=document.createElement("div");i.id="counter";const o=document.createElement("div");o.id="thumbnailList",u.appendChild(c),u.appendChild(e),u.appendChild(r),u.appendChild(t),u.appendChild(i),u.appendChild(o),document.body.appendChild(u)}updateThumbnailList(){const n=document.getElementById("thumbnailList");n&&(n.innerHTML="",this.images.forEach((u,c)=>{const t=document.createElement("img");t.src=u,t.setAttribute("data-index",c),t.style.border=c===this.currentIndex?"2px solid var(--mainColor)":"2px solid transparent",t.addEventListener("click",()=>this.openPreview(c)),n.appendChild(t)}))}openPreview(n){this.currentIndex=n;const u=document.getElementById("previewOverlay"),c=document.getElementById("previewImage"),t=document.getElementById("counter");c.src=this.images[this.currentIndex],t.innerText=`第 ${this.currentIndex+1} 张 / 共 ${this.images.length} 张`,this.updateThumbnailList(),u.style.display="flex"}closePreview(n){const u=document.getElementById("previewOverlay");u.style.display="none",typeof n=="function"?n():typeof this.onCloseCallback=="function"&&this.onCloseCallback()}showNext(){this.currentIndex<this.images.length-1&&this.openPreview(this.currentIndex+1)}showPrev(){this.currentIndex>0&&this.openPreview(this.currentIndex-1)}addEventListeners(){var u,c,t;const n=document.getElementById("previewOverlay");(u=n.querySelector("#closeBtn"))==null||u.addEventListener("click",()=>{this.closePreview()}),n.addEventListener("click",e=>{e.target===n&&this.closePreview()}),(c=n.querySelector("#navLeft"))==null||c.addEventListener("click",()=>this.showPrev()),(t=n.querySelector("#navRight"))==null||t.addEventListener("click",()=>this.showNext()),window.addEventListener("keydown",e=>{if(n.style.display==="flex")switch(e.key){case"ArrowLeft":this.showPrev();break;case"ArrowRight":this.showNext();break;case"Escape":this.closePreview();break}})}reset(n,u={}){this.images=n||[],this.currentIndex=u.thumbnailIndex||0,this.onCloseCallback=u.onCloseCallback||null,this.updateThumbnailList(),this.openPreview(this.currentIndex)}}typeof window<"u"&&(window.ImageZoomPlugin=Ko);const yi={class:"layer-boom"},_i={class:"scroll-container"},bi={class:"row"},Ti=["onClick","title"],xi=["src","alt"],wi={__name:"PhontoMenus",props:{show:{type:Boolean,default:!1}},emits:["handleEvent"],setup(s,{emit:n}){const u=n,c=jt([]),t=jt(!1),e=function(){u("handleEvent")},r=(o,a)=>{t.value=!1;let l=o.map(f=>"/home//public"+a+f);new Ko({images:l,onClose:()=>{t.value=!0}})},i=()=>{t.value=!0,c.value=gi.map(o=>{let a="/home//public"+o.path+o.cover;return{...o,coverImg:a}})};return Er(()=>{i()}),(o,a)=>Xo((st(),lt("div",yi,[Re("div",{class:"close",onClick:e},a[0]||(a[0]=[Re("img",{src:mi,alt:""},null,-1)])),a[1]||(a[1]=Re("h3",null,"案例中心",-1)),Re("div",_i,[Re("div",bi,[(st(!0),lt(un,null,xr(c.value,l=>(st(),lt("div",{class:Wo(["item",{app:l.isApp}]),key:l.id,onClick:f=>r(l.imgs,l.path),title:l.des},[Re("img",{src:l.coverImg,alt:l.des},null,8,xi),Re("p",null,Vo(l.name),1)],10,Ti))),128))])])],512)),[[Ho,s.show&&t.value]])}},Si=hn(wi,[["__scopeId","data-v-1413b023"]]);/**
 * anime.js - ESM
 * @version v4.0.0
 * @author Julian Garnier
 * @license MIT
 * @copyright (c) 2025 Julian Garnier
 * @see https://animejs.com
 */const dt=typeof window<"u",pr=dt?window:null,zt=dt?document:null,Oe={OBJECT:0,ATTRIBUTE:1,CSS:2,TRANSFORM:3,CSS_VAR:4},Se={NUMBER:0,UNIT:1,COLOR:2,COMPLEX:3},rt={NONE:0,AUTO:1,FORCE:2},qe={replace:0,none:1,blend:2},fo=Symbol(),Ir=Symbol(),Qo=Symbol(),Vn=Symbol(),Ui=Symbol(),Le=1e-11,Zo=1e12,Wt=1e3,wr=120,Ct="",pn=new Map;pn.set("x","translateX");pn.set("y","translateY");pn.set("z","translateZ");const Rr=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],qo=Rr.reduce((s,n)=>({...s,[n]:n+"("}),{}),nt=()=>{},Ci=/(^#([\da-f]{3}){1,2}$)|(^#([\da-f]{4}){1,2}$)/i,ki=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,Ai=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,Di=/hsl\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*\)/i,Ei=/hsla\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,ho=/[-+]?\d*\.?\d+(?:e[-+]?\d)?/gi,Fi=/^([-+]?\d*\.?\d+(?:e[-+]?\d+)?)([a-z]+|%)$/i,Mi=/([a-z])([A-Z])/g,Li=/(\w+)(\([^)]+\)+)/g,$o={id:null,keyframes:null,playbackEase:null,playbackRate:1,frameRate:wr,loop:0,reversed:!1,alternate:!1,autoplay:!0,duration:Wt,delay:0,loopDelay:0,ease:"out(2)",composition:qe.replace,modifier:s=>s,onBegin:nt,onBeforeUpdate:nt,onUpdate:nt,onLoop:nt,onPause:nt,onComplete:nt,onRender:nt},ze={defaults:$o,root:zt,scope:null,precision:4,timeScale:1,tickThreshold:200},ea={version:"4.0.0",engine:null};dt&&(pr.AnimeJS||(pr.AnimeJS=[]),pr.AnimeJS.push(ea));const Ii=s=>s.replace(Mi,"$1-$2").toLowerCase(),Bt=(s,n)=>s.indexOf(n)===0,fn=Date.now,dn=Array.isArray,vr=s=>s&&s.constructor===Object,Ri=s=>typeof s=="number"&&!isNaN(s),Xn=s=>typeof s=="string",jn=s=>typeof s=="function",Me=s=>typeof s>"u",mr=s=>Me(s)||s===null,ta=s=>dt&&s instanceof SVGElement,na=s=>Ci.test(s),ra=s=>Bt(s,"rgb"),oa=s=>Bt(s,"hsl"),Pi=s=>na(s)||ra(s)||oa(s),In=s=>!ze.defaults.hasOwnProperty(s),An=s=>Xn(s)?parseFloat(s):s,It=Math.pow,Oi=Math.sqrt,Bi=Math.sin,Gi=Math.cos,Ni=Math.abs,ji=Math.ceil,aa=Math.floor,zi=Math.asin,Pr=Math.PI,po=Math.round,Xe=(s,n,u)=>s<n?n:s>u?u:s,vo={},Pe=(s,n)=>{if(n<0)return s;if(!n)return po(s);let u=vo[n];return u||(u=vo[n]=10**n),po(s*u)/u},wt=(s,n,u)=>s+(n-s)*u,Rn=s=>s===1/0?Zo:s===-1/0?-1e12:s,Gt=s=>s<Le?Le:s,Je=s=>dn(s)?[...s]:s,Wi=(s,n)=>{const u={...s};for(let c in n){const t=s[c];u[c]=Me(t)?n[c]:t}return u},Ne=(s,n,u,c="_prev",t="_next")=>{let e=s._head,r=t;for(u&&(e=s._tail,r=c);e;){const i=e[r];n(e),e=i}},an=(s,n,u="_prev",c="_next")=>{const t=n[u],e=n[c];t?t[c]=e:s._head=e,e?e[u]=t:s._tail=t,n[u]=null,n[c]=null},Ot=(s,n,u,c="_prev",t="_next")=>{let e=s._tail;for(;e&&u&&u(e,n);)e=e[c];const r=e?e[t]:s._head;e?e[t]=n:s._head=n,r?r[c]=n:s._tail=n,n[c]=e,n[t]=r};class ia{constructor(n=0){this.deltaTime=0,this._currentTime=n,this._elapsedTime=n,this._startTime=n,this._lastTime=n,this._scheduledTime=0,this._frameDuration=Pe(Wt/wr,0),this._fps=wr,this._speed=1,this._hasChildren=!1,this._head=null,this._tail=null}get fps(){return this._fps}set fps(n){const u=this._frameDuration,c=+n,t=c<Le?Le:c,e=Pe(Wt/t,0);this._fps=t,this._frameDuration=e,this._scheduledTime+=e-u}get speed(){return this._speed}set speed(n){const u=+n;this._speed=u<Le?Le:u}requestTick(n){const u=this._scheduledTime,c=this._elapsedTime;if(this._elapsedTime+=n-c,c<u)return rt.NONE;const t=this._frameDuration,e=c-u;return this._scheduledTime+=e<t?t:e,rt.AUTO}computeDeltaTime(n){const u=n-this._lastTime;return this.deltaTime=u,this._lastTime=n,u}}const Pn=(s,n,u,c,t)=>{const e=s.parent,r=s.duration,i=s.completed,o=s.iterationDuration,a=s.iterationCount,l=s._currentIteration,f=s._loopDelay,d=s._reversed,h=s._alternate,p=s._hasChildren,m=s._delay,g=s._currentTime,P=m+o,D=n-m,C=Xe(g,-m,r),b=Xe(D,-m,r),S=D-g,R=b>0,k=b>=r,F=r<=Le,z=t===rt.FORCE;let B=0,te=D,y=0;if(a>1){const oe=~~(b/(o+(k?0:f)));s._currentIteration=Xe(oe,0,a),k&&s._currentIteration--,B=s._currentIteration%2,te=b%(o+f)||0}const O=d^(h&&B),A=s._ease;let W=k?O?0:r:O?o-te:te;A&&(W=o*A(W/o)||0);const X=(e?e.backwards:D<g)?!O:!!O;if(s._currentTime=D,s._iterationTime=W,s.backwards=X,R&&!s.began?(s.began=!0,!u&&!(e&&(X||!e.began))&&s.onBegin(s)):D<=0&&(s.began=!1),!u&&!p&&R&&s._currentIteration!==l&&s.onLoop(s),z||t===rt.AUTO&&(n>=m&&n<=P||n<=m&&C>m||n>=P&&C!==r)||W>=P&&C!==r||W<=m&&C>0||n<=C&&C===r&&i||k&&!i&&F){if(R&&(s.computeDeltaTime(C),u||s.onBeforeUpdate(s)),!p){const oe=z||(X?S*-1:S)>=ze.tickThreshold,ae=s._offset+(e?e._offset:0)+m+W;let _=s._head,M,v,T,E,L=0;for(;_;){const x=_._composition,N=_._currentTime,I=_._changeDuration,j=_._absoluteStartTime+_._changeDuration,Z=_._nextRep,ne=_._prevRep,U=x!==qe.none;if((oe||(N!==I||ae<=j+(Z?Z._delay:0))&&(N!==0||ae>=_._absoluteStartTime))&&(!U||!_._isOverridden&&(!_._isOverlapped||ae<=j)&&(!Z||Z._isOverridden||ae<=Z._absoluteStartTime)&&(!ne||ne._isOverridden||ae>=ne._absoluteStartTime+ne._changeDuration+_._delay))){const w=_._currentTime=Xe(W-_._startTime,0,I),Q=_._ease(w/_._updateDuration),J=_._modifier,V=_._valueType,Y=_._tweenType,K=Y===Oe.OBJECT,H=V===Se.NUMBER,re=H&&K||Q===0||Q===1?-1:ze.precision;let $,G;if(H)$=G=J(Pe(wt(_._fromNumber,_._toNumber,Q),re));else if(V===Se.UNIT)G=J(Pe(wt(_._fromNumber,_._toNumber,Q),re)),$=`${G}${_._unit}`;else if(V===Se.COLOR){const se=_._fromNumbers,ee=_._toNumbers,ie=Pe(Xe(J(wt(se[0],ee[0],Q)),0,255),0),q=Pe(Xe(J(wt(se[1],ee[1],Q)),0,255),0),xe=Pe(Xe(J(wt(se[2],ee[2],Q)),0,255),0),le=Xe(J(Pe(wt(se[3],ee[3],Q),re)),0,1);if($=`rgba(${ie},${q},${xe},${le})`,U){const ue=_._numbers;ue[0]=ie,ue[1]=q,ue[2]=xe,ue[3]=le}}else if(V===Se.COMPLEX){$=_._strings[0];for(let se=0,ee=_._toNumbers.length;se<ee;se++){const ie=J(Pe(wt(_._fromNumbers[se],_._toNumbers[se],Q),re)),q=_._strings[se+1];$+=`${q?ie+q:ie}`,U&&(_._numbers[se]=ie)}}if(U&&(_._number=G),!c&&x!==qe.blend){const se=_.property;M=_.target,K?M[se]=$:Y===Oe.ATTRIBUTE?M.setAttribute(se,$):(v=M.style,Y===Oe.TRANSFORM?(M!==T&&(T=M,E=M[Vn]),E[se]=$,L=1):Y===Oe.CSS?v[se]=$:Y===Oe.CSS_VAR&&v.setProperty(se,$)),R&&(y=1)}else _._value=$}if(L&&_._renderTransforms){let w=Ct;for(let Q in E)w+=`${qo[Q]}${E[Q]}) `;v.transform=w,L=0}_=_._next}!u&&y&&s.onRender(s)}!u&&R&&s.onUpdate(s)}return e&&F?!u&&(e.began&&!X&&D>=r&&!i||X&&D<=Le&&i)&&(s.onComplete(s),s.completed=!X):R&&k?a===1/0?s._startTime+=s.duration:s._currentIteration>=a-1&&(s.paused=!0,!i&&!p&&(s.completed=!0,!u&&!(e&&(X||!e.began))&&(s.onComplete(s),s._resolve(s)))):s.completed=!1,y},Rt=(s,n,u,c,t)=>{const e=s._currentIteration;if(Pn(s,n,u,c,t),s._hasChildren){const r=s,i=r.backwards,o=c?n:r._iterationTime,a=fn();let l=0,f=!0;if(!c&&r._currentIteration!==e){const d=r.iterationDuration;Ne(r,h=>{if(!i)!h.completed&&!h.backwards&&h._currentTime<h.iterationDuration&&Pn(h,d,u,1,rt.FORCE),h.began=!1,h.completed=!1;else{const p=h.duration,m=h._offset+h._delay,g=m+p;!u&&p<=Le&&(!m||g===d)&&h.onComplete(h)}}),u||r.onLoop(r)}Ne(r,d=>{const h=Pe((o-d._offset)*d._speed,12),p=d._fps<r._fps?d.requestTick(a):t;l+=Pn(d,h,u,c,p),!d.completed&&f&&(f=!1)},i),!u&&l&&r.onRender(r),f&&r._currentTime>=r.duration&&(r.paused=!0,r.completed||(r.completed=!0,u||(r.onComplete(r),r._resolve(r))))}},Nt={animation:null,update:nt},Vi=s=>{let n=Nt.animation;return n||(n={duration:Le,computeDeltaTime:nt,_offset:0,_delay:0,_head:null,_tail:null},Nt.animation=n,Nt.update=()=>{s.forEach(u=>{for(let c in u){const t=u[c],e=t._head;if(e){const r=e._valueType,i=r===Se.COMPLEX||r===Se.COLOR?Je(e._fromNumbers):null;let o=e._fromNumber,a=t._tail;for(;a&&a!==e;){if(i)for(let l=0,f=a._numbers.length;l<f;l++)i[l]+=a._numbers[l];else o+=a._number;a=a._prevAdd}e._toNumber=o,e._toNumbers=i}}}),Pn(n,1,1,0,rt.FORCE)}),n},sa=dt?requestAnimationFrame:setImmediate,Xi=dt?cancelAnimationFrame:clearImmediate;class Hi extends ia{constructor(n){super(n),this.useDefaultMainLoop=!0,this.pauseOnDocumentHidden=!0,this.defaults=$o,this.paused=!!(dt&&zt.hidden),this.reqId=null}update(){const n=this._currentTime=fn();if(this.requestTick(n)){this.computeDeltaTime(n);const u=this._speed,c=this._fps;let t=this._head;for(;t;){const e=t._next;t.paused?(an(this,t),this._hasChildren=!!this._tail,t._running=!1,t.completed&&!t._cancelled&&t.cancel()):Rt(t,(n-t._startTime)*t._speed*u,0,0,t._fps<c?t.requestTick(n):rt.AUTO),t=e}Nt.update()}}wake(){return this.useDefaultMainLoop&&!this.reqId&&!this.paused&&(this.reqId=sa(la)),this}pause(){return this.paused=!0,Yi()}resume(){if(this.paused)return this.paused=!1,Ne(this,n=>n.resetTime()),this.wake()}get speed(){return this._speed*(ze.timeScale===1?1:Wt)}set speed(n){this._speed=n*ze.timeScale,Ne(this,u=>u.speed=u._speed)}get timeUnit(){return ze.timeScale===1?"ms":"s"}set timeUnit(n){const c=n==="s",t=c?.001:1;if(ze.timeScale!==t){ze.timeScale=t,ze.tickThreshold=200*t;const e=c?.001:Wt;this.defaults.duration*=e,this._speed*=e}}get precision(){return ze.precision}set precision(n){ze.precision=n}}const Ve=(()=>{const s=new Hi(fn());return dt&&(ea.engine=s,zt.addEventListener("visibilitychange",()=>{s.pauseOnDocumentHidden&&(zt.hidden?s.pause():s.resume())})),s})(),la=()=>{Ve._head?(Ve.reqId=sa(la),Ve.update()):Ve.reqId=0},Yi=()=>(Xi(Ve.reqId),Ve.reqId=0,Ve),Ji=(s,n,u)=>{const c=s.style.transform;let t;if(c){const e=s[Vn];let r;for(;r=Li.exec(c);){const i=r[1],o=r[2].slice(1,-1);e[i]=o,i===n&&(t=o,u&&(u[n]=o))}}return c&&!Me(t)?t:Bt(n,"scale")?"1":Bt(n,"rotate")||Bt(n,"skew")?"0deg":"0px"};function mo(s){const n=Xn(s)?ze.root.querySelectorAll(s):s;if(n instanceof NodeList||n instanceof HTMLCollection)return n}function Ki(s){if(mr(s))return[];if(dn(s)){const u=s.flat(1/0),c=[];for(let t=0,e=u.length;t<e;t++){const r=u[t];if(!mr(r)){const i=mo(r);if(i)for(let o=0,a=i.length;o<a;o++){const l=i[o];if(!mr(l)){let f=!1;for(let d=0,h=c.length;d<h;d++)if(c[d]===l){f=!0;break}f||c.push(l)}}else{let o=!1;for(let a=0,l=c.length;a<l;a++)if(c[a]===r){o=!0;break}o||c.push(r)}}}return c}if(!dt)return[s];const n=mo(s);return n?Array.from(n):[s]}function Qi(s){const n=Ki(s),u=n.length;if(u)for(let c=0;c<u;c++){const t=n[c];if(!t[fo]){t[fo]=!0;const e=ta(t);(t.nodeType||e)&&(t[Ir]=!0,t[Qo]=e,t[Vn]={})}}return n}const Zi=["opacity","rotate","overflow","color"],qi=(s,n)=>{if(Zi.includes(n))return!1;if(s.getAttribute(n)||n in s){if(n==="scale"){const u=s.parentNode;return u&&u.tagName==="filter"}return!0}},$i=s=>{const n=ki.exec(s)||Ai.exec(s),u=Me(n[4])?1:+n[4];return[+n[1],+n[2],+n[3],u]},es=s=>{const n=s.length,u=n===4||n===5;return[+("0x"+s[1]+s[u?1:2]),+("0x"+s[u?2:3]+s[u?2:4]),+("0x"+s[u?3:5]+s[u?3:6]),n===5||n===9?+(+("0x"+s[u?4:7]+s[u?4:8])/255).toFixed(3):1]},gr=(s,n,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<1/6?s+(n-s)*6*u:u<1/2?n:u<2/3?s+(n-s)*(2/3-u)*6:s),ts=s=>{const n=Di.exec(s)||Ei.exec(s),u=+n[1]/360,c=+n[2]/100,t=+n[3]/100,e=Me(n[4])?1:+n[4];let r,i,o;if(c===0)r=i=o=t;else{const a=t<.5?t*(1+c):t+c-t*c,l=2*t-a;r=Pe(gr(l,a,u+1/3)*255,0),i=Pe(gr(l,a,u)*255,0),o=Pe(gr(l,a,u-1/3)*255,0)}return[r,i,o,e]},ns=s=>ra(s)?$i(s):na(s)?es(s):oa(s)?ts(s):[0,0,0,1],Ke=(s,n)=>Me(s)?n:s,_t=(s,n,u,c,t)=>{if(jn(s)){const e=()=>{const r=s(n,u,c);return isNaN(+r)?r||0:+r};return t&&(t.func=e),e()}else return s},ua=(s,n)=>s[Ir]?s[Qo]&&qi(s,n)?Oe.ATTRIBUTE:Rr.includes(n)||pn.get(n)?Oe.TRANSFORM:Bt(n,"--")?Oe.CSS_VAR:n in s.style?Oe.CSS:n in s?Oe.OBJECT:Oe.ATTRIBUTE:Oe.OBJECT,go=(s,n,u)=>{const c=s.style[n];c&&u&&(u[n]=c);const t=c||getComputedStyle(s[Ui]||s).getPropertyValue(n);return t==="auto"?"0":t},nn=(s,n,u,c)=>{const t=Me(u)?ua(s,n):u;return t===Oe.OBJECT?s[n]||0:t===Oe.ATTRIBUTE?s.getAttribute(n):t===Oe.TRANSFORM?Ji(s,n,c):t===Oe.CSS_VAR?go(s,n,c).trimStart():go(s,n,c)},yo=(s,n,u)=>u==="-"?s-n:u==="+"?s+n:s*n,Or=()=>({t:Se.NUMBER,n:0,u:null,o:null,d:null,s:null}),ct=(s,n)=>{if(n.t=Se.NUMBER,n.n=0,n.u=null,n.o=null,n.d=null,n.s=null,!s)return n;const u=+s;if(isNaN(u)){let c=s;c[1]==="="&&(n.o=c[0],c=c.slice(2));const t=c.includes(" ")?!1:Fi.exec(c);if(t)return n.t=Se.UNIT,n.n=+t[1],n.u=t[2],n;if(n.o)return n.n=+c,n;if(Pi(c))return n.t=Se.COLOR,n.d=ns(c),n;{const e=c.match(ho);return n.t=Se.COMPLEX,n.d=e?e.map(Number):[],n.s=c.split(ho)||[],n}}else return n.n=u,n},_o=(s,n)=>(n.t=s._valueType,n.n=s._toNumber,n.u=s._unit,n.o=null,n.d=Je(s._toNumbers),n.s=Je(s._strings),n),St=Or(),zn={_rep:new WeakMap,_add:new Map},Br=(s,n,u="_rep")=>{const c=zn[u];let t=c.get(s);return t||(t={},c.set(s,t)),t[n]?t[n]:t[n]={_head:null,_tail:null}},rs=(s,n)=>s._isOverridden||s._absoluteStartTime>n._absoluteStartTime,On=s=>{s._isOverlapped=1,s._isOverridden=1,s._changeDuration=Le,s._currentTime=Le},ca=(s,n)=>{const u=s._composition;if(u===qe.replace){const c=s._absoluteStartTime;Ot(n,s,rs,"_prevRep","_nextRep");const t=s._prevRep;if(t){const e=t.parent,r=t._absoluteStartTime+t._changeDuration;if(s.parent.id!==e.id&&e.iterationCount>1&&r+(e.duration-e.iterationDuration)>c){On(t);let a=t._prevRep;for(;a&&a.parent.id===e.id;)On(a),a=a._prevRep}const i=c-s._delay;if(r>i){const a=t._startTime,l=r-(a+t._updateDuration);t._changeDuration=i-l-a,t._currentTime=t._changeDuration,t._isOverlapped=1,t._changeDuration<Le&&On(t)}let o=!0;if(Ne(e,a=>{a._isOverlapped||(o=!1)}),o){const a=e.parent;if(a){let l=!0;Ne(a,f=>{f!==e&&Ne(f,d=>{d._isOverlapped||(l=!1)})}),l&&a.cancel()}else e.cancel()}}}else if(u===qe.blend){const c=Br(s.target,s.property,"_add"),t=Vi(zn._add);let e=c._head;e||(e={...s},e._composition=qe.replace,e._updateDuration=Le,e._startTime=0,e._numbers=Je(s._fromNumbers),e._number=0,e._next=null,e._prev=null,Ot(c,e),Ot(t,e));const r=s._toNumber;if(s._fromNumber=e._fromNumber-r,s._toNumber=0,s._numbers=Je(s._fromNumbers),s._number=0,e._fromNumber=r,s._toNumbers){const i=Je(s._toNumbers);i&&i.forEach((o,a)=>{s._fromNumbers[a]=e._fromNumbers[a]-o,s._toNumbers[a]=0}),e._fromNumbers=i}Ot(c,s,null,"_prevAdd","_nextAdd")}return s},os=s=>{const n=s._composition;if(n!==qe.none){const u=s.target,c=s.property,r=zn._rep.get(u)[c];if(an(r,s,"_prevRep","_nextRep"),n===qe.blend){const i=zn._add,o=i.get(u);if(!o)return;const a=o[c],l=Nt.animation;an(a,s,"_prevAdd","_nextAdd");const f=a._head;if(f&&f===a._tail){an(a,f,"_prevAdd","_nextAdd"),an(l,f);let d=!0;for(let h in o)if(o[h]._head){d=!1;break}d&&i.delete(u)}}}return s},bo=s=>(s.paused=!0,s.began=!1,s.completed=!1,s),Sr=s=>(s._cancelled&&(s._hasChildren?Ne(s,Sr):Ne(s,n=>{n._composition!==qe.none&&ca(n,Br(n.target,n.property))}),s._cancelled=0),s);let as=0;class is extends ia{constructor(n={},u=null,c=0){super(0);const{id:t,delay:e,duration:r,reversed:i,alternate:o,loop:a,loopDelay:l,autoplay:f,frameRate:d,playbackRate:h,onComplete:p,onLoop:m,onPause:g,onBegin:P,onBeforeUpdate:D,onUpdate:C}=n,b=u?0:Ve._elapsedTime,S=u?u.defaults:ze.defaults,R=jn(e)||Me(e)?S.delay:+e,k=jn(r)||Me(r)?1/0:+r,F=Ke(a,S.loop),z=Ke(l,S.loopDelay),B=F===!0||F===1/0||F<0?1/0:F+1;let te=0;if(u)te=c;else{let y=fn();Ve.paused&&(Ve.requestTick(y),y=Ve._elapsedTime),te=y-Ve._startTime}this.id=Me(t)?++as:t,this.parent=u,this.duration=Rn((k+z)*B-z)||Le,this.backwards=!1,this.paused=!0,this.began=!1,this.completed=!1,this.onBegin=P||S.onBegin,this.onBeforeUpdate=D||S.onBeforeUpdate,this.onUpdate=C||S.onUpdate,this.onLoop=m||S.onLoop,this.onPause=g||S.onPause,this.onComplete=p||S.onComplete,this.iterationDuration=k,this.iterationCount=B,this._autoplay=u?!1:Ke(f,S.autoplay),this._offset=te,this._delay=R,this._loopDelay=z,this._iterationTime=0,this._currentIteration=0,this._resolve=nt,this._running=!1,this._reversed=+Ke(i,S.reversed),this._reverse=this._reversed,this._cancelled=0,this._alternate=Ke(o,S.alternate),this._prev=null,this._next=null,this._elapsedTime=b,this._startTime=b,this._lastTime=b,this._fps=Ke(d,S.frameRate),this._speed=Ke(h,S.playbackRate)}get cancelled(){return!!this._cancelled}set cancelled(n){n?this.cancel():this.reset(1).play()}get currentTime(){return Xe(Pe(this._currentTime,ze.precision),-this._delay,this.duration)}set currentTime(n){const u=this.paused;this.pause().seek(+n),u||this.resume()}get iterationCurrentTime(){return Pe(this._iterationTime,ze.precision)}set iterationCurrentTime(n){this.currentTime=this.iterationDuration*this._currentIteration+n}get progress(){return Xe(Pe(this._currentTime/this.duration,5),0,1)}set progress(n){this.currentTime=this.duration*n}get iterationProgress(){return Xe(Pe(this._iterationTime/this.iterationDuration,5),0,1)}set iterationProgress(n){const u=this.iterationDuration;this.currentTime=u*this._currentIteration+u*n}get currentIteration(){return this._currentIteration}set currentIteration(n){this.currentTime=this.iterationDuration*Xe(+n,0,this.iterationCount-1)}get reversed(){return!!this._reversed}set reversed(n){n?this.reverse():this.play()}get speed(){return super.speed}set speed(n){super.speed=n,this.resetTime()}reset(n=0){return Sr(this),this._reversed&&!this._reverse&&(this.reversed=!1),this._iterationTime=this.iterationDuration,Rt(this,0,1,n,rt.FORCE),bo(this),this._hasChildren&&Ne(this,bo),this}init(n=0){this.fps=this._fps,this.speed=this._speed,!n&&this._hasChildren&&Rt(this,this.duration,1,n,rt.FORCE),this.reset(n);const u=this._autoplay;return u===!0?this.resume():u&&!Me(u.linked)&&u.link(this),this}resetTime(){const n=1/(this._speed*Ve._speed);return this._startTime=fn()-(this._currentTime+this._delay)*n,this}pause(){return this.paused?this:(this.paused=!0,this.onPause(this),this)}resume(){return this.paused?(this.paused=!1,this.duration<=Le&&!this._hasChildren?Rt(this,Le,0,0,rt.FORCE):(this._running||(Ot(Ve,this),Ve._hasChildren=!0,this._running=!0),this.resetTime(),this._startTime-=12,Ve.wake()),this):this}restart(){return this.reset(0).resume()}seek(n,u=0,c=0){Sr(this),this.completed=!1;const t=this.paused;return this.paused=!0,Rt(this,n+this._delay,~~u,~~c,rt.AUTO),t?this:this.resume()}alternate(){const n=this._reversed,u=this.iterationCount,c=this.iterationDuration,t=u===1/0?aa(Zo/c):u;return this._reversed=+(this._alternate&&!(t%2)?n:!n),u===1/0?this.iterationProgress=this._reversed?1-this.iterationProgress:this.iterationProgress:this.seek(c*t-this._currentTime),this.resetTime(),this}play(){return this._reversed&&this.alternate(),this.resume()}reverse(){return this._reversed||this.alternate(),this.resume()}cancel(){return this._hasChildren?Ne(this,n=>n.cancel(),!0):Ne(this,os),this._cancelled=1,this.pause()}stretch(n){const u=this.duration;if(u===Gt(n))return this;const c=n/u,t=n<=Le;return this.duration=t?Le:Gt(Rn(Pe(u*c,12))),this.iterationDuration=t?Le:Gt(Rn(Pe(this.iterationDuration*c,12))),this._offset*=c,this._delay*=c,this._loopDelay*=c,this}revert(){Rt(this,0,1,0,rt.AUTO);const n=this._autoplay;return n&&n.linked&&n.linked===this&&n.revert(),this.cancel()}complete(){return this.seek(this.duration).cancel()}then(n=nt){const u=this.then,c=()=>{this.then=null,n(this),this.then=u,this._resolve=nt};return new Promise(t=>(this._resolve=()=>t(c()),this.completed&&this._resolve(),this))}}const Vt=s=>s,fa=(s,n,u)=>(((1-3*u+3*n)*s+(3*u-6*n))*s+3*n)*s,ss=(s,n,u)=>{let c=0,t=1,e,r,i=0;do r=c+(t-c)/2,e=fa(r,n,u)-s,e>0?t=r:c=r;while(Ni(e)>1e-7&&++i<100);return r},ls=(s=.5,n=0,u=.5,c=1)=>s===n&&u===c?Vt:t=>t===0||t===1?t:fa(ss(t,s,u),n,c),us=(s=10,n)=>{const u=n?ji:aa;return c=>u(Xe(c,0,1)*s)*(1/s)},da=(...s)=>{const n=s.length;if(!n)return Vt;const u=n-1,c=s[0],t=s[u],e=[0],r=[An(c)];for(let i=1;i<u;i++){const o=s[i],a=Xn(o)?o.trim().split(" "):[o],l=a[0],f=a[1];e.push(Me(f)?i/u:An(f)/100),r.push(An(l))}return r.push(An(t)),e.push(1),function(o){for(let a=1,l=e.length;a<l;a++){const f=e[a];if(o<=f){const d=e[a-1],h=r[a-1];return h+(r[a]-h)*(o-d)/(f-d)}}return r[r.length-1]}},cs=(s=10,n=1)=>{const u=[0],c=s-1;for(let t=1;t<c;t++){const e=u[t-1],r=t/c,i=(t+1)/c,o=r+(i-r)*Math.random(),a=r*(1-n)+o*n;u.push(Xe(a,e,1))}return u.push(1),da(...u)},fs=Pr/2,To=Pr*2,rn=(s=1.68)=>n=>It(n,+s),xo={[Ct]:rn,Quad:rn(2),Cubic:rn(3),Quart:rn(4),Quint:rn(5),Sine:s=>1-Gi(s*fs),Circ:s=>1-Oi(1-s*s),Expo:s=>s?It(2,10*s-10):0,Bounce:s=>{let n,u=4;for(;s<((n=It(2,--u))-1)/11;);return 1/It(4,3-u)-7.5625*It((n*3-2)/22-s,2)},Back:(s=1.70158)=>n=>(+s+1)*n*n*n-+s*n*n,Elastic:(s=1,n=.3)=>{const u=Xe(+s,1,10),c=Xe(+n,Le,2),t=c/To*zi(1/u),e=To/c;return r=>r===0||r===1?r:-u*It(2,-10*(1-r))*Bi((1-r-t)*e)}},Ur={in:s=>n=>s(n),out:s=>n=>1-s(1-n),inOut:s=>n=>n<.5?s(n*2)/2:1-s(n*-2+2)/2,outIn:s=>n=>n<.5?(1-s(1-n*2))/2:(s(n*2-1)+1)/2},ds=(s,n,u)=>{if(u[s])return u[s];if(s.indexOf("(")<=-1){const t=Ur[s]||s.includes("Back")||s.includes("Elastic")?n[s]():n[s];return t?u[s]=t:Vt}else{const c=s.slice(0,-1).split("("),t=n[c[0]];return t?u[s]=t(...c[1].split(",")):Vt}},hs=(()=>{const s={linear:da,irregular:cs,steps:us,cubicBezier:ls};for(let n in Ur)for(let u in xo){const c=xo[u],t=Ur[n];s[n+u]=u===Ct||u==="Back"||u==="Elastic"?(e,r)=>t(c(e,r)):t(c)}return s})(),ps={linear:Vt},wo=s=>jn(s)?s:Xn(s)?ds(s,hs,ps):Vt,So={},vs=(s,n,u)=>{if(u===Oe.TRANSFORM){const c=pn.get(s);return c||s}else if(u===Oe.CSS||u===Oe.ATTRIBUTE&&ta(n)&&s in n.style){const c=So[s];if(c)return c;{const t=s&&Ii(s);return So[s]=t,t}}else return s},yr={deg:1,rad:180/Pr,turn:360},Uo={},ms=(s,n,u,c=!1)=>{const t=n.u,e=n.n;if(n.t===Se.UNIT&&t===u)return n;const r=e+t+u,i=Uo[r];if(!Me(i)&&!c)n.n=i;else{let o;if(t in yr)o=e*yr[t]/yr[u];else{const l=s.cloneNode(),f=s.parentNode,d=f&&f!==zt?f:zt.body;d.appendChild(l);const h=l.style;h.width=100+t;const p=l.offsetWidth||100;h.width=100+u;const m=l.offsetWidth||100,g=p/m;d.removeChild(l),o=g*e}n.n=o,Uo[r]=o}return n.t,Se.UNIT,n.u=u,n},ha=s=>{if(s._hasChildren)Ne(s,ha,!0);else{const n=s;n.pause(),Ne(n,u=>{const c=u.property,t=u.target;if(t[Ir]){const e=t.style,r=n._inlineStyles[c];if(u._tweenType===Oe.TRANSFORM){const i=t[Vn];if(Me(r)||r===Ct?delete i[c]:i[c]=r,u._renderTransforms)if(!Object.keys(i).length)e.removeProperty("transform");else{let o=Ct;for(let a in i)o+=qo[a]+i[a]+") ";e.transform=o}}else Me(r)||r===Ct?e.removeProperty(c):e[c]=r;n._tail===u&&n.targets.forEach(i=>{i.getAttribute&&i.getAttribute("style")===Ct&&i.removeAttribute("style")})}})}return s},Te=Or(),we=Or(),Dn={func:null},En=[null],Mt=[null,null],Fn={to:null};let gs=0,bt,ft;const ys=(s,n)=>{const u={};if(dn(s)){const c=[].concat(...s.map(t=>Object.keys(t))).filter(In);for(let t=0,e=c.length;t<e;t++){const r=c[t],i=s.map(o=>{const a={};for(let l in o){const f=o[l];In(l)?l===r&&(a.to=f):a[l]=f}return a});u[r]=i}}else{const c=Ke(n.duration,ze.defaults.duration);Object.keys(s).map(e=>({o:parseFloat(e)/100,p:s[e]})).sort((e,r)=>e.o-r.o).forEach(e=>{const r=e.o,i=e.p;for(let o in i)if(In(o)){let a=u[o];a||(a=u[o]=[]);const l=r*c;let f=a.length,d=a[f-1];const h={to:i[o]};let p=0;for(let m=0;m<f;m++)p+=a[m].duration;f===1&&(h.from=d.to),i.ease&&(h.ease=i.ease),h.duration=l-(f?p:0),a.push(h)}return e});for(let e in u){const r=u[e];let i;for(let o=0,a=r.length;o<a;o++){const l=r[o],f=l.ease;l.ease=i||void 0,i=f}r[0].duration||r.shift()}}return u};class _s extends is{constructor(n,u,c,t,e=!1,r=0,i=0){super(u,c,t);const o=Qi(n),a=o.length,l=u.keyframes,f=l?Wi(ys(l,u),u):u,{delay:d,duration:h,ease:p,playbackEase:m,modifier:g,composition:P,onRender:D}=f,C=c?c.defaults:ze.defaults,b=Ke(m,C.playbackEase),S=b?wo(b):null,R=!Me(p)&&!Me(p.ease),k=R?p.ease:Ke(p,S?"linear":C.ease),F=R?p.duration:Ke(h,C.duration),z=Ke(d,C.delay),B=g||C.modifier,te=Me(P)&&a>=Wt?qe.none:Me(P)?C.composition:P,y={},O=this._offset+(c?c._offset:0);let A=NaN,W=NaN,X=0,oe=0;for(let ae=0;ae<a;ae++){const _=o[ae],M=r||ae,v=i||a;let T=NaN,E=NaN;for(let L in f)if(In(L)){const x=ua(_,L),N=vs(L,_,x);let I=f[L];const j=dn(I);if(e&&!j&&(Mt[0]=I,Mt[1]=I,I=Mt),j){const J=I.length,V=!vr(I[0]);J===2&&V?(Fn.to=I,En[0]=Fn,bt=En):J>2&&V?(bt=[],I.forEach((Y,K)=>{K?K===1?(Mt[1]=Y,bt.push(Mt)):bt.push(Y):Mt[0]=Y})):bt=I}else En[0]=I,bt=En;let Z=null,ne=null,U=NaN,w=0,Q=0;for(let J=bt.length;Q<J;Q++){const V=bt[Q];vr(V)?ft=V:(Fn.to=V,ft=Fn),Dn.func=null;const Y=_t(ft.to,_,M,v,Dn);let K;vr(Y)&&!Me(Y.to)?(ft=Y,K=Y.to):K=Y;const H=_t(ft.from,_,M,v),re=ft.ease,$=!Me(re)&&!Me(re.ease),G=$?re.ease:re||k,se=$?re.duration:_t(Ke(ft.duration,J>1?_t(F,_,M,v)/J:F),_,M,v),ee=_t(Ke(ft.delay,Q?0:z),_,M,v),ie=_t(Ke(ft.composition,te),_,M,v),q=Ri(ie)?ie:qe[ie],xe=ft.modifier||B,le=!Me(H),ue=!Me(K),fe=dn(K),ye=fe||le&&ue,Ue=ne?w+ee:ee,De=O+Ue;!oe&&(le||fe)&&(oe=1);let he=ne;if(q!==qe.none){Z||(Z=Br(_,N));let pe=Z._head;for(;pe&&!pe._isOverridden&&pe._absoluteStartTime<=De;)if(he=pe,pe=pe._nextRep,pe&&pe._absoluteStartTime>=De)for(;pe;)On(pe),pe=pe._nextRep}if(ye?(ct(fe?_t(K[0],_,M,v):H,Te),ct(fe?_t(K[1],_,M,v,Dn):K,we),Te.t===Se.NUMBER&&(he?he._valueType===Se.UNIT&&(Te.t=Se.UNIT,Te.u=he._unit):(ct(nn(_,N,x,y),St),St.t===Se.UNIT&&(Te.t=Se.UNIT,Te.u=St.u)))):(ue?ct(K,we):ne?_o(ne,we):ct(c&&he&&he.parent.parent===c?he._value:nn(_,N,x,y),we),le?ct(H,Te):ne?_o(ne,Te):ct(c&&he&&he.parent.parent===c?he._value:nn(_,N,x,y),Te)),Te.o&&(Te.n=yo(he?he._toNumber:ct(nn(_,N,x,y),St).n,Te.n,Te.o)),we.o&&(we.n=yo(Te.n,we.n,we.o)),Te.t!==we.t){if(Te.t===Se.COMPLEX||we.t===Se.COMPLEX){const pe=Te.t===Se.COMPLEX?Te:we,be=Te.t===Se.COMPLEX?we:Te;be.t=Se.COMPLEX,be.s=Je(pe.s),be.d=pe.d.map(()=>be.n)}else if(Te.t===Se.UNIT||we.t===Se.UNIT){const pe=Te.t===Se.UNIT?Te:we,be=Te.t===Se.UNIT?we:Te;be.t=Se.UNIT,be.u=pe.u}else if(Te.t===Se.COLOR||we.t===Se.COLOR){const pe=Te.t===Se.COLOR?Te:we,be=Te.t===Se.COLOR?we:Te;be.t=Se.COLOR,be.s=pe.s,be.d=[0,0,0,1]}}if(Te.u!==we.u){let pe=we.u?Te:we;pe=ms(_,pe,we.u?we.u:Te.u,!1)}if(we.d&&Te.d&&we.d.length!==Te.d.length){const pe=Te.d.length>we.d.length?Te:we,be=pe===Te?we:Te;be.d=pe.d.map((Be,Ce)=>Me(be.d[Ce])?0:be.d[Ce]),be.s=Je(pe.s)}const _e=Pe(+se||Le,12),ce={parent:this,id:gs++,property:N,target:_,_value:null,_func:Dn.func,_ease:wo(G),_fromNumbers:Je(Te.d),_toNumbers:Je(we.d),_strings:Je(we.s),_fromNumber:Te.n,_toNumber:we.n,_numbers:Je(Te.d),_number:Te.n,_unit:we.u,_modifier:xe,_currentTime:0,_startTime:Ue,_delay:+ee,_updateDuration:_e,_changeDuration:_e,_absoluteStartTime:De,_tweenType:x,_valueType:we.t,_composition:q,_isOverlapped:0,_isOverridden:0,_renderTransforms:0,_prevRep:null,_nextRep:null,_prevAdd:null,_nextAdd:null,_prev:null,_next:null};q!==qe.none&&ca(ce,Z),isNaN(U)&&(U=ce._startTime),w=Pe(Ue+_e,12),ne=ce,X++,Ot(this,ce)}(isNaN(W)||U<W)&&(W=U),(isNaN(A)||w>A)&&(A=w),x===Oe.TRANSFORM&&(T=X-Q,E=X)}if(!isNaN(T)){let L=0;Ne(this,x=>{L>=T&&L<E&&(x._renderTransforms=1,x._composition===qe.blend&&Ne(Nt.animation,N=>{N.id===x.id&&(N._renderTransforms=1)})),L++})}}a||console.warn("No target found. Make sure the element you're trying to animate is accessible before creating your animation."),W?(Ne(this,ae=>{ae._startTime-ae._delay||(ae._delay-=W),ae._startTime-=W}),A-=W):W=0,A||(A=Le,this.iterationCount=0),this.targets=o,this.duration=A===Le?Le:Rn((A+this._loopDelay)*this.iterationCount-this._loopDelay)||Le,this.onRender=D||C.onRender,this._ease=S,this._delay=W,this.iterationDuration=A,this._inlineStyles=y,!this._autoplay&&oe&&this.onRender(this)}stretch(n){const u=this.duration;if(u===Gt(n))return this;const c=n/u;return Ne(this,t=>{t._updateDuration=Gt(Pe(t._updateDuration*c,12)),t._changeDuration=Gt(Pe(t._changeDuration*c,12)),t._currentTime*=c,t._startTime*=c,t._absoluteStartTime*=c}),super.stretch(n)}refresh(){return Ne(this,n=>{const u=nn(n.target,n.property,n._tweenType);ct(u,St),n._fromNumbers=Je(St.d),n._fromNumber=St.n,n._func&&(ct(n._func(),we),n._toNumbers=Je(we.d),n._strings=Je(we.s),n._toNumber=we.n)}),this}revert(){return super.revert(),ha(this)}then(n){return super.then(n)}}const Co=(s,n)=>new _s(s,n,null,0,!1).init(),bs=["x","y","z"];[...bs,...Rr.filter(s=>["X","Y","Z"].some(n=>s.endsWith(n)))];dt&&(Me(CSS)||Object.hasOwnProperty.call(CSS,"registerProperty"));function Ts(){var s=Object.create(null);function n(t,e){var r=t.id,i=t.name,o=t.dependencies;o===void 0&&(o=[]);var a=t.init;a===void 0&&(a=function(){});var l=t.getTransferables;if(l===void 0&&(l=null),!s[r])try{o=o.map(function(d){return d&&d.isWorkerModule&&(n(d,function(h){if(h instanceof Error)throw h}),d=s[d.id].value),d}),a=c("<"+i+">.init",a),l&&(l=c("<"+i+">.getTransferables",l));var f=null;typeof a=="function"?f=a.apply(void 0,o):console.error("worker module init function failed to rehydrate"),s[r]={id:r,value:f,getTransferables:l},e(f)}catch(d){d&&d.noLog||console.error(d),e(d)}}function u(t,e){var r,i=t.id,o=t.args;(!s[i]||typeof s[i].value!="function")&&e(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=s[i]).value.apply(r,o);a&&typeof a.then=="function"?a.then(l,function(f){return e(f instanceof Error?f:new Error(""+f))}):l(a)}catch(f){e(f)}function l(f){try{var d=s[i].getTransferables&&s[i].getTransferables(f);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),e(f,d)}catch(h){console.error(h),e(h)}}}function c(t,e){var r=void 0;self.troikaDefine=function(o){return r=o};var i=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(i)}catch(o){console.error(o)}return URL.revokeObjectURL(i),delete self.troikaDefine,r}self.addEventListener("message",function(t){var e=t.data,r=e.messageId,i=e.action,o=e.data;try{i==="registerModule"&&n(o,function(a){a instanceof Error?postMessage({messageId:r,success:!1,error:a.message}):postMessage({messageId:r,success:!0,result:{isCallable:typeof a=="function"}})}),i==="callModule"&&u(o,function(a,l){a instanceof Error?postMessage({messageId:r,success:!1,error:a.message}):postMessage({messageId:r,success:!0,result:a},l||void 0)})}catch(a){postMessage({messageId:r,success:!1,error:a.stack})}})}function xs(s){var n=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return n._getInitResult().then(function(t){if(typeof t=="function")return t.apply(void 0,u);throw new Error("Worker module function was called but `init` did not return a callable function")})};return n._getInitResult=function(){var u=s.dependencies,c=s.init;u=Array.isArray(u)?u.map(function(e){return e&&(e=e.onMainThread||e,e._getInitResult&&(e=e._getInitResult())),e}):[];var t=Promise.all(u).then(function(e){return c.apply(null,e)});return n._getInitResult=function(){return t},t},n}var pa=function(){var s=!1;if(typeof window<"u"&&typeof window.document<"u")try{var n=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));n.terminate(),s=!0}catch(u){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+u.message+"]")}return pa=function(){return s},s},ws=0,Ss=0,_r=!1,sn=Object.create(null),ln=Object.create(null),Cr=Object.create(null);function Xt(s){if((!s||typeof s.init!="function")&&!_r)throw new Error("requires `options.init` function");var n=s.dependencies,u=s.init,c=s.getTransferables,t=s.workerId,e=xs(s);t==null&&(t="#default");var r="workerModule"+ ++ws,i=s.name||r,o=null;n=n&&n.map(function(l){return typeof l=="function"&&!l.workerModuleData&&(_r=!0,l=Xt({workerId:t,name:"<"+i+"> function dependency: "+l.name,init:`function(){return (
`+Bn(l)+`
)}`}),_r=!1),l&&l.workerModuleData&&(l=l.workerModuleData),l});function a(){for(var l=[],f=arguments.length;f--;)l[f]=arguments[f];if(!pa())return e.apply(void 0,l);if(!o){o=ko(t,"registerModule",a.workerModuleData);var d=function(){o=null,ln[t].delete(d)};(ln[t]||(ln[t]=new Set)).add(d)}return o.then(function(h){var p=h.isCallable;if(p)return ko(t,"callModule",{id:r,args:l});throw new Error("Worker module function was called but `init` did not return a callable function")})}return a.workerModuleData={isWorkerModule:!0,id:r,name:i,dependencies:n,init:Bn(u),getTransferables:c&&Bn(c)},a.onMainThread=e,a}function Us(s){ln[s]&&ln[s].forEach(function(n){n()}),sn[s]&&(sn[s].terminate(),delete sn[s])}function Bn(s){var n=s.toString();return!/^function/.test(n)&&/^\w+\s*\(/.test(n)&&(n="function "+n),n}function Cs(s){var n=sn[s];if(!n){var u=Bn(Ts);n=sn[s]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+s.replace(/\*/g,"")+` **/

;(`+u+")()"],{type:"application/javascript"}))),n.onmessage=function(c){var t=c.data,e=t.messageId,r=Cr[e];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete Cr[e],r(t)}}return n}function ko(s,n,u){return new Promise(function(c,t){var e=++Ss;Cr[e]=function(r){r.success?c(r.result):t(new Error("Error in worker "+n+" call: "+r.error))},Cs(s).postMessage({messageId:e,action:n,data:u})})}function va(){var s=function(n){function u(_,M,v,T,E,L,x,N){var I=1-x;N.x=I*I*_+2*I*x*v+x*x*E,N.y=I*I*M+2*I*x*T+x*x*L}function c(_,M,v,T,E,L,x,N,I,j){var Z=1-I;j.x=Z*Z*Z*_+3*Z*Z*I*v+3*Z*I*I*E+I*I*I*x,j.y=Z*Z*Z*M+3*Z*Z*I*T+3*Z*I*I*L+I*I*I*N}function t(_,M){for(var v=/([MLQCZ])([^MLQCZ]*)/g,T,E,L,x,N;T=v.exec(_);){var I=T[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(j){return parseFloat(j)});switch(T[1]){case"M":x=E=I[0],N=L=I[1];break;case"L":(I[0]!==x||I[1]!==N)&&M("L",x,N,x=I[0],N=I[1]);break;case"Q":{M("Q",x,N,x=I[2],N=I[3],I[0],I[1]);break}case"C":{M("C",x,N,x=I[4],N=I[5],I[0],I[1],I[2],I[3]);break}case"Z":(x!==E||N!==L)&&M("L",x,N,E,L);break}}}function e(_,M,v){v===void 0&&(v=16);var T={x:0,y:0};t(_,function(E,L,x,N,I,j,Z,ne,U){switch(E){case"L":M(L,x,N,I);break;case"Q":{for(var w=L,Q=x,J=1;J<v;J++)u(L,x,j,Z,N,I,J/(v-1),T),M(w,Q,T.x,T.y),w=T.x,Q=T.y;break}case"C":{for(var V=L,Y=x,K=1;K<v;K++)c(L,x,j,Z,ne,U,N,I,K/(v-1),T),M(V,Y,T.x,T.y),V=T.x,Y=T.y;break}}})}var r="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",i="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",o=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(_,M){var v=_.getContext?_.getContext("webgl",a):_,T=o.get(v);if(!T){let Z=function(V){var Y=L[V];if(!Y&&(Y=L[V]=v.getExtension(V),!Y))throw new Error(V+" not supported");return Y},ne=function(V,Y){var K=v.createShader(Y);return v.shaderSource(K,V),v.compileShader(K),K},U=function(V,Y,K,H){if(!x[V]){var re={},$={},G=v.createProgram();v.attachShader(G,ne(Y,v.VERTEX_SHADER)),v.attachShader(G,ne(K,v.FRAGMENT_SHADER)),v.linkProgram(G),x[V]={program:G,transaction:function(ee){v.useProgram(G),ee({setUniform:function(q,xe){for(var le=[],ue=arguments.length-2;ue-- >0;)le[ue]=arguments[ue+2];var fe=$[xe]||($[xe]=v.getUniformLocation(G,xe));v["uniform"+q].apply(v,[fe].concat(le))},setAttribute:function(q,xe,le,ue,fe){var ye=re[q];ye||(ye=re[q]={buf:v.createBuffer(),loc:v.getAttribLocation(G,q),data:null}),v.bindBuffer(v.ARRAY_BUFFER,ye.buf),v.vertexAttribPointer(ye.loc,xe,v.FLOAT,!1,0,0),v.enableVertexAttribArray(ye.loc),E?v.vertexAttribDivisor(ye.loc,ue):Z("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ye.loc,ue),fe!==ye.data&&(v.bufferData(v.ARRAY_BUFFER,fe,le),ye.data=fe)}})}}}x[V].transaction(H)},w=function(V,Y){I++;try{v.activeTexture(v.TEXTURE0+I);var K=N[V];K||(K=N[V]=v.createTexture(),v.bindTexture(v.TEXTURE_2D,K),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST)),v.bindTexture(v.TEXTURE_2D,K),Y(K,I)}finally{I--}},Q=function(V,Y,K){var H=v.createFramebuffer();j.push(H),v.bindFramebuffer(v.FRAMEBUFFER,H),v.activeTexture(v.TEXTURE0+Y),v.bindTexture(v.TEXTURE_2D,V),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,V,0);try{K(H)}finally{v.deleteFramebuffer(H),v.bindFramebuffer(v.FRAMEBUFFER,j[--j.length-1]||null)}},J=function(){L={},x={},N={},I=-1,j.length=0};var E=typeof WebGL2RenderingContext<"u"&&v instanceof WebGL2RenderingContext,L={},x={},N={},I=-1,j=[];v.canvas.addEventListener("webglcontextlost",function(V){J(),V.preventDefault()},!1),o.set(v,T={gl:v,isWebGL2:E,getExtension:Z,withProgram:U,withTexture:w,withTextureFramebuffer:Q,handleContextLoss:J})}M(T)}function f(_,M,v,T,E,L,x,N){x===void 0&&(x=15),N===void 0&&(N=null),l(_,function(I){var j=I.gl,Z=I.withProgram,ne=I.withTexture;ne("copy",function(U,w){j.texImage2D(j.TEXTURE_2D,0,j.RGBA,E,L,0,j.RGBA,j.UNSIGNED_BYTE,M),Z("copy",r,i,function(Q){var J=Q.setUniform,V=Q.setAttribute;V("aUV",2,j.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),J("1i","image",w),j.bindFramebuffer(j.FRAMEBUFFER,N||null),j.disable(j.BLEND),j.colorMask(x&8,x&4,x&2,x&1),j.viewport(v,T,E,L),j.scissor(v,T,E,L),j.drawArrays(j.TRIANGLES,0,3)})})})}function d(_,M,v){var T=_.width,E=_.height;l(_,function(L){var x=L.gl,N=new Uint8Array(T*E*4);x.readPixels(0,0,T,E,x.RGBA,x.UNSIGNED_BYTE,N),_.width=M,_.height=v,f(x,N,0,0,T,E)})}var h=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:f,resizeWebGLCanvasWithoutClearing:d});function p(_,M,v,T,E,L){L===void 0&&(L=1);var x=new Uint8Array(_*M),N=T[2]-T[0],I=T[3]-T[1],j=[];e(v,function(V,Y,K,H){j.push({x1:V,y1:Y,x2:K,y2:H,minX:Math.min(V,K),minY:Math.min(Y,H),maxX:Math.max(V,K),maxY:Math.max(Y,H)})}),j.sort(function(V,Y){return V.maxX-Y.maxX});for(var Z=0;Z<_;Z++)for(var ne=0;ne<M;ne++){var U=Q(T[0]+N*(Z+.5)/_,T[1]+I*(ne+.5)/M),w=Math.pow(1-Math.abs(U)/E,L)/2;U<0&&(w=1-w),w=Math.max(0,Math.min(255,Math.round(w*255))),x[ne*_+Z]=w}return x;function Q(V,Y){for(var K=1/0,H=1/0,re=j.length;re--;){var $=j[re];if($.maxX+H<=V)break;if(V+H>$.minX&&Y-H<$.maxY&&Y+H>$.minY){var G=P(V,Y,$.x1,$.y1,$.x2,$.y2);G<K&&(K=G,H=Math.sqrt(K))}}return J(V,Y)&&(H=-H),H}function J(V,Y){for(var K=0,H=j.length;H--;){var re=j[H];if(re.maxX<=V)break;var $=re.y1>Y!=re.y2>Y&&V<(re.x2-re.x1)*(Y-re.y1)/(re.y2-re.y1)+re.x1;$&&(K+=re.y1<re.y2?1:-1)}return K!==0}}function m(_,M,v,T,E,L,x,N,I,j){L===void 0&&(L=1),N===void 0&&(N=0),I===void 0&&(I=0),j===void 0&&(j=0),g(_,M,v,T,E,L,x,null,N,I,j)}function g(_,M,v,T,E,L,x,N,I,j,Z){L===void 0&&(L=1),I===void 0&&(I=0),j===void 0&&(j=0),Z===void 0&&(Z=0);for(var ne=p(_,M,v,T,E,L),U=new Uint8Array(ne.length*4),w=0;w<ne.length;w++)U[w*4+Z]=ne[w];f(x,U,I,j,_,M,1<<3-Z,N)}function P(_,M,v,T,E,L){var x=E-v,N=L-T,I=x*x+N*N,j=I?Math.max(0,Math.min(1,((_-v)*x+(M-T)*N)/I)):0,Z=_-(v+j*x),ne=M-(T+j*N);return Z*Z+ne*ne}var D=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:m,generateIntoFramebuffer:g}),C="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",b="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",S="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",R=new Float32Array([0,0,2,0,0,2]),k=null,F=!1,z={},B=new WeakMap;function te(_){if(!F&&!W(_))throw new Error("WebGL generation not supported")}function y(_,M,v,T,E,L,x){if(L===void 0&&(L=1),x===void 0&&(x=null),!x&&(x=k,!x)){var N=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!N)throw new Error("OffscreenCanvas or DOM canvas not supported");x=k=N.getContext("webgl",{depth:!1})}te(x);var I=new Uint8Array(_*M*4);l(x,function(U){var w=U.gl,Q=U.withTexture,J=U.withTextureFramebuffer;Q("readable",function(V,Y){w.texImage2D(w.TEXTURE_2D,0,w.RGBA,_,M,0,w.RGBA,w.UNSIGNED_BYTE,null),J(V,Y,function(K){A(_,M,v,T,E,L,w,K,0,0,0),w.readPixels(0,0,_,M,w.RGBA,w.UNSIGNED_BYTE,I)})})});for(var j=new Uint8Array(_*M),Z=0,ne=0;Z<I.length;Z+=4)j[ne++]=I[Z];return j}function O(_,M,v,T,E,L,x,N,I,j){L===void 0&&(L=1),N===void 0&&(N=0),I===void 0&&(I=0),j===void 0&&(j=0),A(_,M,v,T,E,L,x,null,N,I,j)}function A(_,M,v,T,E,L,x,N,I,j,Z){L===void 0&&(L=1),I===void 0&&(I=0),j===void 0&&(j=0),Z===void 0&&(Z=0),te(x);var ne=[];e(v,function(U,w,Q,J){ne.push(U,w,Q,J)}),ne=new Float32Array(ne),l(x,function(U){var w=U.gl,Q=U.isWebGL2,J=U.getExtension,V=U.withProgram,Y=U.withTexture,K=U.withTextureFramebuffer,H=U.handleContextLoss;if(Y("rawDistances",function(re,$){(_!==re._lastWidth||M!==re._lastHeight)&&w.texImage2D(w.TEXTURE_2D,0,w.RGBA,re._lastWidth=_,re._lastHeight=M,0,w.RGBA,w.UNSIGNED_BYTE,null),V("main",C,b,function(G){var se=G.setAttribute,ee=G.setUniform,ie=!Q&&J("ANGLE_instanced_arrays"),q=!Q&&J("EXT_blend_minmax");se("aUV",2,w.STATIC_DRAW,0,R),se("aLineSegment",4,w.DYNAMIC_DRAW,1,ne),ee.apply(void 0,["4f","uGlyphBounds"].concat(T)),ee("1f","uMaxDistance",E),ee("1f","uExponent",L),K(re,$,function(xe){w.enable(w.BLEND),w.colorMask(!0,!0,!0,!0),w.viewport(0,0,_,M),w.scissor(0,0,_,M),w.blendFunc(w.ONE,w.ONE),w.blendEquationSeparate(w.FUNC_ADD,Q?w.MAX:q.MAX_EXT),w.clear(w.COLOR_BUFFER_BIT),Q?w.drawArraysInstanced(w.TRIANGLES,0,3,ne.length/4):ie.drawArraysInstancedANGLE(w.TRIANGLES,0,3,ne.length/4)})}),V("post",r,S,function(G){G.setAttribute("aUV",2,w.STATIC_DRAW,0,R),G.setUniform("1i","tex",$),w.bindFramebuffer(w.FRAMEBUFFER,N),w.disable(w.BLEND),w.colorMask(Z===0,Z===1,Z===2,Z===3),w.viewport(I,j,_,M),w.scissor(I,j,_,M),w.drawArrays(w.TRIANGLES,0,3)})}),w.isContextLost())throw H(),new Error("webgl context lost")})}function W(_){var M=!_||_===k?z:_.canvas||_,v=B.get(M);if(v===void 0){F=!0;var T=null;try{var E=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],L=y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,_);v=L&&E.length===L.length&&L.every(function(x,N){return x===E[N]}),v||(T="bad trial run results",console.info(E,L))}catch(x){v=!1,T=x.message}T&&console.warn("WebGL SDF generation not supported:",T),F=!1,B.set(M,v)}return v}var X=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:O,generateIntoFramebuffer:A,isSupported:W});function oe(_,M,v,T,E,L){E===void 0&&(E=Math.max(T[2]-T[0],T[3]-T[1])/2),L===void 0&&(L=1);try{return y.apply(X,arguments)}catch(x){return console.info("WebGL SDF generation failed, falling back to JS",x),p.apply(D,arguments)}}function ae(_,M,v,T,E,L,x,N,I,j){E===void 0&&(E=Math.max(T[2]-T[0],T[3]-T[1])/2),L===void 0&&(L=1),N===void 0&&(N=0),I===void 0&&(I=0),j===void 0&&(j=0);try{return O.apply(X,arguments)}catch(Z){return console.info("WebGL SDF generation failed, falling back to JS",Z),m.apply(D,arguments)}}return n.forEachPathCommand=t,n.generate=oe,n.generateIntoCanvas=ae,n.javascript=D,n.pathToLineSegments=e,n.webgl=X,n.webglUtils=h,Object.defineProperty(n,"__esModule",{value:!0}),n}({});return s}function ks(){var s=function(n){var u={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},c={},t={};c.L=1,t[1]="L",Object.keys(u).forEach(function(H,re){c[H]=1<<re+1,t[c[H]]=H}),Object.freeze(c);var e=c.LRI|c.RLI|c.FSI,r=c.L|c.R|c.AL,i=c.B|c.S|c.WS|c.ON|c.FSI|c.LRI|c.RLI|c.PDI,o=c.BN|c.RLE|c.LRE|c.RLO|c.LRO|c.PDF,a=c.S|c.WS|c.B|e|c.PDI|o,l=null;function f(){if(!l){l=new Map;var H=function($){if(u.hasOwnProperty($)){var G=0;u[$].split(",").forEach(function(se){var ee=se.split("+"),ie=ee[0],q=ee[1];ie=parseInt(ie,36),q=q?parseInt(q,36):0,l.set(G+=ie,c[$]);for(var xe=0;xe<q;xe++)l.set(++G,c[$])})}};for(var re in u)H(re)}}function d(H){return f(),l.get(H.codePointAt(0))||c.L}function h(H){return t[d(H)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(H,re){var $=36,G=0,se=new Map,ee=re&&new Map,ie;return H.split(",").forEach(function q(xe){if(xe.indexOf("+")!==-1)for(var le=+xe;le--;)q(ie);else{ie=xe;var ue=xe.split(">"),fe=ue[0],ye=ue[1];fe=String.fromCodePoint(G+=parseInt(fe,$)),ye=String.fromCodePoint(G+=parseInt(ye,$)),se.set(fe,ye),re&&ee.set(ye,fe)}}),{map:se,reverseMap:ee}}var g,P,D;function C(){if(!g){var H=m(p.pairs,!0),re=H.map,$=H.reverseMap;g=re,P=$,D=m(p.canonical,!1).map}}function b(H){return C(),g.get(H)||null}function S(H){return C(),P.get(H)||null}function R(H){return C(),D.get(H)||null}var k=c.L,F=c.R,z=c.EN,B=c.ES,te=c.ET,y=c.AN,O=c.CS,A=c.B,W=c.S,X=c.ON,oe=c.BN,ae=c.NSM,_=c.AL,M=c.LRO,v=c.RLO,T=c.LRE,E=c.RLE,L=c.PDF,x=c.LRI,N=c.RLI,I=c.FSI,j=c.PDI;function Z(H,re){for(var $=125,G=new Uint32Array(H.length),se=0;se<H.length;se++)G[se]=d(H[se]);var ee=new Map;function ie(Qe,it){var Ze=G[Qe];G[Qe]=it,ee.set(Ze,ee.get(Ze)-1),Ze&i&&ee.set(i,ee.get(i)-1),ee.set(it,(ee.get(it)||0)+1),it&i&&ee.set(i,(ee.get(i)||0)+1)}for(var q=new Uint8Array(H.length),xe=new Map,le=[],ue=null,fe=0;fe<H.length;fe++)ue||le.push(ue={start:fe,end:H.length-1,level:re==="rtl"?1:re==="ltr"?0:io(fe,!1)}),G[fe]&A&&(ue.end=fe,ue=null);for(var ye=E|T|v|M|e|j|L|A,Ue=function(Qe){return Qe+(Qe&1?1:2)},De=function(Qe){return Qe+(Qe&1?2:1)},he=0;he<le.length;he++){ue=le[he];var _e=[{_level:ue.level,_override:0,_isolate:0}],ce=void 0,pe=0,be=0,Be=0;ee.clear();for(var Ce=ue.start;Ce<=ue.end;Ce++){var ge=G[Ce];if(ce=_e[_e.length-1],ee.set(ge,(ee.get(ge)||0)+1),ge&i&&ee.set(i,(ee.get(i)||0)+1),ge&ye)if(ge&(E|T)){q[Ce]=ce._level;var ke=(ge===E?De:Ue)(ce._level);ke<=$&&!pe&&!be?_e.push({_level:ke,_override:0,_isolate:0}):pe||be++}else if(ge&(v|M)){q[Ce]=ce._level;var $e=(ge===v?De:Ue)(ce._level);$e<=$&&!pe&&!be?_e.push({_level:$e,_override:ge&v?F:k,_isolate:0}):pe||be++}else if(ge&e){ge&I&&(ge=io(Ce+1,!0)===1?N:x),q[Ce]=ce._level,ce._override&&ie(Ce,ce._override);var Ae=(ge===N?De:Ue)(ce._level);Ae<=$&&pe===0&&be===0?(Be++,_e.push({_level:Ae,_override:0,_isolate:1,_isolInitIndex:Ce})):pe++}else if(ge&j){if(pe>0)pe--;else if(Be>0){for(be=0;!_e[_e.length-1]._isolate;)_e.pop();var ve=_e[_e.length-1]._isolInitIndex;ve!=null&&(xe.set(ve,Ce),xe.set(Ce,ve)),_e.pop(),Be--}ce=_e[_e.length-1],q[Ce]=ce._level,ce._override&&ie(Ce,ce._override)}else ge&L?(pe===0&&(be>0?be--:!ce._isolate&&_e.length>1&&(_e.pop(),ce=_e[_e.length-1])),q[Ce]=ce._level):ge&A&&(q[Ce]=ue.level);else q[Ce]=ce._level,ce._override&&ge!==oe&&ie(Ce,ce._override)}for(var Fe=[],Ee=null,me=ue.start;me<=ue.end;me++){var Ie=G[me];if(!(Ie&o)){var He=q[me],We=Ie&e,Ge=Ie===j;Ee&&He===Ee._level?(Ee._end=me,Ee._endsWithIsolInit=We):Fe.push(Ee={_start:me,_end:me,_level:He,_startsWithPDI:Ge,_endsWithIsolInit:We})}}for(var ot=[],vt=0;vt<Fe.length;vt++){var ht=Fe[vt];if(!ht._startsWithPDI||ht._startsWithPDI&&!xe.has(ht._start)){for(var mt=[Ee=ht],Tt=void 0;Ee&&Ee._endsWithIsolInit&&(Tt=xe.get(Ee._end))!=null;)for(var pt=vt+1;pt<Fe.length;pt++)if(Fe[pt]._start===Tt){mt.push(Ee=Fe[pt]);break}for(var Ye=[],xt=0;xt<mt.length;xt++)for(var Nr=mt[xt],Yn=Nr._start;Yn<=Nr._end;Yn++)Ye.push(Yn);for(var Ua=q[Ye[0]],jr=ue.level,vn=Ye[0]-1;vn>=0;vn--)if(!(G[vn]&o)){jr=q[vn];break}var Jn=Ye[Ye.length-1],Ca=q[Jn],zr=ue.level;if(!(G[Jn]&e)){for(var mn=Jn+1;mn<=ue.end;mn++)if(!(G[mn]&o)){zr=q[mn];break}}ot.push({_seqIndices:Ye,_sosType:Math.max(jr,Ua)%2?F:k,_eosType:Math.max(zr,Ca)%2?F:k})}}for(var Kn=0;Kn<ot.length;Kn++){var Qn=ot[Kn],de=Qn._seqIndices,Ht=Qn._sosType,ka=Qn._eosType,At=q[de[0]]&1?F:k;if(ee.get(ae))for(var gn=0;gn<de.length;gn++){var Wr=de[gn];if(G[Wr]&ae){for(var Zn=Ht,yn=gn-1;yn>=0;yn--)if(!(G[de[yn]]&o)){Zn=G[de[yn]];break}ie(Wr,Zn&(e|j)?X:Zn)}}if(ee.get(z))for(var _n=0;_n<de.length;_n++){var Vr=de[_n];if(G[Vr]&z)for(var bn=_n-1;bn>=-1;bn--){var Xr=bn===-1?Ht:G[de[bn]];if(Xr&r){Xr===_&&ie(Vr,y);break}}}if(ee.get(_))for(var qn=0;qn<de.length;qn++){var Hr=de[qn];G[Hr]&_&&ie(Hr,F)}if(ee.get(B)||ee.get(O))for(var Yt=1;Yt<de.length-1;Yt++){var $n=de[Yt];if(G[$n]&(B|O)){for(var Dt=0,er=0,tr=Yt-1;tr>=0&&(Dt=G[de[tr]],!!(Dt&o));tr--);for(var nr=Yt+1;nr<de.length&&(er=G[de[nr]],!!(er&o));nr++);Dt===er&&(G[$n]===B?Dt===z:Dt&(z|y))&&ie($n,Dt)}}if(ee.get(z))for(var ut=0;ut<de.length;ut++){var Aa=de[ut];if(G[Aa]&z){for(var Tn=ut-1;Tn>=0&&G[de[Tn]]&(te|o);Tn--)ie(de[Tn],z);for(ut++;ut<de.length&&G[de[ut]]&(te|o|z);ut++)G[de[ut]]!==z&&ie(de[ut],z)}}if(ee.get(te)||ee.get(B)||ee.get(O))for(var Jt=0;Jt<de.length;Jt++){var Yr=de[Jt];if(G[Yr]&(te|B|O)){ie(Yr,X);for(var xn=Jt-1;xn>=0&&G[de[xn]]&o;xn--)ie(de[xn],X);for(var wn=Jt+1;wn<de.length&&G[de[wn]]&o;wn++)ie(de[wn],X)}}if(ee.get(z))for(var rr=0,Jr=Ht;rr<de.length;rr++){var Kr=de[rr],or=G[Kr];or&z?Jr===k&&ie(Kr,k):or&r&&(Jr=or)}if(ee.get(i)){var Kt=F|z|y,Qr=Kt|k,Sn=[];{for(var Et=[],Ft=0;Ft<de.length;Ft++)if(G[de[Ft]]&i){var Qt=H[de[Ft]],Zr=void 0;if(b(Qt)!==null)if(Et.length<63)Et.push({char:Qt,seqIndex:Ft});else break;else if((Zr=S(Qt))!==null)for(var Zt=Et.length-1;Zt>=0;Zt--){var ar=Et[Zt].char;if(ar===Zr||ar===S(R(Qt))||b(R(ar))===Qt){Sn.push([Et[Zt].seqIndex,Ft]),Et.length=Zt;break}}}Sn.sort(function(Qe,it){return Qe[0]-it[0]})}for(var ir=0;ir<Sn.length;ir++){for(var qr=Sn[ir],Un=qr[0],sr=qr[1],$r=!1,at=0,lr=Un+1;lr<sr;lr++){var eo=de[lr];if(G[eo]&Qr){$r=!0;var to=G[eo]&Kt?F:k;if(to===At){at=to;break}}}if($r&&!at){at=Ht;for(var ur=Un-1;ur>=0;ur--){var no=de[ur];if(G[no]&Qr){var ro=G[no]&Kt?F:k;ro!==At?at=ro:at=At;break}}}if(at){if(G[de[Un]]=G[de[sr]]=at,at!==At){for(var qt=Un+1;qt<de.length;qt++)if(!(G[de[qt]]&o)){d(H[de[qt]])&ae&&(G[de[qt]]=at);break}}if(at!==At){for(var $t=sr+1;$t<de.length;$t++)if(!(G[de[$t]]&o)){d(H[de[$t]])&ae&&(G[de[$t]]=at);break}}}}for(var gt=0;gt<de.length;gt++)if(G[de[gt]]&i){for(var oo=gt,cr=gt,fr=Ht,en=gt-1;en>=0;en--)if(G[de[en]]&o)oo=en;else{fr=G[de[en]]&Kt?F:k;break}for(var ao=ka,tn=gt+1;tn<de.length;tn++)if(G[de[tn]]&(i|o))cr=tn;else{ao=G[de[tn]]&Kt?F:k;break}for(var dr=oo;dr<=cr;dr++)G[de[dr]]=fr===ao?fr:At;gt=cr}}}for(var et=ue.start;et<=ue.end;et++){var Da=q[et],Cn=G[et];if(Da&1?Cn&(k|z|y)&&q[et]++:Cn&F?q[et]++:Cn&(y|z)&&(q[et]+=2),Cn&o&&(q[et]=et===0?ue.level:q[et-1]),et===ue.end||d(H[et])&(W|A))for(var kn=et;kn>=0&&d(H[kn])&a;kn--)q[kn]=ue.level}}return{levels:q,paragraphs:le};function io(Qe,it){for(var Ze=Qe;Ze<H.length;Ze++){var yt=G[Ze];if(yt&(F|_))return 1;if(yt&(A|k)||it&&yt===j)return 0;if(yt&e){var so=Ea(Ze);Ze=so===-1?H.length:so}}return 0}function Ea(Qe){for(var it=1,Ze=Qe+1;Ze<H.length;Ze++){var yt=G[Ze];if(yt&A)break;if(yt&j){if(--it===0)return Ze}else yt&e&&it++}return-1}}var ne="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",U;function w(){if(!U){var H=m(ne,!0),re=H.map,$=H.reverseMap;$.forEach(function(G,se){re.set(se,G)}),U=re}}function Q(H){return w(),U.get(H)||null}function J(H,re,$,G){var se=H.length;$=Math.max(0,$==null?0:+$),G=Math.min(se-1,G==null?se-1:+G);for(var ee=new Map,ie=$;ie<=G;ie++)if(re[ie]&1){var q=Q(H[ie]);q!==null&&ee.set(ie,q)}return ee}function V(H,re,$,G){var se=H.length;$=Math.max(0,$==null?0:+$),G=Math.min(se-1,G==null?se-1:+G);var ee=[];return re.paragraphs.forEach(function(ie){var q=Math.max($,ie.start),xe=Math.min(G,ie.end);if(q<xe){for(var le=re.levels.slice(q,xe+1),ue=xe;ue>=q&&d(H[ue])&a;ue--)le[ue]=ie.level;for(var fe=ie.level,ye=1/0,Ue=0;Ue<le.length;Ue++){var De=le[Ue];De>fe&&(fe=De),De<ye&&(ye=De|1)}for(var he=fe;he>=ye;he--)for(var _e=0;_e<le.length;_e++)if(le[_e]>=he){for(var ce=_e;_e+1<le.length&&le[_e+1]>=he;)_e++;_e>ce&&ee.push([ce+q,_e+q])}}}),ee}function Y(H,re,$,G){var se=K(H,re,$,G),ee=[].concat(H);return se.forEach(function(ie,q){ee[q]=(re.levels[ie]&1?Q(H[ie]):null)||H[ie]}),ee.join("")}function K(H,re,$,G){for(var se=V(H,re,$,G),ee=[],ie=0;ie<H.length;ie++)ee[ie]=ie;return se.forEach(function(q){for(var xe=q[0],le=q[1],ue=ee.slice(xe,le+1),fe=ue.length;fe--;)ee[le-fe]=ue[fe]}),ee}return n.closingToOpeningBracket=S,n.getBidiCharType=d,n.getBidiCharTypeName=h,n.getCanonicalBracket=R,n.getEmbeddingLevels=Z,n.getMirroredCharacter=Q,n.getMirroredCharactersMap=J,n.getReorderSegments=V,n.getReorderedIndices=K,n.getReorderedString=Y,n.openingToClosingBracket=b,Object.defineProperty(n,"__esModule",{value:!0}),n}({});return s}const ma=/\bvoid\s+main\s*\(\s*\)\s*{/g;function kr(s){const n=/^[ \t]*#include +<([\w\d./]+)>/gm;function u(c,t){let e=Na[t];return e?kr(e):c}return s.replace(n,u)}const je=[];for(let s=0;s<256;s++)je[s]=(s<16?"0":"")+s.toString(16);function As(){const s=Math.random()*4294967295|0,n=Math.random()*4294967295|0,u=Math.random()*4294967295|0,c=Math.random()*4294967295|0;return(je[s&255]+je[s>>8&255]+je[s>>16&255]+je[s>>24&255]+"-"+je[n&255]+je[n>>8&255]+"-"+je[n>>16&15|64]+je[n>>24&255]+"-"+je[u&63|128]+je[u>>8&255]+"-"+je[u>>16&255]+je[u>>24&255]+je[c&255]+je[c>>8&255]+je[c>>16&255]+je[c>>24&255]).toUpperCase()}const Ut=Object.assign||function(){let s=arguments[0];for(let n=1,u=arguments.length;n<u;n++){let c=arguments[n];if(c)for(let t in c)Object.prototype.hasOwnProperty.call(c,t)&&(s[t]=c[t])}return s},Ds=Date.now(),Ao=new WeakMap,Do=new Map;let Es=1e10;function Ar(s,n){const u=Is(n);let c=Ao.get(s);if(c||Ao.set(s,c=Object.create(null)),c[u])return new c[u];const t=`_onBeforeCompile${u}`,e=function(a,l){s.onBeforeCompile.call(this,a,l);const f=this.customProgramCacheKey()+"|"+a.vertexShader+"|"+a.fragmentShader;let d=Do[f];if(!d){const h=Fs(this,a,n,u);d=Do[f]=h}a.vertexShader=d.vertexShader,a.fragmentShader=d.fragmentShader,Ut(a.uniforms,this.uniforms),n.timeUniform&&(a.uniforms[n.timeUniform]={get value(){return Date.now()-Ds}}),this[t]&&this[t](a)},r=function(){return i(n.chained?s:s.clone())},i=function(a){const l=Object.create(a,o);return Object.defineProperty(l,"baseMaterial",{value:s}),Object.defineProperty(l,"id",{value:Es++}),l.uuid=As(),l.uniforms=Ut({},a.uniforms,n.uniforms),l.defines=Ut({},a.defines,n.defines),l.defines[`TROIKA_DERIVED_MATERIAL_${u}`]="",l.extensions=Ut({},a.extensions,n.extensions),l._listeners=void 0,l},o={constructor:{value:r},isDerivedMaterial:{value:!0},type:{get:()=>s.type,set:a=>{s.type=a}},isDerivedFrom:{writable:!0,configurable:!0,value:function(a){const l=this.baseMaterial;return a===l||l.isDerivedMaterial&&l.isDerivedFrom(a)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return s.customProgramCacheKey()+"|"+u}},onBeforeCompile:{get(){return e},set(a){this[t]=a}},copy:{writable:!0,configurable:!0,value:function(a){return s.copy.call(this,a),!s.isShaderMaterial&&!s.isDerivedMaterial&&(Ut(this.extensions,a.extensions),Ut(this.defines,a.defines),Ut(this.uniforms,Pa.clone(a.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const a=new s.constructor;return i(a).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let a=this._depthMaterial;return a||(a=this._depthMaterial=Ar(s.isDerivedMaterial?s.getDepthMaterial():new Oa({depthPacking:Ba}),n),a.defines.IS_DEPTH_MATERIAL="",a.uniforms=this.uniforms),a}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let a=this._distanceMaterial;return a||(a=this._distanceMaterial=Ar(s.isDerivedMaterial?s.getDistanceMaterial():new Ga,n),a.defines.IS_DISTANCE_MATERIAL="",a.uniforms=this.uniforms),a}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:a,_distanceMaterial:l}=this;a&&a.dispose(),l&&l.dispose(),s.dispose.call(this)}}};return c[u]=r,new r}function Fs(s,{vertexShader:n,fragmentShader:u},c,t){let{vertexDefs:e,vertexMainIntro:r,vertexMainOutro:i,vertexTransform:o,fragmentDefs:a,fragmentMainIntro:l,fragmentMainOutro:f,fragmentColorTransform:d,customRewriter:h,timeUniform:p}=c;if(e=e||"",r=r||"",i=i||"",a=a||"",l=l||"",f=f||"",(o||h)&&(n=kr(n)),(d||h)&&(u=u.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),u=kr(u)),h){let m=h({vertexShader:n,fragmentShader:u});n=m.vertexShader,u=m.fragmentShader}if(d){let m=[];u=u.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(m.push(g),"")),f=`${d}
${m.join(`
`)}
${f}`}if(p){const m=`
uniform float ${p};
`;e=m+e,a=m+a}return o&&(n=`vec3 troika_position_${t};
vec3 troika_normal_${t};
vec2 troika_uv_${t};
${n}
`,e=`${e}
void troikaVertexTransform${t}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${o}
}
`,r=`
troika_position_${t} = vec3(position);
troika_normal_${t} = vec3(normal);
troika_uv_${t} = vec2(uv);
troikaVertexTransform${t}(troika_position_${t}, troika_normal_${t}, troika_uv_${t});
${r}
`,n=n.replace(/\b(position|normal|uv)\b/g,(m,g,P,D)=>/\battribute\s+vec[23]\s+$/.test(D.substr(0,P))?g:`troika_${g}_${t}`),s.map&&s.map.channel>0||(n=n.replace(/\bMAP_UV\b/g,`troika_uv_${t}`))),n=Eo(n,t,e,r,i),u=Eo(u,t,a,l,f),{vertexShader:n,fragmentShader:u}}function Eo(s,n,u,c,t){return(c||t||u)&&(s=s.replace(ma,`
${u}
void troikaOrigMain${n}() {`),s+=`
void main() {
  ${c}
  troikaOrigMain${n}();
  ${t}
}`),s}function Ms(s,n){return s==="uniforms"?void 0:typeof n=="function"?n.toString():n}let Ls=0;const Fo=new Map;function Is(s){const n=JSON.stringify(s,Ms);let u=Fo.get(n);return u==null&&Fo.set(n,u=++Ls),u}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Rs(){return typeof window>"u"&&(self.window=self),function(s){var n={parse:function(t){var e=n._bin,r=new Uint8Array(t);if(e.readASCII(r,0,4)=="ttcf"){var i=4;e.readUshort(r,i),i+=2,e.readUshort(r,i),i+=2;var o=e.readUint(r,i);i+=4;for(var a=[],l=0;l<o;l++){var f=e.readUint(r,i);i+=4,a.push(n._readFont(r,f))}return a}return[n._readFont(r,0)]},_readFont:function(t,e){var r=n._bin,i=e;r.readFixed(t,e),e+=4;var o=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],l={_data:t,_offset:i},f={},d=0;d<o;d++){var h=r.readASCII(t,e,4);e+=4,r.readUint(t,e),e+=4;var p=r.readUint(t,e);e+=4;var m=r.readUint(t,e);e+=4,f[h]={offset:p,length:m}}for(d=0;d<a.length;d++){var g=a[d];f[g]&&(l[g.trim()]=n[g.trim()].parse(t,f[g].offset,f[g].length,l))}return l},_tabOffset:function(t,e,r){for(var i=n._bin,o=i.readUshort(t,r+4),a=r+12,l=0;l<o;l++){var f=i.readASCII(t,a,4);a+=4,i.readUint(t,a),a+=4;var d=i.readUint(t,a);if(a+=4,i.readUint(t,a),a+=4,f==e)return d}return 0}};n._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return n._bin.readShort(t,e)/16384},readInt:function(t,e){return n._bin._view(t).getInt32(e)},readInt8:function(t,e){return n._bin._view(t).getInt8(e)},readShort:function(t,e){return n._bin._view(t).getInt16(e)},readUshort:function(t,e){return n._bin._view(t).getUint16(e)},readUshorts:function(t,e,r){for(var i=[],o=0;o<r;o++)i.push(n._bin.readUshort(t,e+2*o));return i},readUint:function(t,e){return n._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*n._bin.readUint(t,e)+n._bin.readUint(t,e+4)},readASCII:function(t,e,r){for(var i="",o=0;o<r;o++)i+=String.fromCharCode(t[e+o]);return i},readUnicode:function(t,e,r){for(var i="",o=0;o<r;o++){var a=t[e++]<<8|t[e++];i+=String.fromCharCode(a)}return i},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,r){var i=n._bin._tdec;return i&&e==0&&r==t.length?i.decode(t):n._bin.readASCII(t,e,r)},readBytes:function(t,e,r){for(var i=[],o=0;o<r;o++)i.push(t[e+o]);return i},readASCIIArray:function(t,e,r){for(var i=[],o=0;o<r;o++)i.push(String.fromCharCode(t[e+o]));return i},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},n._lctf={},n._lctf.parse=function(t,e,r,i,o){var a=n._bin,l={},f=e;a.readFixed(t,e),e+=4;var d=a.readUshort(t,e);e+=2;var h=a.readUshort(t,e);e+=2;var p=a.readUshort(t,e);return e+=2,l.scriptList=n._lctf.readScriptList(t,f+d),l.featureList=n._lctf.readFeatureList(t,f+h),l.lookupList=n._lctf.readLookupList(t,f+p,o),l},n._lctf.readLookupList=function(t,e,r){var i=n._bin,o=e,a=[],l=i.readUshort(t,e);e+=2;for(var f=0;f<l;f++){var d=i.readUshort(t,e);e+=2;var h=n._lctf.readLookupTable(t,o+d,r);a.push(h)}return a},n._lctf.readLookupTable=function(t,e,r){var i=n._bin,o=e,a={tabs:[]};a.ltype=i.readUshort(t,e),e+=2,a.flag=i.readUshort(t,e),e+=2;var l=i.readUshort(t,e);e+=2;for(var f=a.ltype,d=0;d<l;d++){var h=i.readUshort(t,e);e+=2;var p=r(t,f,o+h,a);a.tabs.push(p)}return a},n._lctf.numOfOnes=function(t){for(var e=0,r=0;r<32;r++)t>>>r&1&&e++;return e},n._lctf.readClassDef=function(t,e){var r=n._bin,i=[],o=r.readUshort(t,e);if(e+=2,o==1){var a=r.readUshort(t,e);e+=2;var l=r.readUshort(t,e);e+=2;for(var f=0;f<l;f++)i.push(a+f),i.push(a+f),i.push(r.readUshort(t,e)),e+=2}if(o==2){var d=r.readUshort(t,e);for(e+=2,f=0;f<d;f++)i.push(r.readUshort(t,e)),e+=2,i.push(r.readUshort(t,e)),e+=2,i.push(r.readUshort(t,e)),e+=2}return i},n._lctf.getInterval=function(t,e){for(var r=0;r<t.length;r+=3){var i=t[r],o=t[r+1];if(t[r+2],i<=e&&e<=o)return r}return-1},n._lctf.readCoverage=function(t,e){var r=n._bin,i={};i.fmt=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);return e+=2,i.fmt==1&&(i.tab=r.readUshorts(t,e,o)),i.fmt==2&&(i.tab=r.readUshorts(t,e,3*o)),i},n._lctf.coverageIndex=function(t,e){var r=t.tab;if(t.fmt==1)return r.indexOf(e);if(t.fmt==2){var i=n._lctf.getInterval(r,e);if(i!=-1)return r[i+2]+(e-r[i])}return-1},n._lctf.readFeatureList=function(t,e){var r=n._bin,i=e,o=[],a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var f=r.readASCII(t,e,4);e+=4;var d=r.readUshort(t,e);e+=2;var h=n._lctf.readFeatureTable(t,i+d);h.tag=f.trim(),o.push(h)}return o},n._lctf.readFeatureTable=function(t,e){var r=n._bin,i=e,o={},a=r.readUshort(t,e);e+=2,a>0&&(o.featureParams=i+a);var l=r.readUshort(t,e);e+=2,o.tab=[];for(var f=0;f<l;f++)o.tab.push(r.readUshort(t,e+2*f));return o},n._lctf.readScriptList=function(t,e){var r=n._bin,i=e,o={},a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var f=r.readASCII(t,e,4);e+=4;var d=r.readUshort(t,e);e+=2,o[f.trim()]=n._lctf.readScriptTable(t,i+d)}return o},n._lctf.readScriptTable=function(t,e){var r=n._bin,i=e,o={},a=r.readUshort(t,e);e+=2,a>0&&(o.default=n._lctf.readLangSysTable(t,i+a));var l=r.readUshort(t,e);e+=2;for(var f=0;f<l;f++){var d=r.readASCII(t,e,4);e+=4;var h=r.readUshort(t,e);e+=2,o[d.trim()]=n._lctf.readLangSysTable(t,i+h)}return o},n._lctf.readLangSysTable=function(t,e){var r=n._bin,i={};r.readUshort(t,e),e+=2,i.reqFeature=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);return e+=2,i.features=r.readUshorts(t,e,o),i},n.CFF={},n.CFF.parse=function(t,e,r){var i=n._bin;(t=new Uint8Array(t.buffer,e,r))[e=0],t[++e],t[++e],t[++e],e++;var o=[];e=n.CFF.readIndex(t,e,o);for(var a=[],l=0;l<o.length-1;l++)a.push(i.readASCII(t,e+o[l],o[l+1]-o[l]));e+=o[o.length-1];var f=[];e=n.CFF.readIndex(t,e,f);var d=[];for(l=0;l<f.length-1;l++)d.push(n.CFF.readDict(t,e+f[l],e+f[l+1]));e+=f[f.length-1];var h=d[0],p=[];e=n.CFF.readIndex(t,e,p);var m=[];for(l=0;l<p.length-1;l++)m.push(i.readASCII(t,e+p[l],p[l+1]-p[l]));if(e+=p[p.length-1],n.CFF.readSubrs(t,e,h),h.CharStrings){e=h.CharStrings,p=[],e=n.CFF.readIndex(t,e,p);var g=[];for(l=0;l<p.length-1;l++)g.push(i.readBytes(t,e+p[l],p[l+1]-p[l]));h.CharStrings=g}if(h.ROS){e=h.FDArray;var P=[];for(e=n.CFF.readIndex(t,e,P),h.FDArray=[],l=0;l<P.length-1;l++){var D=n.CFF.readDict(t,e+P[l],e+P[l+1]);n.CFF._readFDict(t,D,m),h.FDArray.push(D)}e+=P[P.length-1],e=h.FDSelect,h.FDSelect=[];var C=t[e];if(e++,C!=3)throw C;var b=i.readUshort(t,e);for(e+=2,l=0;l<b+1;l++)h.FDSelect.push(i.readUshort(t,e),t[e+2]),e+=3}return h.Encoding&&(h.Encoding=n.CFF.readEncoding(t,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=n.CFF.readCharset(t,h.charset,h.CharStrings.length)),n.CFF._readFDict(t,h,m),h},n.CFF._readFDict=function(t,e,r){var i;for(var o in e.Private&&(i=e.Private[1],e.Private=n.CFF.readDict(t,i,i+e.Private[0]),e.Private.Subrs&&n.CFF.readSubrs(t,i+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)!=-1&&(e[o]=r[e[o]-426+35])},n.CFF.readSubrs=function(t,e,r){var i=n._bin,o=[];e=n.CFF.readIndex(t,e,o);var a,l=o.length;a=l<1240?107:l<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var f=0;f<o.length-1;f++)r.Subrs.push(i.readBytes(t,e+o[f],o[f+1]-o[f]))},n.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],n.CFF.glyphByUnicode=function(t,e){for(var r=0;r<t.charset.length;r++)if(t.charset[r]==e)return r;return-1},n.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:n.CFF.glyphByUnicode(t,n.CFF.tableSE[e])},n.CFF.readEncoding=function(t,e,r){n._bin;var i=[".notdef"],o=t[e];if(e++,o!=0)throw"error: unknown encoding format: "+o;var a=t[e];e++;for(var l=0;l<a;l++)i.push(t[e+l]);return i},n.CFF.readCharset=function(t,e,r){var i=n._bin,o=[".notdef"],a=t[e];if(e++,a==0)for(var l=0;l<r;l++){var f=i.readUshort(t,e);e+=2,o.push(f)}else{if(a!=1&&a!=2)throw"error: format: "+a;for(;o.length<r;){f=i.readUshort(t,e),e+=2;var d=0;for(a==1?(d=t[e],e++):(d=i.readUshort(t,e),e+=2),l=0;l<=d;l++)o.push(f),f++}}return o},n.CFF.readIndex=function(t,e,r){var i=n._bin,o=i.readUshort(t,e)+1,a=t[e+=2];if(e++,a==1)for(var l=0;l<o;l++)r.push(t[e+l]);else if(a==2)for(l=0;l<o;l++)r.push(i.readUshort(t,e+2*l));else if(a==3)for(l=0;l<o;l++)r.push(16777215&i.readUint(t,e+3*l-1));else if(o!=1)throw"unsupported offset size: "+a+", count: "+o;return(e+=o*a)-1},n.CFF.getCharString=function(t,e,r){var i=n._bin,o=t[e],a=t[e+1];t[e+2],t[e+3],t[e+4];var l=1,f=null,d=null;o<=20&&(f=o,l=1),o==12&&(f=100*o+a,l=2),21<=o&&o<=27&&(f=o,l=1),o==28&&(d=i.readShort(t,e+1),l=3),29<=o&&o<=31&&(f=o,l=1),32<=o&&o<=246&&(d=o-139,l=1),247<=o&&o<=250&&(d=256*(o-247)+a+108,l=2),251<=o&&o<=254&&(d=256*-(o-251)-a-108,l=2),o==255&&(d=i.readInt(t,e+1)/65535,l=5),r.val=d??"o"+f,r.size=l},n.CFF.readCharString=function(t,e,r){for(var i=e+r,o=n._bin,a=[];e<i;){var l=t[e],f=t[e+1];t[e+2],t[e+3],t[e+4];var d=1,h=null,p=null;l<=20&&(h=l,d=1),l==12&&(h=100*l+f,d=2),l!=19&&l!=20||(h=l,d=2),21<=l&&l<=27&&(h=l,d=1),l==28&&(p=o.readShort(t,e+1),d=3),29<=l&&l<=31&&(h=l,d=1),32<=l&&l<=246&&(p=l-139,d=1),247<=l&&l<=250&&(p=256*(l-247)+f+108,d=2),251<=l&&l<=254&&(p=256*-(l-251)-f-108,d=2),l==255&&(p=o.readInt(t,e+1)/65535,d=5),a.push(p??"o"+h),e+=d}return a},n.CFF.readDict=function(t,e,r){for(var i=n._bin,o={},a=[];e<r;){var l=t[e],f=t[e+1];t[e+2],t[e+3],t[e+4];var d=1,h=null,p=null;if(l==28&&(p=i.readShort(t,e+1),d=3),l==29&&(p=i.readInt(t,e+1),d=5),32<=l&&l<=246&&(p=l-139,d=1),247<=l&&l<=250&&(p=256*(l-247)+f+108,d=2),251<=l&&l<=254&&(p=256*-(l-251)-f-108,d=2),l==255)throw p=i.readInt(t,e+1)/65535,d=5,"unknown number";if(l==30){var m=[];for(d=1;;){var g=t[e+d];d++;var P=g>>4,D=15&g;if(P!=15&&m.push(P),D!=15&&m.push(D),D==15)break}for(var C="",b=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],S=0;S<m.length;S++)C+=b[m[S]];p=parseFloat(C)}l<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][l],d=1,l==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],d=2)),h!=null?(o[h]=a.length==1?a[0]:a,a=[]):a.push(p),e+=d}return o},n.cmap={},n.cmap.parse=function(t,e,r){t=new Uint8Array(t.buffer,e,r),e=0;var i=n._bin,o={};i.readUshort(t,e),e+=2;var a=i.readUshort(t,e);e+=2;var l=[];o.tables=[];for(var f=0;f<a;f++){var d=i.readUshort(t,e);e+=2;var h=i.readUshort(t,e);e+=2;var p=i.readUint(t,e);e+=4;var m="p"+d+"e"+h,g=l.indexOf(p);if(g==-1){var P;g=o.tables.length,l.push(p);var D=i.readUshort(t,p);D==0?P=n.cmap.parse0(t,p):D==4?P=n.cmap.parse4(t,p):D==6?P=n.cmap.parse6(t,p):D==12?P=n.cmap.parse12(t,p):console.debug("unknown format: "+D,d,h,p),o.tables.push(P)}if(o[m]!=null)throw"multiple tables for one platform+encoding";o[m]=g}return o},n.cmap.parse0=function(t,e){var r=n._bin,i={};i.format=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(t[e+a]);return i},n.cmap.parse4=function(t,e){var r=n._bin,i=e,o={};o.format=r.readUshort(t,e),e+=2;var a=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2;var l=r.readUshort(t,e);e+=2;var f=l/2;o.searchRange=r.readUshort(t,e),e+=2,o.entrySelector=r.readUshort(t,e),e+=2,o.rangeShift=r.readUshort(t,e),e+=2,o.endCount=r.readUshorts(t,e,f),e+=2*f,e+=2,o.startCount=r.readUshorts(t,e,f),e+=2*f,o.idDelta=[];for(var d=0;d<f;d++)o.idDelta.push(r.readShort(t,e)),e+=2;for(o.idRangeOffset=r.readUshorts(t,e,f),e+=2*f,o.glyphIdArray=[];e<i+a;)o.glyphIdArray.push(r.readUshort(t,e)),e+=2;return o},n.cmap.parse6=function(t,e){var r=n._bin,i={};i.format=r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2,i.firstCode=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);e+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(t,e)),e+=2;return i},n.cmap.parse12=function(t,e){var r=n._bin,i={};i.format=r.readUshort(t,e),e+=2,e+=2,r.readUint(t,e),e+=4,r.readUint(t,e),e+=4;var o=r.readUint(t,e);e+=4,i.groups=[];for(var a=0;a<o;a++){var l=e+12*a,f=r.readUint(t,l+0),d=r.readUint(t,l+4),h=r.readUint(t,l+8);i.groups.push([f,d,h])}return i},n.glyf={},n.glyf.parse=function(t,e,r,i){for(var o=[],a=0;a<i.maxp.numGlyphs;a++)o.push(null);return o},n.glyf._parseGlyf=function(t,e){var r=n._bin,i=t._data,o=n._tabOffset(i,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var l=0;l<a.noc;l++)a.endPts.push(r.readUshort(i,o)),o+=2;var f=r.readUshort(i,o);if(o+=2,i.length-o<f)return null;a.instructions=r.readBytes(i,o,f),o+=f;var d=a.endPts[a.noc-1]+1;for(a.flags=[],l=0;l<d;l++){var h=i[o];if(o++,a.flags.push(h),(8&h)!=0){var p=i[o];o++;for(var m=0;m<p;m++)a.flags.push(h),l++}}for(a.xs=[],l=0;l<d;l++){var g=(2&a.flags[l])!=0,P=(16&a.flags[l])!=0;g?(a.xs.push(P?i[o]:-i[o]),o++):P?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],l=0;l<d;l++)g=(4&a.flags[l])!=0,P=(32&a.flags[l])!=0,g?(a.ys.push(P?i[o]:-i[o]),o++):P?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var D=0,C=0;for(l=0;l<d;l++)D+=a.xs[l],C+=a.ys[l],a.xs[l]=D,a.ys[l]=C}else{var b;a.parts=[];do{b=r.readUshort(i,o),o+=2;var S={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(S),S.glyphIndex=r.readUshort(i,o),o+=2,1&b){var R=r.readShort(i,o);o+=2;var k=r.readShort(i,o);o+=2}else R=r.readInt8(i,o),o++,k=r.readInt8(i,o),o++;2&b?(S.m.tx=R,S.m.ty=k):(S.p1=R,S.p2=k),8&b?(S.m.a=S.m.d=r.readF2dot14(i,o),o+=2):64&b?(S.m.a=r.readF2dot14(i,o),o+=2,S.m.d=r.readF2dot14(i,o),o+=2):128&b&&(S.m.a=r.readF2dot14(i,o),o+=2,S.m.b=r.readF2dot14(i,o),o+=2,S.m.c=r.readF2dot14(i,o),o+=2,S.m.d=r.readF2dot14(i,o),o+=2)}while(32&b);if(256&b){var F=r.readUshort(i,o);for(o+=2,a.instr=[],l=0;l<F;l++)a.instr.push(i[o]),o++}}return a},n.GDEF={},n.GDEF.parse=function(t,e,r,i){var o=e;e+=4;var a=n._bin.readUshort(t,e);return{glyphClassDef:a===0?null:n._lctf.readClassDef(t,o+a)}},n.GPOS={},n.GPOS.parse=function(t,e,r,i){return n._lctf.parse(t,e,r,i,n.GPOS.subt)},n.GPOS.subt=function(t,e,r,i){var o=n._bin,a=r,l={};if(l.fmt=o.readUshort(t,r),r+=2,e==1||e==2||e==3||e==7||e==8&&l.fmt<=2){var f=o.readUshort(t,r);r+=2,l.coverage=n._lctf.readCoverage(t,f+a)}if(e==1&&l.fmt==1){var d=o.readUshort(t,r);r+=2,d!=0&&(l.pos=n.GPOS.readValueRecord(t,r,d))}else if(e==2&&l.fmt>=1&&l.fmt<=2){d=o.readUshort(t,r),r+=2;var h=o.readUshort(t,r);r+=2;var p=n._lctf.numOfOnes(d),m=n._lctf.numOfOnes(h);if(l.fmt==1){l.pairsets=[];var g=o.readUshort(t,r);r+=2;for(var P=0;P<g;P++){var D=a+o.readUshort(t,r);r+=2;var C=o.readUshort(t,D);D+=2;for(var b=[],S=0;S<C;S++){var R=o.readUshort(t,D);D+=2,d!=0&&(y=n.GPOS.readValueRecord(t,D,d),D+=2*p),h!=0&&(O=n.GPOS.readValueRecord(t,D,h),D+=2*m),b.push({gid2:R,val1:y,val2:O})}l.pairsets.push(b)}}if(l.fmt==2){var k=o.readUshort(t,r);r+=2;var F=o.readUshort(t,r);r+=2;var z=o.readUshort(t,r);r+=2;var B=o.readUshort(t,r);for(r+=2,l.classDef1=n._lctf.readClassDef(t,a+k),l.classDef2=n._lctf.readClassDef(t,a+F),l.matrix=[],P=0;P<z;P++){var te=[];for(S=0;S<B;S++){var y=null,O=null;d!=0&&(y=n.GPOS.readValueRecord(t,r,d),r+=2*p),h!=0&&(O=n.GPOS.readValueRecord(t,r,h),r+=2*m),te.push({val1:y,val2:O})}l.matrix.push(te)}}}else if(e==4&&l.fmt==1)l.markCoverage=n._lctf.readCoverage(t,o.readUshort(t,r)+a),l.baseCoverage=n._lctf.readCoverage(t,o.readUshort(t,r+2)+a),l.markClassCount=o.readUshort(t,r+4),l.markArray=n.GPOS.readMarkArray(t,o.readUshort(t,r+6)+a),l.baseArray=n.GPOS.readBaseArray(t,o.readUshort(t,r+8)+a,l.markClassCount);else if(e==6&&l.fmt==1)l.mark1Coverage=n._lctf.readCoverage(t,o.readUshort(t,r)+a),l.mark2Coverage=n._lctf.readCoverage(t,o.readUshort(t,r+2)+a),l.markClassCount=o.readUshort(t,r+4),l.mark1Array=n.GPOS.readMarkArray(t,o.readUshort(t,r+6)+a),l.mark2Array=n.GPOS.readBaseArray(t,o.readUshort(t,r+8)+a,l.markClassCount);else{if(e==9&&l.fmt==1){var A=o.readUshort(t,r);r+=2;var W=o.readUint(t,r);if(r+=4,i.ltype==9)i.ltype=A;else if(i.ltype!=A)throw"invalid extension substitution";return n.GPOS.subt(t,i.ltype,a+W)}console.debug("unsupported GPOS table LookupType",e,"format",l.fmt)}return l},n.GPOS.readValueRecord=function(t,e,r){var i=n._bin,o=[];return o.push(1&r?i.readShort(t,e):0),e+=1&r?2:0,o.push(2&r?i.readShort(t,e):0),e+=2&r?2:0,o.push(4&r?i.readShort(t,e):0),e+=4&r?2:0,o.push(8&r?i.readShort(t,e):0),e+=8&r?2:0,o},n.GPOS.readBaseArray=function(t,e,r){var i=n._bin,o=[],a=e,l=i.readUshort(t,e);e+=2;for(var f=0;f<l;f++){for(var d=[],h=0;h<r;h++)d.push(n.GPOS.readAnchorRecord(t,a+i.readUshort(t,e))),e+=2;o.push(d)}return o},n.GPOS.readMarkArray=function(t,e){var r=n._bin,i=[],o=e,a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var f=n.GPOS.readAnchorRecord(t,r.readUshort(t,e+2)+o);f.markClass=r.readUshort(t,e),i.push(f),e+=4}return i},n.GPOS.readAnchorRecord=function(t,e){var r=n._bin,i={};return i.fmt=r.readUshort(t,e),i.x=r.readShort(t,e+2),i.y=r.readShort(t,e+4),i},n.GSUB={},n.GSUB.parse=function(t,e,r,i){return n._lctf.parse(t,e,r,i,n.GSUB.subt)},n.GSUB.subt=function(t,e,r,i){var o=n._bin,a=r,l={};if(l.fmt=o.readUshort(t,r),r+=2,e!=1&&e!=2&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==2||e==4||e==5&&l.fmt<=2||e==6&&l.fmt<=2){var f=o.readUshort(t,r);r+=2,l.coverage=n._lctf.readCoverage(t,a+f)}if(e==1&&l.fmt>=1&&l.fmt<=2){if(l.fmt==1)l.delta=o.readShort(t,r),r+=2;else if(l.fmt==2){var d=o.readUshort(t,r);r+=2,l.newg=o.readUshorts(t,r,d),r+=2*l.newg.length}}else if(e==2&&l.fmt==1){d=o.readUshort(t,r),r+=2,l.seqs=[];for(var h=0;h<d;h++){var p=o.readUshort(t,r)+a;r+=2;var m=o.readUshort(t,p);l.seqs.push(o.readUshorts(t,p+2,m))}}else if(e==4)for(l.vals=[],d=o.readUshort(t,r),r+=2,h=0;h<d;h++){var g=o.readUshort(t,r);r+=2,l.vals.push(n.GSUB.readLigatureSet(t,a+g))}else if(e==5&&l.fmt==2){if(l.fmt==2){var P=o.readUshort(t,r);r+=2,l.cDef=n._lctf.readClassDef(t,a+P),l.scset=[];var D=o.readUshort(t,r);for(r+=2,h=0;h<D;h++){var C=o.readUshort(t,r);r+=2,l.scset.push(C==0?null:n.GSUB.readSubClassSet(t,a+C))}}}else if(e==6&&l.fmt==3){if(l.fmt==3){for(h=0;h<3;h++){d=o.readUshort(t,r),r+=2;for(var b=[],S=0;S<d;S++)b.push(n._lctf.readCoverage(t,a+o.readUshort(t,r+2*S)));r+=2*d,h==0&&(l.backCvg=b),h==1&&(l.inptCvg=b),h==2&&(l.ahedCvg=b)}d=o.readUshort(t,r),r+=2,l.lookupRec=n.GSUB.readSubstLookupRecords(t,r,d)}}else{if(e==7&&l.fmt==1){var R=o.readUshort(t,r);r+=2;var k=o.readUint(t,r);if(r+=4,i.ltype==9)i.ltype=R;else if(i.ltype!=R)throw"invalid extension substitution";return n.GSUB.subt(t,i.ltype,a+k)}console.debug("unsupported GSUB table LookupType",e,"format",l.fmt)}return l},n.GSUB.readSubClassSet=function(t,e){var r=n._bin.readUshort,i=e,o=[],a=r(t,e);e+=2;for(var l=0;l<a;l++){var f=r(t,e);e+=2,o.push(n.GSUB.readSubClassRule(t,i+f))}return o},n.GSUB.readSubClassRule=function(t,e){var r=n._bin.readUshort,i={},o=r(t,e),a=r(t,e+=2);e+=2,i.input=[];for(var l=0;l<o-1;l++)i.input.push(r(t,e)),e+=2;return i.substLookupRecords=n.GSUB.readSubstLookupRecords(t,e,a),i},n.GSUB.readSubstLookupRecords=function(t,e,r){for(var i=n._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(t,e),i(t,e+2)),e+=4;return o},n.GSUB.readChainSubClassSet=function(t,e){var r=n._bin,i=e,o=[],a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var f=r.readUshort(t,e);e+=2,o.push(n.GSUB.readChainSubClassRule(t,i+f))}return o},n.GSUB.readChainSubClassRule=function(t,e){for(var r=n._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var l=r.readUshort(t,e);e+=2,a==1&&l--,i[o[a]]=r.readUshorts(t,e,l),e+=2*i[o[a]].length}return l=r.readUshort(t,e),e+=2,i.subst=r.readUshorts(t,e,2*l),e+=2*i.subst.length,i},n.GSUB.readLigatureSet=function(t,e){var r=n._bin,i=e,o=[],a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var f=r.readUshort(t,e);e+=2,o.push(n.GSUB.readLigature(t,i+f))}return o},n.GSUB.readLigature=function(t,e){var r=n._bin,i={chain:[]};i.nglyph=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);e+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(t,e)),e+=2;return i},n.head={},n.head.parse=function(t,e,r){var i=n._bin,o={};return i.readFixed(t,e),e+=4,o.fontRevision=i.readFixed(t,e),e+=4,i.readUint(t,e),e+=4,i.readUint(t,e),e+=4,o.flags=i.readUshort(t,e),e+=2,o.unitsPerEm=i.readUshort(t,e),e+=2,o.created=i.readUint64(t,e),e+=8,o.modified=i.readUint64(t,e),e+=8,o.xMin=i.readShort(t,e),e+=2,o.yMin=i.readShort(t,e),e+=2,o.xMax=i.readShort(t,e),e+=2,o.yMax=i.readShort(t,e),e+=2,o.macStyle=i.readUshort(t,e),e+=2,o.lowestRecPPEM=i.readUshort(t,e),e+=2,o.fontDirectionHint=i.readShort(t,e),e+=2,o.indexToLocFormat=i.readShort(t,e),e+=2,o.glyphDataFormat=i.readShort(t,e),e+=2,o},n.hhea={},n.hhea.parse=function(t,e,r){var i=n._bin,o={};return i.readFixed(t,e),e+=4,o.ascender=i.readShort(t,e),e+=2,o.descender=i.readShort(t,e),e+=2,o.lineGap=i.readShort(t,e),e+=2,o.advanceWidthMax=i.readUshort(t,e),e+=2,o.minLeftSideBearing=i.readShort(t,e),e+=2,o.minRightSideBearing=i.readShort(t,e),e+=2,o.xMaxExtent=i.readShort(t,e),e+=2,o.caretSlopeRise=i.readShort(t,e),e+=2,o.caretSlopeRun=i.readShort(t,e),e+=2,o.caretOffset=i.readShort(t,e),e+=2,e+=8,o.metricDataFormat=i.readShort(t,e),e+=2,o.numberOfHMetrics=i.readUshort(t,e),e+=2,o},n.hmtx={},n.hmtx.parse=function(t,e,r,i){for(var o=n._bin,a={aWidth:[],lsBearing:[]},l=0,f=0,d=0;d<i.maxp.numGlyphs;d++)d<i.hhea.numberOfHMetrics&&(l=o.readUshort(t,e),e+=2,f=o.readShort(t,e),e+=2),a.aWidth.push(l),a.lsBearing.push(f);return a},n.kern={},n.kern.parse=function(t,e,r,i){var o=n._bin,a=o.readUshort(t,e);if(e+=2,a==1)return n.kern.parseV1(t,e-2,r,i);var l=o.readUshort(t,e);e+=2;for(var f={glyph1:[],rval:[]},d=0;d<l;d++){e+=2,r=o.readUshort(t,e),e+=2;var h=o.readUshort(t,e);e+=2;var p=h>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;e=n.kern.readFormat0(t,e,f)}return f},n.kern.parseV1=function(t,e,r,i){var o=n._bin;o.readFixed(t,e),e+=4;var a=o.readUint(t,e);e+=4;for(var l={glyph1:[],rval:[]},f=0;f<a;f++){o.readUint(t,e),e+=4;var d=o.readUshort(t,e);e+=2,o.readUshort(t,e),e+=2;var h=d>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;e=n.kern.readFormat0(t,e,l)}return l},n.kern.readFormat0=function(t,e,r){var i=n._bin,o=-1,a=i.readUshort(t,e);e+=2,i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2;for(var l=0;l<a;l++){var f=i.readUshort(t,e);e+=2;var d=i.readUshort(t,e);e+=2;var h=i.readShort(t,e);e+=2,f!=o&&(r.glyph1.push(f),r.rval.push({glyph2:[],vals:[]}));var p=r.rval[r.rval.length-1];p.glyph2.push(d),p.vals.push(h),o=f}return e},n.loca={},n.loca.parse=function(t,e,r,i){var o=n._bin,a=[],l=i.head.indexToLocFormat,f=i.maxp.numGlyphs+1;if(l==0)for(var d=0;d<f;d++)a.push(o.readUshort(t,e+(d<<1))<<1);if(l==1)for(d=0;d<f;d++)a.push(o.readUint(t,e+(d<<2)));return a},n.maxp={},n.maxp.parse=function(t,e,r){var i=n._bin,o={},a=i.readUint(t,e);return e+=4,o.numGlyphs=i.readUshort(t,e),e+=2,a==65536&&(o.maxPoints=i.readUshort(t,e),e+=2,o.maxContours=i.readUshort(t,e),e+=2,o.maxCompositePoints=i.readUshort(t,e),e+=2,o.maxCompositeContours=i.readUshort(t,e),e+=2,o.maxZones=i.readUshort(t,e),e+=2,o.maxTwilightPoints=i.readUshort(t,e),e+=2,o.maxStorage=i.readUshort(t,e),e+=2,o.maxFunctionDefs=i.readUshort(t,e),e+=2,o.maxInstructionDefs=i.readUshort(t,e),e+=2,o.maxStackElements=i.readUshort(t,e),e+=2,o.maxSizeOfInstructions=i.readUshort(t,e),e+=2,o.maxComponentElements=i.readUshort(t,e),e+=2,o.maxComponentDepth=i.readUshort(t,e),e+=2),o},n.name={},n.name.parse=function(t,e,r){var i=n._bin,o={};i.readUshort(t,e),e+=2;var a=i.readUshort(t,e);e+=2,i.readUshort(t,e);for(var l,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=e+=2,h=0;h<a;h++){var p=i.readUshort(t,e);e+=2;var m=i.readUshort(t,e);e+=2;var g=i.readUshort(t,e);e+=2;var P=i.readUshort(t,e);e+=2;var D=i.readUshort(t,e);e+=2;var C=i.readUshort(t,e);e+=2;var b,S=f[P],R=d+12*a+C;if(p==0)b=i.readUnicode(t,R,D/2);else if(p==3&&m==0)b=i.readUnicode(t,R,D/2);else if(m==0)b=i.readASCII(t,R,D);else if(m==1)b=i.readUnicode(t,R,D/2);else if(m==3)b=i.readUnicode(t,R,D/2);else{if(p!=1)throw"unknown encoding "+m+", platformID: "+p;b=i.readASCII(t,R,D),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var k="p"+p+","+g.toString(16);o[k]==null&&(o[k]={}),o[k][S!==void 0?S:P]=b,o[k]._lang=g}for(var F in o)if(o[F].postScriptName!=null&&o[F]._lang==1033)return o[F];for(var F in o)if(o[F].postScriptName!=null&&o[F]._lang==0)return o[F];for(var F in o)if(o[F].postScriptName!=null&&o[F]._lang==3084)return o[F];for(var F in o)if(o[F].postScriptName!=null)return o[F];for(var F in o){l=F;break}return console.debug("returning name table with languageID "+o[l]._lang),o[l]},n["OS/2"]={},n["OS/2"].parse=function(t,e,r){var i=n._bin.readUshort(t,e);e+=2;var o={};if(i==0)n["OS/2"].version0(t,e,o);else if(i==1)n["OS/2"].version1(t,e,o);else if(i==2||i==3||i==4)n["OS/2"].version2(t,e,o);else{if(i!=5)throw"unknown OS/2 table version: "+i;n["OS/2"].version5(t,e,o)}return o},n["OS/2"].version0=function(t,e,r){var i=n._bin;return r.xAvgCharWidth=i.readShort(t,e),e+=2,r.usWeightClass=i.readUshort(t,e),e+=2,r.usWidthClass=i.readUshort(t,e),e+=2,r.fsType=i.readUshort(t,e),e+=2,r.ySubscriptXSize=i.readShort(t,e),e+=2,r.ySubscriptYSize=i.readShort(t,e),e+=2,r.ySubscriptXOffset=i.readShort(t,e),e+=2,r.ySubscriptYOffset=i.readShort(t,e),e+=2,r.ySuperscriptXSize=i.readShort(t,e),e+=2,r.ySuperscriptYSize=i.readShort(t,e),e+=2,r.ySuperscriptXOffset=i.readShort(t,e),e+=2,r.ySuperscriptYOffset=i.readShort(t,e),e+=2,r.yStrikeoutSize=i.readShort(t,e),e+=2,r.yStrikeoutPosition=i.readShort(t,e),e+=2,r.sFamilyClass=i.readShort(t,e),e+=2,r.panose=i.readBytes(t,e,10),e+=10,r.ulUnicodeRange1=i.readUint(t,e),e+=4,r.ulUnicodeRange2=i.readUint(t,e),e+=4,r.ulUnicodeRange3=i.readUint(t,e),e+=4,r.ulUnicodeRange4=i.readUint(t,e),e+=4,r.achVendID=[i.readInt8(t,e),i.readInt8(t,e+1),i.readInt8(t,e+2),i.readInt8(t,e+3)],e+=4,r.fsSelection=i.readUshort(t,e),e+=2,r.usFirstCharIndex=i.readUshort(t,e),e+=2,r.usLastCharIndex=i.readUshort(t,e),e+=2,r.sTypoAscender=i.readShort(t,e),e+=2,r.sTypoDescender=i.readShort(t,e),e+=2,r.sTypoLineGap=i.readShort(t,e),e+=2,r.usWinAscent=i.readUshort(t,e),e+=2,r.usWinDescent=i.readUshort(t,e),e+=2},n["OS/2"].version1=function(t,e,r){var i=n._bin;return e=n["OS/2"].version0(t,e,r),r.ulCodePageRange1=i.readUint(t,e),e+=4,r.ulCodePageRange2=i.readUint(t,e),e+=4},n["OS/2"].version2=function(t,e,r){var i=n._bin;return e=n["OS/2"].version1(t,e,r),r.sxHeight=i.readShort(t,e),e+=2,r.sCapHeight=i.readShort(t,e),e+=2,r.usDefault=i.readUshort(t,e),e+=2,r.usBreak=i.readUshort(t,e),e+=2,r.usMaxContext=i.readUshort(t,e),e+=2},n["OS/2"].version5=function(t,e,r){var i=n._bin;return e=n["OS/2"].version2(t,e,r),r.usLowerOpticalPointSize=i.readUshort(t,e),e+=2,r.usUpperOpticalPointSize=i.readUshort(t,e),e+=2},n.post={},n.post.parse=function(t,e,r){var i=n._bin,o={};return o.version=i.readFixed(t,e),e+=4,o.italicAngle=i.readFixed(t,e),e+=4,o.underlinePosition=i.readShort(t,e),e+=2,o.underlineThickness=i.readShort(t,e),e+=2,o},n==null&&(n={}),n.U==null&&(n.U={}),n.U.codeToGlyph=function(t,e){var r=t.cmap,i=-1;if(r.p0e4!=null?i=r.p0e4:r.p3e1!=null?i=r.p3e1:r.p1e0!=null?i=r.p1e0:r.p0e3!=null&&(i=r.p0e3),i==-1)throw"no familiar platform and encoding!";var o=r.tables[i];if(o.format==0)return e>=o.map.length?0:o.map[e];if(o.format==4){for(var a=-1,l=0;l<o.endCount.length;l++)if(e<=o.endCount[l]){a=l;break}return a==-1||o.startCount[a]>e?0:65535&(o.idRangeOffset[a]!=0?o.glyphIdArray[e-o.startCount[a]+(o.idRangeOffset[a]>>1)-(o.idRangeOffset.length-a)]:e+o.idDelta[a])}if(o.format==12){if(e>o.groups[o.groups.length-1][1])return 0;for(l=0;l<o.groups.length;l++){var f=o.groups[l];if(f[0]<=e&&e<=f[1])return f[2]+(e-f[0])}return 0}throw"unknown cmap table format "+o.format},n.U.glyphToPath=function(t,e){var r={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var i=t.SVG.entries[e];return i==null?r:(typeof i=="string"&&(i=n.SVG.toPath(i),t.SVG.entries[e]=i),i)}if(t.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},a=t.CFF,l=t.CFF.Private;if(a.ROS){for(var f=0;a.FDSelect[f+2]<=e;)f+=2;l=a.FDArray[a.FDSelect[f+1]].Private}n.U._drawCFF(t.CFF.CharStrings[e],o,a,l,r)}else t.glyf&&n.U._drawGlyf(e,t,r);return r},n.U._drawGlyf=function(t,e,r){var i=e.glyf[t];i==null&&(i=e.glyf[t]=n.glyf._parseGlyf(e,t)),i!=null&&(i.noc>-1?n.U._simpleGlyph(i,r):n.U._compoGlyph(i,e,r))},n.U._simpleGlyph=function(t,e){for(var r=0;r<t.noc;r++){for(var i=r==0?0:t.endPts[r-1]+1,o=t.endPts[r],a=i;a<=o;a++){var l=a==i?o:a-1,f=a==o?i:a+1,d=1&t.flags[a],h=1&t.flags[l],p=1&t.flags[f],m=t.xs[a],g=t.ys[a];if(a==i)if(d){if(!h){n.U.P.moveTo(e,m,g);continue}n.U.P.moveTo(e,t.xs[l],t.ys[l])}else h?n.U.P.moveTo(e,t.xs[l],t.ys[l]):n.U.P.moveTo(e,(t.xs[l]+m)/2,(t.ys[l]+g)/2);d?h&&n.U.P.lineTo(e,m,g):p?n.U.P.qcurveTo(e,m,g,t.xs[f],t.ys[f]):n.U.P.qcurveTo(e,m,g,(m+t.xs[f])/2,(g+t.ys[f])/2)}n.U.P.closePath(e)}},n.U._compoGlyph=function(t,e,r){for(var i=0;i<t.parts.length;i++){var o={cmds:[],crds:[]},a=t.parts[i];n.U._drawGlyf(a.glyphIndex,e,o);for(var l=a.m,f=0;f<o.crds.length;f+=2){var d=o.crds[f],h=o.crds[f+1];r.crds.push(d*l.a+h*l.b+l.tx),r.crds.push(d*l.c+h*l.d+l.ty)}for(f=0;f<o.cmds.length;f++)r.cmds.push(o.cmds[f])}},n.U._getGlyphClass=function(t,e){var r=n._lctf.getInterval(e,t);return r==-1?0:e[r+2]},n.U._applySubs=function(t,e,r,i){for(var o=t.length-e-1,a=0;a<r.tabs.length;a++)if(r.tabs[a]!=null){var l,f=r.tabs[a];if(!f.coverage||(l=n._lctf.coverageIndex(f.coverage,t[e]))!=-1){if(r.ltype==1)t[e],f.fmt==1?t[e]=t[e]+f.delta:t[e]=f.newg[l];else if(r.ltype==4)for(var d=f.vals[l],h=0;h<d.length;h++){var p=d[h],m=p.chain.length;if(!(m>o)){for(var g=!0,P=0,D=0;D<m;D++){for(;t[e+P+(1+D)]==-1;)P++;p.chain[D]!=t[e+P+(1+D)]&&(g=!1)}if(g){for(t[e]=p.nglyph,D=0;D<m+P;D++)t[e+D+1]=-1;break}}}else if(r.ltype==5&&f.fmt==2)for(var C=n._lctf.getInterval(f.cDef,t[e]),b=f.cDef[C+2],S=f.scset[b],R=0;R<S.length;R++){var k=S[R],F=k.input;if(!(F.length>o)){for(g=!0,D=0;D<F.length;D++){var z=n._lctf.getInterval(f.cDef,t[e+1+D]);if(C==-1&&f.cDef[z+2]!=F[D]){g=!1;break}}if(g){var B=k.substLookupRecords;for(h=0;h<B.length;h+=2)B[h],B[h+1]}}}else if(r.ltype==6&&f.fmt==3){if(!n.U._glsCovered(t,f.backCvg,e-f.backCvg.length)||!n.U._glsCovered(t,f.inptCvg,e)||!n.U._glsCovered(t,f.ahedCvg,e+f.inptCvg.length))continue;var te=f.lookupRec;for(R=0;R<te.length;R+=2){C=te[R];var y=i[te[R+1]];n.U._applySubs(t,e+C,y,i)}}}}},n.U._glsCovered=function(t,e,r){for(var i=0;i<e.length;i++)if(n._lctf.coverageIndex(e[i],t[r+i])==-1)return!1;return!0},n.U.glyphsToPath=function(t,e,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<e.length;a++){var l=e[a];if(l!=-1){for(var f=a<e.length-1&&e[a+1]!=-1?e[a+1]:0,d=n.U.glyphToPath(t,l),h=0;h<d.crds.length;h+=2)i.crds.push(d.crds[h]+o),i.crds.push(d.crds[h+1]);for(r&&i.cmds.push(r),h=0;h<d.cmds.length;h++)i.cmds.push(d.cmds[h]);r&&i.cmds.push("X"),o+=t.hmtx.aWidth[l],a<e.length-1&&(o+=n.U.getPairAdjustment(t,l,f))}}return i},n.U.P={},n.U.P.moveTo=function(t,e,r){t.cmds.push("M"),t.crds.push(e,r)},n.U.P.lineTo=function(t,e,r){t.cmds.push("L"),t.crds.push(e,r)},n.U.P.curveTo=function(t,e,r,i,o,a,l){t.cmds.push("C"),t.crds.push(e,r,i,o,a,l)},n.U.P.qcurveTo=function(t,e,r,i,o){t.cmds.push("Q"),t.crds.push(e,r,i,o)},n.U.P.closePath=function(t){t.cmds.push("Z")},n.U._drawCFF=function(t,e,r,i,o){for(var a=e.stack,l=e.nStems,f=e.haveWidth,d=e.width,h=e.open,p=0,m=e.x,g=e.y,P=0,D=0,C=0,b=0,S=0,R=0,k=0,F=0,z=0,B=0,te={val:0,size:0};p<t.length;){n.CFF.getCharString(t,p,te);var y=te.val;if(p+=te.size,y=="o1"||y=="o18")a.length%2!=0&&!f&&(d=a.shift()+i.nominalWidthX),l+=a.length>>1,a.length=0,f=!0;else if(y=="o3"||y=="o23")a.length%2!=0&&!f&&(d=a.shift()+i.nominalWidthX),l+=a.length>>1,a.length=0,f=!0;else if(y=="o4")a.length>1&&!f&&(d=a.shift()+i.nominalWidthX,f=!0),h&&n.U.P.closePath(o),g+=a.pop(),n.U.P.moveTo(o,m,g),h=!0;else if(y=="o5")for(;a.length>0;)m+=a.shift(),g+=a.shift(),n.U.P.lineTo(o,m,g);else if(y=="o6"||y=="o7")for(var O=a.length,A=y=="o6",W=0;W<O;W++){var X=a.shift();A?m+=X:g+=X,A=!A,n.U.P.lineTo(o,m,g)}else if(y=="o8"||y=="o24"){O=a.length;for(var oe=0;oe+6<=O;)P=m+a.shift(),D=g+a.shift(),C=P+a.shift(),b=D+a.shift(),m=C+a.shift(),g=b+a.shift(),n.U.P.curveTo(o,P,D,C,b,m,g),oe+=6;y=="o24"&&(m+=a.shift(),g+=a.shift(),n.U.P.lineTo(o,m,g))}else{if(y=="o11")break;if(y=="o1234"||y=="o1235"||y=="o1236"||y=="o1237")y=="o1234"&&(D=g,C=(P=m+a.shift())+a.shift(),B=b=D+a.shift(),R=b,F=g,m=(k=(S=(z=C+a.shift())+a.shift())+a.shift())+a.shift(),n.U.P.curveTo(o,P,D,C,b,z,B),n.U.P.curveTo(o,S,R,k,F,m,g)),y=="o1235"&&(P=m+a.shift(),D=g+a.shift(),C=P+a.shift(),b=D+a.shift(),z=C+a.shift(),B=b+a.shift(),S=z+a.shift(),R=B+a.shift(),k=S+a.shift(),F=R+a.shift(),m=k+a.shift(),g=F+a.shift(),a.shift(),n.U.P.curveTo(o,P,D,C,b,z,B),n.U.P.curveTo(o,S,R,k,F,m,g)),y=="o1236"&&(P=m+a.shift(),D=g+a.shift(),C=P+a.shift(),B=b=D+a.shift(),R=b,k=(S=(z=C+a.shift())+a.shift())+a.shift(),F=R+a.shift(),m=k+a.shift(),n.U.P.curveTo(o,P,D,C,b,z,B),n.U.P.curveTo(o,S,R,k,F,m,g)),y=="o1237"&&(P=m+a.shift(),D=g+a.shift(),C=P+a.shift(),b=D+a.shift(),z=C+a.shift(),B=b+a.shift(),S=z+a.shift(),R=B+a.shift(),k=S+a.shift(),F=R+a.shift(),Math.abs(k-m)>Math.abs(F-g)?m=k+a.shift():g=F+a.shift(),n.U.P.curveTo(o,P,D,C,b,z,B),n.U.P.curveTo(o,S,R,k,F,m,g));else if(y=="o14"){if(a.length>0&&!f&&(d=a.shift()+r.nominalWidthX,f=!0),a.length==4){var ae=a.shift(),_=a.shift(),M=a.shift(),v=a.shift(),T=n.CFF.glyphBySE(r,M),E=n.CFF.glyphBySE(r,v);n.U._drawCFF(r.CharStrings[T],e,r,i,o),e.x=ae,e.y=_,n.U._drawCFF(r.CharStrings[E],e,r,i,o)}h&&(n.U.P.closePath(o),h=!1)}else if(y=="o19"||y=="o20")a.length%2!=0&&!f&&(d=a.shift()+i.nominalWidthX),l+=a.length>>1,a.length=0,f=!0,p+=l+7>>3;else if(y=="o21")a.length>2&&!f&&(d=a.shift()+i.nominalWidthX,f=!0),g+=a.pop(),m+=a.pop(),h&&n.U.P.closePath(o),n.U.P.moveTo(o,m,g),h=!0;else if(y=="o22")a.length>1&&!f&&(d=a.shift()+i.nominalWidthX,f=!0),m+=a.pop(),h&&n.U.P.closePath(o),n.U.P.moveTo(o,m,g),h=!0;else if(y=="o25"){for(;a.length>6;)m+=a.shift(),g+=a.shift(),n.U.P.lineTo(o,m,g);P=m+a.shift(),D=g+a.shift(),C=P+a.shift(),b=D+a.shift(),m=C+a.shift(),g=b+a.shift(),n.U.P.curveTo(o,P,D,C,b,m,g)}else if(y=="o26")for(a.length%2&&(m+=a.shift());a.length>0;)P=m,D=g+a.shift(),m=C=P+a.shift(),g=(b=D+a.shift())+a.shift(),n.U.P.curveTo(o,P,D,C,b,m,g);else if(y=="o27")for(a.length%2&&(g+=a.shift());a.length>0;)D=g,C=(P=m+a.shift())+a.shift(),b=D+a.shift(),m=C+a.shift(),g=b,n.U.P.curveTo(o,P,D,C,b,m,g);else if(y=="o10"||y=="o29"){var L=y=="o10"?i:r;if(a.length==0)console.debug("error: empty stack");else{var x=a.pop(),N=L.Subrs[x+L.Bias];e.x=m,e.y=g,e.nStems=l,e.haveWidth=f,e.width=d,e.open=h,n.U._drawCFF(N,e,r,i,o),m=e.x,g=e.y,l=e.nStems,f=e.haveWidth,d=e.width,h=e.open}}else if(y=="o30"||y=="o31"){var I=a.length,j=(oe=0,y=="o31");for(oe+=I-(O=-3&I);oe<O;)j?(D=g,C=(P=m+a.shift())+a.shift(),g=(b=D+a.shift())+a.shift(),O-oe==5?(m=C+a.shift(),oe++):m=C,j=!1):(P=m,D=g+a.shift(),C=P+a.shift(),b=D+a.shift(),m=C+a.shift(),O-oe==5?(g=b+a.shift(),oe++):g=b,j=!0),n.U.P.curveTo(o,P,D,C,b,m,g),oe+=4}else{if((y+"").charAt(0)=="o")throw console.debug("Unknown operation: "+y,t),y;a.push(y)}}}e.x=m,e.y=g,e.nStems=l,e.haveWidth=f,e.width=d,e.open=h};var u=n,c={Typr:u};return s.Typr=u,s.default=c,Object.defineProperty(s,"__esModule",{value:!0}),s}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Ps(){return function(s){var n=Uint8Array,u=Uint16Array,c=Uint32Array,t=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),r=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=function(y,O){for(var A=new u(31),W=0;W<31;++W)A[W]=O+=1<<y[W-1];var X=new c(A[30]);for(W=1;W<30;++W)for(var oe=A[W];oe<A[W+1];++oe)X[oe]=oe-A[W]<<5|W;return[A,X]},o=i(t,2),a=o[0],l=o[1];a[28]=258,l[258]=28;for(var f=i(e,0)[0],d=new u(32768),h=0;h<32768;++h){var p=(43690&h)>>>1|(21845&h)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[h]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(y,O,A){for(var W=y.length,X=0,oe=new u(O);X<W;++X)++oe[y[X]-1];var ae,_=new u(O);for(X=0;X<O;++X)_[X]=_[X-1]+oe[X-1]<<1;{ae=new u(1<<O);var M=15-O;for(X=0;X<W;++X)if(y[X])for(var v=X<<4|y[X],T=O-y[X],E=_[y[X]-1]++<<T,L=E|(1<<T)-1;E<=L;++E)ae[d[E]>>>M]=v}return ae},g=new n(288);for(h=0;h<144;++h)g[h]=8;for(h=144;h<256;++h)g[h]=9;for(h=256;h<280;++h)g[h]=7;for(h=280;h<288;++h)g[h]=8;var P=new n(32);for(h=0;h<32;++h)P[h]=5;var D=m(g,9),C=m(P,5),b=function(y){for(var O=y[0],A=1;A<y.length;++A)y[A]>O&&(O=y[A]);return O},S=function(y,O,A){var W=O/8|0;return(y[W]|y[W+1]<<8)>>(7&O)&A},R=function(y,O){var A=O/8|0;return(y[A]|y[A+1]<<8|y[A+2]<<16)>>(7&O)},k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],F=function(y,O,A){var W=new Error(O||k[y]);if(W.code=y,Error.captureStackTrace&&Error.captureStackTrace(W,F),!A)throw W;return W},z=function(y,O,A){var W=y.length;if(!W||A&&!A.l&&W<5)return O||new n(0);var X=!O||A,oe=!A||A.i;A||(A={}),O||(O=new n(3*W));var ae,_=function(ce){var pe=O.length;if(ce>pe){var be=new n(Math.max(2*pe,ce));be.set(O),O=be}},M=A.f||0,v=A.p||0,T=A.b||0,E=A.l,L=A.d,x=A.m,N=A.n,I=8*W;do{if(!E){A.f=M=S(y,v,1);var j=S(y,v+1,3);if(v+=3,!j){var Z=y[($=((ae=v)/8|0)+(7&ae&&1)+4)-4]|y[$-3]<<8,ne=$+Z;if(ne>W){oe&&F(0);break}X&&_(T+Z),O.set(y.subarray($,ne),T),A.b=T+=Z,A.p=v=8*ne;continue}if(j==1)E=D,L=C,x=9,N=5;else if(j==2){var U=S(y,v,31)+257,w=S(y,v+10,15)+4,Q=U+S(y,v+5,31)+1;v+=14;for(var J=new n(Q),V=new n(19),Y=0;Y<w;++Y)V[r[Y]]=S(y,v+3*Y,7);v+=3*w;var K=b(V),H=(1<<K)-1,re=m(V,K);for(Y=0;Y<Q;){var $,G=re[S(y,v,H)];if(v+=15&G,($=G>>>4)<16)J[Y++]=$;else{var se=0,ee=0;for($==16?(ee=3+S(y,v,3),v+=2,se=J[Y-1]):$==17?(ee=3+S(y,v,7),v+=3):$==18&&(ee=11+S(y,v,127),v+=7);ee--;)J[Y++]=se}}var ie=J.subarray(0,U),q=J.subarray(U);x=b(ie),N=b(q),E=m(ie,x),L=m(q,N)}else F(1);if(v>I){oe&&F(0);break}}X&&_(T+131072);for(var xe=(1<<x)-1,le=(1<<N)-1,ue=v;;ue=v){var fe=(se=E[R(y,v)&xe])>>>4;if((v+=15&se)>I){oe&&F(0);break}if(se||F(2),fe<256)O[T++]=fe;else{if(fe==256){ue=v,E=null;break}var ye=fe-254;if(fe>264){var Ue=t[Y=fe-257];ye=S(y,v,(1<<Ue)-1)+a[Y],v+=Ue}var De=L[R(y,v)&le],he=De>>>4;if(De||F(3),v+=15&De,q=f[he],he>3&&(Ue=e[he],q+=R(y,v)&(1<<Ue)-1,v+=Ue),v>I){oe&&F(0);break}X&&_(T+131072);for(var _e=T+ye;T<_e;T+=4)O[T]=O[T-q],O[T+1]=O[T+1-q],O[T+2]=O[T+2-q],O[T+3]=O[T+3-q];T=_e}}A.l=E,A.p=ue,A.b=T,E&&(M=1,A.m=x,A.d=L,A.n=N)}while(!M);return T==O.length?O:function(ce,pe,be){(be==null||be>ce.length)&&(be=ce.length);var Be=new(ce instanceof u?u:ce instanceof c?c:n)(be-pe);return Be.set(ce.subarray(pe,be)),Be}(O,0,T)},B=new n(0),te=typeof TextDecoder<"u"&&new TextDecoder;try{te.decode(B,{stream:!0})}catch{}return s.convert_streams=function(y){var O=new DataView(y),A=0;function W(){var U=O.getUint16(A);return A+=2,U}function X(){var U=O.getUint32(A);return A+=4,U}function oe(U){Z.setUint16(ne,U),ne+=2}function ae(U){Z.setUint32(ne,U),ne+=4}for(var _={signature:X(),flavor:X(),length:X(),numTables:W(),reserved:W(),totalSfntSize:X(),majorVersion:W(),minorVersion:W(),metaOffset:X(),metaLength:X(),metaOrigLength:X(),privOffset:X(),privLength:X()},M=0;Math.pow(2,M)<=_.numTables;)M++;M--;for(var v=16*Math.pow(2,M),T=16*_.numTables-v,E=12,L=[],x=0;x<_.numTables;x++)L.push({tag:X(),offset:X(),compLength:X(),origLength:X(),origChecksum:X()}),E+=16;var N,I=new Uint8Array(12+16*L.length+L.reduce(function(U,w){return U+w.origLength+4},0)),j=I.buffer,Z=new DataView(j),ne=0;return ae(_.flavor),oe(_.numTables),oe(v),oe(M),oe(T),L.forEach(function(U){ae(U.tag),ae(U.origChecksum),ae(E),ae(U.origLength),U.outOffset=E,(E+=U.origLength)%4!=0&&(E+=4-E%4)}),L.forEach(function(U){var w,Q=y.slice(U.offset,U.offset+U.compLength);if(U.compLength!=U.origLength){var J=new Uint8Array(U.origLength);w=new Uint8Array(Q,2),z(w,J)}else J=new Uint8Array(Q);I.set(J,U.outOffset);var V=0;(E=U.outOffset+U.origLength)%4!=0&&(V=4-E%4),I.set(new Uint8Array(V).buffer,U.outOffset+U.origLength),N=E+V}),j.slice(0,N)},Object.defineProperty(s,"__esModule",{value:!0}),s}({}).convert_streams}function Os(s,n){const u={M:2,L:2,Q:4,C:6,Z:0},c={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},t=1,e=2,r=4,i=8,o=16,a=32;let l;function f(k){if(!l){const F={R:e,L:t,D:r,C:o,U:a,T:i};l=new Map;for(let z in c){let B=0;c[z].split(",").forEach(te=>{let[y,O]=te.split("+");y=parseInt(y,36),O=O?parseInt(O,36):0,l.set(B+=y,F[z]);for(let A=O;A--;)l.set(++B,F[z])})}}return l.get(k)||a}const d=1,h=2,p=3,m=4,g=[null,"isol","init","fina","medi"];function P(k){const F=new Uint8Array(k.length);let z=a,B=d,te=-1;for(let y=0;y<k.length;y++){const O=k.codePointAt(y);let A=f(O)|0,W=d;A&i||(z&(t|r|o)?A&(e|r|o)?(W=p,(B===d||B===p)&&F[te]++):A&(t|a)&&(B===h||B===m)&&F[te]--:z&(e|a)&&(B===h||B===m)&&F[te]--,B=F[y]=W,z=A,te=y,O>65535&&y++)}return F}function D(k,F){const z=[];for(let te=0;te<F.length;te++){const y=F.codePointAt(te);y>65535&&te++,z.push(s.U.codeToGlyph(k,y))}const B=k.GSUB;if(B){const{lookupList:te,featureList:y}=B;let O;const A=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,W=[];y.forEach(X=>{if(A.test(X.tag))for(let oe=0;oe<X.tab.length;oe++){if(W[X.tab[oe]])continue;W[X.tab[oe]]=!0;const ae=te[X.tab[oe]],_=/^(isol|init|fina|medi)$/.test(X.tag);_&&!O&&(O=P(F));for(let M=0;M<z.length;M++)(!O||!_||g[O[M]]===X.tag)&&s.U._applySubs(z,M,ae,te)}})}return z}function C(k,F){const z=new Int16Array(F.length*3);let B=0;for(;B<F.length;B++){const A=F[B];if(A===-1)continue;z[B*3+2]=k.hmtx.aWidth[A];const W=k.GPOS;if(W){const X=W.lookupList;for(let oe=0;oe<X.length;oe++){const ae=X[oe];for(let _=0;_<ae.tabs.length;_++){const M=ae.tabs[_];if(ae.ltype===1){if(s._lctf.coverageIndex(M.coverage,A)!==-1&&M.pos){O(M.pos,B);break}}else if(ae.ltype===2){let v=null,T=te();if(T!==-1){const E=s._lctf.coverageIndex(M.coverage,F[T]);if(E!==-1){if(M.fmt===1){const L=M.pairsets[E];for(let x=0;x<L.length;x++)L[x].gid2===A&&(v=L[x])}else if(M.fmt===2){const L=s.U._getGlyphClass(F[T],M.classDef1),x=s.U._getGlyphClass(A,M.classDef2);v=M.matrix[L][x]}if(v){v.val1&&O(v.val1,T),v.val2&&O(v.val2,B);break}}}}else if(ae.ltype===4){const v=s._lctf.coverageIndex(M.markCoverage,A);if(v!==-1){const T=te(y),E=T===-1?-1:s._lctf.coverageIndex(M.baseCoverage,F[T]);if(E!==-1){const L=M.markArray[v],x=M.baseArray[E][L.markClass];z[B*3]=x.x-L.x+z[T*3]-z[T*3+2],z[B*3+1]=x.y-L.y+z[T*3+1];break}}}else if(ae.ltype===6){const v=s._lctf.coverageIndex(M.mark1Coverage,A);if(v!==-1){const T=te();if(T!==-1){const E=F[T];if(b(k,E)===3){const L=s._lctf.coverageIndex(M.mark2Coverage,E);if(L!==-1){const x=M.mark1Array[v],N=M.mark2Array[L][x.markClass];z[B*3]=N.x-x.x+z[T*3]-z[T*3+2],z[B*3+1]=N.y-x.y+z[T*3+1];break}}}}}}}}else if(k.kern&&!k.cff){const X=te();if(X!==-1){const oe=k.kern.glyph1.indexOf(F[X]);if(oe!==-1){const ae=k.kern.rval[oe].glyph2.indexOf(A);ae!==-1&&(z[X*3+2]+=k.kern.rval[oe].vals[ae])}}}}return z;function te(A){for(let W=B-1;W>=0;W--)if(F[W]!==-1&&(!A||A(F[W])))return W;return-1}function y(A){return b(k,A)===1}function O(A,W){for(let X=0;X<3;X++)z[W*3+X]+=A[X]||0}}function b(k,F){const z=k.GDEF&&k.GDEF.glyphClassDef;return z?s.U._getGlyphClass(F,z):0}function S(...k){for(let F=0;F<k.length;F++)if(typeof k[F]=="number")return k[F]}function R(k){const F=Object.create(null),z=k["OS/2"],B=k.hhea,te=k.head.unitsPerEm,y=S(z&&z.sTypoAscender,B&&B.ascender,te),O={unitsPerEm:te,ascender:y,descender:S(z&&z.sTypoDescender,B&&B.descender,0),capHeight:S(z&&z.sCapHeight,y),xHeight:S(z&&z.sxHeight,y),lineGap:S(z&&z.sTypoLineGap,B&&B.lineGap),supportsCodePoint(A){return s.U.codeToGlyph(k,A)>0},forEachGlyph(A,W,X,oe){let ae=0;const _=1/O.unitsPerEm*W,M=D(k,A);let v=0;const T=C(k,M);return M.forEach((E,L)=>{if(E!==-1){let x=F[E];if(!x){const{cmds:N,crds:I}=s.U.glyphToPath(k,E);let j="",Z=0;for(let J=0,V=N.length;J<V;J++){const Y=u[N[J]];j+=N[J];for(let K=1;K<=Y;K++)j+=(K>1?",":"")+I[Z++]}let ne,U,w,Q;if(I.length){ne=U=1/0,w=Q=-1/0;for(let J=0,V=I.length;J<V;J+=2){let Y=I[J],K=I[J+1];Y<ne&&(ne=Y),K<U&&(U=K),Y>w&&(w=Y),K>Q&&(Q=K)}}else ne=w=U=Q=0;x=F[E]={index:E,advanceWidth:k.hmtx.aWidth[E],xMin:ne,yMin:U,xMax:w,yMax:Q,path:j}}oe.call(null,x,ae+T[L*3]*_,T[L*3+1]*_,v),ae+=T[L*3+2]*_,X&&(ae+=X*W)}v+=A.codePointAt(v)>65535?2:1}),ae}};return O}return function(F){const z=new Uint8Array(F,0,4),B=s._bin.readASCII(z,0,4);if(B==="wOFF")F=n(F);else if(B==="wOF2")throw new Error("woff2 fonts not supported");return R(s.parse(F)[0])}}const Bs=Xt({name:"Typr Font Parser",dependencies:[Rs,Ps,Os],init(s,n,u){const c=s(),t=n();return u(c,t)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function Gs(){return function(s){var n=function(){this.buckets=new Map};n.prototype.add=function(C){var b=C>>5;this.buckets.set(b,(this.buckets.get(b)||0)|1<<(31&C))},n.prototype.has=function(C){var b=this.buckets.get(C>>5);return b!==void 0&&(b&1<<(31&C))!=0},n.prototype.serialize=function(){var C=[];return this.buckets.forEach(function(b,S){C.push((+S).toString(36)+":"+b.toString(36))}),C.join(",")},n.prototype.deserialize=function(C){var b=this;this.buckets.clear(),C.split(",").forEach(function(S){var R=S.split(":");b.buckets.set(parseInt(R[0],36),parseInt(R[1],36))})};var u=Math.pow(2,8),c=u-1,t=~c;function e(C){var b=function(R){return R&t}(C).toString(16),S=function(R){return(R&t)+u-1}(C).toString(16);return"codepoint-index/plane"+(C>>16)+"/"+b+"-"+S+".json"}function r(C,b){var S=C&c,R=b.codePointAt(S/6|0);return((R=(R||48)-48)&1<<S%6)!=0}function i(C,b){var S;(S=C,S.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(R){return R.split("-").map(function(k){return parseInt(k.trim(),16)})})).forEach(function(R){var k=R[0],F=R[1];F===void 0&&(F=k),b(k,F)})}function o(C,b){i(C,function(S,R){for(var k=S;k<=R;k++)b(k)})}var a={},l={},f=new WeakMap,d="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function h(C){var b=f.get(C);return b||(b=new n,o(C.ranges,function(S){return b.add(S)}),f.set(C,b)),b}var p,m=new Map;function g(C,b,S){return C[b]?b:C[S]?S:function(R){for(var k in R)return k}(C)}function P(C,b){var S=b;if(!C.includes(S)){S=1/0;for(var R=0;R<C.length;R++)Math.abs(C[R]-b)<Math.abs(S-b)&&(S=C[R])}return S}function D(C){return p||(p=new Set,o("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(b){p.add(b)})),p.has(C)}return s.CodePointSet=n,s.clearCache=function(){a={},l={}},s.getFontsForString=function(C,b){b===void 0&&(b={});var S,R=b.lang;R===void 0&&(R=new RegExp("\\p{Script=Hangul}","u").test(S=C)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(S)?"ja":"en");var k=b.category;k===void 0&&(k="sans-serif");var F=b.style;F===void 0&&(F="normal");var z=b.weight;z===void 0&&(z=400);var B=(b.dataUrl||d).replace(/\/$/g,""),te=new Map,y=new Uint8Array(C.length),O={},A={},W=new Array(C.length),X=new Map,oe=!1;function ae(v){var T=m.get(v);return T||(T=fetch(B+"/"+v).then(function(E){if(!E.ok)throw new Error(E.statusText);return E.json().then(function(L){if(!Array.isArray(L)||L[0]!==1)throw new Error("Incorrect schema version; need 1, got "+L[0]);return L[1]})}).catch(function(E){if(B!==d)return oe||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+B+'", trying default CDN. '+E.message),oe=!0),B=d,m.delete(v),ae(v);throw E}),m.set(v,T)),T}for(var _=function(v){var T=C.codePointAt(v),E=e(T);W[v]=E,a[E]||X.has(E)||X.set(E,ae(E).then(function(L){a[E]=L})),T>65535&&(v++,M=v)},M=0;M<C.length;M++)_(M);return Promise.all(X.values()).then(function(){X.clear();for(var v=function(E){var L=C.codePointAt(E),x=null,N=a[W[E]],I=void 0;for(var j in N){var Z=A[j];if(Z===void 0&&(Z=A[j]=new RegExp(j).test(R||"en")),Z){for(var ne in I=j,N[j])if(r(L,N[j][ne])){x=ne;break}break}}if(!x){e:for(var U in N)if(U!==I){for(var w in N[U])if(r(L,N[U][w])){x=w;break e}}}x||(console.debug("No font coverage for U+"+L.toString(16)),x="latin"),W[E]=x,l[x]||X.has(x)||X.set(x,ae("font-meta/"+x+".json").then(function(Q){l[x]=Q})),L>65535&&(E++,T=E)},T=0;T<C.length;T++)v(T);return Promise.all(X.values())}).then(function(){for(var v,T=null,E=0;E<C.length;E++){var L=C.codePointAt(E);if(T&&(D(L)||h(T).has(L)))y[E]=y[E-1];else{T=l[W[E]];var x=O[T.id];if(!x){var N=T.typeforms,I=g(N,k,"sans-serif"),j=g(N[I],F,"normal"),Z=P((v=N[I])===null||v===void 0?void 0:v[j],z);x=O[T.id]=B+"/font-files/"+T.id+"/"+I+"."+j+"."+Z+".woff"}var ne=te.get(x);ne==null&&(ne=te.size,te.set(x,ne)),y[E]=ne}L>65535&&(E++,y[E]=y[E-1])}return{fontUrls:Array.from(te.keys()),chars:y}})},Object.defineProperty(s,"__esModule",{value:!0}),s}({})}function Ns(s,n){const u=Object.create(null),c=Object.create(null);function t(r,i){const o=a=>{console.error(`Failure loading font ${r}`,a)};try{const a=new XMLHttpRequest;a.open("get",r,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status>=400)o(new Error(a.statusText));else if(a.status>0)try{const l=s(a.response);l.src=r,i(l)}catch(l){o(l)}},a.onerror=o,a.send()}catch(a){o(a)}}function e(r,i){let o=u[r];o?i(o):c[r]?c[r].push(i):(c[r]=[i],t(r,a=>{a.src=r,u[r]=a,c[r].forEach(l=>l(a)),delete c[r]}))}return function(r,i,{lang:o,fonts:a=[],style:l="normal",weight:f="normal",unicodeFontsURL:d}={}){const h=new Uint8Array(r.length),p=[];r.length||D();const m=new Map,g=[];if(l!=="italic"&&(l="normal"),typeof f!="number"&&(f=f==="bold"?700:400),a&&!Array.isArray(a)&&(a=[a]),a=a.slice().filter(b=>!b.lang||b.lang.test(o)).reverse(),a.length){let k=0;(function F(z=0){for(let B=z,te=r.length;B<te;B++){const y=r.codePointAt(B);if(k===1&&p[h[B-1]].supportsCodePoint(y)||B>0&&/\s/.test(r[B]))h[B]=h[B-1],k===2&&(g[g.length-1][1]=B);else for(let O=h[B],A=a.length;O<=A;O++)if(O===A){const W=k===2?g[g.length-1]:g[g.length]=[B,B];W[1]=B,k=2}else{h[B]=O;const{src:W,unicodeRange:X}=a[O];if(!X||C(y,X)){const oe=u[W];if(!oe){e(W,()=>{F(B)});return}if(oe.supportsCodePoint(y)){let ae=m.get(oe);typeof ae!="number"&&(ae=p.length,p.push(oe),m.set(oe,ae)),h[B]=ae,k=1;break}}}y>65535&&B+1<te&&(h[B+1]=h[B],B++,k===2&&(g[g.length-1][1]=B))}P()})()}else g.push([0,r.length-1]),P();function P(){if(g.length){const b=g.map(S=>r.substring(S[0],S[1]+1)).join(`
`);n.getFontsForString(b,{lang:o||void 0,style:l,weight:f,dataUrl:d}).then(({fontUrls:S,chars:R})=>{const k=p.length;let F=0;g.forEach(B=>{for(let te=0,y=B[1]-B[0];te<=y;te++)h[B[0]+te]=R[F++]+k;F++});let z=0;S.forEach((B,te)=>{e(B,y=>{p[te+k]=y,++z===S.length&&D()})})})}else D()}function D(){i({chars:h,fonts:p})}function C(b,S){for(let R=0;R<S.length;R++){const[k,F=k]=S[R];if(k<=b&&b<=F)return!0}return!1}}}const js=Xt({name:"FontResolver",dependencies:[Ns,Bs,Gs],init(s,n,u){return s(n,u())}});function zs(s,n){const c=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,t="[^\\S\\u00A0]",e=new RegExp(`${t}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function r({text:p,lang:m,fonts:g,style:P,weight:D,preResolvedFonts:C,unicodeFontsURL:b},S){const R=({chars:k,fonts:F})=>{let z,B;const te=[];for(let y=0;y<k.length;y++)k[y]!==B?(B=k[y],te.push(z={start:y,end:y,fontObj:F[k[y]]})):z.end=y;S(te)};C?R(C):s(p,R,{lang:m,fonts:g,style:P,weight:D,unicodeFontsURL:b})}function i({text:p="",font:m,lang:g,sdfGlyphSize:P=64,fontSize:D=400,fontWeight:C=1,fontStyle:b="normal",letterSpacing:S=0,lineHeight:R="normal",maxWidth:k=1/0,direction:F,textAlign:z="left",textIndent:B=0,whiteSpace:te="normal",overflowWrap:y="normal",anchorX:O=0,anchorY:A=0,metricsOnly:W=!1,unicodeFontsURL:X,preResolvedFonts:oe=null,includeCaretPositions:ae=!1,chunkedBoundsSize:_=8192,colorRanges:M=null},v){const T=f(),E={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),D=+D,S=+S,k=+k,R=R||"normal",B=+B,r({text:p,lang:g,style:b,weight:C,fonts:typeof m=="string"?[{src:m}]:m,unicodeFontsURL:X,preResolvedFonts:oe},L=>{E.fontLoad=f()-T;const x=isFinite(k);let N=null,I=null,j=null,Z=null,ne=null,U=null,w=null,Q=null,J=0,V=0,Y=te!=="nowrap";const K=new Map,H=f();let re=B,$=0,G=new d;const se=[G];L.forEach(le=>{const{fontObj:ue}=le,{ascender:fe,descender:ye,unitsPerEm:Ue,lineGap:De,capHeight:he,xHeight:_e}=ue;let ce=K.get(ue);if(!ce){const ge=D/Ue,ke=R==="normal"?(fe-ye+De)*ge:R*D,$e=(ke-(fe-ye)*ge)/2,Ae=Math.min(ke,(fe-ye)*ge),ve=(fe+ye)/2*ge+Ae/2;ce={index:K.size,src:ue.src,fontObj:ue,fontSizeMult:ge,unitsPerEm:Ue,ascender:fe*ge,descender:ye*ge,capHeight:he*ge,xHeight:_e*ge,lineHeight:ke,baseline:-$e-fe*ge,caretTop:ve,caretBottom:ve-Ae},K.set(ue,ce)}const{fontSizeMult:pe}=ce,be=p.slice(le.start,le.end+1);let Be,Ce;ue.forEachGlyph(be,D,S,(ge,ke,$e,Ae)=>{ke+=$,Ae+=le.start,Be=ke,Ce=ge;const ve=p.charAt(Ae),Fe=ge.advanceWidth*pe,Ee=G.count;let me;if("isEmpty"in ge||(ge.isWhitespace=!!ve&&new RegExp(t).test(ve),ge.canBreakAfter=!!ve&&e.test(ve),ge.isEmpty=ge.xMin===ge.xMax||ge.yMin===ge.yMax||c.test(ve)),!ge.isWhitespace&&!ge.isEmpty&&V++,Y&&x&&!ge.isWhitespace&&ke+Fe+re>k&&Ee){if(G.glyphAt(Ee-1).glyphObj.canBreakAfter)me=new d,re=-ke;else for(let He=Ee;He--;)if(He===0&&y==="break-word"){me=new d,re=-ke;break}else if(G.glyphAt(He).glyphObj.canBreakAfter){me=G.splitAt(He+1);const We=me.glyphAt(0).x;re-=We;for(let Ge=me.count;Ge--;)me.glyphAt(Ge).x-=We;break}me&&(G.isSoftWrapped=!0,G=me,se.push(G),J=k)}let Ie=G.glyphAt(G.count);Ie.glyphObj=ge,Ie.x=ke+re,Ie.y=$e,Ie.width=Fe,Ie.charIndex=Ae,Ie.fontData=ce,ve===`
`&&(G=new d,se.push(G),re=-(ke+Fe+S*D)+B)}),$=Be+Ce.advanceWidth*pe+S*D});let ee=0;se.forEach(le=>{let ue=!0;for(let fe=le.count;fe--;){const ye=le.glyphAt(fe);ue&&!ye.glyphObj.isWhitespace&&(le.width=ye.x+ye.width,le.width>J&&(J=le.width),ue=!1);let{lineHeight:Ue,capHeight:De,xHeight:he,baseline:_e}=ye.fontData;Ue>le.lineHeight&&(le.lineHeight=Ue);const ce=_e-le.baseline;ce<0&&(le.baseline+=ce,le.cap+=ce,le.ex+=ce),le.cap=Math.max(le.cap,le.baseline+De),le.ex=Math.max(le.ex,le.baseline+he)}le.baseline-=ee,le.cap-=ee,le.ex-=ee,ee+=le.lineHeight});let ie=0,q=0;if(O&&(typeof O=="number"?ie=-O:typeof O=="string"&&(ie=-J*(O==="left"?0:O==="center"?.5:O==="right"?1:a(O)))),A&&(typeof A=="number"?q=-A:typeof A=="string"&&(q=A==="top"?0:A==="top-baseline"?-se[0].baseline:A==="top-cap"?-se[0].cap:A==="top-ex"?-se[0].ex:A==="middle"?ee/2:A==="bottom"?ee:A==="bottom-baseline"?-se[se.length-1].baseline:a(A)*ee)),!W){const le=n.getEmbeddingLevels(p,F);N=new Uint16Array(V),I=new Uint8Array(V),j=new Float32Array(V*2),Z={},w=[1/0,1/0,-1/0,-1/0],Q=[],ae&&(U=new Float32Array(p.length*4)),M&&(ne=new Uint8Array(V*3));let ue=0,fe=-1,ye=-1,Ue,De;if(se.forEach((he,_e)=>{let{count:ce,width:pe}=he;if(ce>0){let be=0;for(let Ae=ce;Ae--&&he.glyphAt(Ae).glyphObj.isWhitespace;)be++;let Be=0,Ce=0;if(z==="center")Be=(J-pe)/2;else if(z==="right")Be=J-pe;else if(z==="justify"&&he.isSoftWrapped){let Ae=0;for(let ve=ce-be;ve--;)he.glyphAt(ve).glyphObj.isWhitespace&&Ae++;Ce=(J-pe)/Ae}if(Ce||Be){let Ae=0;for(let ve=0;ve<ce;ve++){let Fe=he.glyphAt(ve);const Ee=Fe.glyphObj;Fe.x+=Be+Ae,Ce!==0&&Ee.isWhitespace&&ve<ce-be&&(Ae+=Ce,Fe.width+=Ce)}}const ge=n.getReorderSegments(p,le,he.glyphAt(0).charIndex,he.glyphAt(he.count-1).charIndex);for(let Ae=0;Ae<ge.length;Ae++){const[ve,Fe]=ge[Ae];let Ee=1/0,me=-1/0;for(let Ie=0;Ie<ce;Ie++)if(he.glyphAt(Ie).charIndex>=ve){let He=Ie,We=Ie;for(;We<ce;We++){let Ge=he.glyphAt(We);if(Ge.charIndex>Fe)break;We<ce-be&&(Ee=Math.min(Ee,Ge.x),me=Math.max(me,Ge.x+Ge.width))}for(let Ge=He;Ge<We;Ge++){const ot=he.glyphAt(Ge);ot.x=me-(ot.x+ot.width-Ee)}break}}let ke;const $e=Ae=>ke=Ae;for(let Ae=0;Ae<ce;Ae++){const ve=he.glyphAt(Ae);ke=ve.glyphObj;const Fe=ke.index,Ee=le.levels[ve.charIndex]&1;if(Ee){const me=n.getMirroredCharacter(p[ve.charIndex]);me&&ve.fontData.fontObj.forEachGlyph(me,0,0,$e)}if(ae){const{charIndex:me,fontData:Ie}=ve,He=ve.x+ie,We=ve.x+ve.width+ie;U[me*4]=Ee?We:He,U[me*4+1]=Ee?He:We,U[me*4+2]=he.baseline+Ie.caretBottom+q,U[me*4+3]=he.baseline+Ie.caretTop+q;const Ge=me-fe;Ge>1&&l(U,fe,Ge),fe=me}if(M){const{charIndex:me}=ve;for(;me>ye;)ye++,M.hasOwnProperty(ye)&&(De=M[ye])}if(!ke.isWhitespace&&!ke.isEmpty){const me=ue++,{fontSizeMult:Ie,src:He,index:We}=ve.fontData,Ge=Z[He]||(Z[He]={});Ge[Fe]||(Ge[Fe]={path:ke.path,pathBounds:[ke.xMin,ke.yMin,ke.xMax,ke.yMax]});const ot=ve.x+ie,vt=ve.y+he.baseline+q;j[me*2]=ot,j[me*2+1]=vt;const ht=ot+ke.xMin*Ie,mt=vt+ke.yMin*Ie,Tt=ot+ke.xMax*Ie,pt=vt+ke.yMax*Ie;ht<w[0]&&(w[0]=ht),mt<w[1]&&(w[1]=mt),Tt>w[2]&&(w[2]=Tt),pt>w[3]&&(w[3]=pt),me%_===0&&(Ue={start:me,end:me,rect:[1/0,1/0,-1/0,-1/0]},Q.push(Ue)),Ue.end++;const Ye=Ue.rect;if(ht<Ye[0]&&(Ye[0]=ht),mt<Ye[1]&&(Ye[1]=mt),Tt>Ye[2]&&(Ye[2]=Tt),pt>Ye[3]&&(Ye[3]=pt),N[me]=Fe,I[me]=We,M){const xt=me*3;ne[xt]=De>>16&255,ne[xt+1]=De>>8&255,ne[xt+2]=De&255}}}}}),U){const he=p.length-fe;he>1&&l(U,fe,he)}}const xe=[];K.forEach(({index:le,src:ue,unitsPerEm:fe,ascender:ye,descender:Ue,lineHeight:De,capHeight:he,xHeight:_e})=>{xe[le]={src:ue,unitsPerEm:fe,ascender:ye,descender:Ue,lineHeight:De,capHeight:he,xHeight:_e}}),E.typesetting=f()-H,v({glyphIds:N,glyphFontIndices:I,glyphPositions:j,glyphData:Z,fontData:xe,caretPositions:U,glyphColors:ne,chunkedBounds:Q,fontSize:D,topBaseline:q+se[0].baseline,blockBounds:[ie,q-ee,ie+J,q],visibleBounds:w,timings:E})})}function o(p,m){i({...p,metricsOnly:!0},g=>{const[P,D,C,b]=g.blockBounds;m({width:C-P,height:b-D})})}function a(p){let m=p.match(/^([\d.]+)%$/),g=m?parseFloat(m[1]):NaN;return isNaN(g)?0:g/100}function l(p,m,g){const P=p[m*4],D=p[m*4+1],C=p[m*4+2],b=p[m*4+3],S=(D-P)/g;for(let R=0;R<g;R++){const k=(m+R)*4;p[k]=P+S*R,p[k+1]=P+S*(R+1),p[k+2]=C,p[k+3]=b}}function f(){return(self.performance||Date).now()}function d(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(p){let m=d.flyweight;return m.data=this.data,m.index=p,m},splitAt(p){let m=new d;return m.data=this.data.splice(p*h.length),m}},d.flyweight=h.reduce((p,m,g,P)=>(Object.defineProperty(p,m,{get(){return this.data[this.index*h.length+g]},set(D){this.data[this.index*h.length+g]=D}}),p),{data:null,index:0}),{typeset:i,measure:o}}const kt=()=>(self.performance||Date).now(),Hn=va();let Mo;function Ws(s,n,u,c,t,e,r,i,o,a,l=!0){return l?Xs(s,n,u,c,t,e,r,i,o,a).then(null,f=>(Mo||(console.warn("WebGL SDF generation failed, falling back to JS",f),Mo=!0),Io(s,n,u,c,t,e,r,i,o,a))):Io(s,n,u,c,t,e,r,i,o,a)}const Gn=[],Vs=5;let Dr=0;function ga(){const s=kt();for(;Gn.length&&kt()-s<Vs;)Gn.shift()();Dr=Gn.length?setTimeout(ga,0):0}const Xs=(...s)=>new Promise((n,u)=>{Gn.push(()=>{const c=kt();try{Hn.webgl.generateIntoCanvas(...s),n({timing:kt()-c})}catch(t){u(t)}}),Dr||(Dr=setTimeout(ga,0))}),Hs=4,Ys=2e3,Lo={};let Js=0;function Io(s,n,u,c,t,e,r,i,o,a){const l="TroikaTextSDFGenerator_JS_"+Js++%Hs;let f=Lo[l];return f||(f=Lo[l]={workerModule:Xt({name:l,workerId:l,dependencies:[va,kt],init(d,h){const p=d().javascript.generate;return function(...m){const g=h();return{textureData:p(...m),timing:h()-g}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(s,n,u,c,t,e).then(({textureData:d,timing:h})=>{const p=kt(),m=new Uint8Array(d.length*4);for(let g=0;g<d.length;g++)m[g*4+a]=d[g];return Hn.webglUtils.renderImageData(r,m,i,o,s,n,1<<3-a),h+=kt()-p,--f.requests===0&&(f.idleTimer=setTimeout(()=>{Us(l)},Ys)),{timing:h}})}function Ks(s){s._warm||(Hn.webgl.isSupported(s),s._warm=!0)}const Qs=Hn.webglUtils.resizeWebGLCanvasWithoutClearing,Pt={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},Zs=new Wn;function Lt(){return(self.performance||Date).now()}const Ro=Object.create(null);function qs(s,n){s=el({},s);const u=Lt(),{defaultFontURL:c}=Pt,t=[];if(c&&t.push({label:"default",src:Po(c)}),s.font&&t.push({label:"user",src:Po(s.font)}),s.font=t,s.text=""+s.text,s.sdfGlyphSize=s.sdfGlyphSize||Pt.sdfGlyphSize,s.unicodeFontsURL=s.unicodeFontsURL||Pt.unicodeFontsURL,s.colorRanges!=null){let h={};for(let p in s.colorRanges)if(s.colorRanges.hasOwnProperty(p)){let m=s.colorRanges[p];typeof m!="number"&&(m=Zs.set(m).getHex()),h[p]=m}s.colorRanges=h}Object.freeze(s);const{textureWidth:e,sdfExponent:r}=Pt,{sdfGlyphSize:i}=s,o=e/i*4;let a=Ro[i];if(!a){const h=document.createElement("canvas");h.width=e,h.height=i*256/o,a=Ro[i]={glyphCount:0,sdfGlyphSize:i,sdfCanvas:h,sdfTexture:new ja(h,void 0,void 0,void 0,uo,uo),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,$s(a)}const{sdfTexture:l,sdfCanvas:f}=a;ba(s).then(h=>{const{glyphIds:p,glyphFontIndices:m,fontData:g,glyphPositions:P,fontSize:D,timings:C}=h,b=[],S=new Float32Array(p.length*4);let R=0,k=0;const F=Lt(),z=g.map(A=>{let W=a.glyphsByFont.get(A.src);return W||a.glyphsByFont.set(A.src,W=new Map),W});p.forEach((A,W)=>{const X=m[W],{src:oe,unitsPerEm:ae}=g[X];let _=z[X].get(A);if(!_){const{path:L,pathBounds:x}=h.glyphData[oe][A],N=Math.max(x[2]-x[0],x[3]-x[1])/i*(Pt.sdfMargin*i+.5),I=a.glyphCount++,j=[x[0]-N,x[1]-N,x[2]+N,x[3]+N];z[X].set(A,_={path:L,atlasIndex:I,sdfViewBox:j}),b.push(_)}const{sdfViewBox:M}=_,v=P[k++],T=P[k++],E=D/ae;S[R++]=v+M[0]*E,S[R++]=T+M[1]*E,S[R++]=v+M[2]*E,S[R++]=T+M[3]*E,p[W]=_.atlasIndex}),C.quads=(C.quads||0)+(Lt()-F);const B=Lt();C.sdf={};const te=f.height,y=Math.ceil(a.glyphCount/o),O=Math.pow(2,Math.ceil(Math.log2(y*i)));O>te&&(console.info(`Increasing SDF texture size ${te}->${O}`),Qs(f,e,O),l.dispose()),Promise.all(b.map(A=>ya(A,a,s.gpuAccelerateSDF).then(({timing:W})=>{C.sdf[A.atlasIndex]=W}))).then(()=>{b.length&&!a.contextLost&&(_a(a),l.needsUpdate=!0),C.sdfTotal=Lt()-B,C.total=Lt()-u,n(Object.freeze({parameters:s,sdfTexture:l,sdfGlyphSize:i,sdfExponent:r,glyphBounds:S,glyphAtlasIndices:p,glyphColors:h.glyphColors,caretPositions:h.caretPositions,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{a.contextLost||Ks(f)})}function ya({path:s,atlasIndex:n,sdfViewBox:u},{sdfGlyphSize:c,sdfCanvas:t,contextLost:e},r){if(e)return Promise.resolve({timing:-1});const{textureWidth:i,sdfExponent:o}=Pt,a=Math.max(u[2]-u[0],u[3]-u[1]),l=Math.floor(n/4),f=l%(i/c)*c,d=Math.floor(l/(i/c))*c,h=n%4;return Ws(c,c,s,u,a,o,t,f,d,h,r)}function $s(s){const n=s.sdfCanvas;n.addEventListener("webglcontextlost",u=>{console.log("Context Lost",u),u.preventDefault(),s.contextLost=!0}),n.addEventListener("webglcontextrestored",u=>{console.log("Context Restored",u),s.contextLost=!1;const c=[];s.glyphsByFont.forEach(t=>{t.forEach(e=>{c.push(ya(e,s,!0))})}),Promise.all(c).then(()=>{_a(s),s.sdfTexture.needsUpdate=!0})})}function el(s,n){for(let u in n)n.hasOwnProperty(u)&&(s[u]=n[u]);return s}let Mn;function Po(s){return Mn||(Mn=typeof document>"u"?{}:document.createElement("a")),Mn.href=s,Mn.href}function _a(s){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:n,sdfTexture:u}=s,{width:c,height:t}=n,e=s.sdfCanvas.getContext("webgl");let r=u.image.data;(!r||r.length!==c*t*4)&&(r=new Uint8Array(c*t*4),u.image={width:c,height:t,data:r},u.flipY=!1,u.isDataTexture=!0),e.readPixels(0,0,c,t,e.RGBA,e.UNSIGNED_BYTE,r)}}const tl=Xt({name:"Typesetter",dependencies:[zs,js,ks],init(s,n,u){return s(n,u())}}),ba=Xt({name:"Typesetter",dependencies:[tl],init(s){return function(n){return new Promise(u=>{s.typeset(n,u)})}},getTransferables(s){const n=[];for(let u in s)s[u]&&s[u].buffer&&n.push(s[u].buffer);return n}});ba.onMainThread;const Oo={};function nl(s){let n=Oo[s];return n||(n=Oo[s]=new Lr(1,1,s,s).translate(.5,.5,0)),n}const rl="aTroikaGlyphBounds",Bo="aTroikaGlyphIndex",ol="aTroikaGlyphColor";class al extends za{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Wa,this.boundingBox=new Jo}computeBoundingSphere(){}computeBoundingBox(){}set detail(n){if(n!==this._detail){this._detail=n,(typeof n!="number"||n<1)&&(n=1);let u=nl(n);["position","normal","uv"].forEach(c=>{this.attributes[c]=u.attributes[c].clone()}),this.setIndex(u.getIndex().clone())}}get detail(){return this._detail}set curveRadius(n){n!==this._curveRadius&&(this._curveRadius=n,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(n,u,c,t,e){this.updateAttributeData(rl,n,4),this.updateAttributeData(Bo,u,1),this.updateAttributeData(ol,e,3),this._blockBounds=c,this._chunkedBounds=t,this.instanceCount=u.length,this._updateBounds()}_updateBounds(){const n=this._blockBounds;if(n){const{curveRadius:u,boundingBox:c}=this;if(u){const{PI:t,floor:e,min:r,max:i,sin:o,cos:a}=Math,l=t/2,f=t*2,d=Math.abs(u),h=n[0]/d,p=n[2]/d,m=e((h+l)/f)!==e((p+l)/f)?-d:r(o(h)*d,o(p)*d),g=e((h-l)/f)!==e((p-l)/f)?d:i(o(h)*d,o(p)*d),P=e((h+t)/f)!==e((p+t)/f)?d*2:i(d-a(h)*d,d-a(p)*d);c.min.set(m,n[1],u<0?-P:0),c.max.set(g,n[3],u<0?0:P)}else c.min.set(n[0],n[1],0),c.max.set(n[2],n[3],0);c.getBoundingSphere(this.boundingSphere)}}applyClipRect(n){let u=this.getAttribute(Bo).count,c=this._chunkedBounds;if(c)for(let t=c.length;t--;){u=c[t].end;let e=c[t].rect;if(e[1]<n.w&&e[3]>n.y&&e[0]<n.z&&e[2]>n.x)break}this.instanceCount=u}updateAttributeData(n,u,c){const t=this.getAttribute(n);u?t&&t.array.length===u.length?(t.array.set(u),t.needsUpdate=!0):(this.setAttribute(n,new Va(u,c)),delete this._maxInstanceCount,this.dispose()):t&&this.deleteAttribute(n)}}const il=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,sl=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,ll=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,ul=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function cl(s){const n=Ar(s,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Nn},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new co(0,0,0,0)},uTroikaClipRect:{value:new co(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Nn},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Wn},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Xa},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:il,vertexTransform:sl,fragmentDefs:ll,fragmentColorTransform:ul,customRewriter({vertexShader:u,fragmentShader:c}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(c)&&(c=c.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(u)||(u=u.replace(ma,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:u,fragmentShader:c}}});return n.transparent=!0,n.forceSinglePass=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),n}const Gr=new Ha({color:16777215,side:Ya,transparent:!0}),Go=8421504,No=new Ja,Ln=new Mr,br=new Mr,on=[],fl=new Mr,Tr="+x+y";function jo(s){return Array.isArray(s)?s[0]:s}let Ta=()=>{const s=new Fr(new Lr(1,1),Gr);return Ta=()=>s,s},xa=()=>{const s=new Fr(new Lr(1,1,32,1),Gr);return xa=()=>s,s};const dl={type:"syncstart"},hl={type:"synccomplete"},wa=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],pl=wa.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class Sa extends Fr{constructor(){const n=new al;super(n,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Go,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Tr,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(n){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(n):(this._isSyncing=!0,this.dispatchEvent(dl),qs({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},u=>{this._isSyncing=!1,this._textRenderInfo=u,this.geometry.updateGlyphs(u.glyphBounds,u.glyphAtlasIndices,u.blockBounds,u.chunkedBounds,u.glyphColors);const c=this._queuedSyncs;c&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{c.forEach(t=>t&&t())})),this.dispatchEvent(hl),n&&n()})))}onBeforeRender(n,u,c,t,e,r){this.sync(),e.isTroikaTextMaterial&&this._prepareForRender(e)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(n){return cl(n)}get material(){let n=this._derivedMaterial;const u=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Gr.clone());if((!n||!n.isDerivedFrom(u))&&(n=this._derivedMaterial=this.createDerivedMaterial(u),u.addEventListener("dispose",function c(){u.removeEventListener("dispose",c),n.dispose()})),this.hasOutline()){let c=n._outlineMtl;return c||(c=n._outlineMtl=Object.create(n,{id:{value:n.id+.1}}),c.isTextOutlineMaterial=!0,c.depthWrite=!1,c.map=null,n.addEventListener("dispose",function t(){n.removeEventListener("dispose",t),c.dispose()})),[c,n]}else return n}set material(n){n&&n.isTroikaTextMaterial?(this._derivedMaterial=n,this._baseMaterial=n.baseMaterial):this._baseMaterial=n}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(n){this.geometry.detail=n}get curveRadius(){return this.geometry.curveRadius}set curveRadius(n){this.geometry.curveRadius=n}get customDepthMaterial(){return jo(this.material).getDepthMaterial()}set customDepthMaterial(n){}get customDistanceMaterial(){return jo(this.material).getDistanceMaterial()}set customDistanceMaterial(n){}_prepareForRender(n){const u=n.isTextOutlineMaterial,c=n.uniforms,t=this.textRenderInfo;if(t){const{sdfTexture:i,blockBounds:o}=t;c.uTroikaSDFTexture.value=i,c.uTroikaSDFTextureSize.value.set(i.image.width,i.image.height),c.uTroikaSDFGlyphSize.value=t.sdfGlyphSize,c.uTroikaSDFExponent.value=t.sdfExponent,c.uTroikaTotalBounds.value.fromArray(o),c.uTroikaUseGlyphColors.value=!u&&!!t.glyphColors;let a=0,l=0,f=0,d,h,p,m=0,g=0;if(u){let{outlineWidth:D,outlineOffsetX:C,outlineOffsetY:b,outlineBlur:S,outlineOpacity:R}=this;a=this._parsePercent(D)||0,l=Math.max(0,this._parsePercent(S)||0),d=R,m=this._parsePercent(C)||0,g=this._parsePercent(b)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(p=this.strokeColor,c.uTroikaStrokeColor.value.set(p??Go),h=this.strokeOpacity,h==null&&(h=1)),d=this.fillOpacity;c.uTroikaEdgeOffset.value=a,c.uTroikaPositionOffset.value.set(m,g),c.uTroikaBlurRadius.value=l,c.uTroikaStrokeWidth.value=f,c.uTroikaStrokeOpacity.value=h,c.uTroikaFillOpacity.value=d??1,c.uTroikaCurveRadius.value=this.curveRadius||0;let P=this.clipRect;if(P&&Array.isArray(P)&&P.length===4)c.uTroikaClipRect.value.fromArray(P);else{const D=(this.fontSize||.1)*100;c.uTroikaClipRect.value.set(o[0]-D,o[1]-D,o[2]+D,o[3]+D)}this.geometry.applyClipRect(c.uTroikaClipRect.value)}c.uTroikaSDFDebug.value=!!this.debugSDF,n.polygonOffset=!!this.depthOffset,n.polygonOffsetFactor=n.polygonOffsetUnits=this.depthOffset||0;const e=u?this.outlineColor||0:this.color;if(e==null)delete n.color;else{const i=n.hasOwnProperty("color")?n.color:n.color=new Wn;(e!==i._input||typeof e=="object")&&i.set(i._input=e)}let r=this.orientation||Tr;if(r!==n._orientation){let i=c.uTroikaOrient.value;r=r.replace(/[^-+xyz]/g,"");let o=r!==Tr&&r.match(/^([-+])([xyz])([-+])([xyz])$/);if(o){let[,a,l,f,d]=o;Ln.set(0,0,0)[l]=a==="-"?1:-1,br.set(0,0,0)[d]=f==="-"?-1:1,No.lookAt(fl,Ln.cross(br),br),i.setFromMatrix4(No)}else i.identity();n._orientation=r}}_parsePercent(n){if(typeof n=="string"){let u=n.match(/^(-?[\d.]+)%$/),c=u?parseFloat(u[1]):NaN;n=(isNaN(c)?0:c/100)*this.fontSize}return n}localPositionToTextCoords(n,u=new Nn){u.copy(n);const c=this.curveRadius;return c&&(u.x=Math.atan2(n.x,Math.abs(c)-Math.abs(n.z))*Math.abs(c)),u}worldPositionToTextCoords(n,u=new Nn){return Ln.copy(n),this.localPositionToTextCoords(this.worldToLocal(Ln),u)}raycast(n,u){const{textRenderInfo:c,curveRadius:t}=this;if(c){const e=c.blockBounds,r=t?xa():Ta(),i=r.geometry,{position:o,uv:a}=i.attributes;for(let l=0;l<a.count;l++){let f=e[0]+a.getX(l)*(e[2]-e[0]);const d=e[1]+a.getY(l)*(e[3]-e[1]);let h=0;t&&(h=t-Math.cos(f/t)*t,f=Math.sin(f/t)*t),o.setXYZ(l,f,d,h)}i.boundingSphere=this.geometry.boundingSphere,i.boundingBox=this.geometry.boundingBox,r.matrixWorld=this.matrixWorld,r.material.side=this.material.side,on.length=0,r.raycast(n,on);for(let l=0;l<on.length;l++)on[l].object=this,u.push(on[l])}}copy(n){const u=this.geometry;return super.copy(n),this.geometry=u,pl.forEach(c=>{this[c]=n[c]}),this}clone(){return new this.constructor().copy(this)}}wa.forEach(s=>{const n="_private_"+s;Object.defineProperty(Sa.prototype,s,{get(){return this[n]},set(u){u!==this[n]&&(this[n]=u,this._needsSync=!0)}})});new Jo;new Wn;const vl=2e3,ml={__name:"Home3D",emits:["bookShow"],setup(s,{emit:n}){const u=zo(),c=n;let t=null,e=null,r={shi:null,fen:null,miao:null},i=null,o=null,a=null,l=null,f=null,d=null,h=null,p=null,m,g,P,D,C,b,S=!1;const R=window.devicePixelRatio||1;let k=!1;function F(){g=document.getElementById("audio"),m=g.getContext("2d"),g.width=g.clientWidth*R,g.height=g.clientHeight*R,m.scale(R,R)}function z(){b=document.createElement("video"),b.src="/home//public/mp4/test.mp4",b.loop=!0,b.crossOrigin="anonymous",b.addEventListener("play",()=>{k=!0,S||B(),te()}),b.addEventListener("pause",()=>{k=!1})}function B(){const U=new AudioContext,w=U.createMediaElementSource(b);P=U.createAnalyser(),D=P.frequencyBinCount,P.fftSize=D/2,w.connect(P),P.connect(U.destination),C=new Uint8Array(D),S=!0}function te(){if(!k)return;requestAnimationFrame(te),m.clearRect(0,0,g.width,g.height),P.getByteFrequencyData(C),m.clearRect(0,0,g.width,g.height);const U=P.frequencyBinCount,w=g.width/U,Q=Math.floor(U/2);for(let J=0;J<Q;J++){const V=C[J],Y=V*(g.height/256),K=V+50>255?255:V+50,H=50,re=150;m.fillStyle=`rgb(${K},${H},${re})`;let $=J*w,G=g.height-Y;m.fillRect($,G,w,Y);let se=g.width-(J+1)*w,ee=g.height-Y;m.fillRect(se,ee,w,Y)}}function y(){const U=new Date,w=U.getFullYear(),Q=U.getMonth()+1,J=Q<10?"0"+Q:Q,V=U.getDate(),Y=V<10?"0"+V:V;return{year:w,month:J,day:Y}}function O(U,w=[0,0,0],Q=1,J="bold"){const V=new Sa;return V.text=U,V.font="/home/public/fonts/digital7.ttf",V.fontSize=Q,V.position.set(...w),V.rotation.y=Math.PI/2,V.color=0,V.fontWeight=J,V.anchorX="center",V.anchorY="middle",V.sync(),V}const A=(U,w)=>{const Q=new U.CubeTextureLoader().setPath("/home//public/images/").load(["nx.png","px.png","py.png","ny.png","nz.png","pz.png"]);w.background=Q;const J=new Date().getHours();if(J>=18||J<6){w.background=new U.Color(265780);let Y=[{nubmer:1850,color:16777215,size:1.5,scalar:1,multiple:500}];for(let K=0;K<Y.length;K++){const H=qa(Y[K]);H.rotation.x=Math.random()*6,H.rotation.y=Math.random()*6,H.rotation.z=Math.random()*6,H.matrixAutoUpdate=!1,H.updateMatrix(),H.position.set(0,0,0),w.add(H)}}},W=jt(!1),X=(U,w,Q,J)=>{hr.install({THREE:U}),t=new hr(Q,J.domElement),t.minZoom=.1,t.maxZoom=15,t.enableTransition=!0,t.transitionTime=1,t.mouseButtons.wheel=hr.ACTION.NONE,t.update(),t.saveState(),w.addEventListener("mouseDown",function(V){t.enabled=!1}),w.addEventListener("mouseUp",function(V){t.enabled=!0})},oe=(U,w)=>{const Q=new U.AmbientLight(203843,.6);w.add(Q);const J=new U.DirectionalLight(16777215,.3);J.position.set(-99.4535,52.788402638514,-25.3826),J.castShadow=!0,w.add(J),i=new U.PointLight(16774827,50,100),i.position.set(27.105,2.1298,-29.157),i.castShadow=!0,w.add(i),o=new U.PointLight(16777215,1,200),o.position.set(11.376385097904176,26.471699160045343,6.353171916870222),o.castShadow=!0,w.add(o);const V=new U.CylinderGeometry(1.66,1.66,4,32);a=new U.Mesh(V,new U.MeshStandardMaterial({color:1118481,transparent:!0,opacity:.46,emissive:16711680,emissiveIntensity:100,metalness:0,roughness:.5})),a.position.set(-29.33046480164147,8.629849073395794,-16.21725577998555),a.castShadow=!0,w.add(a)},ae=({THREE:U,scene:w,transControls:Q,camera:J,renderer:V})=>{X(U,Q,J,V),A(U,w),oe(U,w);const Y=new U.Group,K=tt(w.children,"home");K.position.set(0,-15,0);const H=tt(K.children,"空箱子大"),re=tt(K.children,"空箱子001"),$=tt(K.children,"主体");$.castShadow=!0,$.receiveShadow=!0,l=tt(K.children,"xiaodeng"),l.material.emissive=new U.Color(1118481),l.material.envMapIntensity=0,l.castShadow=!0,l.receiveShadow=!0;const G=tt(K.children,"闹钟"),se=tt(G.children,"shi"),ee=tt(G.children,"fen"),ie=tt(G.children,"miao");r={shi:se,fen:ee,miao:ie},r.shi.rotation.y=0,r.fen.rotation.y=0,r.miao.rotation.y=0;const q=tt(K.children,"电脑桌");q.castShadow=!0,q.receiveShadow=!0;const{year:xe,month:le,day:ue}=y(),fe=O(`${xe}`,[-24.21810526958002,6.28957649,17.8168586],1);w.add(fe);const ye=O("Year",[-24.21810526958002,5.06957649,18.2068586],.6,"regular");w.add(ye);const Ue=O(`${le}`,[-24.21810526958002,6.28957649,15.8168586],1);w.add(Ue);const De=O("Month",[-24.21810526958002,5.06957649,15.8968586],.6,"regular");w.add(De);const he=O(`${ue}`,[-24.21810526958002,6.28957649,14.2168586],1);w.add(he);const _e=O("Day",[-24.21810526958002,5.06957649,14.0468586],.6,"regular");w.add(_e);const ce=tt(w.children,"xianshiqi");if(ce.castShadow=!0,b.src){const ve=new U.VideoTexture(b);ve.flipY=!1;const Fe=new U.MeshBasicMaterial({map:ve});ce.material=Fe,ce.castShadow=!0}f=tt(K.children,"柱体014");const pe={y:0},be={y:Math.PI*2};p=new ei(pe).to(be,3e3).easing(ti.Quadratic.InOut).onUpdate(()=>{f.rotation.y=pe.y}).delay(3e3).start();const Be=[{name:"xc_db",size:[4.2,4.2],position:[25.147446346740253,20.1227880586422,-32.918080391178876],src:"/public/dfsj/db/003.jpg"},{name:"xc_02",size:[4.2,4.2],position:[31.06927073239676,20.1227880586422,-32.918080391178876],src:"/public/dfsj/feixian/web/pc02.jpg"},{name:"xc_03",size:[4.2,4.2],position:[37.0123651221323,20.1227880586422,-32.918080391178876],src:"/public/dfsj/feixian/webnew/004.jpg"},{name:"xc_04",size:[10.2,4.2],position:[28.247028395689476,13.964410131334555,-32.9180803911788],src:"/public/dfsj/feixian/xcx/xcx01.jpg"},{name:"xc_05",size:[4.2,4.2],position:[37.0123651221323,14.035935533501332,-32.918080391178],src:"/public/dfsj/gzb/xcx/003.jpg"},{name:"xc_06",size:[4.2,4.2],position:[25.17463710170653,8.343632646416731,-32.9180803911],src:"/public/dfsj/gzb/xcxweb/001.jpg"},{name:"xc_07",size:[10.2,4.2],position:[34.05277102672005,8.210956138239148,-32.918080391178876],src:"/public/dfsj/gzb/sj/002.png"}],Ce=new U.TextureLoader;for(let ve=0;ve<Be.length;ve++){const Fe=Be[ve];Ce.load("/home/"+Fe.src,Ee=>{const me=Za(Be[ve]);me.name=Be[ve].name,me.material=new U.MeshLambertMaterial({map:Ee}),Y.add(me)})}const ge=new U.PlaneGeometry(16,25),ke=new U.MeshBasicMaterial({color:65280,transparent:!0,opacity:0}),$e=new U.Mesh(ge,ke);$e.rotation.y=Math.PI/2,$e.position.set(-26.75,7.5,29.5),$e.name="shujibox",Y.add($e),Y.attach(H),Y.attach(re),w.add(Y),t.rotate(72*U.MathUtils.DEG2RAD,0,!0),t.setTarget(-.2176510350531844,.06773081571016058,.014509065832072607,!0);let Ae=[];d=ve=>{Ae=[ve.clientX,ve.clientY]},h=async ve=>{const[Fe,Ee]=Ae;if(Math.abs(Fe-ve.clientX)>2||Math.abs(Ee-ve.clientY)>2)return;let me=await $a({el:"#canvas",camera:J,group:Y,event:ve});me!=null&&me.object&&(e&&(e=null),e=me.object,console.log(e.name),(e.name=="空箱子大"||e.name=="立方体067_1")&&u.push("/three/demo34"),e.name=="shujibox"&&v(),e.name.indexOf("xc")>-1&&T())},document.body.addEventListener("mousedown",d),document.body.addEventListener("mouseup",h),document.body.addEventListener("keydown",M)};let _=!0;const M=U=>{U.key=="Control"&&(_=!_),U.code=="Space"&&(k?(b.pause(),Co("#audio",{bottom:"-80px"})):(b.play(),Co("#audio",{bottom:"0"})),U.preventDefault)},v=()=>{c("bookShow")},T=()=>{W.value=!0,document.body.removeEventListener("mousedown",d),document.body.removeEventListener("mouseup",h),document.body.removeEventListener("keydown",M)},E=()=>{W.value=!1,document.body.addEventListener("mousedown",d),document.body.addEventListener("mouseup",h),document.body.addEventListener("keydown",M)},L=()=>{const U=new Date,w=U.getHours()%12||12,Q=U.getMinutes(),J=U.getSeconds();return[w,Q,J]},x=()=>{const{shi:U,fen:w,miao:Q}=r;if(!U||!w||!Q)return;r.shi.rotation.y=0,r.fen.rotation.y=0,r.miao.rotation.y=0;const[J,V,Y]=L(),K={shi:J*(2*Math.PI/12)+Math.PI/2,fen:-V*(2*Math.PI/60)+Math.PI/2,miao:Y*(2*Math.PI/60)+Math.PI/2};U.rotation.y=K.shi,w.rotation.y=K.fen,Q.rotation.y=K.miao};let N=Date.now();const I=(U,w)=>{const Q=Date.now();if(Q-N>=vl){const J=new w.Color(Math.random()*16777215);U.material.emissive=J,N=Q}U.material.emissiveIntensity=Math.sin(Date.now()*.001*Math.PI)*.5+.5},j=({THREE:U,scene:w,camera:Q,renderer:J,clock:V,stats:Y})=>{const K=V.getDelta();t.update(K),Y.update(),x(),_?(i.visible=!0,o.intensity=2e3,l.material.emissive=new U.Color(16777215),l.material.envMapIntensity=1):(i.visible=!1,o.intensity=20,l.material.emissive=new U.Color(1118481),l.material.envMapIntensity=0),k?I(a,U):a.material.emissive=new U.Color(0),p.update(),J.render(w,Q)},{loading:Z,pregress:ne}=Ka({el:"#canvas",background:"#111",modelPath:["house.zip"],modelName:["home"],modelZip:!0,modelScale:[2.5,2.5,2.5],cameraPosition:[-20,-0,42],control:!1,helper:!1,light:!1,transformControls:!0,showStats:!0,statsPosition:[0,0],creatMesh:ae,animation:j});return Er(()=>{F(),z()}),La(()=>{_=!1,document.body.removeEventListener("mousedown",d),document.body.removeEventListener("mouseup",h),document.body.removeEventListener("keydown",M),p&&(p.stop(),ni(p),p=null)}),(U,w)=>(st(),lt(un,null,[cn(Qa,{loading:lo(Z),pregress:lo(ne)},{default:Ia(()=>w[0]||(w[0]=[Re("canvas",{id:"canvas"},null,-1),Re("canvas",{id:"audio"},null,-1)])),_:1},8,["loading","pregress"]),cn(Si,{show:W.value,onHandleEvent:E},null,8,["show"])],64))}},gl=hn(ml,[["__scopeId","data-v-ee86d1f8"]]),yl={__name:"Home",setup(s){const n=Yo(),u=jt([]),c=()=>{u.value=Ra.menus.filter(i=>i.path!=="/"),n.setFlagStatus(!0)};Er(()=>{c()});const t=jt(!1),e=()=>{t.value=!0},r=()=>{t.value=!1};return(i,o)=>(st(),lt(un,null,[cn(gl,{onBookShow:e}),cn(vi,{show:t.value,menus:u.value,onBookHide:r},null,8,["show","menus"]),o[0]||(o[0]=Re("div",{class:"tip-right"},[Re("p",null,"1.点击“书本”查看网站知识库"),Re("p",null,"2.点击“显示器”播放MV"),Re("p",null,"3.点击“相册”查看案例"),Re("p",null,"4.按Ctrl键-开关灯|空格键控制视频播放")],-1))],64))}},Dl=hn(yl,[["__scopeId","data-v-d6c6d402"]]);export{Dl as default};
