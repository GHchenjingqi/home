import{_ as hn,r as Gt,z as zo,Q as Ma,l as st,b as lt,d as Oe,F as fn,x as Tr,n as Wo,t as Vo,H as Ea,h as jo,v as Xo,I as cn,o as Ar,g as La,w as Ra,u as so,y as Ia}from"./index-BW9tvWnl.js";import{u as Ho}from"./allscreen-BRzil6w2.js";import{al as Oa,k as Pa,R as Ba,U as Ga,am as Na,c as Fr,M as za,a as zn,V as Mr,f as Wa,j as Bn,an as Va,ao as ja,ap as Yo,aq as Xa,ar as Ha,as as lo,z as Ya,ai as uo,D as qa,aa as Er,u as Ja,L as Ka}from"./Loading-DruFyOl3.js";import{d as Za,I as Qa}from"./img-C4DAGV-q.js";import{C as cr}from"./camera-controls.module-CggtOxtI.js";import{k as Ke,o as $a,i as ei}from"./creatMesh-thBZTWdF.js";import{u as ti}from"./useRay-DAI8Mv9J.js";import{T as fo,E as co,r as ni}from"./tween.esm-Dd_E2EVm.js";import"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/mds/pathList.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./loading-Cr1aGhL8.js";const ri={class:"accordion solution"},oi=["onClick"],ai={class:"left-top"},ii=["innerHTML"],si={class:"right"},li={class:"box"},ui=["title","onClick"],fi={__name:"Accordion",props:{items:{type:Array,default:()=>[]}},setup(i){const n=Gt(0),u=zo(),f=Ma(),t=Ho(),e=l=>l.replace(/([a-zA-Z]+)/g,'<span style="font-size:20px">$1</span>'),r=l=>e(l),s=async(l,c)=>{f.showLoading(),await u.push(l),o(c)},o=async l=>{t.setFlagStatus(!1),await Ea();const c=document.getElementById("menu");if(c){const d=c.getElementsByClassName("menu-item");d[l]&&(c.scrollTop=d[l].offsetTop)}f.hideLoading()},a=l=>{n.value=l};return(l,c)=>(lt(),st("div",ri,[Oe("ul",null,[(lt(!0),st(fn,null,Tr(i.items,(d,h)=>(lt(),st("li",{key:h,class:Wo(["accordion-item",{on:n.value===h}]),onClick:v=>a(h)},[c[0]||(c[0]=Oe("div",{class:"left"},null,-1)),Oe("div",ai,[Oe("div",{innerHTML:r(d.title)},null,8,ii)]),Oe("div",si,[Oe("dl",null,[Oe("div",li,[(lt(!0),st(fn,null,Tr(d.children,(v,m)=>(lt(),st("dd",{key:m,title:v.name,onClick:g=>s(v.path,m)},Vo(v.name),9,ui))),128))])])])],10,oi))),128))])]))}},ci=hn(fi,[["__scopeId","data-v-3064239b"]]),di={class:"book-boom"},hi={class:"know-rec box"},pi={__name:"KnowHome",props:{show:{type:Boolean,default:!1},menus:{type:Array,default:()=>[]}},emits:["bookHide"],setup(i,{emit:n}){const u=n,f=()=>{u("bookHide")};return(t,e)=>jo((lt(),st("div",di,[Oe("div",{class:"boom-layer",onClick:f}),Oe("div",hi,[cn(ci,{items:i.menus},null,8,["items"])])],512)),[[Xo,i.show]])}},vi=hn(pi,[["__scopeId","data-v-7670749a"]]),mi={class:"layer-boom"},gi={class:"scroll-container"},_i={class:"row"},yi=["onClick","title"],bi=["src","alt"],Ti={__name:"PhontoMenus",props:{show:{type:Boolean,default:!1}},emits:["handleEvent"],setup(i,{emit:n}){const u=n,f=Gt([]),t=Gt(!1),e=function(){u("handleEvent")},r=(o,a)=>{t.value=!1;let l=o.map(c=>a+c);new Qa({images:l,onClose:()=>{t.value=!0}})},s=()=>{t.value=!0,f.value=Za.map(o=>{let a=o.path+o.cover;return{...o,coverImg:a}})};return Ar(()=>{s()}),(o,a)=>jo((lt(),st("div",mi,[Oe("div",{class:"close",onClick:e},[...a[0]||(a[0]=[Oe("img",{src:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/images/close.png",alt:""},null,-1)])]),a[1]||(a[1]=Oe("h3",null,"案例中心",-1)),Oe("div",gi,[Oe("div",_i,[(lt(!0),st(fn,null,Tr(f.value,l=>(lt(),st("div",{class:Wo(["item",{app:l.isApp}]),key:l.id,onClick:c=>r(l.imgs,l.path),title:l.des},[Oe("img",{src:l.coverImg,alt:l.des},null,8,bi),Oe("p",null,Vo(l.name),1)],10,yi))),128))])])],512)),[[Xo,i.show&&t.value]])}},Si=hn(Ti,[["__scopeId","data-v-c939440e"]]);/**
 * anime.js - ESM
 * @version v4.1.3
 * @author Julian Garnier
 * @license MIT
 * @copyright (c) 2025 Julian Garnier
 * @see https://animejs.com
 */const Tt=typeof window<"u",dr=Tt?window:null,dn=Tt?document:null,Ge={OBJECT:0,ATTRIBUTE:1,CSS:2,TRANSFORM:3,CSS_VAR:4},Ce={NUMBER:0,UNIT:1,COLOR:2,COMPLEX:3},ot={NONE:0,AUTO:1,FORCE:2},tt={replace:0,none:1,blend:2},ho=Symbol(),Lr=Symbol(),qo=Symbol(),Wn=Symbol(),wi=Symbol(),Le=1e-11,Jo=1e12,Nt=1e3,Sr=120,Ct="",Ko=(()=>{const i=new Map;return i.set("x","translateX"),i.set("y","translateY"),i.set("z","translateZ"),i})(),Zo=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Qo=Zo.reduce((i,n)=>({...i,[n]:n+"("}),{}),rt=()=>{},xi=/(^#([\da-f]{3}){1,2}$)|(^#([\da-f]{4}){1,2}$)/i,Ui=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,Ci=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,ki=/hsl\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*\)/i,Di=/hsla\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,po=/[-+]?\d*\.?\d+(?:e[-+]?\d)?/gi,Ai=/^([-+]?\d*\.?\d+(?:e[-+]?\d+)?)([a-z]+|%)$/i,Fi=/([a-z])([A-Z])/g,Mi=/(\w+)(\([^)]+\)+)/g,$o={id:null,keyframes:null,playbackEase:null,playbackRate:1,frameRate:Sr,loop:0,reversed:!1,alternate:!1,autoplay:!0,duration:Nt,delay:0,loopDelay:0,ease:"out(2)",composition:tt.replace,modifier:i=>i,onBegin:rt,onBeforeUpdate:rt,onUpdate:rt,onLoop:rt,onPause:rt,onComplete:rt,onRender:rt},Ei={root:dn},je={defaults:$o,precision:4,timeScale:1,tickThreshold:200},ea={version:"4.1.3",engine:null};Tt&&(dr.AnimeJS||(dr.AnimeJS=[]),dr.AnimeJS.push(ea));const Li=i=>i.replace(Fi,"$1-$2").toLowerCase(),Pt=(i,n)=>i.indexOf(n)===0,zt=Date.now,Wt=Array.isArray,hr=i=>i&&i.constructor===Object,Ri=i=>typeof i=="number"&&!isNaN(i),Vn=i=>typeof i=="string",Gn=i=>typeof i=="function",Ie=i=>typeof i>"u",pr=i=>Ie(i)||i===null,ta=i=>Tt&&i instanceof SVGElement,na=i=>xi.test(i),ra=i=>Pt(i,"rgb"),oa=i=>Pt(i,"hsl"),Ii=i=>na(i)||ra(i)||oa(i),Ln=i=>!je.defaults.hasOwnProperty(i),kn=i=>Vn(i)?parseFloat(i):i,Rt=Math.pow,Oi=Math.sqrt,Pi=Math.sin,Bi=Math.cos,Gi=Math.abs,Ni=Math.ceil,aa=Math.floor,zi=Math.asin,Rr=Math.PI,vo=Math.round,He=(i,n,u)=>i<n?n:i>u?u:i,mo={},Be=(i,n)=>{if(n<0)return i;if(!n)return vo(i);let u=mo[n];return u||(u=mo[n]=10**n),vo(i*u)/u},xt=(i,n,u)=>i+(n-i)*u,Ir=i=>i===1/0?Jo:i===-1/0?-1e12:i,sn=i=>i<=Le?Le:Ir(Be(i,11)),Ze=i=>Wt(i)?[...i]:i,Wi=(i,n)=>{const u={...i};for(let f in n){const t=i[f];u[f]=Ie(t)?n[f]:t}return u},ze=(i,n,u,f="_prev",t="_next")=>{let e=i._head,r=t;for(u&&(e=i._tail,r=f);e;){const s=e[r];n(e),e=s}},on=(i,n,u="_prev",f="_next")=>{const t=n[u],e=n[f];t?t[f]=e:i._head=e,e?e[u]=t:i._tail=t,n[u]=null,n[f]=null},Ot=(i,n,u,f="_prev",t="_next")=>{let e=i._tail;for(;e&&u&&u(e,n);)e=e[f];const r=e?e[t]:i._head;e?e[t]=n:i._head=n,r?r[f]=n:i._tail=n,n[f]=e,n[t]=r};class ia{constructor(n=0){this.deltaTime=0,this._currentTime=n,this._elapsedTime=n,this._startTime=n,this._lastTime=n,this._scheduledTime=0,this._frameDuration=Be(Nt/Sr,0),this._fps=Sr,this._speed=1,this._hasChildren=!1,this._head=null,this._tail=null}get fps(){return this._fps}set fps(n){const u=this._frameDuration,f=+n,t=f<Le?Le:f,e=Be(Nt/t,0);this._fps=t,this._frameDuration=e,this._scheduledTime+=e-u}get speed(){return this._speed}set speed(n){const u=+n;this._speed=u<Le?Le:u}requestTick(n){const u=this._scheduledTime,f=this._elapsedTime;if(this._elapsedTime+=n-f,f<u)return ot.NONE;const t=this._frameDuration,e=f-u;return this._scheduledTime+=e<t?t:e,ot.AUTO}computeDeltaTime(n){const u=n-this._lastTime;return this.deltaTime=u,this._lastTime=n,u}}const Rn=(i,n,u,f,t)=>{const e=i.parent,r=i.duration,s=i.completed,o=i.iterationDuration,a=i.iterationCount,l=i._currentIteration,c=i._loopDelay,d=i._reversed,h=i._alternate,v=i._hasChildren,m=i._delay,g=i._currentTime,R=m+o,x=n-m,k=He(g,-m,r),w=He(x,-m,r),T=x-g,O=w>0,C=w>=r,A=r<=Le,W=t===ot.FORCE;let P=0,ne=x,_=0;if(a>1){const ie=~~(w/(o+(C?0:c)));i._currentIteration=He(ie,0,a),C&&i._currentIteration--,P=i._currentIteration%2,ne=w%(o+c)||0}const I=d^(h&&P),D=i._ease;let Y=C?I?0:r:I?o-ne:ne;D&&(Y=o*D(Y/o)||0);const j=(e?e.backwards:x<g)?!I:!!I;if(i._currentTime=x,i._iterationTime=Y,i.backwards=j,O&&!i.began?(i.began=!0,!u&&!(e&&(j||!e.began))&&i.onBegin(i)):x<=0&&(i.began=!1),!u&&!v&&O&&i._currentIteration!==l&&i.onLoop(i),W||t===ot.AUTO&&(n>=m&&n<=R||n<=m&&k>m||n>=R&&k!==r)||Y>=R&&k!==r||Y<=m&&k>0||n<=k&&k===r&&s||C&&!s&&A){if(O&&(i.computeDeltaTime(k),u||i.onBeforeUpdate(i)),!v){const ie=W||(j?T*-1:T)>=je.tickThreshold,re=i._offset+(e?e._offset:0)+m+Y;let b=i._head,E,p,S,M,F=0;for(;b;){const U=b._composition,N=b._currentTime,L=b._changeDuration,V=b._absoluteStartTime+b._changeDuration,Z=b._nextRep,oe=b._prevRep,q=U!==tt.none;if((ie||(N!==L||re<=V+(Z?Z._delay:0))&&(N!==0||re>=b._absoluteStartTime))&&(!q||!b._isOverridden&&(!b._isOverlapped||re<=V)&&(!Z||Z._isOverridden||re<=Z._absoluteStartTime)&&(!oe||oe._isOverridden||re>=oe._absoluteStartTime+oe._changeDuration+b._delay))){const y=b._currentTime=He(Y-b._startTime,0,L),z=b._ease(y/b._updateDuration),J=b._modifier,X=b._valueType,H=b._tweenType,K=H===Ge.OBJECT,G=X===Ce.NUMBER,Q=G&&K||z===0||z===1?-1:je.precision;let te,B;if(G)te=B=J(Be(xt(b._fromNumber,b._toNumber,z),Q));else if(X===Ce.UNIT)B=J(Be(xt(b._fromNumber,b._toNumber,z),Q)),te=`${B}${b._unit}`;else if(X===Ce.COLOR){const se=b._fromNumbers,ee=b._toNumbers,ae=Be(He(J(xt(se[0],ee[0],z)),0,255),0),$=Be(He(J(xt(se[1],ee[1],z)),0,255),0),we=Be(He(J(xt(se[2],ee[2],z)),0,255),0),ue=He(J(Be(xt(se[3],ee[3],z),Q)),0,1);if(te=`rgba(${ae},${$},${we},${ue})`,q){const le=b._numbers;le[0]=ae,le[1]=$,le[2]=we,le[3]=ue}}else if(X===Ce.COMPLEX){te=b._strings[0];for(let se=0,ee=b._toNumbers.length;se<ee;se++){const ae=J(Be(xt(b._fromNumbers[se],b._toNumbers[se],z),Q)),$=b._strings[se+1];te+=`${$?ae+$:ae}`,q&&(b._numbers[se]=ae)}}if(q&&(b._number=B),!f&&U!==tt.blend){const se=b.property;E=b.target,K?E[se]=te:H===Ge.ATTRIBUTE?E.setAttribute(se,te):(p=E.style,H===Ge.TRANSFORM?(E!==S&&(S=E,M=E[Wn]),M[se]=te,F=1):H===Ge.CSS?p[se]=te:H===Ge.CSS_VAR&&p.setProperty(se,te)),O&&(_=1)}else b._value=te}if(F&&b._renderTransforms){let y=Ct;for(let z in M)y+=`${Qo[z]}${M[z]}) `;p.transform=y,F=0}b=b._next}!u&&_&&i.onRender(i)}!u&&O&&i.onUpdate(i)}return e&&A?!u&&(e.began&&!j&&x>=r&&!s||j&&x<=Le&&s)&&(i.onComplete(i),i.completed=!j):O&&C?a===1/0?i._startTime+=i.duration:i._currentIteration>=a-1&&(i.paused=!0,!s&&!v&&(i.completed=!0,!u&&!(e&&(j||!e.began))&&(i.onComplete(i),i._resolve(i)))):i.completed=!1,_},It=(i,n,u,f,t)=>{const e=i._currentIteration;if(Rn(i,n,u,f,t),i._hasChildren){const r=i,s=r.backwards,o=f?n:r._iterationTime,a=zt();let l=0,c=!0;if(!f&&r._currentIteration!==e){const d=r.iterationDuration;ze(r,h=>{if(!s)!h.completed&&!h.backwards&&h._currentTime<h.iterationDuration&&Rn(h,d,u,1,ot.FORCE),h.began=!1,h.completed=!1;else{const v=h.duration,m=h._offset+h._delay,g=m+v;!u&&v<=Le&&(!m||g===d)&&h.onComplete(h)}}),u||r.onLoop(r)}ze(r,d=>{const h=Be((o-d._offset)*d._speed,12),v=d._fps<r._fps?d.requestTick(a):t;l+=Rn(d,h,u,f,v),!d.completed&&c&&(c=!1)},s),!u&&l&&r.onRender(r),(c||s)&&r._currentTime>=r.duration&&(r.paused=!0,r.completed||(r.completed=!0,u||(r.onComplete(r),r._resolve(r))))}},Bt={animation:null,update:rt},Vi=i=>{let n=Bt.animation;return n||(n={duration:Le,computeDeltaTime:rt,_offset:0,_delay:0,_head:null,_tail:null},Bt.animation=n,Bt.update=()=>{i.forEach(u=>{for(let f in u){const t=u[f],e=t._head;if(e){const r=e._valueType,s=r===Ce.COMPLEX||r===Ce.COLOR?Ze(e._fromNumbers):null;let o=e._fromNumber,a=t._tail;for(;a&&a!==e;){if(s)for(let l=0,c=a._numbers.length;l<c;l++)s[l]+=a._numbers[l];else o+=a._number;a=a._prevAdd}e._toNumber=o,e._toNumbers=s}}}),Rn(n,1,1,0,ot.FORCE)}),n},sa=Tt?requestAnimationFrame:setImmediate,ji=Tt?cancelAnimationFrame:clearImmediate;class Xi extends ia{constructor(n){super(n),this.useDefaultMainLoop=!0,this.pauseOnDocumentHidden=!0,this.defaults=$o,this.paused=!0,this.reqId=0}update(){const n=this._currentTime=zt();if(this.requestTick(n)){this.computeDeltaTime(n);const u=this._speed,f=this._fps;let t=this._head;for(;t;){const e=t._next;t.paused?(on(this,t),this._hasChildren=!!this._tail,t._running=!1,t.completed&&!t._cancelled&&t.cancel()):It(t,(n-t._startTime)*t._speed*u,0,0,t._fps<f?t.requestTick(n):ot.AUTO),t=e}Bt.update()}}wake(){return this.useDefaultMainLoop&&!this.reqId&&(this.requestTick(zt()),this.reqId=sa(la)),this}pause(){if(this.reqId)return this.paused=!0,Hi()}resume(){if(this.paused)return this.paused=!1,ze(this,n=>n.resetTime()),this.wake()}get speed(){return this._speed*(je.timeScale===1?1:Nt)}set speed(n){this._speed=n*je.timeScale,ze(this,u=>u.speed=u._speed)}get timeUnit(){return je.timeScale===1?"ms":"s"}set timeUnit(n){const f=n==="s",t=f?.001:1;if(je.timeScale!==t){je.timeScale=t,je.tickThreshold=200*t;const e=f?.001:Nt;this.defaults.duration*=e,this._speed*=e}}get precision(){return je.precision}set precision(n){je.precision=n}}const Xe=(()=>{const i=new Xi(zt());return Tt&&(ea.engine=i,dn.addEventListener("visibilitychange",()=>{i.pauseOnDocumentHidden&&(dn.hidden?i.pause():i.resume())})),i})(),la=()=>{Xe._head?(Xe.reqId=sa(la),Xe.update()):Xe.reqId=0},Hi=()=>(ji(Xe.reqId),Xe.reqId=0,Xe),Yi=(i,n,u)=>{const f=i.style.transform;let t;if(f){const e=i[Wn];let r;for(;r=Mi.exec(f);){const s=r[1],o=r[2].slice(1,-1);e[s]=o,s===n&&(t=o,u&&(u[n]=o))}}return f&&!Ie(t)?t:Pt(n,"scale")?"1":Pt(n,"rotate")||Pt(n,"skew")?"0deg":"0px"};function go(i){const n=Vn(i)?Ei.root.querySelectorAll(i):i;if(n instanceof NodeList||n instanceof HTMLCollection)return n}function qi(i){if(pr(i))return[];if(!Tt)return Wt(i)&&i.flat(1/0)||[i];if(Wt(i)){const u=i.flat(1/0),f=[];for(let t=0,e=u.length;t<e;t++){const r=u[t];if(!pr(r)){const s=go(r);if(s)for(let o=0,a=s.length;o<a;o++){const l=s[o];if(!pr(l)){let c=!1;for(let d=0,h=f.length;d<h;d++)if(f[d]===l){c=!0;break}c||f.push(l)}}else{let o=!1;for(let a=0,l=f.length;a<l;a++)if(f[a]===r){o=!0;break}o||f.push(r)}}}return f}const n=go(i);return n?Array.from(n):[i]}function Ji(i){const n=qi(i),u=n.length;if(u)for(let f=0;f<u;f++){const t=n[f];if(!t[ho]){t[ho]=!0;const e=ta(t);(t.nodeType||e)&&(t[Lr]=!0,t[qo]=e,t[Wn]={})}}return n}const Ki=["opacity","rotate","overflow","color"],Zi=(i,n)=>{if(Ki.includes(n))return!1;if(i.getAttribute(n)||n in i){if(n==="scale"){const u=i.parentNode;return u&&u.tagName==="filter"}return!0}},Qi=i=>{const n=Ui.exec(i)||Ci.exec(i),u=Ie(n[4])?1:+n[4];return[+n[1],+n[2],+n[3],u]},$i=i=>{const n=i.length,u=n===4||n===5;return[+("0x"+i[1]+i[u?1:2]),+("0x"+i[u?2:3]+i[u?2:4]),+("0x"+i[u?3:5]+i[u?3:6]),n===5||n===9?+(+("0x"+i[u?4:7]+i[u?4:8])/255).toFixed(3):1]},vr=(i,n,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<1/6?i+(n-i)*6*u:u<1/2?n:u<2/3?i+(n-i)*(2/3-u)*6:i),es=i=>{const n=ki.exec(i)||Di.exec(i),u=+n[1]/360,f=+n[2]/100,t=+n[3]/100,e=Ie(n[4])?1:+n[4];let r,s,o;if(f===0)r=s=o=t;else{const a=t<.5?t*(1+f):t+f-t*f,l=2*t-a;r=Be(vr(l,a,u+1/3)*255,0),s=Be(vr(l,a,u)*255,0),o=Be(vr(l,a,u-1/3)*255,0)}return[r,s,o,e]},ts=i=>ra(i)?Qi(i):na(i)?$i(i):oa(i)?es(i):[0,0,0,1],Qe=(i,n)=>Ie(i)?n:i,_t=(i,n,u,f,t)=>{if(Gn(i)){const e=()=>{const r=i(n,u,f);return isNaN(+r)?r||0:+r};return t&&(t.func=e),e()}else return i},ua=(i,n)=>i[Lr]?i[qo]&&Zi(i,n)?Ge.ATTRIBUTE:Zo.includes(n)||Ko.get(n)?Ge.TRANSFORM:Pt(n,"--")?Ge.CSS_VAR:n in i.style?Ge.CSS:n in i?Ge.OBJECT:Ge.ATTRIBUTE:Ge.OBJECT,_o=(i,n,u)=>{const f=i.style[n];f&&u&&(u[n]=f);const t=f||getComputedStyle(i[wi]||i).getPropertyValue(n);return t==="auto"?"0":t},tn=(i,n,u,f)=>{const t=Ie(u)?ua(i,n):u;return t===Ge.OBJECT?i[n]||0:t===Ge.ATTRIBUTE?i.getAttribute(n):t===Ge.TRANSFORM?Yi(i,n,f):t===Ge.CSS_VAR?_o(i,n,f).trimStart():_o(i,n,f)},mr=(i,n,u)=>u==="-"?i-n:u==="+"?i+n:i*n,Or=()=>({t:Ce.NUMBER,n:0,u:null,o:null,d:null,s:null}),ct=(i,n)=>{if(n.t=Ce.NUMBER,n.n=0,n.u=null,n.o=null,n.d=null,n.s=null,!i)return n;const u=+i;if(isNaN(u)){let f=i;f[1]==="="&&(n.o=f[0],f=f.slice(2));const t=f.includes(" ")?!1:Ai.exec(f);if(t)return n.t=Ce.UNIT,n.n=+t[1],n.u=t[2],n;if(n.o)return n.n=+f,n;if(Ii(f))return n.t=Ce.COLOR,n.d=ts(f),n;{const e=f.match(po);return n.t=Ce.COMPLEX,n.d=e?e.map(Number):[],n.s=f.split(po)||[],n}}else return n.n=u,n},yo=(i,n)=>(n.t=i._valueType,n.n=i._toNumber,n.u=i._unit,n.o=null,n.d=Ze(i._toNumbers),n.s=Ze(i._strings),n),yt=Or(),Nn={_rep:new WeakMap,_add:new Map},Pr=(i,n,u="_rep")=>{const f=Nn[u];let t=f.get(i);return t||(t={},f.set(i,t)),t[n]?t[n]:t[n]={_head:null,_tail:null}},ns=(i,n)=>i._isOverridden||i._absoluteStartTime>n._absoluteStartTime,In=i=>{i._isOverlapped=1,i._isOverridden=1,i._changeDuration=Le,i._currentTime=Le},fa=(i,n)=>{const u=i._composition;if(u===tt.replace){const f=i._absoluteStartTime;Ot(n,i,ns,"_prevRep","_nextRep");const t=i._prevRep;if(t){const e=t.parent,r=t._absoluteStartTime+t._changeDuration;if(i.parent.id!==e.id&&e.iterationCount>1&&r+(e.duration-e.iterationDuration)>f){In(t);let a=t._prevRep;for(;a&&a.parent.id===e.id;)In(a),a=a._prevRep}const s=f-i._delay;if(r>s){const a=t._startTime,l=r-(a+t._updateDuration),c=Be(s-l-a,12);t._changeDuration=c,t._currentTime=c,t._isOverlapped=1,c<Le&&In(t)}let o=!0;if(ze(e,a=>{a._isOverlapped||(o=!1)}),o){const a=e.parent;if(a){let l=!0;ze(a,c=>{c!==e&&ze(c,d=>{d._isOverlapped||(l=!1)})}),l&&a.cancel()}else e.cancel()}}}else if(u===tt.blend){const f=Pr(i.target,i.property,"_add"),t=Vi(Nn._add);let e=f._head;e||(e={...i},e._composition=tt.replace,e._updateDuration=Le,e._startTime=0,e._numbers=Ze(i._fromNumbers),e._number=0,e._next=null,e._prev=null,Ot(f,e),Ot(t,e));const r=i._toNumber;if(i._fromNumber=e._fromNumber-r,i._toNumber=0,i._numbers=Ze(i._fromNumbers),i._number=0,e._fromNumber=r,i._toNumbers){const s=Ze(i._toNumbers);s&&s.forEach((o,a)=>{i._fromNumbers[a]=e._fromNumbers[a]-o,i._toNumbers[a]=0}),e._fromNumbers=s}Ot(f,i,null,"_prevAdd","_nextAdd")}return i},rs=i=>{const n=i._composition;if(n!==tt.none){const u=i.target,f=i.property,r=Nn._rep.get(u)[f];if(on(r,i,"_prevRep","_nextRep"),n===tt.blend){const s=Nn._add,o=s.get(u);if(!o)return;const a=o[f],l=Bt.animation;on(a,i,"_prevAdd","_nextAdd");const c=a._head;if(c&&c===a._tail){on(a,c,"_prevAdd","_nextAdd"),on(l,c);let d=!0;for(let h in o)if(o[h]._head){d=!1;break}d&&s.delete(u)}}}return i},bo=i=>(i.paused=!0,i.began=!1,i.completed=!1,i),wr=i=>(i._cancelled&&(i._hasChildren?ze(i,wr):ze(i,n=>{n._composition!==tt.none&&fa(n,Pr(n.target,n.property))}),i._cancelled=0),i);let os=0;class as extends ia{constructor(n={},u=null,f=0){super(0);const{id:t,delay:e,duration:r,reversed:s,alternate:o,loop:a,loopDelay:l,autoplay:c,frameRate:d,playbackRate:h,onComplete:v,onLoop:m,onPause:g,onBegin:R,onBeforeUpdate:x,onUpdate:k}=n,w=u?0:Xe._elapsedTime,T=u?u.defaults:je.defaults,O=Gn(e)||Ie(e)?T.delay:+e,C=Gn(r)||Ie(r)?1/0:+r,A=Qe(a,T.loop),W=Qe(l,T.loopDelay),P=A===!0||A===1/0||A<0?1/0:A+1;let ne=0;u?ne=f:(Xe.reqId||Xe.requestTick(zt()),ne=(Xe._elapsedTime-Xe._startTime)*je.timeScale),this.id=Ie(t)?++os:t,this.parent=u,this.duration=Ir((C+W)*P-W)||Le,this.backwards=!1,this.paused=!0,this.began=!1,this.completed=!1,this.onBegin=R||T.onBegin,this.onBeforeUpdate=x||T.onBeforeUpdate,this.onUpdate=k||T.onUpdate,this.onLoop=m||T.onLoop,this.onPause=g||T.onPause,this.onComplete=v||T.onComplete,this.iterationDuration=C,this.iterationCount=P,this._autoplay=u?!1:Qe(c,T.autoplay),this._offset=ne,this._delay=O,this._loopDelay=W,this._iterationTime=0,this._currentIteration=0,this._resolve=rt,this._running=!1,this._reversed=+Qe(s,T.reversed),this._reverse=this._reversed,this._cancelled=0,this._alternate=Qe(o,T.alternate),this._prev=null,this._next=null,this._elapsedTime=w,this._startTime=w,this._lastTime=w,this._fps=Qe(d,T.frameRate),this._speed=Qe(h,T.playbackRate)}get cancelled(){return!!this._cancelled}set cancelled(n){n?this.cancel():this.reset(1).play()}get currentTime(){return He(Be(this._currentTime,je.precision),-this._delay,this.duration)}set currentTime(n){const u=this.paused;this.pause().seek(+n),u||this.resume()}get iterationCurrentTime(){return Be(this._iterationTime,je.precision)}set iterationCurrentTime(n){this.currentTime=this.iterationDuration*this._currentIteration+n}get progress(){return He(Be(this._currentTime/this.duration,10),0,1)}set progress(n){this.currentTime=this.duration*n}get iterationProgress(){return He(Be(this._iterationTime/this.iterationDuration,10),0,1)}set iterationProgress(n){const u=this.iterationDuration;this.currentTime=u*this._currentIteration+u*n}get currentIteration(){return this._currentIteration}set currentIteration(n){this.currentTime=this.iterationDuration*He(+n,0,this.iterationCount-1)}get reversed(){return!!this._reversed}set reversed(n){n?this.reverse():this.play()}get speed(){return super.speed}set speed(n){super.speed=n,this.resetTime()}reset(n=0){return wr(this),this._reversed&&!this._reverse&&(this.reversed=!1),this._iterationTime=this.iterationDuration,It(this,0,1,n,ot.FORCE),bo(this),this._hasChildren&&ze(this,bo),this}init(n=0){this.fps=this._fps,this.speed=this._speed,!n&&this._hasChildren&&It(this,this.duration,1,n,ot.FORCE),this.reset(n);const u=this._autoplay;return u===!0?this.resume():u&&!Ie(u.linked)&&u.link(this),this}resetTime(){const n=1/(this._speed*Xe._speed);return this._startTime=zt()-(this._currentTime+this._delay)*n,this}pause(){return this.paused?this:(this.paused=!0,this.onPause(this),this)}resume(){return this.paused?(this.paused=!1,this.duration<=Le&&!this._hasChildren?It(this,Le,0,0,ot.FORCE):(this._running||(Ot(Xe,this),Xe._hasChildren=!0,this._running=!0),this.resetTime(),this._startTime-=12,Xe.wake()),this):this}restart(){return this.reset(0).resume()}seek(n,u=0,f=0){wr(this),this.completed=!1;const t=this.paused;return this.paused=!0,It(this,n+this._delay,~~u,~~f,ot.AUTO),t?this:this.resume()}alternate(){const n=this._reversed,u=this.iterationCount,f=this.iterationDuration,t=u===1/0?aa(Jo/f):u;return this._reversed=+(this._alternate&&!(t%2)?n:!n),u===1/0?this.iterationProgress=this._reversed?1-this.iterationProgress:this.iterationProgress:this.seek(f*t-this._currentTime),this.resetTime(),this}play(){return this._reversed&&this.alternate(),this.resume()}reverse(){return this._reversed||this.alternate(),this.resume()}cancel(){return this._hasChildren?ze(this,n=>n.cancel(),!0):ze(this,rs),this._cancelled=1,this.pause()}stretch(n){const u=this.duration,f=sn(n);if(u===f)return this;const t=n/u,e=n<=Le;return this.duration=e?Le:f,this.iterationDuration=e?Le:sn(this.iterationDuration*t),this._offset*=t,this._delay*=t,this._loopDelay*=t,this}revert(){It(this,0,1,0,ot.AUTO);const n=this._autoplay;return n&&n.linked&&n.linked===this&&n.revert(),this.cancel()}complete(){return this.seek(this.duration).cancel()}then(n=rt){const u=this.then,f=()=>{this.then=null,n(this),this.then=u,this._resolve=rt};return new Promise(t=>(this._resolve=()=>t(f()),this.completed&&this._resolve(),this))}}const Vt=i=>i,ca=(i,n,u)=>(((1-3*u+3*n)*i+(3*u-6*n))*i+3*n)*i,is=(i,n,u)=>{let f=0,t=1,e,r,s=0;do r=f+(t-f)/2,e=ca(r,n,u)-i,e>0?t=r:f=r;while(Gi(e)>1e-7&&++s<100);return r},ss=(i=.5,n=0,u=.5,f=1)=>i===n&&u===f?Vt:t=>t===0||t===1?t:ca(is(t,i,u),n,f),ls=(i=10,n)=>{const u=n?Ni:aa;return f=>u(He(f,0,1)*i)*(1/i)},da=(...i)=>{const n=i.length;if(!n)return Vt;const u=n-1,f=i[0],t=i[u],e=[0],r=[kn(f)];for(let s=1;s<u;s++){const o=i[s],a=Vn(o)?o.trim().split(" "):[o],l=a[0],c=a[1];e.push(Ie(c)?s/u:kn(c)/100),r.push(kn(l))}return r.push(kn(t)),e.push(1),function(o){for(let a=1,l=e.length;a<l;a++){const c=e[a];if(o<=c){const d=e[a-1],h=r[a-1];return h+(r[a]-h)*(o-d)/(c-d)}}return r[r.length-1]}},us=(i=10,n=1)=>{const u=[0],f=i-1;for(let t=1;t<f;t++){const e=u[t-1],r=t/f,s=(t+1)/f,o=r+(s-r)*Math.random(),a=r*(1-n)+o*n;u.push(He(a,e,1))}return u.push(1),da(...u)},fs=Rr/2,To=Rr*2,nn=(i=1.68)=>n=>Rt(n,+i),So={[Ct]:nn,Quad:nn(2),Cubic:nn(3),Quart:nn(4),Quint:nn(5),Sine:i=>1-Bi(i*fs),Circ:i=>1-Oi(1-i*i),Expo:i=>i?Rt(2,10*i-10):0,Bounce:i=>{let n,u=4;for(;i<((n=Rt(2,--u))-1)/11;);return 1/Rt(4,3-u)-7.5625*Rt((n*3-2)/22-i,2)},Back:(i=1.70158)=>n=>(+i+1)*n*n*n-+i*n*n,Elastic:(i=1,n=.3)=>{const u=He(+i,1,10),f=He(+n,Le,2),t=f/To*zi(1/u),e=To/f;return r=>r===0||r===1?r:-u*Rt(2,-10*(1-r))*Pi((1-r-t)*e)}},xr={in:i=>n=>i(n),out:i=>n=>1-i(1-n),inOut:i=>n=>n<.5?i(n*2)/2:1-i(n*-2+2)/2,outIn:i=>n=>n<.5?(1-i(1-n*2))/2:(i(n*2-1)+1)/2},cs=(i,n,u)=>{if(u[i])return u[i];if(i.indexOf("(")<=-1){const t=xr[i]||i.includes("Back")||i.includes("Elastic")?n[i]():n[i];return t?u[i]=t:Vt}else{const f=i.slice(0,-1).split("("),t=n[f[0]];return t?u[i]=t(...f[1].split(",")):Vt}},ds=(()=>{const i={linear:da,irregular:us,steps:ls,cubicBezier:ss};for(let n in xr)for(let u in So){const f=So[u],t=xr[n];i[n+u]=u===Ct||u==="Back"||u==="Elastic"?(e,r)=>t(f(e,r)):t(f)}return i})(),hs={linear:Vt},wo=i=>Gn(i)?i:Vn(i)?cs(i,ds,hs):Vt,xo={},ps=(i,n,u)=>{if(u===Ge.TRANSFORM){const f=Ko.get(i);return f||i}else if(u===Ge.CSS||u===Ge.ATTRIBUTE&&ta(n)&&i in n.style){const f=xo[i];if(f)return f;{const t=i&&Li(i);return xo[i]=t,t}}else return i},gr={deg:1,rad:180/Rr,turn:360},Uo={},vs=(i,n,u,f=!1)=>{const t=n.u,e=n.n;if(n.t===Ce.UNIT&&t===u)return n;const r=e+t+u,s=Uo[r];if(!Ie(s)&&!f)n.n=s;else{let o;if(t in gr)o=e*gr[t]/gr[u];else{const l=i.cloneNode(),c=i.parentNode,d=c&&c!==dn?c:dn.body;d.appendChild(l);const h=l.style;h.width=100+t;const v=l.offsetWidth||100;h.width=100+u;const m=l.offsetWidth||100,g=v/m;d.removeChild(l),o=g*e}n.n=o,Uo[r]=o}return n.t,Ce.UNIT,n.u=u,n},ha=i=>{if(i._hasChildren)ze(i,ha,!0);else{const n=i;n.pause(),ze(n,u=>{const f=u.property,t=u.target;if(t[Lr]){const e=t.style,r=n._inlineStyles[f];if(u._tweenType===Ge.TRANSFORM){const s=t[Wn];if(Ie(r)||r===Ct?delete s[f]:s[f]=r,u._renderTransforms)if(!Object.keys(s).length)e.removeProperty("transform");else{let o=Ct;for(let a in s)o+=Qo[a]+s[a]+") ";e.transform=o}}else Ie(r)||r===Ct?e.removeProperty(f):e[f]=r;n._tail===u&&n.targets.forEach(s=>{s.getAttribute&&s.getAttribute("style")===Ct&&s.removeAttribute("style")})}})}return i},be=Or(),Se=Or(),Dn={func:null},An=[null],Et=[null,null],Fn={to:null};let ms=0,bt,dt;const gs=(i,n)=>{const u={};if(Wt(i)){const f=[].concat(...i.map(t=>Object.keys(t))).filter(Ln);for(let t=0,e=f.length;t<e;t++){const r=f[t],s=i.map(o=>{const a={};for(let l in o){const c=o[l];Ln(l)?l===r&&(a.to=c):a[l]=c}return a});u[r]=s}}else{const f=Qe(n.duration,je.defaults.duration);Object.keys(i).map(e=>({o:parseFloat(e)/100,p:i[e]})).sort((e,r)=>e.o-r.o).forEach(e=>{const r=e.o,s=e.p;for(let o in s)if(Ln(o)){let a=u[o];a||(a=u[o]=[]);const l=r*f;let c=a.length,d=a[c-1];const h={to:s[o]};let v=0;for(let m=0;m<c;m++)v+=a[m].duration;c===1&&(h.from=d.to),s.ease&&(h.ease=s.ease),h.duration=l-(c?v:0),a.push(h)}return e});for(let e in u){const r=u[e];let s;for(let o=0,a=r.length;o<a;o++){const l=r[o],c=l.ease;l.ease=s||void 0,s=c}r[0].duration||r.shift()}}return u};class _s extends as{constructor(n,u,f,t,e=!1,r=0,s=0){super(u,f,t);const o=Ji(n),a=o.length,l=u.keyframes,c=l?Wi(gs(l,u),u):u,{delay:d,duration:h,ease:v,playbackEase:m,modifier:g,composition:R,onRender:x}=c,k=f?f.defaults:je.defaults,w=Qe(m,k.playbackEase),T=w?wo(w):null,O=!Ie(v)&&!Ie(v.ease),C=O?v.ease:Qe(v,T?"linear":k.ease),A=O?v.duration:Qe(h,k.duration),W=Qe(d,k.delay),P=g||k.modifier,ne=Ie(R)&&a>=Nt?tt.none:Ie(R)?k.composition:R,_={},I=this._offset+(f?f._offset:0);let D=NaN,Y=NaN,j=0,ie=0;for(let re=0;re<a;re++){const b=o[re],E=r||re,p=s||a;let S=NaN,M=NaN;for(let F in c)if(Ln(F)){const U=ua(b,F),N=ps(F,b,U);let L=c[F];const V=Wt(L);if(e&&!V&&(Et[0]=L,Et[1]=L,L=Et),V){const J=L.length,X=!hr(L[0]);J===2&&X?(Fn.to=L,An[0]=Fn,bt=An):J>2&&X?(bt=[],L.forEach((H,K)=>{K?K===1?(Et[1]=H,bt.push(Et)):bt.push(H):Et[0]=H})):bt=L}else An[0]=L,bt=An;let Z=null,oe=null,q=NaN,y=0,z=0;for(let J=bt.length;z<J;z++){const X=bt[z];hr(X)?dt=X:(Fn.to=X,dt=Fn),Dn.func=null;const H=_t(dt.to,b,E,p,Dn);let K;hr(H)&&!Ie(H.to)?(dt=H,K=H.to):K=H;const G=_t(dt.from,b,E,p),Q=dt.ease,te=!Ie(Q)&&!Ie(Q.ease),B=te?Q.ease:Q||C,se=te?Q.duration:_t(Qe(dt.duration,J>1?_t(A,b,E,p)/J:A),b,E,p),ee=_t(Qe(dt.delay,z?0:W),b,E,p),ae=_t(Qe(dt.composition,ne),b,E,p),$=Ri(ae)?ae:tt[ae],we=dt.modifier||P,ue=!Ie(G),le=!Ie(K),ce=Wt(K),me=ce||ue&&le,ke=oe?y+ee:ee,Fe=Be(I+ke,12);!ie&&(ue||ce)&&(ie=1);let he=oe;if($!==tt.none){Z||(Z=Pr(b,N));let pe=Z._head;for(;pe&&!pe._isOverridden&&pe._absoluteStartTime<=Fe;)if(he=pe,pe=pe._nextRep,pe&&pe._absoluteStartTime>=Fe)for(;pe;)In(pe),pe=pe._nextRep}if(me?(ct(ce?_t(K[0],b,E,p):G,be),ct(ce?_t(K[1],b,E,p,Dn):K,Se),be.t===Ce.NUMBER&&(he?he._valueType===Ce.UNIT&&(be.t=Ce.UNIT,be.u=he._unit):(ct(tn(b,N,U,_),yt),yt.t===Ce.UNIT&&(be.t=Ce.UNIT,be.u=yt.u)))):(le?ct(K,Se):oe?yo(oe,Se):ct(f&&he&&he.parent.parent===f?he._value:tn(b,N,U,_),Se),ue?ct(G,be):oe?yo(oe,be):ct(f&&he&&he.parent.parent===f?he._value:tn(b,N,U,_),be)),be.o&&(be.n=mr(he?he._toNumber:ct(tn(b,N,U,_),yt).n,be.n,be.o)),Se.o&&(Se.n=mr(be.n,Se.n,Se.o)),be.t!==Se.t){if(be.t===Ce.COMPLEX||Se.t===Ce.COMPLEX){const pe=be.t===Ce.COMPLEX?be:Se,_e=be.t===Ce.COMPLEX?Se:be;_e.t=Ce.COMPLEX,_e.s=Ze(pe.s),_e.d=pe.d.map(()=>_e.n)}else if(be.t===Ce.UNIT||Se.t===Ce.UNIT){const pe=be.t===Ce.UNIT?be:Se,_e=be.t===Ce.UNIT?Se:be;_e.t=Ce.UNIT,_e.u=pe.u}else if(be.t===Ce.COLOR||Se.t===Ce.COLOR){const pe=be.t===Ce.COLOR?be:Se,_e=be.t===Ce.COLOR?Se:be;_e.t=Ce.COLOR,_e.s=pe.s,_e.d=[0,0,0,1]}}if(be.u!==Se.u){let pe=Se.u?be:Se;pe=vs(b,pe,Se.u?Se.u:be.u,!1)}if(Se.d&&be.d&&Se.d.length!==be.d.length){const pe=be.d.length>Se.d.length?be:Se,_e=pe===be?Se:be;_e.d=pe.d.map((Ne,De)=>Ie(_e.d[De])?0:_e.d[De]),_e.s=Ze(pe.s)}const ge=Be(+se||Le,12),fe={parent:this,id:ms++,property:N,target:b,_value:null,_func:Dn.func,_ease:wo(B),_fromNumbers:Ze(be.d),_toNumbers:Ze(Se.d),_strings:Ze(Se.s),_fromNumber:be.n,_toNumber:Se.n,_numbers:Ze(be.d),_number:be.n,_unit:Se.u,_modifier:we,_currentTime:0,_startTime:ke,_delay:+ee,_updateDuration:ge,_changeDuration:ge,_absoluteStartTime:Fe,_tweenType:U,_valueType:Se.t,_composition:$,_isOverlapped:0,_isOverridden:0,_renderTransforms:0,_prevRep:null,_nextRep:null,_prevAdd:null,_nextAdd:null,_prev:null,_next:null};$!==tt.none&&fa(fe,Z),isNaN(q)&&(q=fe._startTime),y=Be(ke+ge,12),oe=fe,j++,Ot(this,fe)}(isNaN(Y)||q<Y)&&(Y=q),(isNaN(D)||y>D)&&(D=y),U===Ge.TRANSFORM&&(S=j-z,M=j)}if(!isNaN(S)){let F=0;ze(this,U=>{F>=S&&F<M&&(U._renderTransforms=1,U._composition===tt.blend&&ze(Bt.animation,N=>{N.id===U.id&&(N._renderTransforms=1)})),F++})}}a||console.warn("No target found. Make sure the element you're trying to animate is accessible before creating your animation."),Y?(ze(this,re=>{re._startTime-re._delay||(re._delay-=Y),re._startTime-=Y}),D-=Y):Y=0,D||(D=Le,this.iterationCount=0),this.targets=o,this.duration=D===Le?Le:Ir((D+this._loopDelay)*this.iterationCount-this._loopDelay)||Le,this.onRender=x||k.onRender,this._ease=T,this._delay=Y,this.iterationDuration=D,this._inlineStyles=_,!this._autoplay&&ie&&this.onRender(this)}stretch(n){const u=this.duration;if(u===sn(n))return this;const f=n/u;return ze(this,t=>{t._updateDuration=sn(t._updateDuration*f),t._changeDuration=sn(t._changeDuration*f),t._currentTime*=f,t._startTime*=f,t._absoluteStartTime*=f}),super.stretch(n)}refresh(){return ze(this,n=>{const u=n._func;if(u){const f=tn(n.target,n.property,n._tweenType);ct(f,yt),ct(u(),Se),n._fromNumbers=Ze(yt.d),n._fromNumber=yt.n,n._toNumbers=Ze(Se.d),n._strings=Ze(Se.s),n._toNumber=Se.o?mr(yt.n,Se.n,Se.o):Se.n}}),this}revert(){return super.revert(),ha(this)}then(n){return super.then(n)}}const Co=(i,n)=>new _s(i,n,null,0,!1).init();function ys(){var i=Object.create(null);function n(t,e){var r=t.id,s=t.name,o=t.dependencies;o===void 0&&(o=[]);var a=t.init;a===void 0&&(a=function(){});var l=t.getTransferables;if(l===void 0&&(l=null),!i[r])try{o=o.map(function(d){return d&&d.isWorkerModule&&(n(d,function(h){if(h instanceof Error)throw h}),d=i[d.id].value),d}),a=f("<"+s+">.init",a),l&&(l=f("<"+s+">.getTransferables",l));var c=null;typeof a=="function"?c=a.apply(void 0,o):console.error("worker module init function failed to rehydrate"),i[r]={id:r,value:c,getTransferables:l},e(c)}catch(d){d&&d.noLog||console.error(d),e(d)}}function u(t,e){var r,s=t.id,o=t.args;(!i[s]||typeof i[s].value!="function")&&e(new Error("Worker module "+s+": not found or its 'init' did not return a function"));try{var a=(r=i[s]).value.apply(r,o);a&&typeof a.then=="function"?a.then(l,function(c){return e(c instanceof Error?c:new Error(""+c))}):l(a)}catch(c){e(c)}function l(c){try{var d=i[s].getTransferables&&i[s].getTransferables(c);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),e(c,d)}catch(h){console.error(h),e(h)}}}function f(t,e){var r=void 0;self.troikaDefine=function(o){return r=o};var s=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(s)}catch(o){console.error(o)}return URL.revokeObjectURL(s),delete self.troikaDefine,r}self.addEventListener("message",function(t){var e=t.data,r=e.messageId,s=e.action,o=e.data;try{s==="registerModule"&&n(o,function(a){a instanceof Error?postMessage({messageId:r,success:!1,error:a.message}):postMessage({messageId:r,success:!0,result:{isCallable:typeof a=="function"}})}),s==="callModule"&&u(o,function(a,l){a instanceof Error?postMessage({messageId:r,success:!1,error:a.message}):postMessage({messageId:r,success:!0,result:a},l||void 0)})}catch(a){postMessage({messageId:r,success:!1,error:a.stack})}})}function bs(i){var n=function(){for(var u=[],f=arguments.length;f--;)u[f]=arguments[f];return n._getInitResult().then(function(t){if(typeof t=="function")return t.apply(void 0,u);throw new Error("Worker module function was called but `init` did not return a callable function")})};return n._getInitResult=function(){var u=i.dependencies,f=i.init;u=Array.isArray(u)?u.map(function(e){return e&&(e=e.onMainThread||e,e._getInitResult&&(e=e._getInitResult())),e}):[];var t=Promise.all(u).then(function(e){return f.apply(null,e)});return n._getInitResult=function(){return t},t},n}var pa=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var n=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));n.terminate(),i=!0}catch(u){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+u.message+"]")}return pa=function(){return i},i},Ts=0,Ss=0,_r=!1,ln=Object.create(null),un=Object.create(null),Ur=Object.create(null);function jt(i){if((!i||typeof i.init!="function")&&!_r)throw new Error("requires `options.init` function");var n=i.dependencies,u=i.init,f=i.getTransferables,t=i.workerId,e=bs(i);t==null&&(t="#default");var r="workerModule"+ ++Ts,s=i.name||r,o=null;n=n&&n.map(function(l){return typeof l=="function"&&!l.workerModuleData&&(_r=!0,l=jt({workerId:t,name:"<"+s+"> function dependency: "+l.name,init:`function(){return (
`+On(l)+`
)}`}),_r=!1),l&&l.workerModuleData&&(l=l.workerModuleData),l});function a(){for(var l=[],c=arguments.length;c--;)l[c]=arguments[c];if(!pa())return e.apply(void 0,l);if(!o){o=ko(t,"registerModule",a.workerModuleData);var d=function(){o=null,un[t].delete(d)};(un[t]||(un[t]=new Set)).add(d)}return o.then(function(h){var v=h.isCallable;if(v)return ko(t,"callModule",{id:r,args:l});throw new Error("Worker module function was called but `init` did not return a callable function")})}return a.workerModuleData={isWorkerModule:!0,id:r,name:s,dependencies:n,init:On(u),getTransferables:f&&On(f)},a.onMainThread=e,a}function ws(i){un[i]&&un[i].forEach(function(n){n()}),ln[i]&&(ln[i].terminate(),delete ln[i])}function On(i){var n=i.toString();return!/^function/.test(n)&&/^\w+\s*\(/.test(n)&&(n="function "+n),n}function xs(i){var n=ln[i];if(!n){var u=On(ys);n=ln[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+u+")()"],{type:"application/javascript"}))),n.onmessage=function(f){var t=f.data,e=t.messageId,r=Ur[e];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete Ur[e],r(t)}}return n}function ko(i,n,u){return new Promise(function(f,t){var e=++Ss;Ur[e]=function(r){r.success?f(r.result):t(new Error("Error in worker "+n+" call: "+r.error))},xs(i).postMessage({messageId:e,action:n,data:u})})}function va(){var i=(function(n){function u(b,E,p,S,M,F,U,N){var L=1-U;N.x=L*L*b+2*L*U*p+U*U*M,N.y=L*L*E+2*L*U*S+U*U*F}function f(b,E,p,S,M,F,U,N,L,V){var Z=1-L;V.x=Z*Z*Z*b+3*Z*Z*L*p+3*Z*L*L*M+L*L*L*U,V.y=Z*Z*Z*E+3*Z*Z*L*S+3*Z*L*L*F+L*L*L*N}function t(b,E){for(var p=/([MLQCZ])([^MLQCZ]*)/g,S,M,F,U,N;S=p.exec(b);){var L=S[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(V){return parseFloat(V)});switch(S[1]){case"M":U=M=L[0],N=F=L[1];break;case"L":(L[0]!==U||L[1]!==N)&&E("L",U,N,U=L[0],N=L[1]);break;case"Q":{E("Q",U,N,U=L[2],N=L[3],L[0],L[1]);break}case"C":{E("C",U,N,U=L[4],N=L[5],L[0],L[1],L[2],L[3]);break}case"Z":(U!==M||N!==F)&&E("L",U,N,M,F);break}}}function e(b,E,p){p===void 0&&(p=16);var S={x:0,y:0};t(b,function(M,F,U,N,L,V,Z,oe,q){switch(M){case"L":E(F,U,N,L);break;case"Q":{for(var y=F,z=U,J=1;J<p;J++)u(F,U,V,Z,N,L,J/(p-1),S),E(y,z,S.x,S.y),y=S.x,z=S.y;break}case"C":{for(var X=F,H=U,K=1;K<p;K++)f(F,U,V,Z,oe,q,N,L,K/(p-1),S),E(X,H,S.x,S.y),X=S.x,H=S.y;break}}})}var r="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",s="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",o=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(b,E){var p=b.getContext?b.getContext("webgl",a):b,S=o.get(p);if(!S){let Z=function(X){var H=F[X];if(!H&&(H=F[X]=p.getExtension(X),!H))throw new Error(X+" not supported");return H},oe=function(X,H){var K=p.createShader(H);return p.shaderSource(K,X),p.compileShader(K),K},q=function(X,H,K,G){if(!U[X]){var Q={},te={},B=p.createProgram();p.attachShader(B,oe(H,p.VERTEX_SHADER)),p.attachShader(B,oe(K,p.FRAGMENT_SHADER)),p.linkProgram(B),U[X]={program:B,transaction:function(ee){p.useProgram(B),ee({setUniform:function($,we){for(var ue=[],le=arguments.length-2;le-- >0;)ue[le]=arguments[le+2];var ce=te[we]||(te[we]=p.getUniformLocation(B,we));p["uniform"+$].apply(p,[ce].concat(ue))},setAttribute:function($,we,ue,le,ce){var me=Q[$];me||(me=Q[$]={buf:p.createBuffer(),loc:p.getAttribLocation(B,$),data:null}),p.bindBuffer(p.ARRAY_BUFFER,me.buf),p.vertexAttribPointer(me.loc,we,p.FLOAT,!1,0,0),p.enableVertexAttribArray(me.loc),M?p.vertexAttribDivisor(me.loc,le):Z("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(me.loc,le),ce!==me.data&&(p.bufferData(p.ARRAY_BUFFER,ce,ue),me.data=ce)}})}}}U[X].transaction(G)},y=function(X,H){L++;try{p.activeTexture(p.TEXTURE0+L);var K=N[X];K||(K=N[X]=p.createTexture(),p.bindTexture(p.TEXTURE_2D,K),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST)),p.bindTexture(p.TEXTURE_2D,K),H(K,L)}finally{L--}},z=function(X,H,K){var G=p.createFramebuffer();V.push(G),p.bindFramebuffer(p.FRAMEBUFFER,G),p.activeTexture(p.TEXTURE0+H),p.bindTexture(p.TEXTURE_2D,X),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,X,0);try{K(G)}finally{p.deleteFramebuffer(G),p.bindFramebuffer(p.FRAMEBUFFER,V[--V.length-1]||null)}},J=function(){F={},U={},N={},L=-1,V.length=0};var M=typeof WebGL2RenderingContext<"u"&&p instanceof WebGL2RenderingContext,F={},U={},N={},L=-1,V=[];p.canvas.addEventListener("webglcontextlost",function(X){J(),X.preventDefault()},!1),o.set(p,S={gl:p,isWebGL2:M,getExtension:Z,withProgram:q,withTexture:y,withTextureFramebuffer:z,handleContextLoss:J})}E(S)}function c(b,E,p,S,M,F,U,N){U===void 0&&(U=15),N===void 0&&(N=null),l(b,function(L){var V=L.gl,Z=L.withProgram,oe=L.withTexture;oe("copy",function(q,y){V.texImage2D(V.TEXTURE_2D,0,V.RGBA,M,F,0,V.RGBA,V.UNSIGNED_BYTE,E),Z("copy",r,s,function(z){var J=z.setUniform,X=z.setAttribute;X("aUV",2,V.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),J("1i","image",y),V.bindFramebuffer(V.FRAMEBUFFER,N||null),V.disable(V.BLEND),V.colorMask(U&8,U&4,U&2,U&1),V.viewport(p,S,M,F),V.scissor(p,S,M,F),V.drawArrays(V.TRIANGLES,0,3)})})})}function d(b,E,p){var S=b.width,M=b.height;l(b,function(F){var U=F.gl,N=new Uint8Array(S*M*4);U.readPixels(0,0,S,M,U.RGBA,U.UNSIGNED_BYTE,N),b.width=E,b.height=p,c(U,N,0,0,S,M)})}var h=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:c,resizeWebGLCanvasWithoutClearing:d});function v(b,E,p,S,M,F){F===void 0&&(F=1);var U=new Uint8Array(b*E),N=S[2]-S[0],L=S[3]-S[1],V=[];e(p,function(X,H,K,G){V.push({x1:X,y1:H,x2:K,y2:G,minX:Math.min(X,K),minY:Math.min(H,G),maxX:Math.max(X,K),maxY:Math.max(H,G)})}),V.sort(function(X,H){return X.maxX-H.maxX});for(var Z=0;Z<b;Z++)for(var oe=0;oe<E;oe++){var q=z(S[0]+N*(Z+.5)/b,S[1]+L*(oe+.5)/E),y=Math.pow(1-Math.abs(q)/M,F)/2;q<0&&(y=1-y),y=Math.max(0,Math.min(255,Math.round(y*255))),U[oe*b+Z]=y}return U;function z(X,H){for(var K=1/0,G=1/0,Q=V.length;Q--;){var te=V[Q];if(te.maxX+G<=X)break;if(X+G>te.minX&&H-G<te.maxY&&H+G>te.minY){var B=R(X,H,te.x1,te.y1,te.x2,te.y2);B<K&&(K=B,G=Math.sqrt(K))}}return J(X,H)&&(G=-G),G}function J(X,H){for(var K=0,G=V.length;G--;){var Q=V[G];if(Q.maxX<=X)break;var te=Q.y1>H!=Q.y2>H&&X<(Q.x2-Q.x1)*(H-Q.y1)/(Q.y2-Q.y1)+Q.x1;te&&(K+=Q.y1<Q.y2?1:-1)}return K!==0}}function m(b,E,p,S,M,F,U,N,L,V){F===void 0&&(F=1),N===void 0&&(N=0),L===void 0&&(L=0),V===void 0&&(V=0),g(b,E,p,S,M,F,U,null,N,L,V)}function g(b,E,p,S,M,F,U,N,L,V,Z){F===void 0&&(F=1),L===void 0&&(L=0),V===void 0&&(V=0),Z===void 0&&(Z=0);for(var oe=v(b,E,p,S,M,F),q=new Uint8Array(oe.length*4),y=0;y<oe.length;y++)q[y*4+Z]=oe[y];c(U,q,L,V,b,E,1<<3-Z,N)}function R(b,E,p,S,M,F){var U=M-p,N=F-S,L=U*U+N*N,V=L?Math.max(0,Math.min(1,((b-p)*U+(E-S)*N)/L)):0,Z=b-(p+V*U),oe=E-(S+V*N);return Z*Z+oe*oe}var x=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:m,generateIntoFramebuffer:g}),k="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",w="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",T="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",O=new Float32Array([0,0,2,0,0,2]),C=null,A=!1,W={},P=new WeakMap;function ne(b){if(!A&&!Y(b))throw new Error("WebGL generation not supported")}function _(b,E,p,S,M,F,U){if(F===void 0&&(F=1),U===void 0&&(U=null),!U&&(U=C,!U)){var N=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!N)throw new Error("OffscreenCanvas or DOM canvas not supported");U=C=N.getContext("webgl",{depth:!1})}ne(U);var L=new Uint8Array(b*E*4);l(U,function(q){var y=q.gl,z=q.withTexture,J=q.withTextureFramebuffer;z("readable",function(X,H){y.texImage2D(y.TEXTURE_2D,0,y.RGBA,b,E,0,y.RGBA,y.UNSIGNED_BYTE,null),J(X,H,function(K){D(b,E,p,S,M,F,y,K,0,0,0),y.readPixels(0,0,b,E,y.RGBA,y.UNSIGNED_BYTE,L)})})});for(var V=new Uint8Array(b*E),Z=0,oe=0;Z<L.length;Z+=4)V[oe++]=L[Z];return V}function I(b,E,p,S,M,F,U,N,L,V){F===void 0&&(F=1),N===void 0&&(N=0),L===void 0&&(L=0),V===void 0&&(V=0),D(b,E,p,S,M,F,U,null,N,L,V)}function D(b,E,p,S,M,F,U,N,L,V,Z){F===void 0&&(F=1),L===void 0&&(L=0),V===void 0&&(V=0),Z===void 0&&(Z=0),ne(U);var oe=[];e(p,function(q,y,z,J){oe.push(q,y,z,J)}),oe=new Float32Array(oe),l(U,function(q){var y=q.gl,z=q.isWebGL2,J=q.getExtension,X=q.withProgram,H=q.withTexture,K=q.withTextureFramebuffer,G=q.handleContextLoss;if(H("rawDistances",function(Q,te){(b!==Q._lastWidth||E!==Q._lastHeight)&&y.texImage2D(y.TEXTURE_2D,0,y.RGBA,Q._lastWidth=b,Q._lastHeight=E,0,y.RGBA,y.UNSIGNED_BYTE,null),X("main",k,w,function(B){var se=B.setAttribute,ee=B.setUniform,ae=!z&&J("ANGLE_instanced_arrays"),$=!z&&J("EXT_blend_minmax");se("aUV",2,y.STATIC_DRAW,0,O),se("aLineSegment",4,y.DYNAMIC_DRAW,1,oe),ee.apply(void 0,["4f","uGlyphBounds"].concat(S)),ee("1f","uMaxDistance",M),ee("1f","uExponent",F),K(Q,te,function(we){y.enable(y.BLEND),y.colorMask(!0,!0,!0,!0),y.viewport(0,0,b,E),y.scissor(0,0,b,E),y.blendFunc(y.ONE,y.ONE),y.blendEquationSeparate(y.FUNC_ADD,z?y.MAX:$.MAX_EXT),y.clear(y.COLOR_BUFFER_BIT),z?y.drawArraysInstanced(y.TRIANGLES,0,3,oe.length/4):ae.drawArraysInstancedANGLE(y.TRIANGLES,0,3,oe.length/4)})}),X("post",r,T,function(B){B.setAttribute("aUV",2,y.STATIC_DRAW,0,O),B.setUniform("1i","tex",te),y.bindFramebuffer(y.FRAMEBUFFER,N),y.disable(y.BLEND),y.colorMask(Z===0,Z===1,Z===2,Z===3),y.viewport(L,V,b,E),y.scissor(L,V,b,E),y.drawArrays(y.TRIANGLES,0,3)})}),y.isContextLost())throw G(),new Error("webgl context lost")})}function Y(b){var E=!b||b===C?W:b.canvas||b,p=P.get(E);if(p===void 0){A=!0;var S=null;try{var M=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],F=_(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,b);p=F&&M.length===F.length&&F.every(function(U,N){return U===M[N]}),p||(S="bad trial run results",console.info(M,F))}catch(U){p=!1,S=U.message}S&&console.warn("WebGL SDF generation not supported:",S),A=!1,P.set(E,p)}return p}var j=Object.freeze({__proto__:null,generate:_,generateIntoCanvas:I,generateIntoFramebuffer:D,isSupported:Y});function ie(b,E,p,S,M,F){M===void 0&&(M=Math.max(S[2]-S[0],S[3]-S[1])/2),F===void 0&&(F=1);try{return _.apply(j,arguments)}catch(U){return console.info("WebGL SDF generation failed, falling back to JS",U),v.apply(x,arguments)}}function re(b,E,p,S,M,F,U,N,L,V){M===void 0&&(M=Math.max(S[2]-S[0],S[3]-S[1])/2),F===void 0&&(F=1),N===void 0&&(N=0),L===void 0&&(L=0),V===void 0&&(V=0);try{return I.apply(j,arguments)}catch(Z){return console.info("WebGL SDF generation failed, falling back to JS",Z),m.apply(x,arguments)}}return n.forEachPathCommand=t,n.generate=ie,n.generateIntoCanvas=re,n.javascript=x,n.pathToLineSegments=e,n.webgl=j,n.webglUtils=h,Object.defineProperty(n,"__esModule",{value:!0}),n})({});return i}function Us(){var i=(function(n){var u={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},f={},t={};f.L=1,t[1]="L",Object.keys(u).forEach(function(G,Q){f[G]=1<<Q+1,t[f[G]]=G}),Object.freeze(f);var e=f.LRI|f.RLI|f.FSI,r=f.L|f.R|f.AL,s=f.B|f.S|f.WS|f.ON|f.FSI|f.LRI|f.RLI|f.PDI,o=f.BN|f.RLE|f.LRE|f.RLO|f.LRO|f.PDF,a=f.S|f.WS|f.B|e|f.PDI|o,l=null;function c(){if(!l){l=new Map;var G=function(te){if(u.hasOwnProperty(te)){var B=0;u[te].split(",").forEach(function(se){var ee=se.split("+"),ae=ee[0],$=ee[1];ae=parseInt(ae,36),$=$?parseInt($,36):0,l.set(B+=ae,f[te]);for(var we=0;we<$;we++)l.set(++B,f[te])})}};for(var Q in u)G(Q)}}function d(G){return c(),l.get(G.codePointAt(0))||f.L}function h(G){return t[d(G)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(G,Q){var te=36,B=0,se=new Map,ee=Q&&new Map,ae;return G.split(",").forEach(function $(we){if(we.indexOf("+")!==-1)for(var ue=+we;ue--;)$(ae);else{ae=we;var le=we.split(">"),ce=le[0],me=le[1];ce=String.fromCodePoint(B+=parseInt(ce,te)),me=String.fromCodePoint(B+=parseInt(me,te)),se.set(ce,me),Q&&ee.set(me,ce)}}),{map:se,reverseMap:ee}}var g,R,x;function k(){if(!g){var G=m(v.pairs,!0),Q=G.map,te=G.reverseMap;g=Q,R=te,x=m(v.canonical,!1).map}}function w(G){return k(),g.get(G)||null}function T(G){return k(),R.get(G)||null}function O(G){return k(),x.get(G)||null}var C=f.L,A=f.R,W=f.EN,P=f.ES,ne=f.ET,_=f.AN,I=f.CS,D=f.B,Y=f.S,j=f.ON,ie=f.BN,re=f.NSM,b=f.AL,E=f.LRO,p=f.RLO,S=f.LRE,M=f.RLE,F=f.PDF,U=f.LRI,N=f.RLI,L=f.FSI,V=f.PDI;function Z(G,Q){for(var te=125,B=new Uint32Array(G.length),se=0;se<G.length;se++)B[se]=d(G[se]);var ee=new Map;function ae($e,it){var et=B[$e];B[$e]=it,ee.set(et,ee.get(et)-1),et&s&&ee.set(s,ee.get(s)-1),ee.set(it,(ee.get(it)||0)+1),it&s&&ee.set(s,(ee.get(s)||0)+1)}for(var $=new Uint8Array(G.length),we=new Map,ue=[],le=null,ce=0;ce<G.length;ce++)le||ue.push(le={start:ce,end:G.length-1,level:Q==="rtl"?1:Q==="ltr"?0:ao(ce,!1)}),B[ce]&D&&(le.end=ce,le=null);for(var me=M|S|p|E|e|V|F|D,ke=function($e){return $e+($e&1?1:2)},Fe=function($e){return $e+($e&1?2:1)},he=0;he<ue.length;he++){le=ue[he];var ge=[{_level:le.level,_override:0,_isolate:0}],fe=void 0,pe=0,_e=0,Ne=0;ee.clear();for(var De=le.start;De<=le.end;De++){var ve=B[De];if(fe=ge[ge.length-1],ee.set(ve,(ee.get(ve)||0)+1),ve&s&&ee.set(s,(ee.get(s)||0)+1),ve&me)if(ve&(M|S)){$[De]=fe._level;var Ue=(ve===M?Fe:ke)(fe._level);Ue<=te&&!pe&&!_e?ge.push({_level:Ue,_override:0,_isolate:0}):pe||_e++}else if(ve&(p|E)){$[De]=fe._level;var ut=(ve===p?Fe:ke)(fe._level);ut<=te&&!pe&&!_e?ge.push({_level:ut,_override:ve&p?A:C,_isolate:0}):pe||_e++}else if(ve&e){ve&L&&(ve=ao(De+1,!0)===1?N:U),$[De]=fe._level,fe._override&&ae(De,fe._override);var Ae=(ve===N?Fe:ke)(fe._level);Ae<=te&&pe===0&&_e===0?(Ne++,ge.push({_level:Ae,_override:0,_isolate:1,_isolInitIndex:De})):pe++}else if(ve&V){if(pe>0)pe--;else if(Ne>0){for(_e=0;!ge[ge.length-1]._isolate;)ge.pop();var Te=ge[ge.length-1]._isolInitIndex;Te!=null&&(we.set(Te,De),we.set(De,Te)),ge.pop(),Ne--}fe=ge[ge.length-1],$[De]=fe._level,fe._override&&ae(De,fe._override)}else ve&F?(pe===0&&(_e>0?_e--:!fe._isolate&&ge.length>1&&(ge.pop(),fe=ge[ge.length-1])),$[De]=fe._level):ve&D&&($[De]=le.level);else $[De]=fe._level,fe._override&&ve!==ie&&ae(De,fe._override)}for(var Pe=[],Ee=null,ye=le.start;ye<=le.end;ye++){var Me=B[ye];if(!(Me&o)){var We=$[ye],xe=Me&e,Re=Me===V;Ee&&We===Ee._level?(Ee._end=ye,Ee._endsWithIsolInit=xe):Pe.push(Ee={_start:ye,_end:ye,_level:We,_startsWithPDI:Re,_endsWithIsolInit:xe})}}for(var Ye=[],qe=0;qe<Pe.length;qe++){var ht=Pe[qe];if(!ht._startsWithPDI||ht._startsWithPDI&&!we.has(ht._start)){for(var vt=[Ee=ht],St=void 0;Ee&&Ee._endsWithIsolInit&&(St=we.get(Ee._end))!=null;)for(var pt=qe+1;pt<Pe.length;pt++)if(Pe[pt]._start===St){vt.push(Ee=Pe[pt]);break}for(var Je=[],wt=0;wt<vt.length;wt++)for(var Gr=vt[wt],Xn=Gr._start;Xn<=Gr._end;Xn++)Je.push(Xn);for(var Ua=$[Je[0]],Nr=le.level,pn=Je[0]-1;pn>=0;pn--)if(!(B[pn]&o)){Nr=$[pn];break}var Hn=Je[Je.length-1],Ca=$[Hn],zr=le.level;if(!(B[Hn]&e)){for(var vn=Hn+1;vn<=le.end;vn++)if(!(B[vn]&o)){zr=$[vn];break}}Ye.push({_seqIndices:Je,_sosType:Math.max(Nr,Ua)%2?A:C,_eosType:Math.max(zr,Ca)%2?A:C})}}for(var Yn=0;Yn<Ye.length;Yn++){var qn=Ye[Yn],de=qn._seqIndices,Xt=qn._sosType,ka=qn._eosType,Dt=$[de[0]]&1?A:C;if(ee.get(re))for(var mn=0;mn<de.length;mn++){var Wr=de[mn];if(B[Wr]&re){for(var Jn=Xt,gn=mn-1;gn>=0;gn--)if(!(B[de[gn]]&o)){Jn=B[de[gn]];break}ae(Wr,Jn&(e|V)?j:Jn)}}if(ee.get(W))for(var _n=0;_n<de.length;_n++){var Vr=de[_n];if(B[Vr]&W)for(var yn=_n-1;yn>=-1;yn--){var jr=yn===-1?Xt:B[de[yn]];if(jr&r){jr===b&&ae(Vr,_);break}}}if(ee.get(b))for(var Kn=0;Kn<de.length;Kn++){var Xr=de[Kn];B[Xr]&b&&ae(Xr,A)}if(ee.get(P)||ee.get(I))for(var Ht=1;Ht<de.length-1;Ht++){var Zn=de[Ht];if(B[Zn]&(P|I)){for(var At=0,Qn=0,$n=Ht-1;$n>=0&&(At=B[de[$n]],!!(At&o));$n--);for(var er=Ht+1;er<de.length&&(Qn=B[de[er]],!!(Qn&o));er++);At===Qn&&(B[Zn]===P?At===W:At&(W|_))&&ae(Zn,At)}}if(ee.get(W))for(var ft=0;ft<de.length;ft++){var Da=de[ft];if(B[Da]&W){for(var bn=ft-1;bn>=0&&B[de[bn]]&(ne|o);bn--)ae(de[bn],W);for(ft++;ft<de.length&&B[de[ft]]&(ne|o|W);ft++)B[de[ft]]!==W&&ae(de[ft],W)}}if(ee.get(ne)||ee.get(P)||ee.get(I))for(var Yt=0;Yt<de.length;Yt++){var Hr=de[Yt];if(B[Hr]&(ne|P|I)){ae(Hr,j);for(var Tn=Yt-1;Tn>=0&&B[de[Tn]]&o;Tn--)ae(de[Tn],j);for(var Sn=Yt+1;Sn<de.length&&B[de[Sn]]&o;Sn++)ae(de[Sn],j)}}if(ee.get(W))for(var tr=0,Yr=Xt;tr<de.length;tr++){var qr=de[tr],nr=B[qr];nr&W?Yr===C&&ae(qr,C):nr&r&&(Yr=nr)}if(ee.get(s)){var qt=A|W|_,Jr=qt|C,wn=[];{for(var Ft=[],Mt=0;Mt<de.length;Mt++)if(B[de[Mt]]&s){var Jt=G[de[Mt]],Kr=void 0;if(w(Jt)!==null)if(Ft.length<63)Ft.push({char:Jt,seqIndex:Mt});else break;else if((Kr=T(Jt))!==null)for(var Kt=Ft.length-1;Kt>=0;Kt--){var rr=Ft[Kt].char;if(rr===Kr||rr===T(O(Jt))||w(O(rr))===Jt){wn.push([Ft[Kt].seqIndex,Mt]),Ft.length=Kt;break}}}wn.sort(function($e,it){return $e[0]-it[0]})}for(var or=0;or<wn.length;or++){for(var Zr=wn[or],xn=Zr[0],ar=Zr[1],Qr=!1,at=0,ir=xn+1;ir<ar;ir++){var $r=de[ir];if(B[$r]&Jr){Qr=!0;var eo=B[$r]&qt?A:C;if(eo===Dt){at=eo;break}}}if(Qr&&!at){at=Xt;for(var sr=xn-1;sr>=0;sr--){var to=de[sr];if(B[to]&Jr){var no=B[to]&qt?A:C;no!==Dt?at=no:at=Dt;break}}}if(at){if(B[de[xn]]=B[de[ar]]=at,at!==Dt){for(var Zt=xn+1;Zt<de.length;Zt++)if(!(B[de[Zt]]&o)){d(G[de[Zt]])&re&&(B[de[Zt]]=at);break}}if(at!==Dt){for(var Qt=ar+1;Qt<de.length;Qt++)if(!(B[de[Qt]]&o)){d(G[de[Qt]])&re&&(B[de[Qt]]=at);break}}}}for(var mt=0;mt<de.length;mt++)if(B[de[mt]]&s){for(var ro=mt,lr=mt,ur=Xt,$t=mt-1;$t>=0;$t--)if(B[de[$t]]&o)ro=$t;else{ur=B[de[$t]]&qt?A:C;break}for(var oo=ka,en=mt+1;en<de.length;en++)if(B[de[en]]&(s|o))lr=en;else{oo=B[de[en]]&qt?A:C;break}for(var fr=ro;fr<=lr;fr++)B[de[fr]]=ur===oo?ur:Dt;mt=lr}}}for(var nt=le.start;nt<=le.end;nt++){var Aa=$[nt],Un=B[nt];if(Aa&1?Un&(C|W|_)&&$[nt]++:Un&A?$[nt]++:Un&(_|W)&&($[nt]+=2),Un&o&&($[nt]=nt===0?le.level:$[nt-1]),nt===le.end||d(G[nt])&(Y|D))for(var Cn=nt;Cn>=0&&d(G[Cn])&a;Cn--)$[Cn]=le.level}}return{levels:$,paragraphs:ue};function ao($e,it){for(var et=$e;et<G.length;et++){var gt=B[et];if(gt&(A|b))return 1;if(gt&(D|C)||it&&gt===V)return 0;if(gt&e){var io=Fa(et);et=io===-1?G.length:io}}return 0}function Fa($e){for(var it=1,et=$e+1;et<G.length;et++){var gt=B[et];if(gt&D)break;if(gt&V){if(--it===0)return et}else gt&e&&it++}return-1}}var oe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",q;function y(){if(!q){var G=m(oe,!0),Q=G.map,te=G.reverseMap;te.forEach(function(B,se){Q.set(se,B)}),q=Q}}function z(G){return y(),q.get(G)||null}function J(G,Q,te,B){var se=G.length;te=Math.max(0,te==null?0:+te),B=Math.min(se-1,B==null?se-1:+B);for(var ee=new Map,ae=te;ae<=B;ae++)if(Q[ae]&1){var $=z(G[ae]);$!==null&&ee.set(ae,$)}return ee}function X(G,Q,te,B){var se=G.length;te=Math.max(0,te==null?0:+te),B=Math.min(se-1,B==null?se-1:+B);var ee=[];return Q.paragraphs.forEach(function(ae){var $=Math.max(te,ae.start),we=Math.min(B,ae.end);if($<we){for(var ue=Q.levels.slice($,we+1),le=we;le>=$&&d(G[le])&a;le--)ue[le]=ae.level;for(var ce=ae.level,me=1/0,ke=0;ke<ue.length;ke++){var Fe=ue[ke];Fe>ce&&(ce=Fe),Fe<me&&(me=Fe|1)}for(var he=ce;he>=me;he--)for(var ge=0;ge<ue.length;ge++)if(ue[ge]>=he){for(var fe=ge;ge+1<ue.length&&ue[ge+1]>=he;)ge++;ge>fe&&ee.push([fe+$,ge+$])}}}),ee}function H(G,Q,te,B){var se=K(G,Q,te,B),ee=[].concat(G);return se.forEach(function(ae,$){ee[$]=(Q.levels[ae]&1?z(G[ae]):null)||G[ae]}),ee.join("")}function K(G,Q,te,B){for(var se=X(G,Q,te,B),ee=[],ae=0;ae<G.length;ae++)ee[ae]=ae;return se.forEach(function($){for(var we=$[0],ue=$[1],le=ee.slice(we,ue+1),ce=le.length;ce--;)ee[ue-ce]=le[ce]}),ee}return n.closingToOpeningBracket=T,n.getBidiCharType=d,n.getBidiCharTypeName=h,n.getCanonicalBracket=O,n.getEmbeddingLevels=Z,n.getMirroredCharacter=z,n.getMirroredCharactersMap=J,n.getReorderSegments=X,n.getReorderedIndices=K,n.getReorderedString=H,n.openingToClosingBracket=w,Object.defineProperty(n,"__esModule",{value:!0}),n})({});return i}const ma=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Cr(i){const n=/^[ \t]*#include +<([\w\d./]+)>/gm;function u(f,t){let e=Na[t];return e?Cr(e):f}return i.replace(n,u)}const Ve=[];for(let i=0;i<256;i++)Ve[i]=(i<16?"0":"")+i.toString(16);function Cs(){const i=Math.random()*4294967295|0,n=Math.random()*4294967295|0,u=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return(Ve[i&255]+Ve[i>>8&255]+Ve[i>>16&255]+Ve[i>>24&255]+"-"+Ve[n&255]+Ve[n>>8&255]+"-"+Ve[n>>16&15|64]+Ve[n>>24&255]+"-"+Ve[u&63|128]+Ve[u>>8&255]+"-"+Ve[u>>16&255]+Ve[u>>24&255]+Ve[f&255]+Ve[f>>8&255]+Ve[f>>16&255]+Ve[f>>24&255]).toUpperCase()}const Ut=Object.assign||function(){let i=arguments[0];for(let n=1,u=arguments.length;n<u;n++){let f=arguments[n];if(f)for(let t in f)Object.prototype.hasOwnProperty.call(f,t)&&(i[t]=f[t])}return i},ks=Date.now(),Do=new WeakMap,Ao=new Map;let Ds=1e10;function kr(i,n){const u=Es(n);let f=Do.get(i);if(f||Do.set(i,f=Object.create(null)),f[u])return new f[u];const t=`_onBeforeCompile${u}`,e=function(a,l){i.onBeforeCompile.call(this,a,l);const c=this.customProgramCacheKey()+"|"+a.vertexShader+"|"+a.fragmentShader;let d=Ao[c];if(!d){const h=As(this,a,n,u);d=Ao[c]=h}a.vertexShader=d.vertexShader,a.fragmentShader=d.fragmentShader,Ut(a.uniforms,this.uniforms),n.timeUniform&&(a.uniforms[n.timeUniform]={get value(){return Date.now()-ks}}),this[t]&&this[t](a)},r=function(){return s(n.chained?i:i.clone())},s=function(a){const l=Object.create(a,o);return Object.defineProperty(l,"baseMaterial",{value:i}),Object.defineProperty(l,"id",{value:Ds++}),l.uuid=Cs(),l.uniforms=Ut({},a.uniforms,n.uniforms),l.defines=Ut({},a.defines,n.defines),l.defines[`TROIKA_DERIVED_MATERIAL_${u}`]="",l.extensions=Ut({},a.extensions,n.extensions),l._listeners=void 0,l},o={constructor:{value:r},isDerivedMaterial:{value:!0},type:{get:()=>i.type,set:a=>{i.type=a}},isDerivedFrom:{writable:!0,configurable:!0,value:function(a){const l=this.baseMaterial;return a===l||l.isDerivedMaterial&&l.isDerivedFrom(a)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+u}},onBeforeCompile:{get(){return e},set(a){this[t]=a}},copy:{writable:!0,configurable:!0,value:function(a){return i.copy.call(this,a),!i.isShaderMaterial&&!i.isDerivedMaterial&&(Ut(this.extensions,a.extensions),Ut(this.defines,a.defines),Ut(this.uniforms,Ga.clone(a.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const a=new i.constructor;return s(a).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let a=this._depthMaterial;return a||(a=this._depthMaterial=kr(i.isDerivedMaterial?i.getDepthMaterial():new Pa({depthPacking:Ba}),n),a.defines.IS_DEPTH_MATERIAL="",a.uniforms=this.uniforms),a}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let a=this._distanceMaterial;return a||(a=this._distanceMaterial=kr(i.isDerivedMaterial?i.getDistanceMaterial():new Oa,n),a.defines.IS_DISTANCE_MATERIAL="",a.uniforms=this.uniforms),a}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:a,_distanceMaterial:l}=this;a&&a.dispose(),l&&l.dispose(),i.dispose.call(this)}}};return f[u]=r,new r}function As(i,{vertexShader:n,fragmentShader:u},f,t){let{vertexDefs:e,vertexMainIntro:r,vertexMainOutro:s,vertexTransform:o,fragmentDefs:a,fragmentMainIntro:l,fragmentMainOutro:c,fragmentColorTransform:d,customRewriter:h,timeUniform:v}=f;if(e=e||"",r=r||"",s=s||"",a=a||"",l=l||"",c=c||"",(o||h)&&(n=Cr(n)),(d||h)&&(u=u.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),u=Cr(u)),h){let m=h({vertexShader:n,fragmentShader:u});n=m.vertexShader,u=m.fragmentShader}if(d){let m=[];u=u.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(m.push(g),"")),c=`${d}
${m.join(`
`)}
${c}`}if(v){const m=`
uniform float ${v};
`;e=m+e,a=m+a}return o&&(n=`vec3 troika_position_${t};
vec3 troika_normal_${t};
vec2 troika_uv_${t};
${n}
`,e=`${e}
void troikaVertexTransform${t}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${o}
}
`,r=`
troika_position_${t} = vec3(position);
troika_normal_${t} = vec3(normal);
troika_uv_${t} = vec2(uv);
troikaVertexTransform${t}(troika_position_${t}, troika_normal_${t}, troika_uv_${t});
${r}
`,n=n.replace(/\b(position|normal|uv)\b/g,(m,g,R,x)=>/\battribute\s+vec[23]\s+$/.test(x.substr(0,R))?g:`troika_${g}_${t}`),i.map&&i.map.channel>0||(n=n.replace(/\bMAP_UV\b/g,`troika_uv_${t}`))),n=Fo(n,t,e,r,s),u=Fo(u,t,a,l,c),{vertexShader:n,fragmentShader:u}}function Fo(i,n,u,f,t){return(f||t||u)&&(i=i.replace(ma,`
${u}
void troikaOrigMain${n}() {`),i+=`
void main() {
  ${f}
  troikaOrigMain${n}();
  ${t}
}`),i}function Fs(i,n){return i==="uniforms"?void 0:typeof n=="function"?n.toString():n}let Ms=0;const Mo=new Map;function Es(i){const n=JSON.stringify(i,Fs);let u=Mo.get(n);return u==null&&Mo.set(n,u=++Ms),u}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Ls(){return typeof window>"u"&&(self.window=self),(function(i){var n={parse:function(t){var e=n._bin,r=new Uint8Array(t);if(e.readASCII(r,0,4)=="ttcf"){var s=4;e.readUshort(r,s),s+=2,e.readUshort(r,s),s+=2;var o=e.readUint(r,s);s+=4;for(var a=[],l=0;l<o;l++){var c=e.readUint(r,s);s+=4,a.push(n._readFont(r,c))}return a}return[n._readFont(r,0)]},_readFont:function(t,e){var r=n._bin,s=e;r.readFixed(t,e),e+=4;var o=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],l={_data:t,_offset:s},c={},d=0;d<o;d++){var h=r.readASCII(t,e,4);e+=4,r.readUint(t,e),e+=4;var v=r.readUint(t,e);e+=4;var m=r.readUint(t,e);e+=4,c[h]={offset:v,length:m}}for(d=0;d<a.length;d++){var g=a[d];c[g]&&(l[g.trim()]=n[g.trim()].parse(t,c[g].offset,c[g].length,l))}return l},_tabOffset:function(t,e,r){for(var s=n._bin,o=s.readUshort(t,r+4),a=r+12,l=0;l<o;l++){var c=s.readASCII(t,a,4);a+=4,s.readUint(t,a),a+=4;var d=s.readUint(t,a);if(a+=4,s.readUint(t,a),a+=4,c==e)return d}return 0}};n._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return n._bin.readShort(t,e)/16384},readInt:function(t,e){return n._bin._view(t).getInt32(e)},readInt8:function(t,e){return n._bin._view(t).getInt8(e)},readShort:function(t,e){return n._bin._view(t).getInt16(e)},readUshort:function(t,e){return n._bin._view(t).getUint16(e)},readUshorts:function(t,e,r){for(var s=[],o=0;o<r;o++)s.push(n._bin.readUshort(t,e+2*o));return s},readUint:function(t,e){return n._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*n._bin.readUint(t,e)+n._bin.readUint(t,e+4)},readASCII:function(t,e,r){for(var s="",o=0;o<r;o++)s+=String.fromCharCode(t[e+o]);return s},readUnicode:function(t,e,r){for(var s="",o=0;o<r;o++){var a=t[e++]<<8|t[e++];s+=String.fromCharCode(a)}return s},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,r){var s=n._bin._tdec;return s&&e==0&&r==t.length?s.decode(t):n._bin.readASCII(t,e,r)},readBytes:function(t,e,r){for(var s=[],o=0;o<r;o++)s.push(t[e+o]);return s},readASCIIArray:function(t,e,r){for(var s=[],o=0;o<r;o++)s.push(String.fromCharCode(t[e+o]));return s},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},n._lctf={},n._lctf.parse=function(t,e,r,s,o){var a=n._bin,l={},c=e;a.readFixed(t,e),e+=4;var d=a.readUshort(t,e);e+=2;var h=a.readUshort(t,e);e+=2;var v=a.readUshort(t,e);return e+=2,l.scriptList=n._lctf.readScriptList(t,c+d),l.featureList=n._lctf.readFeatureList(t,c+h),l.lookupList=n._lctf.readLookupList(t,c+v,o),l},n._lctf.readLookupList=function(t,e,r){var s=n._bin,o=e,a=[],l=s.readUshort(t,e);e+=2;for(var c=0;c<l;c++){var d=s.readUshort(t,e);e+=2;var h=n._lctf.readLookupTable(t,o+d,r);a.push(h)}return a},n._lctf.readLookupTable=function(t,e,r){var s=n._bin,o=e,a={tabs:[]};a.ltype=s.readUshort(t,e),e+=2,a.flag=s.readUshort(t,e),e+=2;var l=s.readUshort(t,e);e+=2;for(var c=a.ltype,d=0;d<l;d++){var h=s.readUshort(t,e);e+=2;var v=r(t,c,o+h,a);a.tabs.push(v)}return a},n._lctf.numOfOnes=function(t){for(var e=0,r=0;r<32;r++)(t>>>r&1)!=0&&e++;return e},n._lctf.readClassDef=function(t,e){var r=n._bin,s=[],o=r.readUshort(t,e);if(e+=2,o==1){var a=r.readUshort(t,e);e+=2;var l=r.readUshort(t,e);e+=2;for(var c=0;c<l;c++)s.push(a+c),s.push(a+c),s.push(r.readUshort(t,e)),e+=2}if(o==2){var d=r.readUshort(t,e);for(e+=2,c=0;c<d;c++)s.push(r.readUshort(t,e)),e+=2,s.push(r.readUshort(t,e)),e+=2,s.push(r.readUshort(t,e)),e+=2}return s},n._lctf.getInterval=function(t,e){for(var r=0;r<t.length;r+=3){var s=t[r],o=t[r+1];if(t[r+2],s<=e&&e<=o)return r}return-1},n._lctf.readCoverage=function(t,e){var r=n._bin,s={};s.fmt=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);return e+=2,s.fmt==1&&(s.tab=r.readUshorts(t,e,o)),s.fmt==2&&(s.tab=r.readUshorts(t,e,3*o)),s},n._lctf.coverageIndex=function(t,e){var r=t.tab;if(t.fmt==1)return r.indexOf(e);if(t.fmt==2){var s=n._lctf.getInterval(r,e);if(s!=-1)return r[s+2]+(e-r[s])}return-1},n._lctf.readFeatureList=function(t,e){var r=n._bin,s=e,o=[],a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=r.readASCII(t,e,4);e+=4;var d=r.readUshort(t,e);e+=2;var h=n._lctf.readFeatureTable(t,s+d);h.tag=c.trim(),o.push(h)}return o},n._lctf.readFeatureTable=function(t,e){var r=n._bin,s=e,o={},a=r.readUshort(t,e);e+=2,a>0&&(o.featureParams=s+a);var l=r.readUshort(t,e);e+=2,o.tab=[];for(var c=0;c<l;c++)o.tab.push(r.readUshort(t,e+2*c));return o},n._lctf.readScriptList=function(t,e){var r=n._bin,s=e,o={},a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=r.readASCII(t,e,4);e+=4;var d=r.readUshort(t,e);e+=2,o[c.trim()]=n._lctf.readScriptTable(t,s+d)}return o},n._lctf.readScriptTable=function(t,e){var r=n._bin,s=e,o={},a=r.readUshort(t,e);e+=2,a>0&&(o.default=n._lctf.readLangSysTable(t,s+a));var l=r.readUshort(t,e);e+=2;for(var c=0;c<l;c++){var d=r.readASCII(t,e,4);e+=4;var h=r.readUshort(t,e);e+=2,o[d.trim()]=n._lctf.readLangSysTable(t,s+h)}return o},n._lctf.readLangSysTable=function(t,e){var r=n._bin,s={};r.readUshort(t,e),e+=2,s.reqFeature=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);return e+=2,s.features=r.readUshorts(t,e,o),s},n.CFF={},n.CFF.parse=function(t,e,r){var s=n._bin;(t=new Uint8Array(t.buffer,e,r))[e=0],t[++e],t[++e],t[++e],e++;var o=[];e=n.CFF.readIndex(t,e,o);for(var a=[],l=0;l<o.length-1;l++)a.push(s.readASCII(t,e+o[l],o[l+1]-o[l]));e+=o[o.length-1];var c=[];e=n.CFF.readIndex(t,e,c);var d=[];for(l=0;l<c.length-1;l++)d.push(n.CFF.readDict(t,e+c[l],e+c[l+1]));e+=c[c.length-1];var h=d[0],v=[];e=n.CFF.readIndex(t,e,v);var m=[];for(l=0;l<v.length-1;l++)m.push(s.readASCII(t,e+v[l],v[l+1]-v[l]));if(e+=v[v.length-1],n.CFF.readSubrs(t,e,h),h.CharStrings){e=h.CharStrings,v=[],e=n.CFF.readIndex(t,e,v);var g=[];for(l=0;l<v.length-1;l++)g.push(s.readBytes(t,e+v[l],v[l+1]-v[l]));h.CharStrings=g}if(h.ROS){e=h.FDArray;var R=[];for(e=n.CFF.readIndex(t,e,R),h.FDArray=[],l=0;l<R.length-1;l++){var x=n.CFF.readDict(t,e+R[l],e+R[l+1]);n.CFF._readFDict(t,x,m),h.FDArray.push(x)}e+=R[R.length-1],e=h.FDSelect,h.FDSelect=[];var k=t[e];if(e++,k!=3)throw k;var w=s.readUshort(t,e);for(e+=2,l=0;l<w+1;l++)h.FDSelect.push(s.readUshort(t,e),t[e+2]),e+=3}return h.Encoding&&(h.Encoding=n.CFF.readEncoding(t,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=n.CFF.readCharset(t,h.charset,h.CharStrings.length)),n.CFF._readFDict(t,h,m),h},n.CFF._readFDict=function(t,e,r){var s;for(var o in e.Private&&(s=e.Private[1],e.Private=n.CFF.readDict(t,s,s+e.Private[0]),e.Private.Subrs&&n.CFF.readSubrs(t,s+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)!=-1&&(e[o]=r[e[o]-426+35])},n.CFF.readSubrs=function(t,e,r){var s=n._bin,o=[];e=n.CFF.readIndex(t,e,o);var a,l=o.length;a=l<1240?107:l<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var c=0;c<o.length-1;c++)r.Subrs.push(s.readBytes(t,e+o[c],o[c+1]-o[c]))},n.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],n.CFF.glyphByUnicode=function(t,e){for(var r=0;r<t.charset.length;r++)if(t.charset[r]==e)return r;return-1},n.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:n.CFF.glyphByUnicode(t,n.CFF.tableSE[e])},n.CFF.readEncoding=function(t,e,r){n._bin;var s=[".notdef"],o=t[e];if(e++,o!=0)throw"error: unknown encoding format: "+o;var a=t[e];e++;for(var l=0;l<a;l++)s.push(t[e+l]);return s},n.CFF.readCharset=function(t,e,r){var s=n._bin,o=[".notdef"],a=t[e];if(e++,a==0)for(var l=0;l<r;l++){var c=s.readUshort(t,e);e+=2,o.push(c)}else{if(a!=1&&a!=2)throw"error: format: "+a;for(;o.length<r;){c=s.readUshort(t,e),e+=2;var d=0;for(a==1?(d=t[e],e++):(d=s.readUshort(t,e),e+=2),l=0;l<=d;l++)o.push(c),c++}}return o},n.CFF.readIndex=function(t,e,r){var s=n._bin,o=s.readUshort(t,e)+1,a=t[e+=2];if(e++,a==1)for(var l=0;l<o;l++)r.push(t[e+l]);else if(a==2)for(l=0;l<o;l++)r.push(s.readUshort(t,e+2*l));else if(a==3)for(l=0;l<o;l++)r.push(16777215&s.readUint(t,e+3*l-1));else if(o!=1)throw"unsupported offset size: "+a+", count: "+o;return(e+=o*a)-1},n.CFF.getCharString=function(t,e,r){var s=n._bin,o=t[e],a=t[e+1];t[e+2],t[e+3],t[e+4];var l=1,c=null,d=null;o<=20&&(c=o,l=1),o==12&&(c=100*o+a,l=2),21<=o&&o<=27&&(c=o,l=1),o==28&&(d=s.readShort(t,e+1),l=3),29<=o&&o<=31&&(c=o,l=1),32<=o&&o<=246&&(d=o-139,l=1),247<=o&&o<=250&&(d=256*(o-247)+a+108,l=2),251<=o&&o<=254&&(d=256*-(o-251)-a-108,l=2),o==255&&(d=s.readInt(t,e+1)/65535,l=5),r.val=d??"o"+c,r.size=l},n.CFF.readCharString=function(t,e,r){for(var s=e+r,o=n._bin,a=[];e<s;){var l=t[e],c=t[e+1];t[e+2],t[e+3],t[e+4];var d=1,h=null,v=null;l<=20&&(h=l,d=1),l==12&&(h=100*l+c,d=2),l!=19&&l!=20||(h=l,d=2),21<=l&&l<=27&&(h=l,d=1),l==28&&(v=o.readShort(t,e+1),d=3),29<=l&&l<=31&&(h=l,d=1),32<=l&&l<=246&&(v=l-139,d=1),247<=l&&l<=250&&(v=256*(l-247)+c+108,d=2),251<=l&&l<=254&&(v=256*-(l-251)-c-108,d=2),l==255&&(v=o.readInt(t,e+1)/65535,d=5),a.push(v??"o"+h),e+=d}return a},n.CFF.readDict=function(t,e,r){for(var s=n._bin,o={},a=[];e<r;){var l=t[e],c=t[e+1];t[e+2],t[e+3],t[e+4];var d=1,h=null,v=null;if(l==28&&(v=s.readShort(t,e+1),d=3),l==29&&(v=s.readInt(t,e+1),d=5),32<=l&&l<=246&&(v=l-139,d=1),247<=l&&l<=250&&(v=256*(l-247)+c+108,d=2),251<=l&&l<=254&&(v=256*-(l-251)-c-108,d=2),l==255)throw v=s.readInt(t,e+1)/65535,d=5,"unknown number";if(l==30){var m=[];for(d=1;;){var g=t[e+d];d++;var R=g>>4,x=15&g;if(R!=15&&m.push(R),x!=15&&m.push(x),x==15)break}for(var k="",w=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],T=0;T<m.length;T++)k+=w[m[T]];v=parseFloat(k)}l<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][l],d=1,l==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][c],d=2)),h!=null?(o[h]=a.length==1?a[0]:a,a=[]):a.push(v),e+=d}return o},n.cmap={},n.cmap.parse=function(t,e,r){t=new Uint8Array(t.buffer,e,r),e=0;var s=n._bin,o={};s.readUshort(t,e),e+=2;var a=s.readUshort(t,e);e+=2;var l=[];o.tables=[];for(var c=0;c<a;c++){var d=s.readUshort(t,e);e+=2;var h=s.readUshort(t,e);e+=2;var v=s.readUint(t,e);e+=4;var m="p"+d+"e"+h,g=l.indexOf(v);if(g==-1){var R;g=o.tables.length,l.push(v);var x=s.readUshort(t,v);x==0?R=n.cmap.parse0(t,v):x==4?R=n.cmap.parse4(t,v):x==6?R=n.cmap.parse6(t,v):x==12?R=n.cmap.parse12(t,v):console.debug("unknown format: "+x,d,h,v),o.tables.push(R)}if(o[m]!=null)throw"multiple tables for one platform+encoding";o[m]=g}return o},n.cmap.parse0=function(t,e){var r=n._bin,s={};s.format=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2,s.map=[];for(var a=0;a<o-6;a++)s.map.push(t[e+a]);return s},n.cmap.parse4=function(t,e){var r=n._bin,s=e,o={};o.format=r.readUshort(t,e),e+=2;var a=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2;var l=r.readUshort(t,e);e+=2;var c=l/2;o.searchRange=r.readUshort(t,e),e+=2,o.entrySelector=r.readUshort(t,e),e+=2,o.rangeShift=r.readUshort(t,e),e+=2,o.endCount=r.readUshorts(t,e,c),e+=2*c,e+=2,o.startCount=r.readUshorts(t,e,c),e+=2*c,o.idDelta=[];for(var d=0;d<c;d++)o.idDelta.push(r.readShort(t,e)),e+=2;for(o.idRangeOffset=r.readUshorts(t,e,c),e+=2*c,o.glyphIdArray=[];e<s+a;)o.glyphIdArray.push(r.readUshort(t,e)),e+=2;return o},n.cmap.parse6=function(t,e){var r=n._bin,s={};s.format=r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2,s.firstCode=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);e+=2,s.glyphIdArray=[];for(var a=0;a<o;a++)s.glyphIdArray.push(r.readUshort(t,e)),e+=2;return s},n.cmap.parse12=function(t,e){var r=n._bin,s={};s.format=r.readUshort(t,e),e+=2,e+=2,r.readUint(t,e),e+=4,r.readUint(t,e),e+=4;var o=r.readUint(t,e);e+=4,s.groups=[];for(var a=0;a<o;a++){var l=e+12*a,c=r.readUint(t,l+0),d=r.readUint(t,l+4),h=r.readUint(t,l+8);s.groups.push([c,d,h])}return s},n.glyf={},n.glyf.parse=function(t,e,r,s){for(var o=[],a=0;a<s.maxp.numGlyphs;a++)o.push(null);return o},n.glyf._parseGlyf=function(t,e){var r=n._bin,s=t._data,o=n._tabOffset(s,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var a={};if(a.noc=r.readShort(s,o),o+=2,a.xMin=r.readShort(s,o),o+=2,a.yMin=r.readShort(s,o),o+=2,a.xMax=r.readShort(s,o),o+=2,a.yMax=r.readShort(s,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var l=0;l<a.noc;l++)a.endPts.push(r.readUshort(s,o)),o+=2;var c=r.readUshort(s,o);if(o+=2,s.length-o<c)return null;a.instructions=r.readBytes(s,o,c),o+=c;var d=a.endPts[a.noc-1]+1;for(a.flags=[],l=0;l<d;l++){var h=s[o];if(o++,a.flags.push(h),(8&h)!=0){var v=s[o];o++;for(var m=0;m<v;m++)a.flags.push(h),l++}}for(a.xs=[],l=0;l<d;l++){var g=(2&a.flags[l])!=0,R=(16&a.flags[l])!=0;g?(a.xs.push(R?s[o]:-s[o]),o++):R?a.xs.push(0):(a.xs.push(r.readShort(s,o)),o+=2)}for(a.ys=[],l=0;l<d;l++)g=(4&a.flags[l])!=0,R=(32&a.flags[l])!=0,g?(a.ys.push(R?s[o]:-s[o]),o++):R?a.ys.push(0):(a.ys.push(r.readShort(s,o)),o+=2);var x=0,k=0;for(l=0;l<d;l++)x+=a.xs[l],k+=a.ys[l],a.xs[l]=x,a.ys[l]=k}else{var w;a.parts=[];do{w=r.readUshort(s,o),o+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(T),T.glyphIndex=r.readUshort(s,o),o+=2,1&w){var O=r.readShort(s,o);o+=2;var C=r.readShort(s,o);o+=2}else O=r.readInt8(s,o),o++,C=r.readInt8(s,o),o++;2&w?(T.m.tx=O,T.m.ty=C):(T.p1=O,T.p2=C),8&w?(T.m.a=T.m.d=r.readF2dot14(s,o),o+=2):64&w?(T.m.a=r.readF2dot14(s,o),o+=2,T.m.d=r.readF2dot14(s,o),o+=2):128&w&&(T.m.a=r.readF2dot14(s,o),o+=2,T.m.b=r.readF2dot14(s,o),o+=2,T.m.c=r.readF2dot14(s,o),o+=2,T.m.d=r.readF2dot14(s,o),o+=2)}while(32&w);if(256&w){var A=r.readUshort(s,o);for(o+=2,a.instr=[],l=0;l<A;l++)a.instr.push(s[o]),o++}}return a},n.GDEF={},n.GDEF.parse=function(t,e,r,s){var o=e;e+=4;var a=n._bin.readUshort(t,e);return{glyphClassDef:a===0?null:n._lctf.readClassDef(t,o+a)}},n.GPOS={},n.GPOS.parse=function(t,e,r,s){return n._lctf.parse(t,e,r,s,n.GPOS.subt)},n.GPOS.subt=function(t,e,r,s){var o=n._bin,a=r,l={};if(l.fmt=o.readUshort(t,r),r+=2,e==1||e==2||e==3||e==7||e==8&&l.fmt<=2){var c=o.readUshort(t,r);r+=2,l.coverage=n._lctf.readCoverage(t,c+a)}if(e==1&&l.fmt==1){var d=o.readUshort(t,r);r+=2,d!=0&&(l.pos=n.GPOS.readValueRecord(t,r,d))}else if(e==2&&l.fmt>=1&&l.fmt<=2){d=o.readUshort(t,r),r+=2;var h=o.readUshort(t,r);r+=2;var v=n._lctf.numOfOnes(d),m=n._lctf.numOfOnes(h);if(l.fmt==1){l.pairsets=[];var g=o.readUshort(t,r);r+=2;for(var R=0;R<g;R++){var x=a+o.readUshort(t,r);r+=2;var k=o.readUshort(t,x);x+=2;for(var w=[],T=0;T<k;T++){var O=o.readUshort(t,x);x+=2,d!=0&&(_=n.GPOS.readValueRecord(t,x,d),x+=2*v),h!=0&&(I=n.GPOS.readValueRecord(t,x,h),x+=2*m),w.push({gid2:O,val1:_,val2:I})}l.pairsets.push(w)}}if(l.fmt==2){var C=o.readUshort(t,r);r+=2;var A=o.readUshort(t,r);r+=2;var W=o.readUshort(t,r);r+=2;var P=o.readUshort(t,r);for(r+=2,l.classDef1=n._lctf.readClassDef(t,a+C),l.classDef2=n._lctf.readClassDef(t,a+A),l.matrix=[],R=0;R<W;R++){var ne=[];for(T=0;T<P;T++){var _=null,I=null;d!=0&&(_=n.GPOS.readValueRecord(t,r,d),r+=2*v),h!=0&&(I=n.GPOS.readValueRecord(t,r,h),r+=2*m),ne.push({val1:_,val2:I})}l.matrix.push(ne)}}}else if(e==4&&l.fmt==1)l.markCoverage=n._lctf.readCoverage(t,o.readUshort(t,r)+a),l.baseCoverage=n._lctf.readCoverage(t,o.readUshort(t,r+2)+a),l.markClassCount=o.readUshort(t,r+4),l.markArray=n.GPOS.readMarkArray(t,o.readUshort(t,r+6)+a),l.baseArray=n.GPOS.readBaseArray(t,o.readUshort(t,r+8)+a,l.markClassCount);else if(e==6&&l.fmt==1)l.mark1Coverage=n._lctf.readCoverage(t,o.readUshort(t,r)+a),l.mark2Coverage=n._lctf.readCoverage(t,o.readUshort(t,r+2)+a),l.markClassCount=o.readUshort(t,r+4),l.mark1Array=n.GPOS.readMarkArray(t,o.readUshort(t,r+6)+a),l.mark2Array=n.GPOS.readBaseArray(t,o.readUshort(t,r+8)+a,l.markClassCount);else{if(e==9&&l.fmt==1){var D=o.readUshort(t,r);r+=2;var Y=o.readUint(t,r);if(r+=4,s.ltype==9)s.ltype=D;else if(s.ltype!=D)throw"invalid extension substitution";return n.GPOS.subt(t,s.ltype,a+Y)}console.debug("unsupported GPOS table LookupType",e,"format",l.fmt)}return l},n.GPOS.readValueRecord=function(t,e,r){var s=n._bin,o=[];return o.push(1&r?s.readShort(t,e):0),e+=1&r?2:0,o.push(2&r?s.readShort(t,e):0),e+=2&r?2:0,o.push(4&r?s.readShort(t,e):0),e+=4&r?2:0,o.push(8&r?s.readShort(t,e):0),e+=8&r?2:0,o},n.GPOS.readBaseArray=function(t,e,r){var s=n._bin,o=[],a=e,l=s.readUshort(t,e);e+=2;for(var c=0;c<l;c++){for(var d=[],h=0;h<r;h++)d.push(n.GPOS.readAnchorRecord(t,a+s.readUshort(t,e))),e+=2;o.push(d)}return o},n.GPOS.readMarkArray=function(t,e){var r=n._bin,s=[],o=e,a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=n.GPOS.readAnchorRecord(t,r.readUshort(t,e+2)+o);c.markClass=r.readUshort(t,e),s.push(c),e+=4}return s},n.GPOS.readAnchorRecord=function(t,e){var r=n._bin,s={};return s.fmt=r.readUshort(t,e),s.x=r.readShort(t,e+2),s.y=r.readShort(t,e+4),s},n.GSUB={},n.GSUB.parse=function(t,e,r,s){return n._lctf.parse(t,e,r,s,n.GSUB.subt)},n.GSUB.subt=function(t,e,r,s){var o=n._bin,a=r,l={};if(l.fmt=o.readUshort(t,r),r+=2,e!=1&&e!=2&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==2||e==4||e==5&&l.fmt<=2||e==6&&l.fmt<=2){var c=o.readUshort(t,r);r+=2,l.coverage=n._lctf.readCoverage(t,a+c)}if(e==1&&l.fmt>=1&&l.fmt<=2){if(l.fmt==1)l.delta=o.readShort(t,r),r+=2;else if(l.fmt==2){var d=o.readUshort(t,r);r+=2,l.newg=o.readUshorts(t,r,d),r+=2*l.newg.length}}else if(e==2&&l.fmt==1){d=o.readUshort(t,r),r+=2,l.seqs=[];for(var h=0;h<d;h++){var v=o.readUshort(t,r)+a;r+=2;var m=o.readUshort(t,v);l.seqs.push(o.readUshorts(t,v+2,m))}}else if(e==4)for(l.vals=[],d=o.readUshort(t,r),r+=2,h=0;h<d;h++){var g=o.readUshort(t,r);r+=2,l.vals.push(n.GSUB.readLigatureSet(t,a+g))}else if(e==5&&l.fmt==2){if(l.fmt==2){var R=o.readUshort(t,r);r+=2,l.cDef=n._lctf.readClassDef(t,a+R),l.scset=[];var x=o.readUshort(t,r);for(r+=2,h=0;h<x;h++){var k=o.readUshort(t,r);r+=2,l.scset.push(k==0?null:n.GSUB.readSubClassSet(t,a+k))}}}else if(e==6&&l.fmt==3){if(l.fmt==3){for(h=0;h<3;h++){d=o.readUshort(t,r),r+=2;for(var w=[],T=0;T<d;T++)w.push(n._lctf.readCoverage(t,a+o.readUshort(t,r+2*T)));r+=2*d,h==0&&(l.backCvg=w),h==1&&(l.inptCvg=w),h==2&&(l.ahedCvg=w)}d=o.readUshort(t,r),r+=2,l.lookupRec=n.GSUB.readSubstLookupRecords(t,r,d)}}else{if(e==7&&l.fmt==1){var O=o.readUshort(t,r);r+=2;var C=o.readUint(t,r);if(r+=4,s.ltype==9)s.ltype=O;else if(s.ltype!=O)throw"invalid extension substitution";return n.GSUB.subt(t,s.ltype,a+C)}console.debug("unsupported GSUB table LookupType",e,"format",l.fmt)}return l},n.GSUB.readSubClassSet=function(t,e){var r=n._bin.readUshort,s=e,o=[],a=r(t,e);e+=2;for(var l=0;l<a;l++){var c=r(t,e);e+=2,o.push(n.GSUB.readSubClassRule(t,s+c))}return o},n.GSUB.readSubClassRule=function(t,e){var r=n._bin.readUshort,s={},o=r(t,e),a=r(t,e+=2);e+=2,s.input=[];for(var l=0;l<o-1;l++)s.input.push(r(t,e)),e+=2;return s.substLookupRecords=n.GSUB.readSubstLookupRecords(t,e,a),s},n.GSUB.readSubstLookupRecords=function(t,e,r){for(var s=n._bin.readUshort,o=[],a=0;a<r;a++)o.push(s(t,e),s(t,e+2)),e+=4;return o},n.GSUB.readChainSubClassSet=function(t,e){var r=n._bin,s=e,o=[],a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=r.readUshort(t,e);e+=2,o.push(n.GSUB.readChainSubClassRule(t,s+c))}return o},n.GSUB.readChainSubClassRule=function(t,e){for(var r=n._bin,s={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var l=r.readUshort(t,e);e+=2,a==1&&l--,s[o[a]]=r.readUshorts(t,e,l),e+=2*s[o[a]].length}return l=r.readUshort(t,e),e+=2,s.subst=r.readUshorts(t,e,2*l),e+=2*s.subst.length,s},n.GSUB.readLigatureSet=function(t,e){var r=n._bin,s=e,o=[],a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=r.readUshort(t,e);e+=2,o.push(n.GSUB.readLigature(t,s+c))}return o},n.GSUB.readLigature=function(t,e){var r=n._bin,s={chain:[]};s.nglyph=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);e+=2;for(var a=0;a<o-1;a++)s.chain.push(r.readUshort(t,e)),e+=2;return s},n.head={},n.head.parse=function(t,e,r){var s=n._bin,o={};return s.readFixed(t,e),e+=4,o.fontRevision=s.readFixed(t,e),e+=4,s.readUint(t,e),e+=4,s.readUint(t,e),e+=4,o.flags=s.readUshort(t,e),e+=2,o.unitsPerEm=s.readUshort(t,e),e+=2,o.created=s.readUint64(t,e),e+=8,o.modified=s.readUint64(t,e),e+=8,o.xMin=s.readShort(t,e),e+=2,o.yMin=s.readShort(t,e),e+=2,o.xMax=s.readShort(t,e),e+=2,o.yMax=s.readShort(t,e),e+=2,o.macStyle=s.readUshort(t,e),e+=2,o.lowestRecPPEM=s.readUshort(t,e),e+=2,o.fontDirectionHint=s.readShort(t,e),e+=2,o.indexToLocFormat=s.readShort(t,e),e+=2,o.glyphDataFormat=s.readShort(t,e),e+=2,o},n.hhea={},n.hhea.parse=function(t,e,r){var s=n._bin,o={};return s.readFixed(t,e),e+=4,o.ascender=s.readShort(t,e),e+=2,o.descender=s.readShort(t,e),e+=2,o.lineGap=s.readShort(t,e),e+=2,o.advanceWidthMax=s.readUshort(t,e),e+=2,o.minLeftSideBearing=s.readShort(t,e),e+=2,o.minRightSideBearing=s.readShort(t,e),e+=2,o.xMaxExtent=s.readShort(t,e),e+=2,o.caretSlopeRise=s.readShort(t,e),e+=2,o.caretSlopeRun=s.readShort(t,e),e+=2,o.caretOffset=s.readShort(t,e),e+=2,e+=8,o.metricDataFormat=s.readShort(t,e),e+=2,o.numberOfHMetrics=s.readUshort(t,e),e+=2,o},n.hmtx={},n.hmtx.parse=function(t,e,r,s){for(var o=n._bin,a={aWidth:[],lsBearing:[]},l=0,c=0,d=0;d<s.maxp.numGlyphs;d++)d<s.hhea.numberOfHMetrics&&(l=o.readUshort(t,e),e+=2,c=o.readShort(t,e),e+=2),a.aWidth.push(l),a.lsBearing.push(c);return a},n.kern={},n.kern.parse=function(t,e,r,s){var o=n._bin,a=o.readUshort(t,e);if(e+=2,a==1)return n.kern.parseV1(t,e-2,r,s);var l=o.readUshort(t,e);e+=2;for(var c={glyph1:[],rval:[]},d=0;d<l;d++){e+=2,r=o.readUshort(t,e),e+=2;var h=o.readUshort(t,e);e+=2;var v=h>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;e=n.kern.readFormat0(t,e,c)}return c},n.kern.parseV1=function(t,e,r,s){var o=n._bin;o.readFixed(t,e),e+=4;var a=o.readUint(t,e);e+=4;for(var l={glyph1:[],rval:[]},c=0;c<a;c++){o.readUint(t,e),e+=4;var d=o.readUshort(t,e);e+=2,o.readUshort(t,e),e+=2;var h=d>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;e=n.kern.readFormat0(t,e,l)}return l},n.kern.readFormat0=function(t,e,r){var s=n._bin,o=-1,a=s.readUshort(t,e);e+=2,s.readUshort(t,e),e+=2,s.readUshort(t,e),e+=2,s.readUshort(t,e),e+=2;for(var l=0;l<a;l++){var c=s.readUshort(t,e);e+=2;var d=s.readUshort(t,e);e+=2;var h=s.readShort(t,e);e+=2,c!=o&&(r.glyph1.push(c),r.rval.push({glyph2:[],vals:[]}));var v=r.rval[r.rval.length-1];v.glyph2.push(d),v.vals.push(h),o=c}return e},n.loca={},n.loca.parse=function(t,e,r,s){var o=n._bin,a=[],l=s.head.indexToLocFormat,c=s.maxp.numGlyphs+1;if(l==0)for(var d=0;d<c;d++)a.push(o.readUshort(t,e+(d<<1))<<1);if(l==1)for(d=0;d<c;d++)a.push(o.readUint(t,e+(d<<2)));return a},n.maxp={},n.maxp.parse=function(t,e,r){var s=n._bin,o={},a=s.readUint(t,e);return e+=4,o.numGlyphs=s.readUshort(t,e),e+=2,a==65536&&(o.maxPoints=s.readUshort(t,e),e+=2,o.maxContours=s.readUshort(t,e),e+=2,o.maxCompositePoints=s.readUshort(t,e),e+=2,o.maxCompositeContours=s.readUshort(t,e),e+=2,o.maxZones=s.readUshort(t,e),e+=2,o.maxTwilightPoints=s.readUshort(t,e),e+=2,o.maxStorage=s.readUshort(t,e),e+=2,o.maxFunctionDefs=s.readUshort(t,e),e+=2,o.maxInstructionDefs=s.readUshort(t,e),e+=2,o.maxStackElements=s.readUshort(t,e),e+=2,o.maxSizeOfInstructions=s.readUshort(t,e),e+=2,o.maxComponentElements=s.readUshort(t,e),e+=2,o.maxComponentDepth=s.readUshort(t,e),e+=2),o},n.name={},n.name.parse=function(t,e,r){var s=n._bin,o={};s.readUshort(t,e),e+=2;var a=s.readUshort(t,e);e+=2,s.readUshort(t,e);for(var l,c=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=e+=2,h=0;h<a;h++){var v=s.readUshort(t,e);e+=2;var m=s.readUshort(t,e);e+=2;var g=s.readUshort(t,e);e+=2;var R=s.readUshort(t,e);e+=2;var x=s.readUshort(t,e);e+=2;var k=s.readUshort(t,e);e+=2;var w,T=c[R],O=d+12*a+k;if(v==0)w=s.readUnicode(t,O,x/2);else if(v==3&&m==0)w=s.readUnicode(t,O,x/2);else if(m==0)w=s.readASCII(t,O,x);else if(m==1)w=s.readUnicode(t,O,x/2);else if(m==3)w=s.readUnicode(t,O,x/2);else{if(v!=1)throw"unknown encoding "+m+", platformID: "+v;w=s.readASCII(t,O,x),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var C="p"+v+","+g.toString(16);o[C]==null&&(o[C]={}),o[C][T!==void 0?T:R]=w,o[C]._lang=g}for(var A in o)if(o[A].postScriptName!=null&&o[A]._lang==1033)return o[A];for(var A in o)if(o[A].postScriptName!=null&&o[A]._lang==0)return o[A];for(var A in o)if(o[A].postScriptName!=null&&o[A]._lang==3084)return o[A];for(var A in o)if(o[A].postScriptName!=null)return o[A];for(var A in o){l=A;break}return console.debug("returning name table with languageID "+o[l]._lang),o[l]},n["OS/2"]={},n["OS/2"].parse=function(t,e,r){var s=n._bin.readUshort(t,e);e+=2;var o={};if(s==0)n["OS/2"].version0(t,e,o);else if(s==1)n["OS/2"].version1(t,e,o);else if(s==2||s==3||s==4)n["OS/2"].version2(t,e,o);else{if(s!=5)throw"unknown OS/2 table version: "+s;n["OS/2"].version5(t,e,o)}return o},n["OS/2"].version0=function(t,e,r){var s=n._bin;return r.xAvgCharWidth=s.readShort(t,e),e+=2,r.usWeightClass=s.readUshort(t,e),e+=2,r.usWidthClass=s.readUshort(t,e),e+=2,r.fsType=s.readUshort(t,e),e+=2,r.ySubscriptXSize=s.readShort(t,e),e+=2,r.ySubscriptYSize=s.readShort(t,e),e+=2,r.ySubscriptXOffset=s.readShort(t,e),e+=2,r.ySubscriptYOffset=s.readShort(t,e),e+=2,r.ySuperscriptXSize=s.readShort(t,e),e+=2,r.ySuperscriptYSize=s.readShort(t,e),e+=2,r.ySuperscriptXOffset=s.readShort(t,e),e+=2,r.ySuperscriptYOffset=s.readShort(t,e),e+=2,r.yStrikeoutSize=s.readShort(t,e),e+=2,r.yStrikeoutPosition=s.readShort(t,e),e+=2,r.sFamilyClass=s.readShort(t,e),e+=2,r.panose=s.readBytes(t,e,10),e+=10,r.ulUnicodeRange1=s.readUint(t,e),e+=4,r.ulUnicodeRange2=s.readUint(t,e),e+=4,r.ulUnicodeRange3=s.readUint(t,e),e+=4,r.ulUnicodeRange4=s.readUint(t,e),e+=4,r.achVendID=[s.readInt8(t,e),s.readInt8(t,e+1),s.readInt8(t,e+2),s.readInt8(t,e+3)],e+=4,r.fsSelection=s.readUshort(t,e),e+=2,r.usFirstCharIndex=s.readUshort(t,e),e+=2,r.usLastCharIndex=s.readUshort(t,e),e+=2,r.sTypoAscender=s.readShort(t,e),e+=2,r.sTypoDescender=s.readShort(t,e),e+=2,r.sTypoLineGap=s.readShort(t,e),e+=2,r.usWinAscent=s.readUshort(t,e),e+=2,r.usWinDescent=s.readUshort(t,e),e+=2},n["OS/2"].version1=function(t,e,r){var s=n._bin;return e=n["OS/2"].version0(t,e,r),r.ulCodePageRange1=s.readUint(t,e),e+=4,r.ulCodePageRange2=s.readUint(t,e),e+=4},n["OS/2"].version2=function(t,e,r){var s=n._bin;return e=n["OS/2"].version1(t,e,r),r.sxHeight=s.readShort(t,e),e+=2,r.sCapHeight=s.readShort(t,e),e+=2,r.usDefault=s.readUshort(t,e),e+=2,r.usBreak=s.readUshort(t,e),e+=2,r.usMaxContext=s.readUshort(t,e),e+=2},n["OS/2"].version5=function(t,e,r){var s=n._bin;return e=n["OS/2"].version2(t,e,r),r.usLowerOpticalPointSize=s.readUshort(t,e),e+=2,r.usUpperOpticalPointSize=s.readUshort(t,e),e+=2},n.post={},n.post.parse=function(t,e,r){var s=n._bin,o={};return o.version=s.readFixed(t,e),e+=4,o.italicAngle=s.readFixed(t,e),e+=4,o.underlinePosition=s.readShort(t,e),e+=2,o.underlineThickness=s.readShort(t,e),e+=2,o},n==null&&(n={}),n.U==null&&(n.U={}),n.U.codeToGlyph=function(t,e){var r=t.cmap,s=-1;if(r.p0e4!=null?s=r.p0e4:r.p3e1!=null?s=r.p3e1:r.p1e0!=null?s=r.p1e0:r.p0e3!=null&&(s=r.p0e3),s==-1)throw"no familiar platform and encoding!";var o=r.tables[s];if(o.format==0)return e>=o.map.length?0:o.map[e];if(o.format==4){for(var a=-1,l=0;l<o.endCount.length;l++)if(e<=o.endCount[l]){a=l;break}return a==-1||o.startCount[a]>e?0:65535&(o.idRangeOffset[a]!=0?o.glyphIdArray[e-o.startCount[a]+(o.idRangeOffset[a]>>1)-(o.idRangeOffset.length-a)]:e+o.idDelta[a])}if(o.format==12){if(e>o.groups[o.groups.length-1][1])return 0;for(l=0;l<o.groups.length;l++){var c=o.groups[l];if(c[0]<=e&&e<=c[1])return c[2]+(e-c[0])}return 0}throw"unknown cmap table format "+o.format},n.U.glyphToPath=function(t,e){var r={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var s=t.SVG.entries[e];return s==null?r:(typeof s=="string"&&(s=n.SVG.toPath(s),t.SVG.entries[e]=s),s)}if(t.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},a=t.CFF,l=t.CFF.Private;if(a.ROS){for(var c=0;a.FDSelect[c+2]<=e;)c+=2;l=a.FDArray[a.FDSelect[c+1]].Private}n.U._drawCFF(t.CFF.CharStrings[e],o,a,l,r)}else t.glyf&&n.U._drawGlyf(e,t,r);return r},n.U._drawGlyf=function(t,e,r){var s=e.glyf[t];s==null&&(s=e.glyf[t]=n.glyf._parseGlyf(e,t)),s!=null&&(s.noc>-1?n.U._simpleGlyph(s,r):n.U._compoGlyph(s,e,r))},n.U._simpleGlyph=function(t,e){for(var r=0;r<t.noc;r++){for(var s=r==0?0:t.endPts[r-1]+1,o=t.endPts[r],a=s;a<=o;a++){var l=a==s?o:a-1,c=a==o?s:a+1,d=1&t.flags[a],h=1&t.flags[l],v=1&t.flags[c],m=t.xs[a],g=t.ys[a];if(a==s)if(d){if(!h){n.U.P.moveTo(e,m,g);continue}n.U.P.moveTo(e,t.xs[l],t.ys[l])}else h?n.U.P.moveTo(e,t.xs[l],t.ys[l]):n.U.P.moveTo(e,(t.xs[l]+m)/2,(t.ys[l]+g)/2);d?h&&n.U.P.lineTo(e,m,g):v?n.U.P.qcurveTo(e,m,g,t.xs[c],t.ys[c]):n.U.P.qcurveTo(e,m,g,(m+t.xs[c])/2,(g+t.ys[c])/2)}n.U.P.closePath(e)}},n.U._compoGlyph=function(t,e,r){for(var s=0;s<t.parts.length;s++){var o={cmds:[],crds:[]},a=t.parts[s];n.U._drawGlyf(a.glyphIndex,e,o);for(var l=a.m,c=0;c<o.crds.length;c+=2){var d=o.crds[c],h=o.crds[c+1];r.crds.push(d*l.a+h*l.b+l.tx),r.crds.push(d*l.c+h*l.d+l.ty)}for(c=0;c<o.cmds.length;c++)r.cmds.push(o.cmds[c])}},n.U._getGlyphClass=function(t,e){var r=n._lctf.getInterval(e,t);return r==-1?0:e[r+2]},n.U._applySubs=function(t,e,r,s){for(var o=t.length-e-1,a=0;a<r.tabs.length;a++)if(r.tabs[a]!=null){var l,c=r.tabs[a];if(!c.coverage||(l=n._lctf.coverageIndex(c.coverage,t[e]))!=-1){if(r.ltype==1)t[e],c.fmt==1?t[e]=t[e]+c.delta:t[e]=c.newg[l];else if(r.ltype==4)for(var d=c.vals[l],h=0;h<d.length;h++){var v=d[h],m=v.chain.length;if(!(m>o)){for(var g=!0,R=0,x=0;x<m;x++){for(;t[e+R+(1+x)]==-1;)R++;v.chain[x]!=t[e+R+(1+x)]&&(g=!1)}if(g){for(t[e]=v.nglyph,x=0;x<m+R;x++)t[e+x+1]=-1;break}}}else if(r.ltype==5&&c.fmt==2)for(var k=n._lctf.getInterval(c.cDef,t[e]),w=c.cDef[k+2],T=c.scset[w],O=0;O<T.length;O++){var C=T[O],A=C.input;if(!(A.length>o)){for(g=!0,x=0;x<A.length;x++){var W=n._lctf.getInterval(c.cDef,t[e+1+x]);if(k==-1&&c.cDef[W+2]!=A[x]){g=!1;break}}if(g){var P=C.substLookupRecords;for(h=0;h<P.length;h+=2)P[h],P[h+1]}}}else if(r.ltype==6&&c.fmt==3){if(!n.U._glsCovered(t,c.backCvg,e-c.backCvg.length)||!n.U._glsCovered(t,c.inptCvg,e)||!n.U._glsCovered(t,c.ahedCvg,e+c.inptCvg.length))continue;var ne=c.lookupRec;for(O=0;O<ne.length;O+=2){k=ne[O];var _=s[ne[O+1]];n.U._applySubs(t,e+k,_,s)}}}}},n.U._glsCovered=function(t,e,r){for(var s=0;s<e.length;s++)if(n._lctf.coverageIndex(e[s],t[r+s])==-1)return!1;return!0},n.U.glyphsToPath=function(t,e,r){for(var s={cmds:[],crds:[]},o=0,a=0;a<e.length;a++){var l=e[a];if(l!=-1){for(var c=a<e.length-1&&e[a+1]!=-1?e[a+1]:0,d=n.U.glyphToPath(t,l),h=0;h<d.crds.length;h+=2)s.crds.push(d.crds[h]+o),s.crds.push(d.crds[h+1]);for(r&&s.cmds.push(r),h=0;h<d.cmds.length;h++)s.cmds.push(d.cmds[h]);r&&s.cmds.push("X"),o+=t.hmtx.aWidth[l],a<e.length-1&&(o+=n.U.getPairAdjustment(t,l,c))}}return s},n.U.P={},n.U.P.moveTo=function(t,e,r){t.cmds.push("M"),t.crds.push(e,r)},n.U.P.lineTo=function(t,e,r){t.cmds.push("L"),t.crds.push(e,r)},n.U.P.curveTo=function(t,e,r,s,o,a,l){t.cmds.push("C"),t.crds.push(e,r,s,o,a,l)},n.U.P.qcurveTo=function(t,e,r,s,o){t.cmds.push("Q"),t.crds.push(e,r,s,o)},n.U.P.closePath=function(t){t.cmds.push("Z")},n.U._drawCFF=function(t,e,r,s,o){for(var a=e.stack,l=e.nStems,c=e.haveWidth,d=e.width,h=e.open,v=0,m=e.x,g=e.y,R=0,x=0,k=0,w=0,T=0,O=0,C=0,A=0,W=0,P=0,ne={val:0,size:0};v<t.length;){n.CFF.getCharString(t,v,ne);var _=ne.val;if(v+=ne.size,_=="o1"||_=="o18")a.length%2!=0&&!c&&(d=a.shift()+s.nominalWidthX),l+=a.length>>1,a.length=0,c=!0;else if(_=="o3"||_=="o23")a.length%2!=0&&!c&&(d=a.shift()+s.nominalWidthX),l+=a.length>>1,a.length=0,c=!0;else if(_=="o4")a.length>1&&!c&&(d=a.shift()+s.nominalWidthX,c=!0),h&&n.U.P.closePath(o),g+=a.pop(),n.U.P.moveTo(o,m,g),h=!0;else if(_=="o5")for(;a.length>0;)m+=a.shift(),g+=a.shift(),n.U.P.lineTo(o,m,g);else if(_=="o6"||_=="o7")for(var I=a.length,D=_=="o6",Y=0;Y<I;Y++){var j=a.shift();D?m+=j:g+=j,D=!D,n.U.P.lineTo(o,m,g)}else if(_=="o8"||_=="o24"){I=a.length;for(var ie=0;ie+6<=I;)R=m+a.shift(),x=g+a.shift(),k=R+a.shift(),w=x+a.shift(),m=k+a.shift(),g=w+a.shift(),n.U.P.curveTo(o,R,x,k,w,m,g),ie+=6;_=="o24"&&(m+=a.shift(),g+=a.shift(),n.U.P.lineTo(o,m,g))}else{if(_=="o11")break;if(_=="o1234"||_=="o1235"||_=="o1236"||_=="o1237")_=="o1234"&&(x=g,k=(R=m+a.shift())+a.shift(),P=w=x+a.shift(),O=w,A=g,m=(C=(T=(W=k+a.shift())+a.shift())+a.shift())+a.shift(),n.U.P.curveTo(o,R,x,k,w,W,P),n.U.P.curveTo(o,T,O,C,A,m,g)),_=="o1235"&&(R=m+a.shift(),x=g+a.shift(),k=R+a.shift(),w=x+a.shift(),W=k+a.shift(),P=w+a.shift(),T=W+a.shift(),O=P+a.shift(),C=T+a.shift(),A=O+a.shift(),m=C+a.shift(),g=A+a.shift(),a.shift(),n.U.P.curveTo(o,R,x,k,w,W,P),n.U.P.curveTo(o,T,O,C,A,m,g)),_=="o1236"&&(R=m+a.shift(),x=g+a.shift(),k=R+a.shift(),P=w=x+a.shift(),O=w,C=(T=(W=k+a.shift())+a.shift())+a.shift(),A=O+a.shift(),m=C+a.shift(),n.U.P.curveTo(o,R,x,k,w,W,P),n.U.P.curveTo(o,T,O,C,A,m,g)),_=="o1237"&&(R=m+a.shift(),x=g+a.shift(),k=R+a.shift(),w=x+a.shift(),W=k+a.shift(),P=w+a.shift(),T=W+a.shift(),O=P+a.shift(),C=T+a.shift(),A=O+a.shift(),Math.abs(C-m)>Math.abs(A-g)?m=C+a.shift():g=A+a.shift(),n.U.P.curveTo(o,R,x,k,w,W,P),n.U.P.curveTo(o,T,O,C,A,m,g));else if(_=="o14"){if(a.length>0&&!c&&(d=a.shift()+r.nominalWidthX,c=!0),a.length==4){var re=a.shift(),b=a.shift(),E=a.shift(),p=a.shift(),S=n.CFF.glyphBySE(r,E),M=n.CFF.glyphBySE(r,p);n.U._drawCFF(r.CharStrings[S],e,r,s,o),e.x=re,e.y=b,n.U._drawCFF(r.CharStrings[M],e,r,s,o)}h&&(n.U.P.closePath(o),h=!1)}else if(_=="o19"||_=="o20")a.length%2!=0&&!c&&(d=a.shift()+s.nominalWidthX),l+=a.length>>1,a.length=0,c=!0,v+=l+7>>3;else if(_=="o21")a.length>2&&!c&&(d=a.shift()+s.nominalWidthX,c=!0),g+=a.pop(),m+=a.pop(),h&&n.U.P.closePath(o),n.U.P.moveTo(o,m,g),h=!0;else if(_=="o22")a.length>1&&!c&&(d=a.shift()+s.nominalWidthX,c=!0),m+=a.pop(),h&&n.U.P.closePath(o),n.U.P.moveTo(o,m,g),h=!0;else if(_=="o25"){for(;a.length>6;)m+=a.shift(),g+=a.shift(),n.U.P.lineTo(o,m,g);R=m+a.shift(),x=g+a.shift(),k=R+a.shift(),w=x+a.shift(),m=k+a.shift(),g=w+a.shift(),n.U.P.curveTo(o,R,x,k,w,m,g)}else if(_=="o26")for(a.length%2&&(m+=a.shift());a.length>0;)R=m,x=g+a.shift(),m=k=R+a.shift(),g=(w=x+a.shift())+a.shift(),n.U.P.curveTo(o,R,x,k,w,m,g);else if(_=="o27")for(a.length%2&&(g+=a.shift());a.length>0;)x=g,k=(R=m+a.shift())+a.shift(),w=x+a.shift(),m=k+a.shift(),g=w,n.U.P.curveTo(o,R,x,k,w,m,g);else if(_=="o10"||_=="o29"){var F=_=="o10"?s:r;if(a.length==0)console.debug("error: empty stack");else{var U=a.pop(),N=F.Subrs[U+F.Bias];e.x=m,e.y=g,e.nStems=l,e.haveWidth=c,e.width=d,e.open=h,n.U._drawCFF(N,e,r,s,o),m=e.x,g=e.y,l=e.nStems,c=e.haveWidth,d=e.width,h=e.open}}else if(_=="o30"||_=="o31"){var L=a.length,V=(ie=0,_=="o31");for(ie+=L-(I=-3&L);ie<I;)V?(x=g,k=(R=m+a.shift())+a.shift(),g=(w=x+a.shift())+a.shift(),I-ie==5?(m=k+a.shift(),ie++):m=k,V=!1):(R=m,x=g+a.shift(),k=R+a.shift(),w=x+a.shift(),m=k+a.shift(),I-ie==5?(g=w+a.shift(),ie++):g=w,V=!0),n.U.P.curveTo(o,R,x,k,w,m,g),ie+=4}else{if((_+"").charAt(0)=="o")throw console.debug("Unknown operation: "+_,t),_;a.push(_)}}}e.x=m,e.y=g,e.nStems=l,e.haveWidth=c,e.width=d,e.open=h};var u=n,f={Typr:u};return i.Typr=u,i.default=f,Object.defineProperty(i,"__esModule",{value:!0}),i})({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Rs(){return(function(i){var n=Uint8Array,u=Uint16Array,f=Uint32Array,t=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),r=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(_,I){for(var D=new u(31),Y=0;Y<31;++Y)D[Y]=I+=1<<_[Y-1];var j=new f(D[30]);for(Y=1;Y<30;++Y)for(var ie=D[Y];ie<D[Y+1];++ie)j[ie]=ie-D[Y]<<5|Y;return[D,j]},o=s(t,2),a=o[0],l=o[1];a[28]=258,l[258]=28;for(var c=s(e,0)[0],d=new u(32768),h=0;h<32768;++h){var v=(43690&h)>>>1|(21845&h)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,d[h]=((65280&v)>>>8|(255&v)<<8)>>>1}var m=function(_,I,D){for(var Y=_.length,j=0,ie=new u(I);j<Y;++j)++ie[_[j]-1];var re,b=new u(I);for(j=0;j<I;++j)b[j]=b[j-1]+ie[j-1]<<1;{re=new u(1<<I);var E=15-I;for(j=0;j<Y;++j)if(_[j])for(var p=j<<4|_[j],S=I-_[j],M=b[_[j]-1]++<<S,F=M|(1<<S)-1;M<=F;++M)re[d[M]>>>E]=p}return re},g=new n(288);for(h=0;h<144;++h)g[h]=8;for(h=144;h<256;++h)g[h]=9;for(h=256;h<280;++h)g[h]=7;for(h=280;h<288;++h)g[h]=8;var R=new n(32);for(h=0;h<32;++h)R[h]=5;var x=m(g,9),k=m(R,5),w=function(_){for(var I=_[0],D=1;D<_.length;++D)_[D]>I&&(I=_[D]);return I},T=function(_,I,D){var Y=I/8|0;return(_[Y]|_[Y+1]<<8)>>(7&I)&D},O=function(_,I){var D=I/8|0;return(_[D]|_[D+1]<<8|_[D+2]<<16)>>(7&I)},C=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],A=function(_,I,D){var Y=new Error(I||C[_]);if(Y.code=_,Error.captureStackTrace&&Error.captureStackTrace(Y,A),!D)throw Y;return Y},W=function(_,I,D){var Y=_.length;if(!Y||D&&!D.l&&Y<5)return I||new n(0);var j=!I||D,ie=!D||D.i;D||(D={}),I||(I=new n(3*Y));var re,b=function(fe){var pe=I.length;if(fe>pe){var _e=new n(Math.max(2*pe,fe));_e.set(I),I=_e}},E=D.f||0,p=D.p||0,S=D.b||0,M=D.l,F=D.d,U=D.m,N=D.n,L=8*Y;do{if(!M){D.f=E=T(_,p,1);var V=T(_,p+1,3);if(p+=3,!V){var Z=_[(te=((re=p)/8|0)+(7&re&&1)+4)-4]|_[te-3]<<8,oe=te+Z;if(oe>Y){ie&&A(0);break}j&&b(S+Z),I.set(_.subarray(te,oe),S),D.b=S+=Z,D.p=p=8*oe;continue}if(V==1)M=x,F=k,U=9,N=5;else if(V==2){var q=T(_,p,31)+257,y=T(_,p+10,15)+4,z=q+T(_,p+5,31)+1;p+=14;for(var J=new n(z),X=new n(19),H=0;H<y;++H)X[r[H]]=T(_,p+3*H,7);p+=3*y;var K=w(X),G=(1<<K)-1,Q=m(X,K);for(H=0;H<z;){var te,B=Q[T(_,p,G)];if(p+=15&B,(te=B>>>4)<16)J[H++]=te;else{var se=0,ee=0;for(te==16?(ee=3+T(_,p,3),p+=2,se=J[H-1]):te==17?(ee=3+T(_,p,7),p+=3):te==18&&(ee=11+T(_,p,127),p+=7);ee--;)J[H++]=se}}var ae=J.subarray(0,q),$=J.subarray(q);U=w(ae),N=w($),M=m(ae,U),F=m($,N)}else A(1);if(p>L){ie&&A(0);break}}j&&b(S+131072);for(var we=(1<<U)-1,ue=(1<<N)-1,le=p;;le=p){var ce=(se=M[O(_,p)&we])>>>4;if((p+=15&se)>L){ie&&A(0);break}if(se||A(2),ce<256)I[S++]=ce;else{if(ce==256){le=p,M=null;break}var me=ce-254;if(ce>264){var ke=t[H=ce-257];me=T(_,p,(1<<ke)-1)+a[H],p+=ke}var Fe=F[O(_,p)&ue],he=Fe>>>4;if(Fe||A(3),p+=15&Fe,$=c[he],he>3&&(ke=e[he],$+=O(_,p)&(1<<ke)-1,p+=ke),p>L){ie&&A(0);break}j&&b(S+131072);for(var ge=S+me;S<ge;S+=4)I[S]=I[S-$],I[S+1]=I[S+1-$],I[S+2]=I[S+2-$],I[S+3]=I[S+3-$];S=ge}}D.l=M,D.p=le,D.b=S,M&&(E=1,D.m=U,D.d=F,D.n=N)}while(!E);return S==I.length?I:(function(fe,pe,_e){(_e==null||_e>fe.length)&&(_e=fe.length);var Ne=new(fe instanceof u?u:fe instanceof f?f:n)(_e-pe);return Ne.set(fe.subarray(pe,_e)),Ne})(I,0,S)},P=new n(0),ne=typeof TextDecoder<"u"&&new TextDecoder;try{ne.decode(P,{stream:!0})}catch{}return i.convert_streams=function(_){var I=new DataView(_),D=0;function Y(){var q=I.getUint16(D);return D+=2,q}function j(){var q=I.getUint32(D);return D+=4,q}function ie(q){Z.setUint16(oe,q),oe+=2}function re(q){Z.setUint32(oe,q),oe+=4}for(var b={signature:j(),flavor:j(),length:j(),numTables:Y(),reserved:Y(),totalSfntSize:j(),majorVersion:Y(),minorVersion:Y(),metaOffset:j(),metaLength:j(),metaOrigLength:j(),privOffset:j(),privLength:j()},E=0;Math.pow(2,E)<=b.numTables;)E++;E--;for(var p=16*Math.pow(2,E),S=16*b.numTables-p,M=12,F=[],U=0;U<b.numTables;U++)F.push({tag:j(),offset:j(),compLength:j(),origLength:j(),origChecksum:j()}),M+=16;var N,L=new Uint8Array(12+16*F.length+F.reduce((function(q,y){return q+y.origLength+4}),0)),V=L.buffer,Z=new DataView(V),oe=0;return re(b.flavor),ie(b.numTables),ie(p),ie(E),ie(S),F.forEach((function(q){re(q.tag),re(q.origChecksum),re(M),re(q.origLength),q.outOffset=M,(M+=q.origLength)%4!=0&&(M+=4-M%4)})),F.forEach((function(q){var y,z=_.slice(q.offset,q.offset+q.compLength);if(q.compLength!=q.origLength){var J=new Uint8Array(q.origLength);y=new Uint8Array(z,2),W(y,J)}else J=new Uint8Array(z);L.set(J,q.outOffset);var X=0;(M=q.outOffset+q.origLength)%4!=0&&(X=4-M%4),L.set(new Uint8Array(X).buffer,q.outOffset+q.origLength),N=M+X})),V.slice(0,N)},Object.defineProperty(i,"__esModule",{value:!0}),i})({}).convert_streams}function Is(i,n){const u={M:2,L:2,Q:4,C:6,Z:0},f={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},t=1,e=2,r=4,s=8,o=16,a=32;let l;function c(C){if(!l){const A={R:e,L:t,D:r,C:o,U:a,T:s};l=new Map;for(let W in f){let P=0;f[W].split(",").forEach(ne=>{let[_,I]=ne.split("+");_=parseInt(_,36),I=I?parseInt(I,36):0,l.set(P+=_,A[W]);for(let D=I;D--;)l.set(++P,A[W])})}}return l.get(C)||a}const d=1,h=2,v=3,m=4,g=[null,"isol","init","fina","medi"];function R(C){const A=new Uint8Array(C.length);let W=a,P=d,ne=-1;for(let _=0;_<C.length;_++){const I=C.codePointAt(_);let D=c(I)|0,Y=d;D&s||(W&(t|r|o)?D&(e|r|o)?(Y=v,(P===d||P===v)&&A[ne]++):D&(t|a)&&(P===h||P===m)&&A[ne]--:W&(e|a)&&(P===h||P===m)&&A[ne]--,P=A[_]=Y,W=D,ne=_,I>65535&&_++)}return A}function x(C,A){const W=[];for(let ne=0;ne<A.length;ne++){const _=A.codePointAt(ne);_>65535&&ne++,W.push(i.U.codeToGlyph(C,_))}const P=C.GSUB;if(P){const{lookupList:ne,featureList:_}=P;let I;const D=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,Y=[];_.forEach(j=>{if(D.test(j.tag))for(let ie=0;ie<j.tab.length;ie++){if(Y[j.tab[ie]])continue;Y[j.tab[ie]]=!0;const re=ne[j.tab[ie]],b=/^(isol|init|fina|medi)$/.test(j.tag);b&&!I&&(I=R(A));for(let E=0;E<W.length;E++)(!I||!b||g[I[E]]===j.tag)&&i.U._applySubs(W,E,re,ne)}})}return W}function k(C,A){const W=new Int16Array(A.length*3);let P=0;for(;P<A.length;P++){const D=A[P];if(D===-1)continue;W[P*3+2]=C.hmtx.aWidth[D];const Y=C.GPOS;if(Y){const j=Y.lookupList;for(let ie=0;ie<j.length;ie++){const re=j[ie];for(let b=0;b<re.tabs.length;b++){const E=re.tabs[b];if(re.ltype===1){if(i._lctf.coverageIndex(E.coverage,D)!==-1&&E.pos){I(E.pos,P);break}}else if(re.ltype===2){let p=null,S=ne();if(S!==-1){const M=i._lctf.coverageIndex(E.coverage,A[S]);if(M!==-1){if(E.fmt===1){const F=E.pairsets[M];for(let U=0;U<F.length;U++)F[U].gid2===D&&(p=F[U])}else if(E.fmt===2){const F=i.U._getGlyphClass(A[S],E.classDef1),U=i.U._getGlyphClass(D,E.classDef2);p=E.matrix[F][U]}if(p){p.val1&&I(p.val1,S),p.val2&&I(p.val2,P);break}}}}else if(re.ltype===4){const p=i._lctf.coverageIndex(E.markCoverage,D);if(p!==-1){const S=ne(_),M=S===-1?-1:i._lctf.coverageIndex(E.baseCoverage,A[S]);if(M!==-1){const F=E.markArray[p],U=E.baseArray[M][F.markClass];W[P*3]=U.x-F.x+W[S*3]-W[S*3+2],W[P*3+1]=U.y-F.y+W[S*3+1];break}}}else if(re.ltype===6){const p=i._lctf.coverageIndex(E.mark1Coverage,D);if(p!==-1){const S=ne();if(S!==-1){const M=A[S];if(w(C,M)===3){const F=i._lctf.coverageIndex(E.mark2Coverage,M);if(F!==-1){const U=E.mark1Array[p],N=E.mark2Array[F][U.markClass];W[P*3]=N.x-U.x+W[S*3]-W[S*3+2],W[P*3+1]=N.y-U.y+W[S*3+1];break}}}}}}}}else if(C.kern&&!C.cff){const j=ne();if(j!==-1){const ie=C.kern.glyph1.indexOf(A[j]);if(ie!==-1){const re=C.kern.rval[ie].glyph2.indexOf(D);re!==-1&&(W[j*3+2]+=C.kern.rval[ie].vals[re])}}}}return W;function ne(D){for(let Y=P-1;Y>=0;Y--)if(A[Y]!==-1&&(!D||D(A[Y])))return Y;return-1}function _(D){return w(C,D)===1}function I(D,Y){for(let j=0;j<3;j++)W[Y*3+j]+=D[j]||0}}function w(C,A){const W=C.GDEF&&C.GDEF.glyphClassDef;return W?i.U._getGlyphClass(A,W):0}function T(...C){for(let A=0;A<C.length;A++)if(typeof C[A]=="number")return C[A]}function O(C){const A=Object.create(null),W=C["OS/2"],P=C.hhea,ne=C.head.unitsPerEm,_=T(W&&W.sTypoAscender,P&&P.ascender,ne),I={unitsPerEm:ne,ascender:_,descender:T(W&&W.sTypoDescender,P&&P.descender,0),capHeight:T(W&&W.sCapHeight,_),xHeight:T(W&&W.sxHeight,_),lineGap:T(W&&W.sTypoLineGap,P&&P.lineGap),supportsCodePoint(D){return i.U.codeToGlyph(C,D)>0},forEachGlyph(D,Y,j,ie){let re=0;const b=1/I.unitsPerEm*Y,E=x(C,D);let p=0;const S=k(C,E);return E.forEach((M,F)=>{if(M!==-1){let U=A[M];if(!U){const{cmds:N,crds:L}=i.U.glyphToPath(C,M);let V="",Z=0;for(let J=0,X=N.length;J<X;J++){const H=u[N[J]];V+=N[J];for(let K=1;K<=H;K++)V+=(K>1?",":"")+L[Z++]}let oe,q,y,z;if(L.length){oe=q=1/0,y=z=-1/0;for(let J=0,X=L.length;J<X;J+=2){let H=L[J],K=L[J+1];H<oe&&(oe=H),K<q&&(q=K),H>y&&(y=H),K>z&&(z=K)}}else oe=y=q=z=0;U=A[M]={index:M,advanceWidth:C.hmtx.aWidth[M],xMin:oe,yMin:q,xMax:y,yMax:z,path:V}}ie.call(null,U,re+S[F*3]*b,S[F*3+1]*b,p),re+=S[F*3+2]*b,j&&(re+=j*Y)}p+=D.codePointAt(p)>65535?2:1}),re}};return I}return function(A){const W=new Uint8Array(A,0,4),P=i._bin.readASCII(W,0,4);if(P==="wOFF")A=n(A);else if(P==="wOF2")throw new Error("woff2 fonts not supported");return O(i.parse(A)[0])}}const Os=jt({name:"Typr Font Parser",dependencies:[Ls,Rs,Is],init(i,n,u){const f=i(),t=n();return u(f,t)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function Ps(){return(function(i){var n=function(){this.buckets=new Map};n.prototype.add=function(k){var w=k>>5;this.buckets.set(w,(this.buckets.get(w)||0)|1<<(31&k))},n.prototype.has=function(k){var w=this.buckets.get(k>>5);return w!==void 0&&(w&1<<(31&k))!=0},n.prototype.serialize=function(){var k=[];return this.buckets.forEach((function(w,T){k.push((+T).toString(36)+":"+w.toString(36))})),k.join(",")},n.prototype.deserialize=function(k){var w=this;this.buckets.clear(),k.split(",").forEach((function(T){var O=T.split(":");w.buckets.set(parseInt(O[0],36),parseInt(O[1],36))}))};var u=Math.pow(2,8),f=u-1,t=~f;function e(k){var w=(function(O){return O&t})(k).toString(16),T=(function(O){return(O&t)+u-1})(k).toString(16);return"codepoint-index/plane"+(k>>16)+"/"+w+"-"+T+".json"}function r(k,w){var T=k&f,O=w.codePointAt(T/6|0);return((O=(O||48)-48)&1<<T%6)!=0}function s(k,w){var T;(T=k,T.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(O){return O.split("-").map((function(C){return parseInt(C.trim(),16)}))}))).forEach((function(O){var C=O[0],A=O[1];A===void 0&&(A=C),w(C,A)}))}function o(k,w){s(k,(function(T,O){for(var C=T;C<=O;C++)w(C)}))}var a={},l={},c=new WeakMap,d="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function h(k){var w=c.get(k);return w||(w=new n,o(k.ranges,(function(T){return w.add(T)})),c.set(k,w)),w}var v,m=new Map;function g(k,w,T){return k[w]?w:k[T]?T:(function(O){for(var C in O)return C})(k)}function R(k,w){var T=w;if(!k.includes(T)){T=1/0;for(var O=0;O<k.length;O++)Math.abs(k[O]-w)<Math.abs(T-w)&&(T=k[O])}return T}function x(k){return v||(v=new Set,o("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(w){v.add(w)}))),v.has(k)}return i.CodePointSet=n,i.clearCache=function(){a={},l={}},i.getFontsForString=function(k,w){w===void 0&&(w={});var T,O=w.lang;O===void 0&&(O=new RegExp("\\p{Script=Hangul}","u").test(T=k)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(T)?"ja":"en");var C=w.category;C===void 0&&(C="sans-serif");var A=w.style;A===void 0&&(A="normal");var W=w.weight;W===void 0&&(W=400);var P=(w.dataUrl||d).replace(/\/$/g,""),ne=new Map,_=new Uint8Array(k.length),I={},D={},Y=new Array(k.length),j=new Map,ie=!1;function re(p){var S=m.get(p);return S||(S=fetch(P+"/"+p).then((function(M){if(!M.ok)throw new Error(M.statusText);return M.json().then((function(F){if(!Array.isArray(F)||F[0]!==1)throw new Error("Incorrect schema version; need 1, got "+F[0]);return F[1]}))})).catch((function(M){if(P!==d)return ie||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+P+'", trying default CDN. '+M.message),ie=!0),P=d,m.delete(p),re(p);throw M})),m.set(p,S)),S}for(var b=function(p){var S=k.codePointAt(p),M=e(S);Y[p]=M,a[M]||j.has(M)||j.set(M,re(M).then((function(F){a[M]=F}))),S>65535&&(p++,E=p)},E=0;E<k.length;E++)b(E);return Promise.all(j.values()).then((function(){j.clear();for(var p=function(M){var F=k.codePointAt(M),U=null,N=a[Y[M]],L=void 0;for(var V in N){var Z=D[V];if(Z===void 0&&(Z=D[V]=new RegExp(V).test(O||"en")),Z){for(var oe in L=V,N[V])if(r(F,N[V][oe])){U=oe;break}break}}if(!U){e:for(var q in N)if(q!==L){for(var y in N[q])if(r(F,N[q][y])){U=y;break e}}}U||(console.debug("No font coverage for U+"+F.toString(16)),U="latin"),Y[M]=U,l[U]||j.has(U)||j.set(U,re("font-meta/"+U+".json").then((function(z){l[U]=z}))),F>65535&&(M++,S=M)},S=0;S<k.length;S++)p(S);return Promise.all(j.values())})).then((function(){for(var p,S=null,M=0;M<k.length;M++){var F=k.codePointAt(M);if(S&&(x(F)||h(S).has(F)))_[M]=_[M-1];else{S=l[Y[M]];var U=I[S.id];if(!U){var N=S.typeforms,L=g(N,C,"sans-serif"),V=g(N[L],A,"normal"),Z=R((p=N[L])===null||p===void 0?void 0:p[V],W);U=I[S.id]=P+"/font-files/"+S.id+"/"+L+"."+V+"."+Z+".woff"}var oe=ne.get(U);oe==null&&(oe=ne.size,ne.set(U,oe)),_[M]=oe}F>65535&&(M++,_[M]=_[M-1])}return{fontUrls:Array.from(ne.keys()),chars:_}}))},Object.defineProperty(i,"__esModule",{value:!0}),i})({})}function Bs(i,n){const u=Object.create(null),f=Object.create(null);function t(r,s){const o=a=>{console.error(`Failure loading font ${r}`,a)};try{const a=new XMLHttpRequest;a.open("get",r,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status>=400)o(new Error(a.statusText));else if(a.status>0)try{const l=i(a.response);l.src=r,s(l)}catch(l){o(l)}},a.onerror=o,a.send()}catch(a){o(a)}}function e(r,s){let o=u[r];o?s(o):f[r]?f[r].push(s):(f[r]=[s],t(r,a=>{a.src=r,u[r]=a,f[r].forEach(l=>l(a)),delete f[r]}))}return function(r,s,{lang:o,fonts:a=[],style:l="normal",weight:c="normal",unicodeFontsURL:d}={}){const h=new Uint8Array(r.length),v=[];r.length||x();const m=new Map,g=[];if(l!=="italic"&&(l="normal"),typeof c!="number"&&(c=c==="bold"?700:400),a&&!Array.isArray(a)&&(a=[a]),a=a.slice().filter(w=>!w.lang||w.lang.test(o)).reverse(),a.length){let C=0;(function A(W=0){for(let P=W,ne=r.length;P<ne;P++){const _=r.codePointAt(P);if(C===1&&v[h[P-1]].supportsCodePoint(_)||P>0&&/\s/.test(r[P]))h[P]=h[P-1],C===2&&(g[g.length-1][1]=P);else for(let I=h[P],D=a.length;I<=D;I++)if(I===D){const Y=C===2?g[g.length-1]:g[g.length]=[P,P];Y[1]=P,C=2}else{h[P]=I;const{src:Y,unicodeRange:j}=a[I];if(!j||k(_,j)){const ie=u[Y];if(!ie){e(Y,()=>{A(P)});return}if(ie.supportsCodePoint(_)){let re=m.get(ie);typeof re!="number"&&(re=v.length,v.push(ie),m.set(ie,re)),h[P]=re,C=1;break}}}_>65535&&P+1<ne&&(h[P+1]=h[P],P++,C===2&&(g[g.length-1][1]=P))}R()})()}else g.push([0,r.length-1]),R();function R(){if(g.length){const w=g.map(T=>r.substring(T[0],T[1]+1)).join(`
`);n.getFontsForString(w,{lang:o||void 0,style:l,weight:c,dataUrl:d}).then(({fontUrls:T,chars:O})=>{const C=v.length;let A=0;g.forEach(P=>{for(let ne=0,_=P[1]-P[0];ne<=_;ne++)h[P[0]+ne]=O[A++]+C;A++});let W=0;T.forEach((P,ne)=>{e(P,_=>{v[ne+C]=_,++W===T.length&&x()})})})}else x()}function x(){s({chars:h,fonts:v})}function k(w,T){for(let O=0;O<T.length;O++){const[C,A=C]=T[O];if(C<=w&&w<=A)return!0}return!1}}}const Gs=jt({name:"FontResolver",dependencies:[Bs,Os,Ps],init(i,n,u){return i(n,u())}});function Ns(i,n){const f=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,t="[^\\S\\u00A0]",e=new RegExp(`${t}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function r({text:v,lang:m,fonts:g,style:R,weight:x,preResolvedFonts:k,unicodeFontsURL:w},T){const O=({chars:C,fonts:A})=>{let W,P;const ne=[];for(let _=0;_<C.length;_++)C[_]!==P?(P=C[_],ne.push(W={start:_,end:_,fontObj:A[C[_]]})):W.end=_;T(ne)};k?O(k):i(v,O,{lang:m,fonts:g,style:R,weight:x,unicodeFontsURL:w})}function s({text:v="",font:m,lang:g,sdfGlyphSize:R=64,fontSize:x=400,fontWeight:k=1,fontStyle:w="normal",letterSpacing:T=0,lineHeight:O="normal",maxWidth:C=1/0,direction:A,textAlign:W="left",textIndent:P=0,whiteSpace:ne="normal",overflowWrap:_="normal",anchorX:I=0,anchorY:D=0,metricsOnly:Y=!1,unicodeFontsURL:j,preResolvedFonts:ie=null,includeCaretPositions:re=!1,chunkedBoundsSize:b=8192,colorRanges:E=null},p){const S=c(),M={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),x=+x,T=+T,C=+C,O=O||"normal",P=+P,r({text:v,lang:g,style:w,weight:k,fonts:typeof m=="string"?[{src:m}]:m,unicodeFontsURL:j,preResolvedFonts:ie},F=>{M.fontLoad=c()-S;const U=isFinite(C);let N=null,L=null,V=null,Z=null,oe=null,q=null,y=null,z=null,J=0,X=0,H=ne!=="nowrap";const K=new Map,G=c();let Q=P,te=0,B=new d;const se=[B];F.forEach(ue=>{const{fontObj:le}=ue,{ascender:ce,descender:me,unitsPerEm:ke,lineGap:Fe,capHeight:he,xHeight:ge}=le;let fe=K.get(le);if(!fe){const ve=x/ke,Ue=O==="normal"?(ce-me+Fe)*ve:O*x,ut=(Ue-(ce-me)*ve)/2,Ae=Math.min(Ue,(ce-me)*ve),Te=(ce+me)/2*ve+Ae/2;fe={index:K.size,src:le.src,fontObj:le,fontSizeMult:ve,unitsPerEm:ke,ascender:ce*ve,descender:me*ve,capHeight:he*ve,xHeight:ge*ve,lineHeight:Ue,baseline:-ut-ce*ve,caretTop:Te,caretBottom:Te-Ae},K.set(le,fe)}const{fontSizeMult:pe}=fe,_e=v.slice(ue.start,ue.end+1);let Ne,De;le.forEachGlyph(_e,x,T,(ve,Ue,ut,Ae)=>{Ue+=te,Ae+=ue.start,Ne=Ue,De=ve;const Te=v.charAt(Ae),Pe=ve.advanceWidth*pe,Ee=B.count;let ye;if("isEmpty"in ve||(ve.isWhitespace=!!Te&&new RegExp(t).test(Te),ve.canBreakAfter=!!Te&&e.test(Te),ve.isEmpty=ve.xMin===ve.xMax||ve.yMin===ve.yMax||f.test(Te)),!ve.isWhitespace&&!ve.isEmpty&&X++,H&&U&&!ve.isWhitespace&&Ue+Pe+Q>C&&Ee){if(B.glyphAt(Ee-1).glyphObj.canBreakAfter)ye=new d,Q=-Ue;else for(let We=Ee;We--;)if(We===0&&_==="break-word"){ye=new d,Q=-Ue;break}else if(B.glyphAt(We).glyphObj.canBreakAfter){ye=B.splitAt(We+1);const xe=ye.glyphAt(0).x;Q-=xe;for(let Re=ye.count;Re--;)ye.glyphAt(Re).x-=xe;break}ye&&(B.isSoftWrapped=!0,B=ye,se.push(B),J=C)}let Me=B.glyphAt(B.count);Me.glyphObj=ve,Me.x=Ue+Q,Me.y=ut,Me.width=Pe,Me.charIndex=Ae,Me.fontData=fe,Te===`
`&&(B=new d,se.push(B),Q=-(Ue+Pe+T*x)+P)}),te=Ne+De.advanceWidth*pe+T*x});let ee=0;se.forEach(ue=>{let le=!0;for(let ce=ue.count;ce--;){const me=ue.glyphAt(ce);le&&!me.glyphObj.isWhitespace&&(ue.width=me.x+me.width,ue.width>J&&(J=ue.width),le=!1);let{lineHeight:ke,capHeight:Fe,xHeight:he,baseline:ge}=me.fontData;ke>ue.lineHeight&&(ue.lineHeight=ke);const fe=ge-ue.baseline;fe<0&&(ue.baseline+=fe,ue.cap+=fe,ue.ex+=fe),ue.cap=Math.max(ue.cap,ue.baseline+Fe),ue.ex=Math.max(ue.ex,ue.baseline+he)}ue.baseline-=ee,ue.cap-=ee,ue.ex-=ee,ee+=ue.lineHeight});let ae=0,$=0;if(I&&(typeof I=="number"?ae=-I:typeof I=="string"&&(ae=-J*(I==="left"?0:I==="center"?.5:I==="right"?1:a(I)))),D&&(typeof D=="number"?$=-D:typeof D=="string"&&($=D==="top"?0:D==="top-baseline"?-se[0].baseline:D==="top-cap"?-se[0].cap:D==="top-ex"?-se[0].ex:D==="middle"?ee/2:D==="bottom"?ee:D==="bottom-baseline"?-se[se.length-1].baseline:a(D)*ee)),!Y){const ue=n.getEmbeddingLevels(v,A);N=new Uint16Array(X),L=new Uint8Array(X),V=new Float32Array(X*2),Z={},y=[1/0,1/0,-1/0,-1/0],z=[],re&&(q=new Float32Array(v.length*4)),E&&(oe=new Uint8Array(X*3));let le=0,ce=-1,me=-1,ke,Fe;if(se.forEach((he,ge)=>{let{count:fe,width:pe}=he;if(fe>0){let _e=0;for(let Ae=fe;Ae--&&he.glyphAt(Ae).glyphObj.isWhitespace;)_e++;let Ne=0,De=0;if(W==="center")Ne=(J-pe)/2;else if(W==="right")Ne=J-pe;else if(W==="justify"&&he.isSoftWrapped){let Ae=0;for(let Te=fe-_e;Te--;)he.glyphAt(Te).glyphObj.isWhitespace&&Ae++;De=(J-pe)/Ae}if(De||Ne){let Ae=0;for(let Te=0;Te<fe;Te++){let Pe=he.glyphAt(Te);const Ee=Pe.glyphObj;Pe.x+=Ne+Ae,De!==0&&Ee.isWhitespace&&Te<fe-_e&&(Ae+=De,Pe.width+=De)}}const ve=n.getReorderSegments(v,ue,he.glyphAt(0).charIndex,he.glyphAt(he.count-1).charIndex);for(let Ae=0;Ae<ve.length;Ae++){const[Te,Pe]=ve[Ae];let Ee=1/0,ye=-1/0;for(let Me=0;Me<fe;Me++)if(he.glyphAt(Me).charIndex>=Te){let We=Me,xe=Me;for(;xe<fe;xe++){let Re=he.glyphAt(xe);if(Re.charIndex>Pe)break;xe<fe-_e&&(Ee=Math.min(Ee,Re.x),ye=Math.max(ye,Re.x+Re.width))}for(let Re=We;Re<xe;Re++){const Ye=he.glyphAt(Re);Ye.x=ye-(Ye.x+Ye.width-Ee)}break}}let Ue;const ut=Ae=>Ue=Ae;for(let Ae=0;Ae<fe;Ae++){const Te=he.glyphAt(Ae);Ue=Te.glyphObj;const Pe=Ue.index,Ee=ue.levels[Te.charIndex]&1;if(Ee){const ye=n.getMirroredCharacter(v[Te.charIndex]);ye&&Te.fontData.fontObj.forEachGlyph(ye,0,0,ut)}if(re){const{charIndex:ye,fontData:Me}=Te,We=Te.x+ae,xe=Te.x+Te.width+ae;q[ye*4]=Ee?xe:We,q[ye*4+1]=Ee?We:xe,q[ye*4+2]=he.baseline+Me.caretBottom+$,q[ye*4+3]=he.baseline+Me.caretTop+$;const Re=ye-ce;Re>1&&l(q,ce,Re),ce=ye}if(E){const{charIndex:ye}=Te;for(;ye>me;)me++,E.hasOwnProperty(me)&&(Fe=E[me])}if(!Ue.isWhitespace&&!Ue.isEmpty){const ye=le++,{fontSizeMult:Me,src:We,index:xe}=Te.fontData,Re=Z[We]||(Z[We]={});Re[Pe]||(Re[Pe]={path:Ue.path,pathBounds:[Ue.xMin,Ue.yMin,Ue.xMax,Ue.yMax]});const Ye=Te.x+ae,qe=Te.y+he.baseline+$;V[ye*2]=Ye,V[ye*2+1]=qe;const ht=Ye+Ue.xMin*Me,vt=qe+Ue.yMin*Me,St=Ye+Ue.xMax*Me,pt=qe+Ue.yMax*Me;ht<y[0]&&(y[0]=ht),vt<y[1]&&(y[1]=vt),St>y[2]&&(y[2]=St),pt>y[3]&&(y[3]=pt),ye%b===0&&(ke={start:ye,end:ye,rect:[1/0,1/0,-1/0,-1/0]},z.push(ke)),ke.end++;const Je=ke.rect;if(ht<Je[0]&&(Je[0]=ht),vt<Je[1]&&(Je[1]=vt),St>Je[2]&&(Je[2]=St),pt>Je[3]&&(Je[3]=pt),N[ye]=Pe,L[ye]=xe,E){const wt=ye*3;oe[wt]=Fe>>16&255,oe[wt+1]=Fe>>8&255,oe[wt+2]=Fe&255}}}}}),q){const he=v.length-ce;he>1&&l(q,ce,he)}}const we=[];K.forEach(({index:ue,src:le,unitsPerEm:ce,ascender:me,descender:ke,lineHeight:Fe,capHeight:he,xHeight:ge})=>{we[ue]={src:le,unitsPerEm:ce,ascender:me,descender:ke,lineHeight:Fe,capHeight:he,xHeight:ge}}),M.typesetting=c()-G,p({glyphIds:N,glyphFontIndices:L,glyphPositions:V,glyphData:Z,fontData:we,caretPositions:q,glyphColors:oe,chunkedBounds:z,fontSize:x,topBaseline:$+se[0].baseline,blockBounds:[ae,$-ee,ae+J,$],visibleBounds:y,timings:M})})}function o(v,m){s({...v,metricsOnly:!0},g=>{const[R,x,k,w]=g.blockBounds;m({width:k-R,height:w-x})})}function a(v){let m=v.match(/^([\d.]+)%$/),g=m?parseFloat(m[1]):NaN;return isNaN(g)?0:g/100}function l(v,m,g){const R=v[m*4],x=v[m*4+1],k=v[m*4+2],w=v[m*4+3],T=(x-R)/g;for(let O=0;O<g;O++){const C=(m+O)*4;v[C]=R+T*O,v[C+1]=R+T*(O+1),v[C+2]=k,v[C+3]=w}}function c(){return(self.performance||Date).now()}function d(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(v){let m=d.flyweight;return m.data=this.data,m.index=v,m},splitAt(v){let m=new d;return m.data=this.data.splice(v*h.length),m}},d.flyweight=h.reduce((v,m,g,R)=>(Object.defineProperty(v,m,{get(){return this.data[this.index*h.length+g]},set(x){this.data[this.index*h.length+g]=x}}),v),{data:null,index:0}),{typeset:s,measure:o}}const kt=()=>(self.performance||Date).now(),jn=va();let Eo;function zs(i,n,u,f,t,e,r,s,o,a,l=!0){return l?Vs(i,n,u,f,t,e,r,s,o,a).then(null,c=>(Eo||(console.warn("WebGL SDF generation failed, falling back to JS",c),Eo=!0),Ro(i,n,u,f,t,e,r,s,o,a))):Ro(i,n,u,f,t,e,r,s,o,a)}const Pn=[],Ws=5;let Dr=0;function ga(){const i=kt();for(;Pn.length&&kt()-i<Ws;)Pn.shift()();Dr=Pn.length?setTimeout(ga,0):0}const Vs=(...i)=>new Promise((n,u)=>{Pn.push(()=>{const f=kt();try{jn.webgl.generateIntoCanvas(...i),n({timing:kt()-f})}catch(t){u(t)}}),Dr||(Dr=setTimeout(ga,0))}),js=4,Xs=2e3,Lo={};let Hs=0;function Ro(i,n,u,f,t,e,r,s,o,a){const l="TroikaTextSDFGenerator_JS_"+Hs++%js;let c=Lo[l];return c||(c=Lo[l]={workerModule:jt({name:l,workerId:l,dependencies:[va,kt],init(d,h){const v=d().javascript.generate;return function(...m){const g=h();return{textureData:v(...m),timing:h()-g}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),c.requests++,clearTimeout(c.idleTimer),c.workerModule(i,n,u,f,t,e).then(({textureData:d,timing:h})=>{const v=kt(),m=new Uint8Array(d.length*4);for(let g=0;g<d.length;g++)m[g*4+a]=d[g];return jn.webglUtils.renderImageData(r,m,s,o,i,n,1<<3-a),h+=kt()-v,--c.requests===0&&(c.idleTimer=setTimeout(()=>{ws(l)},Xs)),{timing:h}})}function Ys(i){i._warm||(jn.webgl.isSupported(i),i._warm=!0)}const qs=jn.webglUtils.resizeWebGLCanvasWithoutClearing,an={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Js=new zn;function Lt(){return(self.performance||Date).now()}const Io=Object.create(null);function Ks(i,n){i=Qs({},i);const u=Lt(),f=[];if(i.font&&f.push({label:"user",src:$s(i.font)}),i.font=f,i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||an.sdfGlyphSize,i.unicodeFontsURL=i.unicodeFontsURL||an.unicodeFontsURL,i.colorRanges!=null){let d={};for(let h in i.colorRanges)if(i.colorRanges.hasOwnProperty(h)){let v=i.colorRanges[h];typeof v!="number"&&(v=Js.set(v).getHex()),d[h]=v}i.colorRanges=d}Object.freeze(i);const{textureWidth:t,sdfExponent:e}=an,{sdfGlyphSize:r}=i,s=t/r*4;let o=Io[r];if(!o){const d=document.createElement("canvas");d.width=t,d.height=r*256/s,o=Io[r]={glyphCount:0,sdfGlyphSize:r,sdfCanvas:d,sdfTexture:new Ha(d,void 0,void 0,void 0,lo,lo),contextLost:!1,glyphsByFont:new Map},o.sdfTexture.generateMipmaps=!1,Zs(o)}const{sdfTexture:a,sdfCanvas:l}=o;ba(i).then(d=>{const{glyphIds:h,glyphFontIndices:v,fontData:m,glyphPositions:g,fontSize:R,timings:x}=d,k=[],w=new Float32Array(h.length*4);let T=0,O=0;const C=Lt(),A=m.map(I=>{let D=o.glyphsByFont.get(I.src);return D||o.glyphsByFont.set(I.src,D=new Map),D});h.forEach((I,D)=>{const Y=v[D],{src:j,unitsPerEm:ie}=m[Y];let re=A[Y].get(I);if(!re){const{path:M,pathBounds:F}=d.glyphData[j][I],U=Math.max(F[2]-F[0],F[3]-F[1])/r*(an.sdfMargin*r+.5),N=o.glyphCount++,L=[F[0]-U,F[1]-U,F[2]+U,F[3]+U];A[Y].set(I,re={path:M,atlasIndex:N,sdfViewBox:L}),k.push(re)}const{sdfViewBox:b}=re,E=g[O++],p=g[O++],S=R/ie;w[T++]=E+b[0]*S,w[T++]=p+b[1]*S,w[T++]=E+b[2]*S,w[T++]=p+b[3]*S,h[D]=re.atlasIndex}),x.quads=(x.quads||0)+(Lt()-C);const W=Lt();x.sdf={};const P=l.height,ne=Math.ceil(o.glyphCount/s),_=Math.pow(2,Math.ceil(Math.log2(ne*r)));_>P&&(console.info(`Increasing SDF texture size ${P}->${_}`),qs(l,t,_),a.dispose()),Promise.all(k.map(I=>_a(I,o,i.gpuAccelerateSDF).then(({timing:D})=>{x.sdf[I.atlasIndex]=D}))).then(()=>{k.length&&!o.contextLost&&(ya(o),a.needsUpdate=!0),x.sdfTotal=Lt()-W,x.total=Lt()-u,n(Object.freeze({parameters:i,sdfTexture:a,sdfGlyphSize:r,sdfExponent:e,glyphBounds:w,glyphAtlasIndices:h,glyphColors:d.glyphColors,caretPositions:d.caretPositions,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{o.contextLost||Ys(l)})}function _a({path:i,atlasIndex:n,sdfViewBox:u},{sdfGlyphSize:f,sdfCanvas:t,contextLost:e},r){if(e)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:o}=an,a=Math.max(u[2]-u[0],u[3]-u[1]),l=Math.floor(n/4),c=l%(s/f)*f,d=Math.floor(l/(s/f))*f,h=n%4;return zs(f,f,i,u,a,o,t,c,d,h,r)}function Zs(i){const n=i.sdfCanvas;n.addEventListener("webglcontextlost",u=>{console.log("Context Lost",u),u.preventDefault(),i.contextLost=!0}),n.addEventListener("webglcontextrestored",u=>{console.log("Context Restored",u),i.contextLost=!1;const f=[];i.glyphsByFont.forEach(t=>{t.forEach(e=>{f.push(_a(e,i,!0))})}),Promise.all(f).then(()=>{ya(i),i.sdfTexture.needsUpdate=!0})})}function Qs(i,n){for(let u in n)n.hasOwnProperty(u)&&(i[u]=n[u]);return i}let Mn;function $s(i){return Mn||(Mn=typeof document>"u"?{}:document.createElement("a")),Mn.href=i,Mn.href}function ya(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:n,sdfTexture:u}=i,{width:f,height:t}=n,e=i.sdfCanvas.getContext("webgl");let r=u.image.data;(!r||r.length!==f*t*4)&&(r=new Uint8Array(f*t*4),u.image={width:f,height:t,data:r},u.flipY=!1,u.isDataTexture=!0),e.readPixels(0,0,f,t,e.RGBA,e.UNSIGNED_BYTE,r)}}const el=jt({name:"Typesetter",dependencies:[Ns,Gs,Us],init(i,n,u){return i(n,u())}}),ba=jt({name:"Typesetter",dependencies:[el],init(i){return function(n){return new Promise(u=>{i.typeset(n,u)})}},getTransferables(i){const n=[];for(let u in i)i[u]&&i[u].buffer&&n.push(i[u].buffer);return n}});ba.onMainThread;const Oo={};function tl(i){let n=Oo[i];return n||(n=Oo[i]=new Er(1,1,i,i).translate(.5,.5,0)),n}const nl="aTroikaGlyphBounds",Po="aTroikaGlyphIndex",rl="aTroikaGlyphColor";class ol extends Va{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new ja,this.boundingBox=new Yo}computeBoundingSphere(){}computeBoundingBox(){}set detail(n){if(n!==this._detail){this._detail=n,(typeof n!="number"||n<1)&&(n=1);let u=tl(n);["position","normal","uv"].forEach(f=>{this.attributes[f]=u.attributes[f].clone()}),this.setIndex(u.getIndex().clone())}}get detail(){return this._detail}set curveRadius(n){n!==this._curveRadius&&(this._curveRadius=n,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(n,u,f,t,e){this.updateAttributeData(nl,n,4),this.updateAttributeData(Po,u,1),this.updateAttributeData(rl,e,3),this._blockBounds=f,this._chunkedBounds=t,this.instanceCount=u.length,this._updateBounds()}_updateBounds(){const n=this._blockBounds;if(n){const{curveRadius:u,boundingBox:f}=this;if(u){const{PI:t,floor:e,min:r,max:s,sin:o,cos:a}=Math,l=t/2,c=t*2,d=Math.abs(u),h=n[0]/d,v=n[2]/d,m=e((h+l)/c)!==e((v+l)/c)?-d:r(o(h)*d,o(v)*d),g=e((h-l)/c)!==e((v-l)/c)?d:s(o(h)*d,o(v)*d),R=e((h+t)/c)!==e((v+t)/c)?d*2:s(d-a(h)*d,d-a(v)*d);f.min.set(m,n[1],u<0?-R:0),f.max.set(g,n[3],u<0?0:R)}else f.min.set(n[0],n[1],0),f.max.set(n[2],n[3],0);f.getBoundingSphere(this.boundingSphere)}}applyClipRect(n){let u=this.getAttribute(Po).count,f=this._chunkedBounds;if(f)for(let t=f.length;t--;){u=f[t].end;let e=f[t].rect;if(e[1]<n.w&&e[3]>n.y&&e[0]<n.z&&e[2]>n.x)break}this.instanceCount=u}updateAttributeData(n,u,f){const t=this.getAttribute(n);u?t&&t.array.length===u.length?(t.array.set(u),t.needsUpdate=!0):(this.setAttribute(n,new Xa(u,f)),delete this._maxInstanceCount,this.dispose()):t&&this.deleteAttribute(n)}}const al=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,il=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,sl=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,ll=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function ul(i){const n=kr(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Bn},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new uo(0,0,0,0)},uTroikaClipRect:{value:new uo(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Bn},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new zn},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Ya},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:al,vertexTransform:il,fragmentDefs:sl,fragmentColorTransform:ll,customRewriter({vertexShader:u,fragmentShader:f}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(f)&&(f=f.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(u)||(u=u.replace(ma,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:u,fragmentShader:f}}});return n.transparent=!0,n.forceSinglePass=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),n}const Br=new za({color:16777215,side:qa,transparent:!0}),Bo=8421504,Go=new Wa,En=new Mr,yr=new Mr,rn=[],fl=new Mr,br="+x+y";function No(i){return Array.isArray(i)?i[0]:i}let Ta=()=>{const i=new Fr(new Er(1,1),Br);return Ta=()=>i,i},Sa=()=>{const i=new Fr(new Er(1,1,32,1),Br);return Sa=()=>i,i};const cl={type:"syncstart"},dl={type:"synccomplete"},wa=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],hl=wa.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class xa extends Fr{constructor(){const n=new ol;super(n,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Bo,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=br,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(n){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(n):(this._isSyncing=!0,this.dispatchEvent(cl),Ks({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},u=>{this._isSyncing=!1,this._textRenderInfo=u,this.geometry.updateGlyphs(u.glyphBounds,u.glyphAtlasIndices,u.blockBounds,u.chunkedBounds,u.glyphColors);const f=this._queuedSyncs;f&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{f.forEach(t=>t&&t())})),this.dispatchEvent(dl),n&&n()})))}onBeforeRender(n,u,f,t,e,r){this.sync(),e.isTroikaTextMaterial&&this._prepareForRender(e)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(n){return ul(n)}get material(){let n=this._derivedMaterial;const u=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Br.clone());if((!n||!n.isDerivedFrom(u))&&(n=this._derivedMaterial=this.createDerivedMaterial(u),u.addEventListener("dispose",function f(){u.removeEventListener("dispose",f),n.dispose()})),this.hasOutline()){let f=n._outlineMtl;return f||(f=n._outlineMtl=Object.create(n,{id:{value:n.id+.1}}),f.isTextOutlineMaterial=!0,f.depthWrite=!1,f.map=null,n.addEventListener("dispose",function t(){n.removeEventListener("dispose",t),f.dispose()})),[f,n]}else return n}set material(n){n&&n.isTroikaTextMaterial?(this._derivedMaterial=n,this._baseMaterial=n.baseMaterial):this._baseMaterial=n}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(n){this.geometry.detail=n}get curveRadius(){return this.geometry.curveRadius}set curveRadius(n){this.geometry.curveRadius=n}get customDepthMaterial(){return No(this.material).getDepthMaterial()}set customDepthMaterial(n){}get customDistanceMaterial(){return No(this.material).getDistanceMaterial()}set customDistanceMaterial(n){}_prepareForRender(n){const u=n.isTextOutlineMaterial,f=n.uniforms,t=this.textRenderInfo;if(t){const{sdfTexture:s,blockBounds:o}=t;f.uTroikaSDFTexture.value=s,f.uTroikaSDFTextureSize.value.set(s.image.width,s.image.height),f.uTroikaSDFGlyphSize.value=t.sdfGlyphSize,f.uTroikaSDFExponent.value=t.sdfExponent,f.uTroikaTotalBounds.value.fromArray(o),f.uTroikaUseGlyphColors.value=!u&&!!t.glyphColors;let a=0,l=0,c=0,d,h,v,m=0,g=0;if(u){let{outlineWidth:x,outlineOffsetX:k,outlineOffsetY:w,outlineBlur:T,outlineOpacity:O}=this;a=this._parsePercent(x)||0,l=Math.max(0,this._parsePercent(T)||0),d=O,m=this._parsePercent(k)||0,g=this._parsePercent(w)||0}else c=Math.max(0,this._parsePercent(this.strokeWidth)||0),c&&(v=this.strokeColor,f.uTroikaStrokeColor.value.set(v??Bo),h=this.strokeOpacity,h==null&&(h=1)),d=this.fillOpacity;f.uTroikaEdgeOffset.value=a,f.uTroikaPositionOffset.value.set(m,g),f.uTroikaBlurRadius.value=l,f.uTroikaStrokeWidth.value=c,f.uTroikaStrokeOpacity.value=h,f.uTroikaFillOpacity.value=d??1,f.uTroikaCurveRadius.value=this.curveRadius||0;let R=this.clipRect;if(R&&Array.isArray(R)&&R.length===4)f.uTroikaClipRect.value.fromArray(R);else{const x=(this.fontSize||.1)*100;f.uTroikaClipRect.value.set(o[0]-x,o[1]-x,o[2]+x,o[3]+x)}this.geometry.applyClipRect(f.uTroikaClipRect.value)}f.uTroikaSDFDebug.value=!!this.debugSDF,n.polygonOffset=!!this.depthOffset,n.polygonOffsetFactor=n.polygonOffsetUnits=this.depthOffset||0;const e=u?this.outlineColor||0:this.color;if(e==null)delete n.color;else{const s=n.hasOwnProperty("color")?n.color:n.color=new zn;(e!==s._input||typeof e=="object")&&s.set(s._input=e)}let r=this.orientation||br;if(r!==n._orientation){let s=f.uTroikaOrient.value;r=r.replace(/[^-+xyz]/g,"");let o=r!==br&&r.match(/^([-+])([xyz])([-+])([xyz])$/);if(o){let[,a,l,c,d]=o;En.set(0,0,0)[l]=a==="-"?1:-1,yr.set(0,0,0)[d]=c==="-"?-1:1,Go.lookAt(fl,En.cross(yr),yr),s.setFromMatrix4(Go)}else s.identity();n._orientation=r}}_parsePercent(n){if(typeof n=="string"){let u=n.match(/^(-?[\d.]+)%$/),f=u?parseFloat(u[1]):NaN;n=(isNaN(f)?0:f/100)*this.fontSize}return n}localPositionToTextCoords(n,u=new Bn){u.copy(n);const f=this.curveRadius;return f&&(u.x=Math.atan2(n.x,Math.abs(f)-Math.abs(n.z))*Math.abs(f)),u}worldPositionToTextCoords(n,u=new Bn){return En.copy(n),this.localPositionToTextCoords(this.worldToLocal(En),u)}raycast(n,u){const{textRenderInfo:f,curveRadius:t}=this;if(f){const e=f.blockBounds,r=t?Sa():Ta(),s=r.geometry,{position:o,uv:a}=s.attributes;for(let l=0;l<a.count;l++){let c=e[0]+a.getX(l)*(e[2]-e[0]);const d=e[1]+a.getY(l)*(e[3]-e[1]);let h=0;t&&(h=t-Math.cos(c/t)*t,c=Math.sin(c/t)*t),o.setXYZ(l,c,d,h)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,r.matrixWorld=this.matrixWorld,r.material.side=this.material.side,rn.length=0,r.raycast(n,rn);for(let l=0;l<rn.length;l++)rn[l].object=this,u.push(rn[l])}}copy(n){const u=this.geometry;return super.copy(n),this.geometry=u,hl.forEach(f=>{this[f]=n[f]}),this}clone(){return new this.constructor().copy(this)}}wa.forEach(i=>{const n="_private_"+i;Object.defineProperty(xa.prototype,i,{get(){return this[n]},set(u){u!==this[n]&&(this[n]=u,this._needsSync=!0)}})});new Yo;new zn;const pl=2e3,vl={__name:"Home3D",emits:["bookShow"],setup(i,{emit:n}){const u=zo(),f=n;let t=null,e=null,r={shi:null,fen:null,miao:null},s=null,o=null,a=null,l=null,c=null,d=null,h=null,v=null,m=null,g,R,x,k,w,T,O=!1;const C=window.devicePixelRatio||1;let A=!1;function W(){R=document.getElementById("audio"),g=R.getContext("2d"),R.width=R.clientWidth*C,R.height=R.clientHeight*C,g.scale(C,C)}function P(){T=document.createElement("video"),T.src="https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/mp4/test.mp4",T.loop=!0,T.crossOrigin="anonymous",T.addEventListener("play",()=>{A=!0,O||ne(),_()}),T.addEventListener("pause",()=>{A=!1})}function ne(){const y=new AudioContext,z=y.createMediaElementSource(T);x=y.createAnalyser(),k=x.frequencyBinCount,x.fftSize=k/2,z.connect(x),x.connect(y.destination),w=new Uint8Array(k),O=!0}function _(){if(!A)return;requestAnimationFrame(_),g.clearRect(0,0,R.width,R.height),x.getByteFrequencyData(w),g.clearRect(0,0,R.width,R.height);const y=x.frequencyBinCount,z=R.width/y,J=Math.floor(y/2);for(let X=0;X<J;X++){const H=w[X],K=H*(R.height/256),G=H+50>255?255:H+50,Q=50,te=150;g.fillStyle=`rgb(${G},${Q},${te})`;let B=X*z,se=R.height-K;g.fillRect(B,se,z,K);let ee=R.width-(X+1)*z,ae=R.height-K;g.fillRect(ee,ae,z,K)}}function I(){const y=new Date,z=y.getFullYear(),J=y.getMonth()+1,X=J<10?"0"+J:J,H=y.getDate(),K=H<10?"0"+H:H;return{year:z,month:X,day:K}}function D(y,z=[0,0,0],J=1,X="bold"){const H=new xa;return H.text=y,H.font="https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/fonts/digital7.ttf",H.fontSize=J,H.position.set(...z),H.rotation.y=Math.PI/2,H.color=0,H.fontWeight=X,H.anchorX="center",H.anchorY="middle",H.sync(),H}const Y=(y,z)=>{const J=new y.CubeTextureLoader().setPath("/home/https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/images/").load(["nx.png","px.png","py.png","ny.png","nz.png","pz.png"]);z.background=J;const X=new Date().getHours();if(X>=18||X<6){z.background=new y.Color(265780);let K=[{nubmer:1850,color:16777215,size:1.5,scalar:1,multiple:500}];for(let G=0;G<K.length;G++){const Q=ei(K[G]);Q.rotation.x=Math.random()*6,Q.rotation.y=Math.random()*6,Q.rotation.z=Math.random()*6,Q.matrixAutoUpdate=!1,Q.updateMatrix(),Q.position.set(0,0,0),z.add(Q)}}},j=Gt(!1),ie=(y,z,J,X)=>{cr.install({THREE:y}),t=new cr(J,X.domElement),t.minZoom=.1,t.maxZoom=15,t.enableTransition=!0,t.transitionTime=1,t.mouseButtons.wheel=cr.ACTION.NONE,t.update(),t.saveState(),z.addEventListener("mouseDown",function(H){t.enabled=!1}),z.addEventListener("mouseUp",function(H){t.enabled=!0})},re=(y,z)=>{const J=new y.AmbientLight(203843,.6);z.add(J);const X=new y.DirectionalLight(16777215,.3);X.position.set(-99.4535,52.788402638514,-25.3826),X.castShadow=!0,z.add(X),s=new y.PointLight(16774827,50,100),s.position.set(27.105,2.1298,-29.157),s.castShadow=!0,z.add(s),o=new y.PointLight(16777215,1,200),o.position.set(11.376385097904176,26.471699160045343,6.353171916870222),o.castShadow=!0,z.add(o);const H=new y.CylinderGeometry(1.66,1.66,4,32);a=new y.Mesh(H,new y.MeshStandardMaterial({color:1118481,transparent:!0,opacity:.46,emissive:16711680,emissiveIntensity:100,metalness:0,roughness:.5})),a.position.set(-29.33046480164147,8.629849073395794,-16.21725577998555),a.castShadow=!0,z.add(a)},b=({THREE:y,scene:z,transControls:J,camera:X,renderer:H})=>{ie(y,J,X,H),Y(y,z),re(y,z);const K=new y.Group,G=Ke(z.children,"home");G.position.set(0,-15,0);const Q=Ke(G.children,"空箱子大"),te=Ke(G.children,"空箱子001"),B=Ke(G.children,"主体");B.castShadow=!0,B.receiveShadow=!0,l=Ke(G.children,"xiaodeng"),l.material.emissive=new y.Color(1118481),l.material.envMapIntensity=0,l.castShadow=!0,l.receiveShadow=!0;const se=Ke(G.children,"门帘"),ee=Ke(se.children,"门");K.attach(ee),se.visible=!1;const ae=Ke(G.children,"闹钟"),$=Ke(ae.children,"shi"),we=Ke(ae.children,"fen"),ue=Ke(ae.children,"miao");r={shi:$,fen:we,miao:ue},r.shi.rotation.y=0,r.fen.rotation.y=0,r.miao.rotation.y=0;const le=Ke(G.children,"电脑桌");le.castShadow=!0,le.receiveShadow=!0;const{year:ce,month:me,day:ke}=I(),Fe=D(`${ce}`,[-24.21810526958002,6.28957649,17.8168586],1);z.add(Fe);const he=D("Year",[-24.21810526958002,5.06957649,18.2068586],.6,"regular");z.add(he);const ge=D(`${me}`,[-24.21810526958002,6.28957649,15.8168586],1);z.add(ge);const fe=D("Month",[-24.21810526958002,5.06957649,15.8968586],.6,"regular");z.add(fe);const pe=D(`${ke}`,[-24.21810526958002,6.28957649,14.2168586],1);z.add(pe);const _e=D("Day",[-24.21810526958002,5.06957649,14.0468586],.6,"regular");z.add(_e);const Ne=Ke(z.children,"xianshiqi");if(Ne.castShadow=!0,T.src){const xe=new y.VideoTexture(T);xe.flipY=!1;const Re=new y.MeshBasicMaterial({map:xe});Ne.material=Re,Ne.castShadow=!0}c=Ke(G.children,"柱体014"),c.name="diannaoyi";const De={y:0},ve={y:Math.PI*2};v=new fo(De).to(ve,3e3).easing(co.Quadratic.InOut).onUpdate(()=>{c.rotation.y=De.y}).delay(1e3).start();const Ue=Ke(G.children,"lanqiu");Ue.position.set(-10,0,0);const ut=new y.CatmullRomCurve3([new y.Vector3(12,3.36,6.09),new y.Vector3(2.12,2.36,2.02),new y.Vector3(.707,2.36,-4.25),new y.Vector3(-5.558,2.36,-10.39)]),Ae={progress:0};m=new fo(Ae).to({progress:1},5e3).easing(co.Quadratic.InOut).onUpdate(()=>{const xe=ut.getPoint(Ae.progress);Ue.position.copy(xe),Ue.rotation.z+=.22}).delay(3e3).start();const Te=[{name:"xc_db",size:[4.2,4.2],position:[25.147446346740253,20.1227880586422,-32.918080391178876],src:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/dfsj/db/003.jpg"},{name:"xc_02",size:[4.2,4.2],position:[31.06927073239676,20.1227880586422,-32.918080391178876],src:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/dfsj/feixian/web/pc02.jpg"},{name:"xc_03",size:[4.2,4.2],position:[37.0123651221323,20.1227880586422,-32.918080391178876],src:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/dfsj/feixian/webnew/004.jpg"},{name:"xc_04",size:[10.2,4.2],position:[28.247028395689476,13.964410131334555,-32.9180803911788],src:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/dfsj/feixian/xcx/xcx01.jpg"},{name:"xc_05",size:[4.2,4.2],position:[37.0123651221323,14.035935533501332,-32.918080391178],src:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/dfsj/gzb/xcx/003.jpg"},{name:"xc_06",size:[4.2,4.2],position:[25.17463710170653,8.343632646416731,-32.9180803911],src:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/dfsj/gzb/xcxweb/001.jpg"},{name:"xc_07",size:[10.2,4.2],position:[34.05277102672005,8.210956138239148,-32.918080391178876],src:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/dfsj/gzb/sj/002.png"}],Pe=new y.TextureLoader;for(let xe=0;xe<Te.length;xe++){const Re=Te[xe];Pe.load("/home/"+Re.src,Ye=>{const qe=$a(Te[xe]);qe.name=Te[xe].name,qe.material=new y.MeshLambertMaterial({map:Ye}),K.add(qe)})}const Ee=new y.PlaneGeometry(16,25),ye=new y.MeshBasicMaterial({color:65280,transparent:!0,opacity:0}),Me=new y.Mesh(Ee,ye);Me.rotation.y=Math.PI/2,Me.position.set(-26.75,7.5,29.5),Me.name="shujibox",K.add(Me),K.attach(Q),K.attach(te),z.add(K),t.rotate(72*y.MathUtils.DEG2RAD,0,!0),t.setTarget(-.2176510350531844,.06773081571016058,.014509065832072607,!0);let We=[];d=xe=>{We=[xe.clientX,xe.clientY]},h=async xe=>{const[Re,Ye]=We;if(Math.abs(Re-xe.clientX)>2||Math.abs(Ye-xe.clientY)>2)return;let qe=await ti({el:"#canvas",camera:X,group:K,event:xe});qe?.object&&(e&&(e=null),e=qe.object,(e.name=="空箱子大"||e.name=="立方体067_1")&&u.push("/three/demo34"),e.name=="shujibox"&&S(),e.name.indexOf("xc")>-1&&M())},document.body.addEventListener("mousedown",d),document.body.addEventListener("mouseup",h),document.body.addEventListener("keydown",p)};let E=!0;const p=y=>{y.key=="Control"&&(E=!E),y.code=="Space"&&(A?(T.pause(),Co("#audio",{bottom:"-80px"})):(T.play(),Co("#audio",{bottom:"0"})),y.preventDefault)},S=()=>{f("bookShow")},M=()=>{j.value=!0,document.body.removeEventListener("mousedown",d),document.body.removeEventListener("mouseup",h),document.body.removeEventListener("keydown",p)},F=()=>{j.value=!1,document.body.addEventListener("mousedown",d),document.body.addEventListener("mouseup",h),document.body.addEventListener("keydown",p)},U=()=>{const y=new Date,z=y.getHours()%12||12,J=y.getMinutes(),X=y.getSeconds();return[z,J,X]},N=()=>{const{shi:y,fen:z,miao:J}=r;if(!y||!z||!J)return;r.shi.rotation.y=0,r.fen.rotation.y=0,r.miao.rotation.y=0;const[X,H,K]=U(),G={shi:X*(2*Math.PI/12)+Math.PI/2,fen:-H*(2*Math.PI/60)+Math.PI/2,miao:K*(2*Math.PI/60)+Math.PI/2};y.rotation.y=G.shi,z.rotation.y=G.fen,J.rotation.y=G.miao};let L=Date.now();const V=(y,z)=>{const J=Date.now();if(J-L>=pl){const X=new z.Color(Math.random()*16777215);y.material.emissive=X,L=J}y.material.emissiveIntensity=Math.sin(Date.now()*.001*Math.PI)*.5+.5},Z=({THREE:y,scene:z,camera:J,renderer:X,clock:H,stats:K})=>{const G=H.getDelta();t.update(G),K.update(),N(),E?(s.visible=!0,o.intensity=2e3,l.material.emissive=new y.Color(16777215),l.material.envMapIntensity=1):(s.visible=!1,o.intensity=20,l.material.emissive=new y.Color(1118481),l.material.envMapIntensity=0),A?V(a,y):a.material.emissive=new y.Color(0),v.update(),m.update(),X.render(z,J)},{loading:oe,pregress:q}=Ja({el:"#canvas",background:"#111",modelPath:["house.zip"],modelName:["home"],modelZip:!0,modelScale:[2.5,2.5,2.5],cameraPosition:[-20,-0,42],control:!1,helper:!1,light:!1,transformControls:!0,showStats:!0,statsPosition:[0,0],creatMesh:b,animation:Z});return Ar(()=>{W(),P()}),La(()=>{E=!1,document.body.removeEventListener("mousedown",d),document.body.removeEventListener("mouseup",h),document.body.removeEventListener("keydown",p),v&&(v.stop(),ni(v),v=null)}),(y,z)=>(lt(),st(fn,null,[cn(Ka,{loading:so(oe),pregress:so(q)},{default:Ra(()=>[...z[0]||(z[0]=[Oe("canvas",{id:"canvas"},null,-1),Oe("canvas",{id:"audio"},null,-1)])]),_:1},8,["loading","pregress"]),cn(Si,{show:j.value,onHandleEvent:F},null,8,["show"])],64))}},ml=hn(vl,[["__scopeId","data-v-9ebce04b"]]),gl={__name:"Home",setup(i){const n=Ho(),u=Gt([]),f=()=>{u.value=Ia.menus.filter(s=>s.path!=="/"),n.setFlagStatus(!0)};Ar(()=>{f()});const t=Gt(!1),e=()=>{t.value=!0},r=()=>{t.value=!1};return(s,o)=>(lt(),st(fn,null,[cn(ml,{onBookShow:e}),cn(vi,{show:t.value,menus:u.value,onBookHide:r},null,8,["show","menus"]),o[0]||(o[0]=Oe("div",{class:"tip-right"},[Oe("p",null,"1.点击“书本”查看网站知识库"),Oe("p",null,"2.空格键控制视频播放"),Oe("p",null,"3.点击“相册”查看案例"),Oe("p",null,"4.按Ctrl键-开关灯")],-1))],64))}},Fl=hn(gl,[["__scopeId","data-v-2247e9d7"]]);export{Fl as default};
