import{_ as hn,r as zt,z as jo,R as Ea,b as st,l as lt,d as Oe,F as un,s as Sr,n as Xo,t as Ho,H as Ra,h as Yo,v as Jo,I as fn,o as Fr,g as La,w as Ia,u as lo,y as Oa}from"./index-eAD1fMAz.js";import{u as Ko}from"./allscreen-naQvKwgc.js";import{U as Pa,k as Ba,R as Ga,al as Na,am as za,an as Qo,a as Vn,c as Mr,j as Nn,ao as Wa,ap as uo,aq as Va,ar as ja,as as Xa,ai as fo,z as Ha,M as Ya,D as Ja,f as Ka,V as Er,X as Rr,u as Qa,L as Za}from"./Loading-BffY0_j3.js";import{I as qa,d as $a}from"./img-CH4GT_7i.js";import{C as hr}from"./camera-controls.module-CggtOxtI.js";import{k as Qe,o as ei,i as ti}from"./creatMesh-C10FIcCa.js";import{u as ni}from"./useRay-Sfnuo_oU.js";import{T as co,E as ho,r as ri}from"./tween.esm-Dp1EtNfj.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./loading-Cp4fP9TW.js";const oi={class:"accordion solution"},ai=["onClick"],ii={class:"left-top"},si=["innerHTML"],li={class:"right"},ui={class:"box"},fi=["title","onClick"],ci={__name:"Accordion",props:{items:{type:Array,default:()=>[]}},setup(s){const n=zt(0),u=jo(),f=Ea(),t=Ko(),e=l=>l.replace(/([a-zA-Z]+)/g,'<span style="font-size:20px">$1</span>'),r=l=>e(l),i=async(l,c)=>{f.showLoading(),await u.push(l),o(c)},o=async l=>{t.setFlagStatus(!1),await Ra();const c=document.getElementById("menu");if(c){const d=c.getElementsByClassName("menu-item");d[l]&&(c.scrollTop=d[l].offsetTop)}f.hideLoading()},a=l=>{n.value=l};return(l,c)=>(st(),lt("div",oi,[Oe("ul",null,[(st(!0),lt(un,null,Sr(s.items,(d,h)=>(st(),lt("li",{key:h,class:Xo(["accordion-item",{on:n.value===h}]),onClick:v=>a(h)},[c[0]||(c[0]=Oe("div",{class:"left"},null,-1)),Oe("div",ii,[Oe("div",{innerHTML:r(d.title)},null,8,si)]),Oe("div",li,[Oe("dl",null,[Oe("div",ui,[(st(!0),lt(un,null,Sr(d.children,(v,m)=>(st(),lt("dd",{key:m,title:v.name,onClick:g=>i(v.path,m)},Ho(v.name),9,fi))),128))])])])],10,ai))),128))])]))}},di=hn(ci,[["__scopeId","data-v-51480148"]]),hi={class:"book-boom"},pi={class:"know-rec box"},vi={__name:"KnowHome",props:{show:{type:Boolean,default:!1},menus:{type:Array,default:()=>[]}},emits:["bookHide"],setup(s,{emit:n}){const u=n,f=()=>{u("bookHide")};return(t,e)=>Yo((st(),lt("div",hi,[Oe("div",{class:"boom-layer",onClick:f}),Oe("div",pi,[fn(di,{items:s.menus},null,8,["items"])])],512)),[[Jo,s.show]])}},mi=hn(vi,[["__scopeId","data-v-7670749a"]]),gi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANtJREFUSEvdlLsRwkAMRN9GRDQChCRQCBWQUQ8NELoJMjJC6AUSMWIMwxxnnzzjC8ChLe2zfisqP6qszx8CzOwITICtpGukhWY2Aw7AXdL6M+erRWZ2AlbABdiUIK14A8w9R9KiBPC/eSf0QVLxXGx2yJHESIxX0rlFfQJR8V6Af8wJtf0NtbAI6ID46+dAI0sQOrSkEgeExEMVZKoYF5CZw3gtqjrkqmsa2fNITHbI0cSuO0m9a2yzO0talszO3fQG7EpO+hJqq94D0yIg4v9DYkKXPEQwjf19wANzaZwZ7Qyu6QAAAABJRU5ErkJggg==",_i={class:"layer-boom"},yi={class:"scroll-container"},bi={class:"row"},Ti=["onClick","title"],Si=["src","alt"],wi={__name:"PhontoMenus",props:{show:{type:Boolean,default:!1}},emits:["handleEvent"],setup(s,{emit:n}){const u=n,f=zt([]),t=zt(!1),e=function(){u("handleEvent")},r=(o,a)=>{t.value=!1;let l=o.map(c=>"/home//public"+a+c);new qa({images:l,onClose:()=>{t.value=!0}})},i=()=>{t.value=!0,f.value=$a.map(o=>{let a="/home//public"+o.path+o.cover;return{...o,coverImg:a}})};return Fr(()=>{i()}),(o,a)=>Yo((st(),lt("div",_i,[Oe("div",{class:"close",onClick:e},a[0]||(a[0]=[Oe("img",{src:gi,alt:""},null,-1)])),a[1]||(a[1]=Oe("h3",null,"案例中心",-1)),Oe("div",yi,[Oe("div",bi,[(st(!0),lt(un,null,Sr(f.value,l=>(st(),lt("div",{class:Xo(["item",{app:l.isApp}]),key:l.id,onClick:c=>r(l.imgs,l.path),title:l.des},[Oe("img",{src:l.coverImg,alt:l.des},null,8,Si),Oe("p",null,Ho(l.name),1)],10,Ti))),128))])])],512)),[[Jo,s.show&&t.value]])}},xi=hn(wi,[["__scopeId","data-v-8d39483c"]]);/**
 * anime.js - ESM
 * @version v4.0.0
 * @author Julian Garnier
 * @license MIT
 * @copyright (c) 2025 Julian Garnier
 * @see https://animejs.com
 */const ht=typeof window<"u",pr=ht?window:null,Wt=ht?document:null,Ge={OBJECT:0,ATTRIBUTE:1,CSS:2,TRANSFORM:3,CSS_VAR:4},Ce={NUMBER:0,UNIT:1,COLOR:2,COMPLEX:3},ot={NONE:0,AUTO:1,FORCE:2},tt={replace:0,none:1,blend:2},po=Symbol(),Lr=Symbol(),Zo=Symbol(),jn=Symbol(),Ui=Symbol(),Le=1e-11,qo=1e12,Vt=1e3,wr=120,Ct="",pn=new Map;pn.set("x","translateX");pn.set("y","translateY");pn.set("z","translateZ");const Ir=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],$o=Ir.reduce((s,n)=>({...s,[n]:n+"("}),{}),rt=()=>{},Ci=/(^#([\da-f]{3}){1,2}$)|(^#([\da-f]{4}){1,2}$)/i,ki=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,Ai=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,Di=/hsl\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*\)/i,Fi=/hsla\(\s*(-?\d+|-?\d*.\d+)\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)%\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/i,vo=/[-+]?\d*\.?\d+(?:e[-+]?\d)?/gi,Mi=/^([-+]?\d*\.?\d+(?:e[-+]?\d+)?)([a-z]+|%)$/i,Ei=/([a-z])([A-Z])/g,Ri=/(\w+)(\([^)]+\)+)/g,ea={id:null,keyframes:null,playbackEase:null,playbackRate:1,frameRate:wr,loop:0,reversed:!1,alternate:!1,autoplay:!0,duration:Vt,delay:0,loopDelay:0,ease:"out(2)",composition:tt.replace,modifier:s=>s,onBegin:rt,onBeforeUpdate:rt,onUpdate:rt,onLoop:rt,onPause:rt,onComplete:rt,onRender:rt},Xe={defaults:ea,root:Wt,scope:null,precision:4,timeScale:1,tickThreshold:200},ta={version:"4.0.0",engine:null};ht&&(pr.AnimeJS||(pr.AnimeJS=[]),pr.AnimeJS.push(ta));const Li=s=>s.replace(Ei,"$1-$2").toLowerCase(),Bt=(s,n)=>s.indexOf(n)===0,cn=Date.now,dn=Array.isArray,vr=s=>s&&s.constructor===Object,Ii=s=>typeof s=="number"&&!isNaN(s),Xn=s=>typeof s=="string",zn=s=>typeof s=="function",Re=s=>typeof s>"u",mr=s=>Re(s)||s===null,na=s=>ht&&s instanceof SVGElement,ra=s=>Ci.test(s),oa=s=>Bt(s,"rgb"),aa=s=>Bt(s,"hsl"),Oi=s=>ra(s)||oa(s)||aa(s),Ln=s=>!Xe.defaults.hasOwnProperty(s),An=s=>Xn(s)?parseFloat(s):s,Lt=Math.pow,Pi=Math.sqrt,Bi=Math.sin,Gi=Math.cos,Ni=Math.abs,zi=Math.ceil,ia=Math.floor,Wi=Math.asin,Or=Math.PI,mo=Math.round,Ye=(s,n,u)=>s<n?n:s>u?u:s,go={},Pe=(s,n)=>{if(n<0)return s;if(!n)return mo(s);let u=go[n];return u||(u=go[n]=10**n),mo(s*u)/u},wt=(s,n,u)=>s+(n-s)*u,In=s=>s===1/0?qo:s===-1/0?-1e12:s,Gt=s=>s<Le?Le:s,Ze=s=>dn(s)?[...s]:s,Vi=(s,n)=>{const u={...s};for(let f in n){const t=s[f];u[f]=Re(t)?n[f]:t}return u},ze=(s,n,u,f="_prev",t="_next")=>{let e=s._head,r=t;for(u&&(e=s._tail,r=f);e;){const i=e[r];n(e),e=i}},an=(s,n,u="_prev",f="_next")=>{const t=n[u],e=n[f];t?t[f]=e:s._head=e,e?e[u]=t:s._tail=t,n[u]=null,n[f]=null},Pt=(s,n,u,f="_prev",t="_next")=>{let e=s._tail;for(;e&&u&&u(e,n);)e=e[f];const r=e?e[t]:s._head;e?e[t]=n:s._head=n,r?r[f]=n:s._tail=n,n[f]=e,n[t]=r};class sa{constructor(n=0){this.deltaTime=0,this._currentTime=n,this._elapsedTime=n,this._startTime=n,this._lastTime=n,this._scheduledTime=0,this._frameDuration=Pe(Vt/wr,0),this._fps=wr,this._speed=1,this._hasChildren=!1,this._head=null,this._tail=null}get fps(){return this._fps}set fps(n){const u=this._frameDuration,f=+n,t=f<Le?Le:f,e=Pe(Vt/t,0);this._fps=t,this._frameDuration=e,this._scheduledTime+=e-u}get speed(){return this._speed}set speed(n){const u=+n;this._speed=u<Le?Le:u}requestTick(n){const u=this._scheduledTime,f=this._elapsedTime;if(this._elapsedTime+=n-f,f<u)return ot.NONE;const t=this._frameDuration,e=f-u;return this._scheduledTime+=e<t?t:e,ot.AUTO}computeDeltaTime(n){const u=n-this._lastTime;return this.deltaTime=u,this._lastTime=n,u}}const On=(s,n,u,f,t)=>{const e=s.parent,r=s.duration,i=s.completed,o=s.iterationDuration,a=s.iterationCount,l=s._currentIteration,c=s._loopDelay,d=s._reversed,h=s._alternate,v=s._hasChildren,m=s._delay,g=s._currentTime,R=m+o,A=n-m,U=Ye(g,-m,r),w=Ye(A,-m,r),T=A-g,I=w>0,C=w>=r,D=r<=Le,W=t===ot.FORCE;let O=0,ne=A,_=0;if(a>1){const ae=~~(w/(o+(C?0:c)));s._currentIteration=Ye(ae,0,a),C&&s._currentIteration--,O=s._currentIteration%2,ne=w%(o+c)||0}const P=d^(h&&O),k=s._ease;let H=C?P?0:r:P?o-ne:ne;k&&(H=o*k(H/o)||0);const V=(e?e.backwards:A<g)?!P:!!P;if(s._currentTime=A,s._iterationTime=H,s.backwards=V,I&&!s.began?(s.began=!0,!u&&!(e&&(V||!e.began))&&s.onBegin(s)):A<=0&&(s.began=!1),!u&&!v&&I&&s._currentIteration!==l&&s.onLoop(s),W||t===ot.AUTO&&(n>=m&&n<=R||n<=m&&U>m||n>=R&&U!==r)||H>=R&&U!==r||H<=m&&U>0||n<=U&&U===r&&i||C&&!i&&D){if(I&&(s.computeDeltaTime(U),u||s.onBeforeUpdate(s)),!v){const ae=W||(V?T*-1:T)>=Xe.tickThreshold,ie=s._offset+(e?e._offset:0)+m+H;let b=s._head,M,p,S,F,E=0;for(;b;){const x=b._composition,G=b._currentTime,L=b._changeDuration,z=b._absoluteStartTime+b._changeDuration,Z=b._nextRep,re=b._prevRep,J=x!==tt.none;if((ae||(G!==L||ie<=z+(Z?Z._delay:0))&&(G!==0||ie>=b._absoluteStartTime))&&(!J||!b._isOverridden&&(!b._isOverlapped||ie<=z)&&(!Z||Z._isOverridden||ie<=Z._absoluteStartTime)&&(!re||re._isOverridden||ie>=re._absoluteStartTime+re._changeDuration+b._delay))){const y=b._currentTime=Ye(H-b._startTime,0,L),j=b._ease(y/b._updateDuration),K=b._modifier,X=b._valueType,Y=b._tweenType,Q=Y===Ge.OBJECT,N=X===Ce.NUMBER,q=N&&Q||j===0||j===1?-1:Xe.precision;let te,B;if(N)te=B=K(Pe(wt(b._fromNumber,b._toNumber,j),q));else if(X===Ce.UNIT)B=K(Pe(wt(b._fromNumber,b._toNumber,j),q)),te=`${B}${b._unit}`;else if(X===Ce.COLOR){const se=b._fromNumbers,ee=b._toNumbers,oe=Pe(Ye(K(wt(se[0],ee[0],j)),0,255),0),$=Pe(Ye(K(wt(se[1],ee[1],j)),0,255),0),Se=Pe(Ye(K(wt(se[2],ee[2],j)),0,255),0),ue=Ye(K(Pe(wt(se[3],ee[3],j),q)),0,1);if(te=`rgba(${oe},${$},${Se},${ue})`,J){const le=b._numbers;le[0]=oe,le[1]=$,le[2]=Se,le[3]=ue}}else if(X===Ce.COMPLEX){te=b._strings[0];for(let se=0,ee=b._toNumbers.length;se<ee;se++){const oe=K(Pe(wt(b._fromNumbers[se],b._toNumbers[se],j),q)),$=b._strings[se+1];te+=`${$?oe+$:oe}`,J&&(b._numbers[se]=oe)}}if(J&&(b._number=B),!f&&x!==tt.blend){const se=b.property;M=b.target,Q?M[se]=te:Y===Ge.ATTRIBUTE?M.setAttribute(se,te):(p=M.style,Y===Ge.TRANSFORM?(M!==S&&(S=M,F=M[jn]),F[se]=te,E=1):Y===Ge.CSS?p[se]=te:Y===Ge.CSS_VAR&&p.setProperty(se,te)),I&&(_=1)}else b._value=te}if(E&&b._renderTransforms){let y=Ct;for(let j in F)y+=`${$o[j]}${F[j]}) `;p.transform=y,E=0}b=b._next}!u&&_&&s.onRender(s)}!u&&I&&s.onUpdate(s)}return e&&D?!u&&(e.began&&!V&&A>=r&&!i||V&&A<=Le&&i)&&(s.onComplete(s),s.completed=!V):I&&C?a===1/0?s._startTime+=s.duration:s._currentIteration>=a-1&&(s.paused=!0,!i&&!v&&(s.completed=!0,!u&&!(e&&(V||!e.began))&&(s.onComplete(s),s._resolve(s)))):s.completed=!1,_},It=(s,n,u,f,t)=>{const e=s._currentIteration;if(On(s,n,u,f,t),s._hasChildren){const r=s,i=r.backwards,o=f?n:r._iterationTime,a=cn();let l=0,c=!0;if(!f&&r._currentIteration!==e){const d=r.iterationDuration;ze(r,h=>{if(!i)!h.completed&&!h.backwards&&h._currentTime<h.iterationDuration&&On(h,d,u,1,ot.FORCE),h.began=!1,h.completed=!1;else{const v=h.duration,m=h._offset+h._delay,g=m+v;!u&&v<=Le&&(!m||g===d)&&h.onComplete(h)}}),u||r.onLoop(r)}ze(r,d=>{const h=Pe((o-d._offset)*d._speed,12),v=d._fps<r._fps?d.requestTick(a):t;l+=On(d,h,u,f,v),!d.completed&&c&&(c=!1)},i),!u&&l&&r.onRender(r),c&&r._currentTime>=r.duration&&(r.paused=!0,r.completed||(r.completed=!0,u||(r.onComplete(r),r._resolve(r))))}},Nt={animation:null,update:rt},ji=s=>{let n=Nt.animation;return n||(n={duration:Le,computeDeltaTime:rt,_offset:0,_delay:0,_head:null,_tail:null},Nt.animation=n,Nt.update=()=>{s.forEach(u=>{for(let f in u){const t=u[f],e=t._head;if(e){const r=e._valueType,i=r===Ce.COMPLEX||r===Ce.COLOR?Ze(e._fromNumbers):null;let o=e._fromNumber,a=t._tail;for(;a&&a!==e;){if(i)for(let l=0,c=a._numbers.length;l<c;l++)i[l]+=a._numbers[l];else o+=a._number;a=a._prevAdd}e._toNumber=o,e._toNumbers=i}}}),On(n,1,1,0,ot.FORCE)}),n},la=ht?requestAnimationFrame:setImmediate,Xi=ht?cancelAnimationFrame:clearImmediate;class Hi extends sa{constructor(n){super(n),this.useDefaultMainLoop=!0,this.pauseOnDocumentHidden=!0,this.defaults=ea,this.paused=!!(ht&&Wt.hidden),this.reqId=null}update(){const n=this._currentTime=cn();if(this.requestTick(n)){this.computeDeltaTime(n);const u=this._speed,f=this._fps;let t=this._head;for(;t;){const e=t._next;t.paused?(an(this,t),this._hasChildren=!!this._tail,t._running=!1,t.completed&&!t._cancelled&&t.cancel()):It(t,(n-t._startTime)*t._speed*u,0,0,t._fps<f?t.requestTick(n):ot.AUTO),t=e}Nt.update()}}wake(){return this.useDefaultMainLoop&&!this.reqId&&!this.paused&&(this.reqId=la(ua)),this}pause(){return this.paused=!0,Yi()}resume(){if(this.paused)return this.paused=!1,ze(this,n=>n.resetTime()),this.wake()}get speed(){return this._speed*(Xe.timeScale===1?1:Vt)}set speed(n){this._speed=n*Xe.timeScale,ze(this,u=>u.speed=u._speed)}get timeUnit(){return Xe.timeScale===1?"ms":"s"}set timeUnit(n){const f=n==="s",t=f?.001:1;if(Xe.timeScale!==t){Xe.timeScale=t,Xe.tickThreshold=200*t;const e=f?.001:Vt;this.defaults.duration*=e,this._speed*=e}}get precision(){return Xe.precision}set precision(n){Xe.precision=n}}const He=(()=>{const s=new Hi(cn());return ht&&(ta.engine=s,Wt.addEventListener("visibilitychange",()=>{s.pauseOnDocumentHidden&&(Wt.hidden?s.pause():s.resume())})),s})(),ua=()=>{He._head?(He.reqId=la(ua),He.update()):He.reqId=0},Yi=()=>(Xi(He.reqId),He.reqId=0,He),Ji=(s,n,u)=>{const f=s.style.transform;let t;if(f){const e=s[jn];let r;for(;r=Ri.exec(f);){const i=r[1],o=r[2].slice(1,-1);e[i]=o,i===n&&(t=o,u&&(u[n]=o))}}return f&&!Re(t)?t:Bt(n,"scale")?"1":Bt(n,"rotate")||Bt(n,"skew")?"0deg":"0px"};function _o(s){const n=Xn(s)?Xe.root.querySelectorAll(s):s;if(n instanceof NodeList||n instanceof HTMLCollection)return n}function Ki(s){if(mr(s))return[];if(dn(s)){const u=s.flat(1/0),f=[];for(let t=0,e=u.length;t<e;t++){const r=u[t];if(!mr(r)){const i=_o(r);if(i)for(let o=0,a=i.length;o<a;o++){const l=i[o];if(!mr(l)){let c=!1;for(let d=0,h=f.length;d<h;d++)if(f[d]===l){c=!0;break}c||f.push(l)}}else{let o=!1;for(let a=0,l=f.length;a<l;a++)if(f[a]===r){o=!0;break}o||f.push(r)}}}return f}if(!ht)return[s];const n=_o(s);return n?Array.from(n):[s]}function Qi(s){const n=Ki(s),u=n.length;if(u)for(let f=0;f<u;f++){const t=n[f];if(!t[po]){t[po]=!0;const e=na(t);(t.nodeType||e)&&(t[Lr]=!0,t[Zo]=e,t[jn]={})}}return n}const Zi=["opacity","rotate","overflow","color"],qi=(s,n)=>{if(Zi.includes(n))return!1;if(s.getAttribute(n)||n in s){if(n==="scale"){const u=s.parentNode;return u&&u.tagName==="filter"}return!0}},$i=s=>{const n=ki.exec(s)||Ai.exec(s),u=Re(n[4])?1:+n[4];return[+n[1],+n[2],+n[3],u]},es=s=>{const n=s.length,u=n===4||n===5;return[+("0x"+s[1]+s[u?1:2]),+("0x"+s[u?2:3]+s[u?2:4]),+("0x"+s[u?3:5]+s[u?3:6]),n===5||n===9?+(+("0x"+s[u?4:7]+s[u?4:8])/255).toFixed(3):1]},gr=(s,n,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<1/6?s+(n-s)*6*u:u<1/2?n:u<2/3?s+(n-s)*(2/3-u)*6:s),ts=s=>{const n=Di.exec(s)||Fi.exec(s),u=+n[1]/360,f=+n[2]/100,t=+n[3]/100,e=Re(n[4])?1:+n[4];let r,i,o;if(f===0)r=i=o=t;else{const a=t<.5?t*(1+f):t+f-t*f,l=2*t-a;r=Pe(gr(l,a,u+1/3)*255,0),i=Pe(gr(l,a,u)*255,0),o=Pe(gr(l,a,u-1/3)*255,0)}return[r,i,o,e]},ns=s=>oa(s)?$i(s):ra(s)?es(s):aa(s)?ts(s):[0,0,0,1],qe=(s,n)=>Re(s)?n:s,yt=(s,n,u,f,t)=>{if(zn(s)){const e=()=>{const r=s(n,u,f);return isNaN(+r)?r||0:+r};return t&&(t.func=e),e()}else return s},fa=(s,n)=>s[Lr]?s[Zo]&&qi(s,n)?Ge.ATTRIBUTE:Ir.includes(n)||pn.get(n)?Ge.TRANSFORM:Bt(n,"--")?Ge.CSS_VAR:n in s.style?Ge.CSS:n in s?Ge.OBJECT:Ge.ATTRIBUTE:Ge.OBJECT,yo=(s,n,u)=>{const f=s.style[n];f&&u&&(u[n]=f);const t=f||getComputedStyle(s[Ui]||s).getPropertyValue(n);return t==="auto"?"0":t},nn=(s,n,u,f)=>{const t=Re(u)?fa(s,n):u;return t===Ge.OBJECT?s[n]||0:t===Ge.ATTRIBUTE?s.getAttribute(n):t===Ge.TRANSFORM?Ji(s,n,f):t===Ge.CSS_VAR?yo(s,n,f).trimStart():yo(s,n,f)},bo=(s,n,u)=>u==="-"?s-n:u==="+"?s+n:s*n,Pr=()=>({t:Ce.NUMBER,n:0,u:null,o:null,d:null,s:null}),ct=(s,n)=>{if(n.t=Ce.NUMBER,n.n=0,n.u=null,n.o=null,n.d=null,n.s=null,!s)return n;const u=+s;if(isNaN(u)){let f=s;f[1]==="="&&(n.o=f[0],f=f.slice(2));const t=f.includes(" ")?!1:Mi.exec(f);if(t)return n.t=Ce.UNIT,n.n=+t[1],n.u=t[2],n;if(n.o)return n.n=+f,n;if(Oi(f))return n.t=Ce.COLOR,n.d=ns(f),n;{const e=f.match(vo);return n.t=Ce.COMPLEX,n.d=e?e.map(Number):[],n.s=f.split(vo)||[],n}}else return n.n=u,n},To=(s,n)=>(n.t=s._valueType,n.n=s._toNumber,n.u=s._unit,n.o=null,n.d=Ze(s._toNumbers),n.s=Ze(s._strings),n),xt=Pr(),Wn={_rep:new WeakMap,_add:new Map},Br=(s,n,u="_rep")=>{const f=Wn[u];let t=f.get(s);return t||(t={},f.set(s,t)),t[n]?t[n]:t[n]={_head:null,_tail:null}},rs=(s,n)=>s._isOverridden||s._absoluteStartTime>n._absoluteStartTime,Pn=s=>{s._isOverlapped=1,s._isOverridden=1,s._changeDuration=Le,s._currentTime=Le},ca=(s,n)=>{const u=s._composition;if(u===tt.replace){const f=s._absoluteStartTime;Pt(n,s,rs,"_prevRep","_nextRep");const t=s._prevRep;if(t){const e=t.parent,r=t._absoluteStartTime+t._changeDuration;if(s.parent.id!==e.id&&e.iterationCount>1&&r+(e.duration-e.iterationDuration)>f){Pn(t);let a=t._prevRep;for(;a&&a.parent.id===e.id;)Pn(a),a=a._prevRep}const i=f-s._delay;if(r>i){const a=t._startTime,l=r-(a+t._updateDuration);t._changeDuration=i-l-a,t._currentTime=t._changeDuration,t._isOverlapped=1,t._changeDuration<Le&&Pn(t)}let o=!0;if(ze(e,a=>{a._isOverlapped||(o=!1)}),o){const a=e.parent;if(a){let l=!0;ze(a,c=>{c!==e&&ze(c,d=>{d._isOverlapped||(l=!1)})}),l&&a.cancel()}else e.cancel()}}}else if(u===tt.blend){const f=Br(s.target,s.property,"_add"),t=ji(Wn._add);let e=f._head;e||(e={...s},e._composition=tt.replace,e._updateDuration=Le,e._startTime=0,e._numbers=Ze(s._fromNumbers),e._number=0,e._next=null,e._prev=null,Pt(f,e),Pt(t,e));const r=s._toNumber;if(s._fromNumber=e._fromNumber-r,s._toNumber=0,s._numbers=Ze(s._fromNumbers),s._number=0,e._fromNumber=r,s._toNumbers){const i=Ze(s._toNumbers);i&&i.forEach((o,a)=>{s._fromNumbers[a]=e._fromNumbers[a]-o,s._toNumbers[a]=0}),e._fromNumbers=i}Pt(f,s,null,"_prevAdd","_nextAdd")}return s},os=s=>{const n=s._composition;if(n!==tt.none){const u=s.target,f=s.property,r=Wn._rep.get(u)[f];if(an(r,s,"_prevRep","_nextRep"),n===tt.blend){const i=Wn._add,o=i.get(u);if(!o)return;const a=o[f],l=Nt.animation;an(a,s,"_prevAdd","_nextAdd");const c=a._head;if(c&&c===a._tail){an(a,c,"_prevAdd","_nextAdd"),an(l,c);let d=!0;for(let h in o)if(o[h]._head){d=!1;break}d&&i.delete(u)}}}return s},So=s=>(s.paused=!0,s.began=!1,s.completed=!1,s),xr=s=>(s._cancelled&&(s._hasChildren?ze(s,xr):ze(s,n=>{n._composition!==tt.none&&ca(n,Br(n.target,n.property))}),s._cancelled=0),s);let as=0;class is extends sa{constructor(n={},u=null,f=0){super(0);const{id:t,delay:e,duration:r,reversed:i,alternate:o,loop:a,loopDelay:l,autoplay:c,frameRate:d,playbackRate:h,onComplete:v,onLoop:m,onPause:g,onBegin:R,onBeforeUpdate:A,onUpdate:U}=n,w=u?0:He._elapsedTime,T=u?u.defaults:Xe.defaults,I=zn(e)||Re(e)?T.delay:+e,C=zn(r)||Re(r)?1/0:+r,D=qe(a,T.loop),W=qe(l,T.loopDelay),O=D===!0||D===1/0||D<0?1/0:D+1;let ne=0;if(u)ne=f;else{let _=cn();He.paused&&(He.requestTick(_),_=He._elapsedTime),ne=_-He._startTime}this.id=Re(t)?++as:t,this.parent=u,this.duration=In((C+W)*O-W)||Le,this.backwards=!1,this.paused=!0,this.began=!1,this.completed=!1,this.onBegin=R||T.onBegin,this.onBeforeUpdate=A||T.onBeforeUpdate,this.onUpdate=U||T.onUpdate,this.onLoop=m||T.onLoop,this.onPause=g||T.onPause,this.onComplete=v||T.onComplete,this.iterationDuration=C,this.iterationCount=O,this._autoplay=u?!1:qe(c,T.autoplay),this._offset=ne,this._delay=I,this._loopDelay=W,this._iterationTime=0,this._currentIteration=0,this._resolve=rt,this._running=!1,this._reversed=+qe(i,T.reversed),this._reverse=this._reversed,this._cancelled=0,this._alternate=qe(o,T.alternate),this._prev=null,this._next=null,this._elapsedTime=w,this._startTime=w,this._lastTime=w,this._fps=qe(d,T.frameRate),this._speed=qe(h,T.playbackRate)}get cancelled(){return!!this._cancelled}set cancelled(n){n?this.cancel():this.reset(1).play()}get currentTime(){return Ye(Pe(this._currentTime,Xe.precision),-this._delay,this.duration)}set currentTime(n){const u=this.paused;this.pause().seek(+n),u||this.resume()}get iterationCurrentTime(){return Pe(this._iterationTime,Xe.precision)}set iterationCurrentTime(n){this.currentTime=this.iterationDuration*this._currentIteration+n}get progress(){return Ye(Pe(this._currentTime/this.duration,5),0,1)}set progress(n){this.currentTime=this.duration*n}get iterationProgress(){return Ye(Pe(this._iterationTime/this.iterationDuration,5),0,1)}set iterationProgress(n){const u=this.iterationDuration;this.currentTime=u*this._currentIteration+u*n}get currentIteration(){return this._currentIteration}set currentIteration(n){this.currentTime=this.iterationDuration*Ye(+n,0,this.iterationCount-1)}get reversed(){return!!this._reversed}set reversed(n){n?this.reverse():this.play()}get speed(){return super.speed}set speed(n){super.speed=n,this.resetTime()}reset(n=0){return xr(this),this._reversed&&!this._reverse&&(this.reversed=!1),this._iterationTime=this.iterationDuration,It(this,0,1,n,ot.FORCE),So(this),this._hasChildren&&ze(this,So),this}init(n=0){this.fps=this._fps,this.speed=this._speed,!n&&this._hasChildren&&It(this,this.duration,1,n,ot.FORCE),this.reset(n);const u=this._autoplay;return u===!0?this.resume():u&&!Re(u.linked)&&u.link(this),this}resetTime(){const n=1/(this._speed*He._speed);return this._startTime=cn()-(this._currentTime+this._delay)*n,this}pause(){return this.paused?this:(this.paused=!0,this.onPause(this),this)}resume(){return this.paused?(this.paused=!1,this.duration<=Le&&!this._hasChildren?It(this,Le,0,0,ot.FORCE):(this._running||(Pt(He,this),He._hasChildren=!0,this._running=!0),this.resetTime(),this._startTime-=12,He.wake()),this):this}restart(){return this.reset(0).resume()}seek(n,u=0,f=0){xr(this),this.completed=!1;const t=this.paused;return this.paused=!0,It(this,n+this._delay,~~u,~~f,ot.AUTO),t?this:this.resume()}alternate(){const n=this._reversed,u=this.iterationCount,f=this.iterationDuration,t=u===1/0?ia(qo/f):u;return this._reversed=+(this._alternate&&!(t%2)?n:!n),u===1/0?this.iterationProgress=this._reversed?1-this.iterationProgress:this.iterationProgress:this.seek(f*t-this._currentTime),this.resetTime(),this}play(){return this._reversed&&this.alternate(),this.resume()}reverse(){return this._reversed||this.alternate(),this.resume()}cancel(){return this._hasChildren?ze(this,n=>n.cancel(),!0):ze(this,os),this._cancelled=1,this.pause()}stretch(n){const u=this.duration;if(u===Gt(n))return this;const f=n/u,t=n<=Le;return this.duration=t?Le:Gt(In(Pe(u*f,12))),this.iterationDuration=t?Le:Gt(In(Pe(this.iterationDuration*f,12))),this._offset*=f,this._delay*=f,this._loopDelay*=f,this}revert(){It(this,0,1,0,ot.AUTO);const n=this._autoplay;return n&&n.linked&&n.linked===this&&n.revert(),this.cancel()}complete(){return this.seek(this.duration).cancel()}then(n=rt){const u=this.then,f=()=>{this.then=null,n(this),this.then=u,this._resolve=rt};return new Promise(t=>(this._resolve=()=>t(f()),this.completed&&this._resolve(),this))}}const jt=s=>s,da=(s,n,u)=>(((1-3*u+3*n)*s+(3*u-6*n))*s+3*n)*s,ss=(s,n,u)=>{let f=0,t=1,e,r,i=0;do r=f+(t-f)/2,e=da(r,n,u)-s,e>0?t=r:f=r;while(Ni(e)>1e-7&&++i<100);return r},ls=(s=.5,n=0,u=.5,f=1)=>s===n&&u===f?jt:t=>t===0||t===1?t:da(ss(t,s,u),n,f),us=(s=10,n)=>{const u=n?zi:ia;return f=>u(Ye(f,0,1)*s)*(1/s)},ha=(...s)=>{const n=s.length;if(!n)return jt;const u=n-1,f=s[0],t=s[u],e=[0],r=[An(f)];for(let i=1;i<u;i++){const o=s[i],a=Xn(o)?o.trim().split(" "):[o],l=a[0],c=a[1];e.push(Re(c)?i/u:An(c)/100),r.push(An(l))}return r.push(An(t)),e.push(1),function(o){for(let a=1,l=e.length;a<l;a++){const c=e[a];if(o<=c){const d=e[a-1],h=r[a-1];return h+(r[a]-h)*(o-d)/(c-d)}}return r[r.length-1]}},fs=(s=10,n=1)=>{const u=[0],f=s-1;for(let t=1;t<f;t++){const e=u[t-1],r=t/f,i=(t+1)/f,o=r+(i-r)*Math.random(),a=r*(1-n)+o*n;u.push(Ye(a,e,1))}return u.push(1),ha(...u)},cs=Or/2,wo=Or*2,rn=(s=1.68)=>n=>Lt(n,+s),xo={[Ct]:rn,Quad:rn(2),Cubic:rn(3),Quart:rn(4),Quint:rn(5),Sine:s=>1-Gi(s*cs),Circ:s=>1-Pi(1-s*s),Expo:s=>s?Lt(2,10*s-10):0,Bounce:s=>{let n,u=4;for(;s<((n=Lt(2,--u))-1)/11;);return 1/Lt(4,3-u)-7.5625*Lt((n*3-2)/22-s,2)},Back:(s=1.70158)=>n=>(+s+1)*n*n*n-+s*n*n,Elastic:(s=1,n=.3)=>{const u=Ye(+s,1,10),f=Ye(+n,Le,2),t=f/wo*Wi(1/u),e=wo/f;return r=>r===0||r===1?r:-u*Lt(2,-10*(1-r))*Bi((1-r-t)*e)}},Ur={in:s=>n=>s(n),out:s=>n=>1-s(1-n),inOut:s=>n=>n<.5?s(n*2)/2:1-s(n*-2+2)/2,outIn:s=>n=>n<.5?(1-s(1-n*2))/2:(s(n*2-1)+1)/2},ds=(s,n,u)=>{if(u[s])return u[s];if(s.indexOf("(")<=-1){const t=Ur[s]||s.includes("Back")||s.includes("Elastic")?n[s]():n[s];return t?u[s]=t:jt}else{const f=s.slice(0,-1).split("("),t=n[f[0]];return t?u[s]=t(...f[1].split(",")):jt}},hs=(()=>{const s={linear:ha,irregular:fs,steps:us,cubicBezier:ls};for(let n in Ur)for(let u in xo){const f=xo[u],t=Ur[n];s[n+u]=u===Ct||u==="Back"||u==="Elastic"?(e,r)=>t(f(e,r)):t(f)}return s})(),ps={linear:jt},Uo=s=>zn(s)?s:Xn(s)?ds(s,hs,ps):jt,Co={},vs=(s,n,u)=>{if(u===Ge.TRANSFORM){const f=pn.get(s);return f||s}else if(u===Ge.CSS||u===Ge.ATTRIBUTE&&na(n)&&s in n.style){const f=Co[s];if(f)return f;{const t=s&&Li(s);return Co[s]=t,t}}else return s},_r={deg:1,rad:180/Or,turn:360},ko={},ms=(s,n,u,f=!1)=>{const t=n.u,e=n.n;if(n.t===Ce.UNIT&&t===u)return n;const r=e+t+u,i=ko[r];if(!Re(i)&&!f)n.n=i;else{let o;if(t in _r)o=e*_r[t]/_r[u];else{const l=s.cloneNode(),c=s.parentNode,d=c&&c!==Wt?c:Wt.body;d.appendChild(l);const h=l.style;h.width=100+t;const v=l.offsetWidth||100;h.width=100+u;const m=l.offsetWidth||100,g=v/m;d.removeChild(l),o=g*e}n.n=o,ko[r]=o}return n.t,Ce.UNIT,n.u=u,n},pa=s=>{if(s._hasChildren)ze(s,pa,!0);else{const n=s;n.pause(),ze(n,u=>{const f=u.property,t=u.target;if(t[Lr]){const e=t.style,r=n._inlineStyles[f];if(u._tweenType===Ge.TRANSFORM){const i=t[jn];if(Re(r)||r===Ct?delete i[f]:i[f]=r,u._renderTransforms)if(!Object.keys(i).length)e.removeProperty("transform");else{let o=Ct;for(let a in i)o+=$o[a]+i[a]+") ";e.transform=o}}else Re(r)||r===Ct?e.removeProperty(f):e[f]=r;n._tail===u&&n.targets.forEach(i=>{i.getAttribute&&i.getAttribute("style")===Ct&&i.removeAttribute("style")})}})}return s},be=Pr(),we=Pr(),Dn={func:null},Fn=[null],Et=[null,null],Mn={to:null};let gs=0,bt,dt;const _s=(s,n)=>{const u={};if(dn(s)){const f=[].concat(...s.map(t=>Object.keys(t))).filter(Ln);for(let t=0,e=f.length;t<e;t++){const r=f[t],i=s.map(o=>{const a={};for(let l in o){const c=o[l];Ln(l)?l===r&&(a.to=c):a[l]=c}return a});u[r]=i}}else{const f=qe(n.duration,Xe.defaults.duration);Object.keys(s).map(e=>({o:parseFloat(e)/100,p:s[e]})).sort((e,r)=>e.o-r.o).forEach(e=>{const r=e.o,i=e.p;for(let o in i)if(Ln(o)){let a=u[o];a||(a=u[o]=[]);const l=r*f;let c=a.length,d=a[c-1];const h={to:i[o]};let v=0;for(let m=0;m<c;m++)v+=a[m].duration;c===1&&(h.from=d.to),i.ease&&(h.ease=i.ease),h.duration=l-(c?v:0),a.push(h)}return e});for(let e in u){const r=u[e];let i;for(let o=0,a=r.length;o<a;o++){const l=r[o],c=l.ease;l.ease=i||void 0,i=c}r[0].duration||r.shift()}}return u};class ys extends is{constructor(n,u,f,t,e=!1,r=0,i=0){super(u,f,t);const o=Qi(n),a=o.length,l=u.keyframes,c=l?Vi(_s(l,u),u):u,{delay:d,duration:h,ease:v,playbackEase:m,modifier:g,composition:R,onRender:A}=c,U=f?f.defaults:Xe.defaults,w=qe(m,U.playbackEase),T=w?Uo(w):null,I=!Re(v)&&!Re(v.ease),C=I?v.ease:qe(v,T?"linear":U.ease),D=I?v.duration:qe(h,U.duration),W=qe(d,U.delay),O=g||U.modifier,ne=Re(R)&&a>=Vt?tt.none:Re(R)?U.composition:R,_={},P=this._offset+(f?f._offset:0);let k=NaN,H=NaN,V=0,ae=0;for(let ie=0;ie<a;ie++){const b=o[ie],M=r||ie,p=i||a;let S=NaN,F=NaN;for(let E in c)if(Ln(E)){const x=fa(b,E),G=vs(E,b,x);let L=c[E];const z=dn(L);if(e&&!z&&(Et[0]=L,Et[1]=L,L=Et),z){const K=L.length,X=!vr(L[0]);K===2&&X?(Mn.to=L,Fn[0]=Mn,bt=Fn):K>2&&X?(bt=[],L.forEach((Y,Q)=>{Q?Q===1?(Et[1]=Y,bt.push(Et)):bt.push(Y):Et[0]=Y})):bt=L}else Fn[0]=L,bt=Fn;let Z=null,re=null,J=NaN,y=0,j=0;for(let K=bt.length;j<K;j++){const X=bt[j];vr(X)?dt=X:(Mn.to=X,dt=Mn),Dn.func=null;const Y=yt(dt.to,b,M,p,Dn);let Q;vr(Y)&&!Re(Y.to)?(dt=Y,Q=Y.to):Q=Y;const N=yt(dt.from,b,M,p),q=dt.ease,te=!Re(q)&&!Re(q.ease),B=te?q.ease:q||C,se=te?q.duration:yt(qe(dt.duration,K>1?yt(D,b,M,p)/K:D),b,M,p),ee=yt(qe(dt.delay,j?0:W),b,M,p),oe=yt(qe(dt.composition,ne),b,M,p),$=Ii(oe)?oe:tt[oe],Se=dt.modifier||O,ue=!Re(N),le=!Re(Q),ce=dn(Q),me=ce||ue&&le,ke=re?y+ee:ee,Fe=P+ke;!ae&&(ue||ce)&&(ae=1);let he=re;if($!==tt.none){Z||(Z=Br(b,G));let pe=Z._head;for(;pe&&!pe._isOverridden&&pe._absoluteStartTime<=Fe;)if(he=pe,pe=pe._nextRep,pe&&pe._absoluteStartTime>=Fe)for(;pe;)Pn(pe),pe=pe._nextRep}if(me?(ct(ce?yt(Q[0],b,M,p):N,be),ct(ce?yt(Q[1],b,M,p,Dn):Q,we),be.t===Ce.NUMBER&&(he?he._valueType===Ce.UNIT&&(be.t=Ce.UNIT,be.u=he._unit):(ct(nn(b,G,x,_),xt),xt.t===Ce.UNIT&&(be.t=Ce.UNIT,be.u=xt.u)))):(le?ct(Q,we):re?To(re,we):ct(f&&he&&he.parent.parent===f?he._value:nn(b,G,x,_),we),ue?ct(N,be):re?To(re,be):ct(f&&he&&he.parent.parent===f?he._value:nn(b,G,x,_),be)),be.o&&(be.n=bo(he?he._toNumber:ct(nn(b,G,x,_),xt).n,be.n,be.o)),we.o&&(we.n=bo(be.n,we.n,we.o)),be.t!==we.t){if(be.t===Ce.COMPLEX||we.t===Ce.COMPLEX){const pe=be.t===Ce.COMPLEX?be:we,_e=be.t===Ce.COMPLEX?we:be;_e.t=Ce.COMPLEX,_e.s=Ze(pe.s),_e.d=pe.d.map(()=>_e.n)}else if(be.t===Ce.UNIT||we.t===Ce.UNIT){const pe=be.t===Ce.UNIT?be:we,_e=be.t===Ce.UNIT?we:be;_e.t=Ce.UNIT,_e.u=pe.u}else if(be.t===Ce.COLOR||we.t===Ce.COLOR){const pe=be.t===Ce.COLOR?be:we,_e=be.t===Ce.COLOR?we:be;_e.t=Ce.COLOR,_e.s=pe.s,_e.d=[0,0,0,1]}}if(be.u!==we.u){let pe=we.u?be:we;pe=ms(b,pe,we.u?we.u:be.u,!1)}if(we.d&&be.d&&we.d.length!==be.d.length){const pe=be.d.length>we.d.length?be:we,_e=pe===be?we:be;_e.d=pe.d.map((Ne,Ae)=>Re(_e.d[Ae])?0:_e.d[Ae]),_e.s=Ze(pe.s)}const ge=Pe(+se||Le,12),fe={parent:this,id:gs++,property:G,target:b,_value:null,_func:Dn.func,_ease:Uo(B),_fromNumbers:Ze(be.d),_toNumbers:Ze(we.d),_strings:Ze(we.s),_fromNumber:be.n,_toNumber:we.n,_numbers:Ze(be.d),_number:be.n,_unit:we.u,_modifier:Se,_currentTime:0,_startTime:ke,_delay:+ee,_updateDuration:ge,_changeDuration:ge,_absoluteStartTime:Fe,_tweenType:x,_valueType:we.t,_composition:$,_isOverlapped:0,_isOverridden:0,_renderTransforms:0,_prevRep:null,_nextRep:null,_prevAdd:null,_nextAdd:null,_prev:null,_next:null};$!==tt.none&&ca(fe,Z),isNaN(J)&&(J=fe._startTime),y=Pe(ke+ge,12),re=fe,V++,Pt(this,fe)}(isNaN(H)||J<H)&&(H=J),(isNaN(k)||y>k)&&(k=y),x===Ge.TRANSFORM&&(S=V-j,F=V)}if(!isNaN(S)){let E=0;ze(this,x=>{E>=S&&E<F&&(x._renderTransforms=1,x._composition===tt.blend&&ze(Nt.animation,G=>{G.id===x.id&&(G._renderTransforms=1)})),E++})}}a||console.warn("No target found. Make sure the element you're trying to animate is accessible before creating your animation."),H?(ze(this,ie=>{ie._startTime-ie._delay||(ie._delay-=H),ie._startTime-=H}),k-=H):H=0,k||(k=Le,this.iterationCount=0),this.targets=o,this.duration=k===Le?Le:In((k+this._loopDelay)*this.iterationCount-this._loopDelay)||Le,this.onRender=A||U.onRender,this._ease=T,this._delay=H,this.iterationDuration=k,this._inlineStyles=_,!this._autoplay&&ae&&this.onRender(this)}stretch(n){const u=this.duration;if(u===Gt(n))return this;const f=n/u;return ze(this,t=>{t._updateDuration=Gt(Pe(t._updateDuration*f,12)),t._changeDuration=Gt(Pe(t._changeDuration*f,12)),t._currentTime*=f,t._startTime*=f,t._absoluteStartTime*=f}),super.stretch(n)}refresh(){return ze(this,n=>{const u=nn(n.target,n.property,n._tweenType);ct(u,xt),n._fromNumbers=Ze(xt.d),n._fromNumber=xt.n,n._func&&(ct(n._func(),we),n._toNumbers=Ze(we.d),n._strings=Ze(we.s),n._toNumber=we.n)}),this}revert(){return super.revert(),pa(this)}then(n){return super.then(n)}}const Ao=(s,n)=>new ys(s,n,null,0,!1).init(),bs=["x","y","z"];[...bs,...Ir.filter(s=>["X","Y","Z"].some(n=>s.endsWith(n)))];ht&&(Re(CSS)||Object.hasOwnProperty.call(CSS,"registerProperty"));function Ts(){var s=Object.create(null);function n(t,e){var r=t.id,i=t.name,o=t.dependencies;o===void 0&&(o=[]);var a=t.init;a===void 0&&(a=function(){});var l=t.getTransferables;if(l===void 0&&(l=null),!s[r])try{o=o.map(function(d){return d&&d.isWorkerModule&&(n(d,function(h){if(h instanceof Error)throw h}),d=s[d.id].value),d}),a=f("<"+i+">.init",a),l&&(l=f("<"+i+">.getTransferables",l));var c=null;typeof a=="function"?c=a.apply(void 0,o):console.error("worker module init function failed to rehydrate"),s[r]={id:r,value:c,getTransferables:l},e(c)}catch(d){d&&d.noLog||console.error(d),e(d)}}function u(t,e){var r,i=t.id,o=t.args;(!s[i]||typeof s[i].value!="function")&&e(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=s[i]).value.apply(r,o);a&&typeof a.then=="function"?a.then(l,function(c){return e(c instanceof Error?c:new Error(""+c))}):l(a)}catch(c){e(c)}function l(c){try{var d=s[i].getTransferables&&s[i].getTransferables(c);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),e(c,d)}catch(h){console.error(h),e(h)}}}function f(t,e){var r=void 0;self.troikaDefine=function(o){return r=o};var i=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(i)}catch(o){console.error(o)}return URL.revokeObjectURL(i),delete self.troikaDefine,r}self.addEventListener("message",function(t){var e=t.data,r=e.messageId,i=e.action,o=e.data;try{i==="registerModule"&&n(o,function(a){a instanceof Error?postMessage({messageId:r,success:!1,error:a.message}):postMessage({messageId:r,success:!0,result:{isCallable:typeof a=="function"}})}),i==="callModule"&&u(o,function(a,l){a instanceof Error?postMessage({messageId:r,success:!1,error:a.message}):postMessage({messageId:r,success:!0,result:a},l||void 0)})}catch(a){postMessage({messageId:r,success:!1,error:a.stack})}})}function Ss(s){var n=function(){for(var u=[],f=arguments.length;f--;)u[f]=arguments[f];return n._getInitResult().then(function(t){if(typeof t=="function")return t.apply(void 0,u);throw new Error("Worker module function was called but `init` did not return a callable function")})};return n._getInitResult=function(){var u=s.dependencies,f=s.init;u=Array.isArray(u)?u.map(function(e){return e&&(e=e.onMainThread||e,e._getInitResult&&(e=e._getInitResult())),e}):[];var t=Promise.all(u).then(function(e){return f.apply(null,e)});return n._getInitResult=function(){return t},t},n}var va=function(){var s=!1;if(typeof window<"u"&&typeof window.document<"u")try{var n=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));n.terminate(),s=!0}catch(u){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+u.message+"]")}return va=function(){return s},s},ws=0,xs=0,yr=!1,sn=Object.create(null),ln=Object.create(null),Cr=Object.create(null);function Xt(s){if((!s||typeof s.init!="function")&&!yr)throw new Error("requires `options.init` function");var n=s.dependencies,u=s.init,f=s.getTransferables,t=s.workerId,e=Ss(s);t==null&&(t="#default");var r="workerModule"+ ++ws,i=s.name||r,o=null;n=n&&n.map(function(l){return typeof l=="function"&&!l.workerModuleData&&(yr=!0,l=Xt({workerId:t,name:"<"+i+"> function dependency: "+l.name,init:`function(){return (
`+Bn(l)+`
)}`}),yr=!1),l&&l.workerModuleData&&(l=l.workerModuleData),l});function a(){for(var l=[],c=arguments.length;c--;)l[c]=arguments[c];if(!va())return e.apply(void 0,l);if(!o){o=Do(t,"registerModule",a.workerModuleData);var d=function(){o=null,ln[t].delete(d)};(ln[t]||(ln[t]=new Set)).add(d)}return o.then(function(h){var v=h.isCallable;if(v)return Do(t,"callModule",{id:r,args:l});throw new Error("Worker module function was called but `init` did not return a callable function")})}return a.workerModuleData={isWorkerModule:!0,id:r,name:i,dependencies:n,init:Bn(u),getTransferables:f&&Bn(f)},a.onMainThread=e,a}function Us(s){ln[s]&&ln[s].forEach(function(n){n()}),sn[s]&&(sn[s].terminate(),delete sn[s])}function Bn(s){var n=s.toString();return!/^function/.test(n)&&/^\w+\s*\(/.test(n)&&(n="function "+n),n}function Cs(s){var n=sn[s];if(!n){var u=Bn(Ts);n=sn[s]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+s.replace(/\*/g,"")+` **/

;(`+u+")()"],{type:"application/javascript"}))),n.onmessage=function(f){var t=f.data,e=t.messageId,r=Cr[e];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete Cr[e],r(t)}}return n}function Do(s,n,u){return new Promise(function(f,t){var e=++xs;Cr[e]=function(r){r.success?f(r.result):t(new Error("Error in worker "+n+" call: "+r.error))},Cs(s).postMessage({messageId:e,action:n,data:u})})}function ma(){var s=function(n){function u(b,M,p,S,F,E,x,G){var L=1-x;G.x=L*L*b+2*L*x*p+x*x*F,G.y=L*L*M+2*L*x*S+x*x*E}function f(b,M,p,S,F,E,x,G,L,z){var Z=1-L;z.x=Z*Z*Z*b+3*Z*Z*L*p+3*Z*L*L*F+L*L*L*x,z.y=Z*Z*Z*M+3*Z*Z*L*S+3*Z*L*L*E+L*L*L*G}function t(b,M){for(var p=/([MLQCZ])([^MLQCZ]*)/g,S,F,E,x,G;S=p.exec(b);){var L=S[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(z){return parseFloat(z)});switch(S[1]){case"M":x=F=L[0],G=E=L[1];break;case"L":(L[0]!==x||L[1]!==G)&&M("L",x,G,x=L[0],G=L[1]);break;case"Q":{M("Q",x,G,x=L[2],G=L[3],L[0],L[1]);break}case"C":{M("C",x,G,x=L[4],G=L[5],L[0],L[1],L[2],L[3]);break}case"Z":(x!==F||G!==E)&&M("L",x,G,F,E);break}}}function e(b,M,p){p===void 0&&(p=16);var S={x:0,y:0};t(b,function(F,E,x,G,L,z,Z,re,J){switch(F){case"L":M(E,x,G,L);break;case"Q":{for(var y=E,j=x,K=1;K<p;K++)u(E,x,z,Z,G,L,K/(p-1),S),M(y,j,S.x,S.y),y=S.x,j=S.y;break}case"C":{for(var X=E,Y=x,Q=1;Q<p;Q++)f(E,x,z,Z,re,J,G,L,Q/(p-1),S),M(X,Y,S.x,S.y),X=S.x,Y=S.y;break}}})}var r="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",i="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",o=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(b,M){var p=b.getContext?b.getContext("webgl",a):b,S=o.get(p);if(!S){let Z=function(X){var Y=E[X];if(!Y&&(Y=E[X]=p.getExtension(X),!Y))throw new Error(X+" not supported");return Y},re=function(X,Y){var Q=p.createShader(Y);return p.shaderSource(Q,X),p.compileShader(Q),Q},J=function(X,Y,Q,N){if(!x[X]){var q={},te={},B=p.createProgram();p.attachShader(B,re(Y,p.VERTEX_SHADER)),p.attachShader(B,re(Q,p.FRAGMENT_SHADER)),p.linkProgram(B),x[X]={program:B,transaction:function(ee){p.useProgram(B),ee({setUniform:function($,Se){for(var ue=[],le=arguments.length-2;le-- >0;)ue[le]=arguments[le+2];var ce=te[Se]||(te[Se]=p.getUniformLocation(B,Se));p["uniform"+$].apply(p,[ce].concat(ue))},setAttribute:function($,Se,ue,le,ce){var me=q[$];me||(me=q[$]={buf:p.createBuffer(),loc:p.getAttribLocation(B,$),data:null}),p.bindBuffer(p.ARRAY_BUFFER,me.buf),p.vertexAttribPointer(me.loc,Se,p.FLOAT,!1,0,0),p.enableVertexAttribArray(me.loc),F?p.vertexAttribDivisor(me.loc,le):Z("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(me.loc,le),ce!==me.data&&(p.bufferData(p.ARRAY_BUFFER,ce,ue),me.data=ce)}})}}}x[X].transaction(N)},y=function(X,Y){L++;try{p.activeTexture(p.TEXTURE0+L);var Q=G[X];Q||(Q=G[X]=p.createTexture(),p.bindTexture(p.TEXTURE_2D,Q),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST)),p.bindTexture(p.TEXTURE_2D,Q),Y(Q,L)}finally{L--}},j=function(X,Y,Q){var N=p.createFramebuffer();z.push(N),p.bindFramebuffer(p.FRAMEBUFFER,N),p.activeTexture(p.TEXTURE0+Y),p.bindTexture(p.TEXTURE_2D,X),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,X,0);try{Q(N)}finally{p.deleteFramebuffer(N),p.bindFramebuffer(p.FRAMEBUFFER,z[--z.length-1]||null)}},K=function(){E={},x={},G={},L=-1,z.length=0};var F=typeof WebGL2RenderingContext<"u"&&p instanceof WebGL2RenderingContext,E={},x={},G={},L=-1,z=[];p.canvas.addEventListener("webglcontextlost",function(X){K(),X.preventDefault()},!1),o.set(p,S={gl:p,isWebGL2:F,getExtension:Z,withProgram:J,withTexture:y,withTextureFramebuffer:j,handleContextLoss:K})}M(S)}function c(b,M,p,S,F,E,x,G){x===void 0&&(x=15),G===void 0&&(G=null),l(b,function(L){var z=L.gl,Z=L.withProgram,re=L.withTexture;re("copy",function(J,y){z.texImage2D(z.TEXTURE_2D,0,z.RGBA,F,E,0,z.RGBA,z.UNSIGNED_BYTE,M),Z("copy",r,i,function(j){var K=j.setUniform,X=j.setAttribute;X("aUV",2,z.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),K("1i","image",y),z.bindFramebuffer(z.FRAMEBUFFER,G||null),z.disable(z.BLEND),z.colorMask(x&8,x&4,x&2,x&1),z.viewport(p,S,F,E),z.scissor(p,S,F,E),z.drawArrays(z.TRIANGLES,0,3)})})})}function d(b,M,p){var S=b.width,F=b.height;l(b,function(E){var x=E.gl,G=new Uint8Array(S*F*4);x.readPixels(0,0,S,F,x.RGBA,x.UNSIGNED_BYTE,G),b.width=M,b.height=p,c(x,G,0,0,S,F)})}var h=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:c,resizeWebGLCanvasWithoutClearing:d});function v(b,M,p,S,F,E){E===void 0&&(E=1);var x=new Uint8Array(b*M),G=S[2]-S[0],L=S[3]-S[1],z=[];e(p,function(X,Y,Q,N){z.push({x1:X,y1:Y,x2:Q,y2:N,minX:Math.min(X,Q),minY:Math.min(Y,N),maxX:Math.max(X,Q),maxY:Math.max(Y,N)})}),z.sort(function(X,Y){return X.maxX-Y.maxX});for(var Z=0;Z<b;Z++)for(var re=0;re<M;re++){var J=j(S[0]+G*(Z+.5)/b,S[1]+L*(re+.5)/M),y=Math.pow(1-Math.abs(J)/F,E)/2;J<0&&(y=1-y),y=Math.max(0,Math.min(255,Math.round(y*255))),x[re*b+Z]=y}return x;function j(X,Y){for(var Q=1/0,N=1/0,q=z.length;q--;){var te=z[q];if(te.maxX+N<=X)break;if(X+N>te.minX&&Y-N<te.maxY&&Y+N>te.minY){var B=R(X,Y,te.x1,te.y1,te.x2,te.y2);B<Q&&(Q=B,N=Math.sqrt(Q))}}return K(X,Y)&&(N=-N),N}function K(X,Y){for(var Q=0,N=z.length;N--;){var q=z[N];if(q.maxX<=X)break;var te=q.y1>Y!=q.y2>Y&&X<(q.x2-q.x1)*(Y-q.y1)/(q.y2-q.y1)+q.x1;te&&(Q+=q.y1<q.y2?1:-1)}return Q!==0}}function m(b,M,p,S,F,E,x,G,L,z){E===void 0&&(E=1),G===void 0&&(G=0),L===void 0&&(L=0),z===void 0&&(z=0),g(b,M,p,S,F,E,x,null,G,L,z)}function g(b,M,p,S,F,E,x,G,L,z,Z){E===void 0&&(E=1),L===void 0&&(L=0),z===void 0&&(z=0),Z===void 0&&(Z=0);for(var re=v(b,M,p,S,F,E),J=new Uint8Array(re.length*4),y=0;y<re.length;y++)J[y*4+Z]=re[y];c(x,J,L,z,b,M,1<<3-Z,G)}function R(b,M,p,S,F,E){var x=F-p,G=E-S,L=x*x+G*G,z=L?Math.max(0,Math.min(1,((b-p)*x+(M-S)*G)/L)):0,Z=b-(p+z*x),re=M-(S+z*G);return Z*Z+re*re}var A=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:m,generateIntoFramebuffer:g}),U="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",w="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",T="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",I=new Float32Array([0,0,2,0,0,2]),C=null,D=!1,W={},O=new WeakMap;function ne(b){if(!D&&!H(b))throw new Error("WebGL generation not supported")}function _(b,M,p,S,F,E,x){if(E===void 0&&(E=1),x===void 0&&(x=null),!x&&(x=C,!x)){var G=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!G)throw new Error("OffscreenCanvas or DOM canvas not supported");x=C=G.getContext("webgl",{depth:!1})}ne(x);var L=new Uint8Array(b*M*4);l(x,function(J){var y=J.gl,j=J.withTexture,K=J.withTextureFramebuffer;j("readable",function(X,Y){y.texImage2D(y.TEXTURE_2D,0,y.RGBA,b,M,0,y.RGBA,y.UNSIGNED_BYTE,null),K(X,Y,function(Q){k(b,M,p,S,F,E,y,Q,0,0,0),y.readPixels(0,0,b,M,y.RGBA,y.UNSIGNED_BYTE,L)})})});for(var z=new Uint8Array(b*M),Z=0,re=0;Z<L.length;Z+=4)z[re++]=L[Z];return z}function P(b,M,p,S,F,E,x,G,L,z){E===void 0&&(E=1),G===void 0&&(G=0),L===void 0&&(L=0),z===void 0&&(z=0),k(b,M,p,S,F,E,x,null,G,L,z)}function k(b,M,p,S,F,E,x,G,L,z,Z){E===void 0&&(E=1),L===void 0&&(L=0),z===void 0&&(z=0),Z===void 0&&(Z=0),ne(x);var re=[];e(p,function(J,y,j,K){re.push(J,y,j,K)}),re=new Float32Array(re),l(x,function(J){var y=J.gl,j=J.isWebGL2,K=J.getExtension,X=J.withProgram,Y=J.withTexture,Q=J.withTextureFramebuffer,N=J.handleContextLoss;if(Y("rawDistances",function(q,te){(b!==q._lastWidth||M!==q._lastHeight)&&y.texImage2D(y.TEXTURE_2D,0,y.RGBA,q._lastWidth=b,q._lastHeight=M,0,y.RGBA,y.UNSIGNED_BYTE,null),X("main",U,w,function(B){var se=B.setAttribute,ee=B.setUniform,oe=!j&&K("ANGLE_instanced_arrays"),$=!j&&K("EXT_blend_minmax");se("aUV",2,y.STATIC_DRAW,0,I),se("aLineSegment",4,y.DYNAMIC_DRAW,1,re),ee.apply(void 0,["4f","uGlyphBounds"].concat(S)),ee("1f","uMaxDistance",F),ee("1f","uExponent",E),Q(q,te,function(Se){y.enable(y.BLEND),y.colorMask(!0,!0,!0,!0),y.viewport(0,0,b,M),y.scissor(0,0,b,M),y.blendFunc(y.ONE,y.ONE),y.blendEquationSeparate(y.FUNC_ADD,j?y.MAX:$.MAX_EXT),y.clear(y.COLOR_BUFFER_BIT),j?y.drawArraysInstanced(y.TRIANGLES,0,3,re.length/4):oe.drawArraysInstancedANGLE(y.TRIANGLES,0,3,re.length/4)})}),X("post",r,T,function(B){B.setAttribute("aUV",2,y.STATIC_DRAW,0,I),B.setUniform("1i","tex",te),y.bindFramebuffer(y.FRAMEBUFFER,G),y.disable(y.BLEND),y.colorMask(Z===0,Z===1,Z===2,Z===3),y.viewport(L,z,b,M),y.scissor(L,z,b,M),y.drawArrays(y.TRIANGLES,0,3)})}),y.isContextLost())throw N(),new Error("webgl context lost")})}function H(b){var M=!b||b===C?W:b.canvas||b,p=O.get(M);if(p===void 0){D=!0;var S=null;try{var F=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],E=_(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,b);p=E&&F.length===E.length&&E.every(function(x,G){return x===F[G]}),p||(S="bad trial run results",console.info(F,E))}catch(x){p=!1,S=x.message}S&&console.warn("WebGL SDF generation not supported:",S),D=!1,O.set(M,p)}return p}var V=Object.freeze({__proto__:null,generate:_,generateIntoCanvas:P,generateIntoFramebuffer:k,isSupported:H});function ae(b,M,p,S,F,E){F===void 0&&(F=Math.max(S[2]-S[0],S[3]-S[1])/2),E===void 0&&(E=1);try{return _.apply(V,arguments)}catch(x){return console.info("WebGL SDF generation failed, falling back to JS",x),v.apply(A,arguments)}}function ie(b,M,p,S,F,E,x,G,L,z){F===void 0&&(F=Math.max(S[2]-S[0],S[3]-S[1])/2),E===void 0&&(E=1),G===void 0&&(G=0),L===void 0&&(L=0),z===void 0&&(z=0);try{return P.apply(V,arguments)}catch(Z){return console.info("WebGL SDF generation failed, falling back to JS",Z),m.apply(A,arguments)}}return n.forEachPathCommand=t,n.generate=ae,n.generateIntoCanvas=ie,n.javascript=A,n.pathToLineSegments=e,n.webgl=V,n.webglUtils=h,Object.defineProperty(n,"__esModule",{value:!0}),n}({});return s}function ks(){var s=function(n){var u={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},f={},t={};f.L=1,t[1]="L",Object.keys(u).forEach(function(N,q){f[N]=1<<q+1,t[f[N]]=N}),Object.freeze(f);var e=f.LRI|f.RLI|f.FSI,r=f.L|f.R|f.AL,i=f.B|f.S|f.WS|f.ON|f.FSI|f.LRI|f.RLI|f.PDI,o=f.BN|f.RLE|f.LRE|f.RLO|f.LRO|f.PDF,a=f.S|f.WS|f.B|e|f.PDI|o,l=null;function c(){if(!l){l=new Map;var N=function(te){if(u.hasOwnProperty(te)){var B=0;u[te].split(",").forEach(function(se){var ee=se.split("+"),oe=ee[0],$=ee[1];oe=parseInt(oe,36),$=$?parseInt($,36):0,l.set(B+=oe,f[te]);for(var Se=0;Se<$;Se++)l.set(++B,f[te])})}};for(var q in u)N(q)}}function d(N){return c(),l.get(N.codePointAt(0))||f.L}function h(N){return t[d(N)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(N,q){var te=36,B=0,se=new Map,ee=q&&new Map,oe;return N.split(",").forEach(function $(Se){if(Se.indexOf("+")!==-1)for(var ue=+Se;ue--;)$(oe);else{oe=Se;var le=Se.split(">"),ce=le[0],me=le[1];ce=String.fromCodePoint(B+=parseInt(ce,te)),me=String.fromCodePoint(B+=parseInt(me,te)),se.set(ce,me),q&&ee.set(me,ce)}}),{map:se,reverseMap:ee}}var g,R,A;function U(){if(!g){var N=m(v.pairs,!0),q=N.map,te=N.reverseMap;g=q,R=te,A=m(v.canonical,!1).map}}function w(N){return U(),g.get(N)||null}function T(N){return U(),R.get(N)||null}function I(N){return U(),A.get(N)||null}var C=f.L,D=f.R,W=f.EN,O=f.ES,ne=f.ET,_=f.AN,P=f.CS,k=f.B,H=f.S,V=f.ON,ae=f.BN,ie=f.NSM,b=f.AL,M=f.LRO,p=f.RLO,S=f.LRE,F=f.RLE,E=f.PDF,x=f.LRI,G=f.RLI,L=f.FSI,z=f.PDI;function Z(N,q){for(var te=125,B=new Uint32Array(N.length),se=0;se<N.length;se++)B[se]=d(N[se]);var ee=new Map;function oe($e,it){var et=B[$e];B[$e]=it,ee.set(et,ee.get(et)-1),et&i&&ee.set(i,ee.get(i)-1),ee.set(it,(ee.get(it)||0)+1),it&i&&ee.set(i,(ee.get(i)||0)+1)}for(var $=new Uint8Array(N.length),Se=new Map,ue=[],le=null,ce=0;ce<N.length;ce++)le||ue.push(le={start:ce,end:N.length-1,level:q==="rtl"?1:q==="ltr"?0:io(ce,!1)}),B[ce]&k&&(le.end=ce,le=null);for(var me=F|S|p|M|e|z|E|k,ke=function($e){return $e+($e&1?1:2)},Fe=function($e){return $e+($e&1?2:1)},he=0;he<ue.length;he++){le=ue[he];var ge=[{_level:le.level,_override:0,_isolate:0}],fe=void 0,pe=0,_e=0,Ne=0;ee.clear();for(var Ae=le.start;Ae<=le.end;Ae++){var ve=B[Ae];if(fe=ge[ge.length-1],ee.set(ve,(ee.get(ve)||0)+1),ve&i&&ee.set(i,(ee.get(i)||0)+1),ve&me)if(ve&(F|S)){$[Ae]=fe._level;var Ue=(ve===F?Fe:ke)(fe._level);Ue<=te&&!pe&&!_e?ge.push({_level:Ue,_override:0,_isolate:0}):pe||_e++}else if(ve&(p|M)){$[Ae]=fe._level;var ut=(ve===p?Fe:ke)(fe._level);ut<=te&&!pe&&!_e?ge.push({_level:ut,_override:ve&p?D:C,_isolate:0}):pe||_e++}else if(ve&e){ve&L&&(ve=io(Ae+1,!0)===1?G:x),$[Ae]=fe._level,fe._override&&oe(Ae,fe._override);var De=(ve===G?Fe:ke)(fe._level);De<=te&&pe===0&&_e===0?(Ne++,ge.push({_level:De,_override:0,_isolate:1,_isolInitIndex:Ae})):pe++}else if(ve&z){if(pe>0)pe--;else if(Ne>0){for(_e=0;!ge[ge.length-1]._isolate;)ge.pop();var Te=ge[ge.length-1]._isolInitIndex;Te!=null&&(Se.set(Te,Ae),Se.set(Ae,Te)),ge.pop(),Ne--}fe=ge[ge.length-1],$[Ae]=fe._level,fe._override&&oe(Ae,fe._override)}else ve&E?(pe===0&&(_e>0?_e--:!fe._isolate&&ge.length>1&&(ge.pop(),fe=ge[ge.length-1])),$[Ae]=fe._level):ve&k&&($[Ae]=le.level);else $[Ae]=fe._level,fe._override&&ve!==ae&&oe(Ae,fe._override)}for(var Be=[],Ee=null,ye=le.start;ye<=le.end;ye++){var Me=B[ye];if(!(Me&o)){var We=$[ye],xe=Me&e,Ie=Me===z;Ee&&We===Ee._level?(Ee._end=ye,Ee._endsWithIsolInit=xe):Be.push(Ee={_start:ye,_end:ye,_level:We,_startsWithPDI:Ie,_endsWithIsolInit:xe})}}for(var Je=[],Ve=0;Ve<Be.length;Ve++){var pt=Be[Ve];if(!pt._startsWithPDI||pt._startsWithPDI&&!Se.has(pt._start)){for(var mt=[Ee=pt],Tt=void 0;Ee&&Ee._endsWithIsolInit&&(Tt=Se.get(Ee._end))!=null;)for(var vt=Ve+1;vt<Be.length;vt++)if(Be[vt]._start===Tt){mt.push(Ee=Be[vt]);break}for(var Ke=[],St=0;St<mt.length;St++)for(var Nr=mt[St],Yn=Nr._start;Yn<=Nr._end;Yn++)Ke.push(Yn);for(var Ca=$[Ke[0]],zr=le.level,vn=Ke[0]-1;vn>=0;vn--)if(!(B[vn]&o)){zr=$[vn];break}var Jn=Ke[Ke.length-1],ka=$[Jn],Wr=le.level;if(!(B[Jn]&e)){for(var mn=Jn+1;mn<=le.end;mn++)if(!(B[mn]&o)){Wr=$[mn];break}}Je.push({_seqIndices:Ke,_sosType:Math.max(zr,Ca)%2?D:C,_eosType:Math.max(Wr,ka)%2?D:C})}}for(var Kn=0;Kn<Je.length;Kn++){var Qn=Je[Kn],de=Qn._seqIndices,Ht=Qn._sosType,Aa=Qn._eosType,At=$[de[0]]&1?D:C;if(ee.get(ie))for(var gn=0;gn<de.length;gn++){var Vr=de[gn];if(B[Vr]&ie){for(var Zn=Ht,_n=gn-1;_n>=0;_n--)if(!(B[de[_n]]&o)){Zn=B[de[_n]];break}oe(Vr,Zn&(e|z)?V:Zn)}}if(ee.get(W))for(var yn=0;yn<de.length;yn++){var jr=de[yn];if(B[jr]&W)for(var bn=yn-1;bn>=-1;bn--){var Xr=bn===-1?Ht:B[de[bn]];if(Xr&r){Xr===b&&oe(jr,_);break}}}if(ee.get(b))for(var qn=0;qn<de.length;qn++){var Hr=de[qn];B[Hr]&b&&oe(Hr,D)}if(ee.get(O)||ee.get(P))for(var Yt=1;Yt<de.length-1;Yt++){var $n=de[Yt];if(B[$n]&(O|P)){for(var Dt=0,er=0,tr=Yt-1;tr>=0&&(Dt=B[de[tr]],!!(Dt&o));tr--);for(var nr=Yt+1;nr<de.length&&(er=B[de[nr]],!!(er&o));nr++);Dt===er&&(B[$n]===O?Dt===W:Dt&(W|_))&&oe($n,Dt)}}if(ee.get(W))for(var ft=0;ft<de.length;ft++){var Da=de[ft];if(B[Da]&W){for(var Tn=ft-1;Tn>=0&&B[de[Tn]]&(ne|o);Tn--)oe(de[Tn],W);for(ft++;ft<de.length&&B[de[ft]]&(ne|o|W);ft++)B[de[ft]]!==W&&oe(de[ft],W)}}if(ee.get(ne)||ee.get(O)||ee.get(P))for(var Jt=0;Jt<de.length;Jt++){var Yr=de[Jt];if(B[Yr]&(ne|O|P)){oe(Yr,V);for(var Sn=Jt-1;Sn>=0&&B[de[Sn]]&o;Sn--)oe(de[Sn],V);for(var wn=Jt+1;wn<de.length&&B[de[wn]]&o;wn++)oe(de[wn],V)}}if(ee.get(W))for(var rr=0,Jr=Ht;rr<de.length;rr++){var Kr=de[rr],or=B[Kr];or&W?Jr===C&&oe(Kr,C):or&r&&(Jr=or)}if(ee.get(i)){var Kt=D|W|_,Qr=Kt|C,xn=[];{for(var Ft=[],Mt=0;Mt<de.length;Mt++)if(B[de[Mt]]&i){var Qt=N[de[Mt]],Zr=void 0;if(w(Qt)!==null)if(Ft.length<63)Ft.push({char:Qt,seqIndex:Mt});else break;else if((Zr=T(Qt))!==null)for(var Zt=Ft.length-1;Zt>=0;Zt--){var ar=Ft[Zt].char;if(ar===Zr||ar===T(I(Qt))||w(I(ar))===Qt){xn.push([Ft[Zt].seqIndex,Mt]),Ft.length=Zt;break}}}xn.sort(function($e,it){return $e[0]-it[0]})}for(var ir=0;ir<xn.length;ir++){for(var qr=xn[ir],Un=qr[0],sr=qr[1],$r=!1,at=0,lr=Un+1;lr<sr;lr++){var eo=de[lr];if(B[eo]&Qr){$r=!0;var to=B[eo]&Kt?D:C;if(to===At){at=to;break}}}if($r&&!at){at=Ht;for(var ur=Un-1;ur>=0;ur--){var no=de[ur];if(B[no]&Qr){var ro=B[no]&Kt?D:C;ro!==At?at=ro:at=At;break}}}if(at){if(B[de[Un]]=B[de[sr]]=at,at!==At){for(var qt=Un+1;qt<de.length;qt++)if(!(B[de[qt]]&o)){d(N[de[qt]])&ie&&(B[de[qt]]=at);break}}if(at!==At){for(var $t=sr+1;$t<de.length;$t++)if(!(B[de[$t]]&o)){d(N[de[$t]])&ie&&(B[de[$t]]=at);break}}}}for(var gt=0;gt<de.length;gt++)if(B[de[gt]]&i){for(var oo=gt,fr=gt,cr=Ht,en=gt-1;en>=0;en--)if(B[de[en]]&o)oo=en;else{cr=B[de[en]]&Kt?D:C;break}for(var ao=Aa,tn=gt+1;tn<de.length;tn++)if(B[de[tn]]&(i|o))fr=tn;else{ao=B[de[tn]]&Kt?D:C;break}for(var dr=oo;dr<=fr;dr++)B[de[dr]]=cr===ao?cr:At;gt=fr}}}for(var nt=le.start;nt<=le.end;nt++){var Fa=$[nt],Cn=B[nt];if(Fa&1?Cn&(C|W|_)&&$[nt]++:Cn&D?$[nt]++:Cn&(_|W)&&($[nt]+=2),Cn&o&&($[nt]=nt===0?le.level:$[nt-1]),nt===le.end||d(N[nt])&(H|k))for(var kn=nt;kn>=0&&d(N[kn])&a;kn--)$[kn]=le.level}}return{levels:$,paragraphs:ue};function io($e,it){for(var et=$e;et<N.length;et++){var _t=B[et];if(_t&(D|b))return 1;if(_t&(k|C)||it&&_t===z)return 0;if(_t&e){var so=Ma(et);et=so===-1?N.length:so}}return 0}function Ma($e){for(var it=1,et=$e+1;et<N.length;et++){var _t=B[et];if(_t&k)break;if(_t&z){if(--it===0)return et}else _t&e&&it++}return-1}}var re="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",J;function y(){if(!J){var N=m(re,!0),q=N.map,te=N.reverseMap;te.forEach(function(B,se){q.set(se,B)}),J=q}}function j(N){return y(),J.get(N)||null}function K(N,q,te,B){var se=N.length;te=Math.max(0,te==null?0:+te),B=Math.min(se-1,B==null?se-1:+B);for(var ee=new Map,oe=te;oe<=B;oe++)if(q[oe]&1){var $=j(N[oe]);$!==null&&ee.set(oe,$)}return ee}function X(N,q,te,B){var se=N.length;te=Math.max(0,te==null?0:+te),B=Math.min(se-1,B==null?se-1:+B);var ee=[];return q.paragraphs.forEach(function(oe){var $=Math.max(te,oe.start),Se=Math.min(B,oe.end);if($<Se){for(var ue=q.levels.slice($,Se+1),le=Se;le>=$&&d(N[le])&a;le--)ue[le]=oe.level;for(var ce=oe.level,me=1/0,ke=0;ke<ue.length;ke++){var Fe=ue[ke];Fe>ce&&(ce=Fe),Fe<me&&(me=Fe|1)}for(var he=ce;he>=me;he--)for(var ge=0;ge<ue.length;ge++)if(ue[ge]>=he){for(var fe=ge;ge+1<ue.length&&ue[ge+1]>=he;)ge++;ge>fe&&ee.push([fe+$,ge+$])}}}),ee}function Y(N,q,te,B){var se=Q(N,q,te,B),ee=[].concat(N);return se.forEach(function(oe,$){ee[$]=(q.levels[oe]&1?j(N[oe]):null)||N[oe]}),ee.join("")}function Q(N,q,te,B){for(var se=X(N,q,te,B),ee=[],oe=0;oe<N.length;oe++)ee[oe]=oe;return se.forEach(function($){for(var Se=$[0],ue=$[1],le=ee.slice(Se,ue+1),ce=le.length;ce--;)ee[ue-ce]=le[ce]}),ee}return n.closingToOpeningBracket=T,n.getBidiCharType=d,n.getBidiCharTypeName=h,n.getCanonicalBracket=I,n.getEmbeddingLevels=Z,n.getMirroredCharacter=j,n.getMirroredCharactersMap=K,n.getReorderSegments=X,n.getReorderedIndices=Q,n.getReorderedString=Y,n.openingToClosingBracket=w,Object.defineProperty(n,"__esModule",{value:!0}),n}({});return s}const ga=/\bvoid\s+main\s*\(\s*\)\s*{/g;function kr(s){const n=/^[ \t]*#include +<([\w\d./]+)>/gm;function u(f,t){let e=za[t];return e?kr(e):f}return s.replace(n,u)}const je=[];for(let s=0;s<256;s++)je[s]=(s<16?"0":"")+s.toString(16);function As(){const s=Math.random()*4294967295|0,n=Math.random()*4294967295|0,u=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return(je[s&255]+je[s>>8&255]+je[s>>16&255]+je[s>>24&255]+"-"+je[n&255]+je[n>>8&255]+"-"+je[n>>16&15|64]+je[n>>24&255]+"-"+je[u&63|128]+je[u>>8&255]+"-"+je[u>>16&255]+je[u>>24&255]+je[f&255]+je[f>>8&255]+je[f>>16&255]+je[f>>24&255]).toUpperCase()}const Ut=Object.assign||function(){let s=arguments[0];for(let n=1,u=arguments.length;n<u;n++){let f=arguments[n];if(f)for(let t in f)Object.prototype.hasOwnProperty.call(f,t)&&(s[t]=f[t])}return s},Ds=Date.now(),Fo=new WeakMap,Mo=new Map;let Fs=1e10;function Ar(s,n){const u=Ls(n);let f=Fo.get(s);if(f||Fo.set(s,f=Object.create(null)),f[u])return new f[u];const t=`_onBeforeCompile${u}`,e=function(a,l){s.onBeforeCompile.call(this,a,l);const c=this.customProgramCacheKey()+"|"+a.vertexShader+"|"+a.fragmentShader;let d=Mo[c];if(!d){const h=Ms(this,a,n,u);d=Mo[c]=h}a.vertexShader=d.vertexShader,a.fragmentShader=d.fragmentShader,Ut(a.uniforms,this.uniforms),n.timeUniform&&(a.uniforms[n.timeUniform]={get value(){return Date.now()-Ds}}),this[t]&&this[t](a)},r=function(){return i(n.chained?s:s.clone())},i=function(a){const l=Object.create(a,o);return Object.defineProperty(l,"baseMaterial",{value:s}),Object.defineProperty(l,"id",{value:Fs++}),l.uuid=As(),l.uniforms=Ut({},a.uniforms,n.uniforms),l.defines=Ut({},a.defines,n.defines),l.defines[`TROIKA_DERIVED_MATERIAL_${u}`]="",l.extensions=Ut({},a.extensions,n.extensions),l._listeners=void 0,l},o={constructor:{value:r},isDerivedMaterial:{value:!0},type:{get:()=>s.type,set:a=>{s.type=a}},isDerivedFrom:{writable:!0,configurable:!0,value:function(a){const l=this.baseMaterial;return a===l||l.isDerivedMaterial&&l.isDerivedFrom(a)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return s.customProgramCacheKey()+"|"+u}},onBeforeCompile:{get(){return e},set(a){this[t]=a}},copy:{writable:!0,configurable:!0,value:function(a){return s.copy.call(this,a),!s.isShaderMaterial&&!s.isDerivedMaterial&&(Ut(this.extensions,a.extensions),Ut(this.defines,a.defines),Ut(this.uniforms,Pa.clone(a.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const a=new s.constructor;return i(a).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let a=this._depthMaterial;return a||(a=this._depthMaterial=Ar(s.isDerivedMaterial?s.getDepthMaterial():new Ba({depthPacking:Ga}),n),a.defines.IS_DEPTH_MATERIAL="",a.uniforms=this.uniforms),a}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let a=this._distanceMaterial;return a||(a=this._distanceMaterial=Ar(s.isDerivedMaterial?s.getDistanceMaterial():new Na,n),a.defines.IS_DISTANCE_MATERIAL="",a.uniforms=this.uniforms),a}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:a,_distanceMaterial:l}=this;a&&a.dispose(),l&&l.dispose(),s.dispose.call(this)}}};return f[u]=r,new r}function Ms(s,{vertexShader:n,fragmentShader:u},f,t){let{vertexDefs:e,vertexMainIntro:r,vertexMainOutro:i,vertexTransform:o,fragmentDefs:a,fragmentMainIntro:l,fragmentMainOutro:c,fragmentColorTransform:d,customRewriter:h,timeUniform:v}=f;if(e=e||"",r=r||"",i=i||"",a=a||"",l=l||"",c=c||"",(o||h)&&(n=kr(n)),(d||h)&&(u=u.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),u=kr(u)),h){let m=h({vertexShader:n,fragmentShader:u});n=m.vertexShader,u=m.fragmentShader}if(d){let m=[];u=u.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(m.push(g),"")),c=`${d}
${m.join(`
`)}
${c}`}if(v){const m=`
uniform float ${v};
`;e=m+e,a=m+a}return o&&(n=`vec3 troika_position_${t};
vec3 troika_normal_${t};
vec2 troika_uv_${t};
${n}
`,e=`${e}
void troikaVertexTransform${t}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${o}
}
`,r=`
troika_position_${t} = vec3(position);
troika_normal_${t} = vec3(normal);
troika_uv_${t} = vec2(uv);
troikaVertexTransform${t}(troika_position_${t}, troika_normal_${t}, troika_uv_${t});
${r}
`,n=n.replace(/\b(position|normal|uv)\b/g,(m,g,R,A)=>/\battribute\s+vec[23]\s+$/.test(A.substr(0,R))?g:`troika_${g}_${t}`),s.map&&s.map.channel>0||(n=n.replace(/\bMAP_UV\b/g,`troika_uv_${t}`))),n=Eo(n,t,e,r,i),u=Eo(u,t,a,l,c),{vertexShader:n,fragmentShader:u}}function Eo(s,n,u,f,t){return(f||t||u)&&(s=s.replace(ga,`
${u}
void troikaOrigMain${n}() {`),s+=`
void main() {
  ${f}
  troikaOrigMain${n}();
  ${t}
}`),s}function Es(s,n){return s==="uniforms"?void 0:typeof n=="function"?n.toString():n}let Rs=0;const Ro=new Map;function Ls(s){const n=JSON.stringify(s,Es);let u=Ro.get(n);return u==null&&Ro.set(n,u=++Rs),u}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Is(){return typeof window>"u"&&(self.window=self),function(s){var n={parse:function(t){var e=n._bin,r=new Uint8Array(t);if(e.readASCII(r,0,4)=="ttcf"){var i=4;e.readUshort(r,i),i+=2,e.readUshort(r,i),i+=2;var o=e.readUint(r,i);i+=4;for(var a=[],l=0;l<o;l++){var c=e.readUint(r,i);i+=4,a.push(n._readFont(r,c))}return a}return[n._readFont(r,0)]},_readFont:function(t,e){var r=n._bin,i=e;r.readFixed(t,e),e+=4;var o=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],l={_data:t,_offset:i},c={},d=0;d<o;d++){var h=r.readASCII(t,e,4);e+=4,r.readUint(t,e),e+=4;var v=r.readUint(t,e);e+=4;var m=r.readUint(t,e);e+=4,c[h]={offset:v,length:m}}for(d=0;d<a.length;d++){var g=a[d];c[g]&&(l[g.trim()]=n[g.trim()].parse(t,c[g].offset,c[g].length,l))}return l},_tabOffset:function(t,e,r){for(var i=n._bin,o=i.readUshort(t,r+4),a=r+12,l=0;l<o;l++){var c=i.readASCII(t,a,4);a+=4,i.readUint(t,a),a+=4;var d=i.readUint(t,a);if(a+=4,i.readUint(t,a),a+=4,c==e)return d}return 0}};n._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return n._bin.readShort(t,e)/16384},readInt:function(t,e){return n._bin._view(t).getInt32(e)},readInt8:function(t,e){return n._bin._view(t).getInt8(e)},readShort:function(t,e){return n._bin._view(t).getInt16(e)},readUshort:function(t,e){return n._bin._view(t).getUint16(e)},readUshorts:function(t,e,r){for(var i=[],o=0;o<r;o++)i.push(n._bin.readUshort(t,e+2*o));return i},readUint:function(t,e){return n._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*n._bin.readUint(t,e)+n._bin.readUint(t,e+4)},readASCII:function(t,e,r){for(var i="",o=0;o<r;o++)i+=String.fromCharCode(t[e+o]);return i},readUnicode:function(t,e,r){for(var i="",o=0;o<r;o++){var a=t[e++]<<8|t[e++];i+=String.fromCharCode(a)}return i},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,r){var i=n._bin._tdec;return i&&e==0&&r==t.length?i.decode(t):n._bin.readASCII(t,e,r)},readBytes:function(t,e,r){for(var i=[],o=0;o<r;o++)i.push(t[e+o]);return i},readASCIIArray:function(t,e,r){for(var i=[],o=0;o<r;o++)i.push(String.fromCharCode(t[e+o]));return i},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},n._lctf={},n._lctf.parse=function(t,e,r,i,o){var a=n._bin,l={},c=e;a.readFixed(t,e),e+=4;var d=a.readUshort(t,e);e+=2;var h=a.readUshort(t,e);e+=2;var v=a.readUshort(t,e);return e+=2,l.scriptList=n._lctf.readScriptList(t,c+d),l.featureList=n._lctf.readFeatureList(t,c+h),l.lookupList=n._lctf.readLookupList(t,c+v,o),l},n._lctf.readLookupList=function(t,e,r){var i=n._bin,o=e,a=[],l=i.readUshort(t,e);e+=2;for(var c=0;c<l;c++){var d=i.readUshort(t,e);e+=2;var h=n._lctf.readLookupTable(t,o+d,r);a.push(h)}return a},n._lctf.readLookupTable=function(t,e,r){var i=n._bin,o=e,a={tabs:[]};a.ltype=i.readUshort(t,e),e+=2,a.flag=i.readUshort(t,e),e+=2;var l=i.readUshort(t,e);e+=2;for(var c=a.ltype,d=0;d<l;d++){var h=i.readUshort(t,e);e+=2;var v=r(t,c,o+h,a);a.tabs.push(v)}return a},n._lctf.numOfOnes=function(t){for(var e=0,r=0;r<32;r++)t>>>r&1&&e++;return e},n._lctf.readClassDef=function(t,e){var r=n._bin,i=[],o=r.readUshort(t,e);if(e+=2,o==1){var a=r.readUshort(t,e);e+=2;var l=r.readUshort(t,e);e+=2;for(var c=0;c<l;c++)i.push(a+c),i.push(a+c),i.push(r.readUshort(t,e)),e+=2}if(o==2){var d=r.readUshort(t,e);for(e+=2,c=0;c<d;c++)i.push(r.readUshort(t,e)),e+=2,i.push(r.readUshort(t,e)),e+=2,i.push(r.readUshort(t,e)),e+=2}return i},n._lctf.getInterval=function(t,e){for(var r=0;r<t.length;r+=3){var i=t[r],o=t[r+1];if(t[r+2],i<=e&&e<=o)return r}return-1},n._lctf.readCoverage=function(t,e){var r=n._bin,i={};i.fmt=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);return e+=2,i.fmt==1&&(i.tab=r.readUshorts(t,e,o)),i.fmt==2&&(i.tab=r.readUshorts(t,e,3*o)),i},n._lctf.coverageIndex=function(t,e){var r=t.tab;if(t.fmt==1)return r.indexOf(e);if(t.fmt==2){var i=n._lctf.getInterval(r,e);if(i!=-1)return r[i+2]+(e-r[i])}return-1},n._lctf.readFeatureList=function(t,e){var r=n._bin,i=e,o=[],a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=r.readASCII(t,e,4);e+=4;var d=r.readUshort(t,e);e+=2;var h=n._lctf.readFeatureTable(t,i+d);h.tag=c.trim(),o.push(h)}return o},n._lctf.readFeatureTable=function(t,e){var r=n._bin,i=e,o={},a=r.readUshort(t,e);e+=2,a>0&&(o.featureParams=i+a);var l=r.readUshort(t,e);e+=2,o.tab=[];for(var c=0;c<l;c++)o.tab.push(r.readUshort(t,e+2*c));return o},n._lctf.readScriptList=function(t,e){var r=n._bin,i=e,o={},a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=r.readASCII(t,e,4);e+=4;var d=r.readUshort(t,e);e+=2,o[c.trim()]=n._lctf.readScriptTable(t,i+d)}return o},n._lctf.readScriptTable=function(t,e){var r=n._bin,i=e,o={},a=r.readUshort(t,e);e+=2,a>0&&(o.default=n._lctf.readLangSysTable(t,i+a));var l=r.readUshort(t,e);e+=2;for(var c=0;c<l;c++){var d=r.readASCII(t,e,4);e+=4;var h=r.readUshort(t,e);e+=2,o[d.trim()]=n._lctf.readLangSysTable(t,i+h)}return o},n._lctf.readLangSysTable=function(t,e){var r=n._bin,i={};r.readUshort(t,e),e+=2,i.reqFeature=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);return e+=2,i.features=r.readUshorts(t,e,o),i},n.CFF={},n.CFF.parse=function(t,e,r){var i=n._bin;(t=new Uint8Array(t.buffer,e,r))[e=0],t[++e],t[++e],t[++e],e++;var o=[];e=n.CFF.readIndex(t,e,o);for(var a=[],l=0;l<o.length-1;l++)a.push(i.readASCII(t,e+o[l],o[l+1]-o[l]));e+=o[o.length-1];var c=[];e=n.CFF.readIndex(t,e,c);var d=[];for(l=0;l<c.length-1;l++)d.push(n.CFF.readDict(t,e+c[l],e+c[l+1]));e+=c[c.length-1];var h=d[0],v=[];e=n.CFF.readIndex(t,e,v);var m=[];for(l=0;l<v.length-1;l++)m.push(i.readASCII(t,e+v[l],v[l+1]-v[l]));if(e+=v[v.length-1],n.CFF.readSubrs(t,e,h),h.CharStrings){e=h.CharStrings,v=[],e=n.CFF.readIndex(t,e,v);var g=[];for(l=0;l<v.length-1;l++)g.push(i.readBytes(t,e+v[l],v[l+1]-v[l]));h.CharStrings=g}if(h.ROS){e=h.FDArray;var R=[];for(e=n.CFF.readIndex(t,e,R),h.FDArray=[],l=0;l<R.length-1;l++){var A=n.CFF.readDict(t,e+R[l],e+R[l+1]);n.CFF._readFDict(t,A,m),h.FDArray.push(A)}e+=R[R.length-1],e=h.FDSelect,h.FDSelect=[];var U=t[e];if(e++,U!=3)throw U;var w=i.readUshort(t,e);for(e+=2,l=0;l<w+1;l++)h.FDSelect.push(i.readUshort(t,e),t[e+2]),e+=3}return h.Encoding&&(h.Encoding=n.CFF.readEncoding(t,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=n.CFF.readCharset(t,h.charset,h.CharStrings.length)),n.CFF._readFDict(t,h,m),h},n.CFF._readFDict=function(t,e,r){var i;for(var o in e.Private&&(i=e.Private[1],e.Private=n.CFF.readDict(t,i,i+e.Private[0]),e.Private.Subrs&&n.CFF.readSubrs(t,i+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)!=-1&&(e[o]=r[e[o]-426+35])},n.CFF.readSubrs=function(t,e,r){var i=n._bin,o=[];e=n.CFF.readIndex(t,e,o);var a,l=o.length;a=l<1240?107:l<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var c=0;c<o.length-1;c++)r.Subrs.push(i.readBytes(t,e+o[c],o[c+1]-o[c]))},n.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],n.CFF.glyphByUnicode=function(t,e){for(var r=0;r<t.charset.length;r++)if(t.charset[r]==e)return r;return-1},n.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:n.CFF.glyphByUnicode(t,n.CFF.tableSE[e])},n.CFF.readEncoding=function(t,e,r){n._bin;var i=[".notdef"],o=t[e];if(e++,o!=0)throw"error: unknown encoding format: "+o;var a=t[e];e++;for(var l=0;l<a;l++)i.push(t[e+l]);return i},n.CFF.readCharset=function(t,e,r){var i=n._bin,o=[".notdef"],a=t[e];if(e++,a==0)for(var l=0;l<r;l++){var c=i.readUshort(t,e);e+=2,o.push(c)}else{if(a!=1&&a!=2)throw"error: format: "+a;for(;o.length<r;){c=i.readUshort(t,e),e+=2;var d=0;for(a==1?(d=t[e],e++):(d=i.readUshort(t,e),e+=2),l=0;l<=d;l++)o.push(c),c++}}return o},n.CFF.readIndex=function(t,e,r){var i=n._bin,o=i.readUshort(t,e)+1,a=t[e+=2];if(e++,a==1)for(var l=0;l<o;l++)r.push(t[e+l]);else if(a==2)for(l=0;l<o;l++)r.push(i.readUshort(t,e+2*l));else if(a==3)for(l=0;l<o;l++)r.push(16777215&i.readUint(t,e+3*l-1));else if(o!=1)throw"unsupported offset size: "+a+", count: "+o;return(e+=o*a)-1},n.CFF.getCharString=function(t,e,r){var i=n._bin,o=t[e],a=t[e+1];t[e+2],t[e+3],t[e+4];var l=1,c=null,d=null;o<=20&&(c=o,l=1),o==12&&(c=100*o+a,l=2),21<=o&&o<=27&&(c=o,l=1),o==28&&(d=i.readShort(t,e+1),l=3),29<=o&&o<=31&&(c=o,l=1),32<=o&&o<=246&&(d=o-139,l=1),247<=o&&o<=250&&(d=256*(o-247)+a+108,l=2),251<=o&&o<=254&&(d=256*-(o-251)-a-108,l=2),o==255&&(d=i.readInt(t,e+1)/65535,l=5),r.val=d??"o"+c,r.size=l},n.CFF.readCharString=function(t,e,r){for(var i=e+r,o=n._bin,a=[];e<i;){var l=t[e],c=t[e+1];t[e+2],t[e+3],t[e+4];var d=1,h=null,v=null;l<=20&&(h=l,d=1),l==12&&(h=100*l+c,d=2),l!=19&&l!=20||(h=l,d=2),21<=l&&l<=27&&(h=l,d=1),l==28&&(v=o.readShort(t,e+1),d=3),29<=l&&l<=31&&(h=l,d=1),32<=l&&l<=246&&(v=l-139,d=1),247<=l&&l<=250&&(v=256*(l-247)+c+108,d=2),251<=l&&l<=254&&(v=256*-(l-251)-c-108,d=2),l==255&&(v=o.readInt(t,e+1)/65535,d=5),a.push(v??"o"+h),e+=d}return a},n.CFF.readDict=function(t,e,r){for(var i=n._bin,o={},a=[];e<r;){var l=t[e],c=t[e+1];t[e+2],t[e+3],t[e+4];var d=1,h=null,v=null;if(l==28&&(v=i.readShort(t,e+1),d=3),l==29&&(v=i.readInt(t,e+1),d=5),32<=l&&l<=246&&(v=l-139,d=1),247<=l&&l<=250&&(v=256*(l-247)+c+108,d=2),251<=l&&l<=254&&(v=256*-(l-251)-c-108,d=2),l==255)throw v=i.readInt(t,e+1)/65535,d=5,"unknown number";if(l==30){var m=[];for(d=1;;){var g=t[e+d];d++;var R=g>>4,A=15&g;if(R!=15&&m.push(R),A!=15&&m.push(A),A==15)break}for(var U="",w=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],T=0;T<m.length;T++)U+=w[m[T]];v=parseFloat(U)}l<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][l],d=1,l==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][c],d=2)),h!=null?(o[h]=a.length==1?a[0]:a,a=[]):a.push(v),e+=d}return o},n.cmap={},n.cmap.parse=function(t,e,r){t=new Uint8Array(t.buffer,e,r),e=0;var i=n._bin,o={};i.readUshort(t,e),e+=2;var a=i.readUshort(t,e);e+=2;var l=[];o.tables=[];for(var c=0;c<a;c++){var d=i.readUshort(t,e);e+=2;var h=i.readUshort(t,e);e+=2;var v=i.readUint(t,e);e+=4;var m="p"+d+"e"+h,g=l.indexOf(v);if(g==-1){var R;g=o.tables.length,l.push(v);var A=i.readUshort(t,v);A==0?R=n.cmap.parse0(t,v):A==4?R=n.cmap.parse4(t,v):A==6?R=n.cmap.parse6(t,v):A==12?R=n.cmap.parse12(t,v):console.debug("unknown format: "+A,d,h,v),o.tables.push(R)}if(o[m]!=null)throw"multiple tables for one platform+encoding";o[m]=g}return o},n.cmap.parse0=function(t,e){var r=n._bin,i={};i.format=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(t[e+a]);return i},n.cmap.parse4=function(t,e){var r=n._bin,i=e,o={};o.format=r.readUshort(t,e),e+=2;var a=r.readUshort(t,e);e+=2,r.readUshort(t,e),e+=2;var l=r.readUshort(t,e);e+=2;var c=l/2;o.searchRange=r.readUshort(t,e),e+=2,o.entrySelector=r.readUshort(t,e),e+=2,o.rangeShift=r.readUshort(t,e),e+=2,o.endCount=r.readUshorts(t,e,c),e+=2*c,e+=2,o.startCount=r.readUshorts(t,e,c),e+=2*c,o.idDelta=[];for(var d=0;d<c;d++)o.idDelta.push(r.readShort(t,e)),e+=2;for(o.idRangeOffset=r.readUshorts(t,e,c),e+=2*c,o.glyphIdArray=[];e<i+a;)o.glyphIdArray.push(r.readUshort(t,e)),e+=2;return o},n.cmap.parse6=function(t,e){var r=n._bin,i={};i.format=r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2,r.readUshort(t,e),e+=2,i.firstCode=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);e+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(t,e)),e+=2;return i},n.cmap.parse12=function(t,e){var r=n._bin,i={};i.format=r.readUshort(t,e),e+=2,e+=2,r.readUint(t,e),e+=4,r.readUint(t,e),e+=4;var o=r.readUint(t,e);e+=4,i.groups=[];for(var a=0;a<o;a++){var l=e+12*a,c=r.readUint(t,l+0),d=r.readUint(t,l+4),h=r.readUint(t,l+8);i.groups.push([c,d,h])}return i},n.glyf={},n.glyf.parse=function(t,e,r,i){for(var o=[],a=0;a<i.maxp.numGlyphs;a++)o.push(null);return o},n.glyf._parseGlyf=function(t,e){var r=n._bin,i=t._data,o=n._tabOffset(i,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var l=0;l<a.noc;l++)a.endPts.push(r.readUshort(i,o)),o+=2;var c=r.readUshort(i,o);if(o+=2,i.length-o<c)return null;a.instructions=r.readBytes(i,o,c),o+=c;var d=a.endPts[a.noc-1]+1;for(a.flags=[],l=0;l<d;l++){var h=i[o];if(o++,a.flags.push(h),(8&h)!=0){var v=i[o];o++;for(var m=0;m<v;m++)a.flags.push(h),l++}}for(a.xs=[],l=0;l<d;l++){var g=(2&a.flags[l])!=0,R=(16&a.flags[l])!=0;g?(a.xs.push(R?i[o]:-i[o]),o++):R?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],l=0;l<d;l++)g=(4&a.flags[l])!=0,R=(32&a.flags[l])!=0,g?(a.ys.push(R?i[o]:-i[o]),o++):R?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var A=0,U=0;for(l=0;l<d;l++)A+=a.xs[l],U+=a.ys[l],a.xs[l]=A,a.ys[l]=U}else{var w;a.parts=[];do{w=r.readUshort(i,o),o+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(T),T.glyphIndex=r.readUshort(i,o),o+=2,1&w){var I=r.readShort(i,o);o+=2;var C=r.readShort(i,o);o+=2}else I=r.readInt8(i,o),o++,C=r.readInt8(i,o),o++;2&w?(T.m.tx=I,T.m.ty=C):(T.p1=I,T.p2=C),8&w?(T.m.a=T.m.d=r.readF2dot14(i,o),o+=2):64&w?(T.m.a=r.readF2dot14(i,o),o+=2,T.m.d=r.readF2dot14(i,o),o+=2):128&w&&(T.m.a=r.readF2dot14(i,o),o+=2,T.m.b=r.readF2dot14(i,o),o+=2,T.m.c=r.readF2dot14(i,o),o+=2,T.m.d=r.readF2dot14(i,o),o+=2)}while(32&w);if(256&w){var D=r.readUshort(i,o);for(o+=2,a.instr=[],l=0;l<D;l++)a.instr.push(i[o]),o++}}return a},n.GDEF={},n.GDEF.parse=function(t,e,r,i){var o=e;e+=4;var a=n._bin.readUshort(t,e);return{glyphClassDef:a===0?null:n._lctf.readClassDef(t,o+a)}},n.GPOS={},n.GPOS.parse=function(t,e,r,i){return n._lctf.parse(t,e,r,i,n.GPOS.subt)},n.GPOS.subt=function(t,e,r,i){var o=n._bin,a=r,l={};if(l.fmt=o.readUshort(t,r),r+=2,e==1||e==2||e==3||e==7||e==8&&l.fmt<=2){var c=o.readUshort(t,r);r+=2,l.coverage=n._lctf.readCoverage(t,c+a)}if(e==1&&l.fmt==1){var d=o.readUshort(t,r);r+=2,d!=0&&(l.pos=n.GPOS.readValueRecord(t,r,d))}else if(e==2&&l.fmt>=1&&l.fmt<=2){d=o.readUshort(t,r),r+=2;var h=o.readUshort(t,r);r+=2;var v=n._lctf.numOfOnes(d),m=n._lctf.numOfOnes(h);if(l.fmt==1){l.pairsets=[];var g=o.readUshort(t,r);r+=2;for(var R=0;R<g;R++){var A=a+o.readUshort(t,r);r+=2;var U=o.readUshort(t,A);A+=2;for(var w=[],T=0;T<U;T++){var I=o.readUshort(t,A);A+=2,d!=0&&(_=n.GPOS.readValueRecord(t,A,d),A+=2*v),h!=0&&(P=n.GPOS.readValueRecord(t,A,h),A+=2*m),w.push({gid2:I,val1:_,val2:P})}l.pairsets.push(w)}}if(l.fmt==2){var C=o.readUshort(t,r);r+=2;var D=o.readUshort(t,r);r+=2;var W=o.readUshort(t,r);r+=2;var O=o.readUshort(t,r);for(r+=2,l.classDef1=n._lctf.readClassDef(t,a+C),l.classDef2=n._lctf.readClassDef(t,a+D),l.matrix=[],R=0;R<W;R++){var ne=[];for(T=0;T<O;T++){var _=null,P=null;d!=0&&(_=n.GPOS.readValueRecord(t,r,d),r+=2*v),h!=0&&(P=n.GPOS.readValueRecord(t,r,h),r+=2*m),ne.push({val1:_,val2:P})}l.matrix.push(ne)}}}else if(e==4&&l.fmt==1)l.markCoverage=n._lctf.readCoverage(t,o.readUshort(t,r)+a),l.baseCoverage=n._lctf.readCoverage(t,o.readUshort(t,r+2)+a),l.markClassCount=o.readUshort(t,r+4),l.markArray=n.GPOS.readMarkArray(t,o.readUshort(t,r+6)+a),l.baseArray=n.GPOS.readBaseArray(t,o.readUshort(t,r+8)+a,l.markClassCount);else if(e==6&&l.fmt==1)l.mark1Coverage=n._lctf.readCoverage(t,o.readUshort(t,r)+a),l.mark2Coverage=n._lctf.readCoverage(t,o.readUshort(t,r+2)+a),l.markClassCount=o.readUshort(t,r+4),l.mark1Array=n.GPOS.readMarkArray(t,o.readUshort(t,r+6)+a),l.mark2Array=n.GPOS.readBaseArray(t,o.readUshort(t,r+8)+a,l.markClassCount);else{if(e==9&&l.fmt==1){var k=o.readUshort(t,r);r+=2;var H=o.readUint(t,r);if(r+=4,i.ltype==9)i.ltype=k;else if(i.ltype!=k)throw"invalid extension substitution";return n.GPOS.subt(t,i.ltype,a+H)}console.debug("unsupported GPOS table LookupType",e,"format",l.fmt)}return l},n.GPOS.readValueRecord=function(t,e,r){var i=n._bin,o=[];return o.push(1&r?i.readShort(t,e):0),e+=1&r?2:0,o.push(2&r?i.readShort(t,e):0),e+=2&r?2:0,o.push(4&r?i.readShort(t,e):0),e+=4&r?2:0,o.push(8&r?i.readShort(t,e):0),e+=8&r?2:0,o},n.GPOS.readBaseArray=function(t,e,r){var i=n._bin,o=[],a=e,l=i.readUshort(t,e);e+=2;for(var c=0;c<l;c++){for(var d=[],h=0;h<r;h++)d.push(n.GPOS.readAnchorRecord(t,a+i.readUshort(t,e))),e+=2;o.push(d)}return o},n.GPOS.readMarkArray=function(t,e){var r=n._bin,i=[],o=e,a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=n.GPOS.readAnchorRecord(t,r.readUshort(t,e+2)+o);c.markClass=r.readUshort(t,e),i.push(c),e+=4}return i},n.GPOS.readAnchorRecord=function(t,e){var r=n._bin,i={};return i.fmt=r.readUshort(t,e),i.x=r.readShort(t,e+2),i.y=r.readShort(t,e+4),i},n.GSUB={},n.GSUB.parse=function(t,e,r,i){return n._lctf.parse(t,e,r,i,n.GSUB.subt)},n.GSUB.subt=function(t,e,r,i){var o=n._bin,a=r,l={};if(l.fmt=o.readUshort(t,r),r+=2,e!=1&&e!=2&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==2||e==4||e==5&&l.fmt<=2||e==6&&l.fmt<=2){var c=o.readUshort(t,r);r+=2,l.coverage=n._lctf.readCoverage(t,a+c)}if(e==1&&l.fmt>=1&&l.fmt<=2){if(l.fmt==1)l.delta=o.readShort(t,r),r+=2;else if(l.fmt==2){var d=o.readUshort(t,r);r+=2,l.newg=o.readUshorts(t,r,d),r+=2*l.newg.length}}else if(e==2&&l.fmt==1){d=o.readUshort(t,r),r+=2,l.seqs=[];for(var h=0;h<d;h++){var v=o.readUshort(t,r)+a;r+=2;var m=o.readUshort(t,v);l.seqs.push(o.readUshorts(t,v+2,m))}}else if(e==4)for(l.vals=[],d=o.readUshort(t,r),r+=2,h=0;h<d;h++){var g=o.readUshort(t,r);r+=2,l.vals.push(n.GSUB.readLigatureSet(t,a+g))}else if(e==5&&l.fmt==2){if(l.fmt==2){var R=o.readUshort(t,r);r+=2,l.cDef=n._lctf.readClassDef(t,a+R),l.scset=[];var A=o.readUshort(t,r);for(r+=2,h=0;h<A;h++){var U=o.readUshort(t,r);r+=2,l.scset.push(U==0?null:n.GSUB.readSubClassSet(t,a+U))}}}else if(e==6&&l.fmt==3){if(l.fmt==3){for(h=0;h<3;h++){d=o.readUshort(t,r),r+=2;for(var w=[],T=0;T<d;T++)w.push(n._lctf.readCoverage(t,a+o.readUshort(t,r+2*T)));r+=2*d,h==0&&(l.backCvg=w),h==1&&(l.inptCvg=w),h==2&&(l.ahedCvg=w)}d=o.readUshort(t,r),r+=2,l.lookupRec=n.GSUB.readSubstLookupRecords(t,r,d)}}else{if(e==7&&l.fmt==1){var I=o.readUshort(t,r);r+=2;var C=o.readUint(t,r);if(r+=4,i.ltype==9)i.ltype=I;else if(i.ltype!=I)throw"invalid extension substitution";return n.GSUB.subt(t,i.ltype,a+C)}console.debug("unsupported GSUB table LookupType",e,"format",l.fmt)}return l},n.GSUB.readSubClassSet=function(t,e){var r=n._bin.readUshort,i=e,o=[],a=r(t,e);e+=2;for(var l=0;l<a;l++){var c=r(t,e);e+=2,o.push(n.GSUB.readSubClassRule(t,i+c))}return o},n.GSUB.readSubClassRule=function(t,e){var r=n._bin.readUshort,i={},o=r(t,e),a=r(t,e+=2);e+=2,i.input=[];for(var l=0;l<o-1;l++)i.input.push(r(t,e)),e+=2;return i.substLookupRecords=n.GSUB.readSubstLookupRecords(t,e,a),i},n.GSUB.readSubstLookupRecords=function(t,e,r){for(var i=n._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(t,e),i(t,e+2)),e+=4;return o},n.GSUB.readChainSubClassSet=function(t,e){var r=n._bin,i=e,o=[],a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=r.readUshort(t,e);e+=2,o.push(n.GSUB.readChainSubClassRule(t,i+c))}return o},n.GSUB.readChainSubClassRule=function(t,e){for(var r=n._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var l=r.readUshort(t,e);e+=2,a==1&&l--,i[o[a]]=r.readUshorts(t,e,l),e+=2*i[o[a]].length}return l=r.readUshort(t,e),e+=2,i.subst=r.readUshorts(t,e,2*l),e+=2*i.subst.length,i},n.GSUB.readLigatureSet=function(t,e){var r=n._bin,i=e,o=[],a=r.readUshort(t,e);e+=2;for(var l=0;l<a;l++){var c=r.readUshort(t,e);e+=2,o.push(n.GSUB.readLigature(t,i+c))}return o},n.GSUB.readLigature=function(t,e){var r=n._bin,i={chain:[]};i.nglyph=r.readUshort(t,e),e+=2;var o=r.readUshort(t,e);e+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(t,e)),e+=2;return i},n.head={},n.head.parse=function(t,e,r){var i=n._bin,o={};return i.readFixed(t,e),e+=4,o.fontRevision=i.readFixed(t,e),e+=4,i.readUint(t,e),e+=4,i.readUint(t,e),e+=4,o.flags=i.readUshort(t,e),e+=2,o.unitsPerEm=i.readUshort(t,e),e+=2,o.created=i.readUint64(t,e),e+=8,o.modified=i.readUint64(t,e),e+=8,o.xMin=i.readShort(t,e),e+=2,o.yMin=i.readShort(t,e),e+=2,o.xMax=i.readShort(t,e),e+=2,o.yMax=i.readShort(t,e),e+=2,o.macStyle=i.readUshort(t,e),e+=2,o.lowestRecPPEM=i.readUshort(t,e),e+=2,o.fontDirectionHint=i.readShort(t,e),e+=2,o.indexToLocFormat=i.readShort(t,e),e+=2,o.glyphDataFormat=i.readShort(t,e),e+=2,o},n.hhea={},n.hhea.parse=function(t,e,r){var i=n._bin,o={};return i.readFixed(t,e),e+=4,o.ascender=i.readShort(t,e),e+=2,o.descender=i.readShort(t,e),e+=2,o.lineGap=i.readShort(t,e),e+=2,o.advanceWidthMax=i.readUshort(t,e),e+=2,o.minLeftSideBearing=i.readShort(t,e),e+=2,o.minRightSideBearing=i.readShort(t,e),e+=2,o.xMaxExtent=i.readShort(t,e),e+=2,o.caretSlopeRise=i.readShort(t,e),e+=2,o.caretSlopeRun=i.readShort(t,e),e+=2,o.caretOffset=i.readShort(t,e),e+=2,e+=8,o.metricDataFormat=i.readShort(t,e),e+=2,o.numberOfHMetrics=i.readUshort(t,e),e+=2,o},n.hmtx={},n.hmtx.parse=function(t,e,r,i){for(var o=n._bin,a={aWidth:[],lsBearing:[]},l=0,c=0,d=0;d<i.maxp.numGlyphs;d++)d<i.hhea.numberOfHMetrics&&(l=o.readUshort(t,e),e+=2,c=o.readShort(t,e),e+=2),a.aWidth.push(l),a.lsBearing.push(c);return a},n.kern={},n.kern.parse=function(t,e,r,i){var o=n._bin,a=o.readUshort(t,e);if(e+=2,a==1)return n.kern.parseV1(t,e-2,r,i);var l=o.readUshort(t,e);e+=2;for(var c={glyph1:[],rval:[]},d=0;d<l;d++){e+=2,r=o.readUshort(t,e),e+=2;var h=o.readUshort(t,e);e+=2;var v=h>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;e=n.kern.readFormat0(t,e,c)}return c},n.kern.parseV1=function(t,e,r,i){var o=n._bin;o.readFixed(t,e),e+=4;var a=o.readUint(t,e);e+=4;for(var l={glyph1:[],rval:[]},c=0;c<a;c++){o.readUint(t,e),e+=4;var d=o.readUshort(t,e);e+=2,o.readUshort(t,e),e+=2;var h=d>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;e=n.kern.readFormat0(t,e,l)}return l},n.kern.readFormat0=function(t,e,r){var i=n._bin,o=-1,a=i.readUshort(t,e);e+=2,i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2,i.readUshort(t,e),e+=2;for(var l=0;l<a;l++){var c=i.readUshort(t,e);e+=2;var d=i.readUshort(t,e);e+=2;var h=i.readShort(t,e);e+=2,c!=o&&(r.glyph1.push(c),r.rval.push({glyph2:[],vals:[]}));var v=r.rval[r.rval.length-1];v.glyph2.push(d),v.vals.push(h),o=c}return e},n.loca={},n.loca.parse=function(t,e,r,i){var o=n._bin,a=[],l=i.head.indexToLocFormat,c=i.maxp.numGlyphs+1;if(l==0)for(var d=0;d<c;d++)a.push(o.readUshort(t,e+(d<<1))<<1);if(l==1)for(d=0;d<c;d++)a.push(o.readUint(t,e+(d<<2)));return a},n.maxp={},n.maxp.parse=function(t,e,r){var i=n._bin,o={},a=i.readUint(t,e);return e+=4,o.numGlyphs=i.readUshort(t,e),e+=2,a==65536&&(o.maxPoints=i.readUshort(t,e),e+=2,o.maxContours=i.readUshort(t,e),e+=2,o.maxCompositePoints=i.readUshort(t,e),e+=2,o.maxCompositeContours=i.readUshort(t,e),e+=2,o.maxZones=i.readUshort(t,e),e+=2,o.maxTwilightPoints=i.readUshort(t,e),e+=2,o.maxStorage=i.readUshort(t,e),e+=2,o.maxFunctionDefs=i.readUshort(t,e),e+=2,o.maxInstructionDefs=i.readUshort(t,e),e+=2,o.maxStackElements=i.readUshort(t,e),e+=2,o.maxSizeOfInstructions=i.readUshort(t,e),e+=2,o.maxComponentElements=i.readUshort(t,e),e+=2,o.maxComponentDepth=i.readUshort(t,e),e+=2),o},n.name={},n.name.parse=function(t,e,r){var i=n._bin,o={};i.readUshort(t,e),e+=2;var a=i.readUshort(t,e);e+=2,i.readUshort(t,e);for(var l,c=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=e+=2,h=0;h<a;h++){var v=i.readUshort(t,e);e+=2;var m=i.readUshort(t,e);e+=2;var g=i.readUshort(t,e);e+=2;var R=i.readUshort(t,e);e+=2;var A=i.readUshort(t,e);e+=2;var U=i.readUshort(t,e);e+=2;var w,T=c[R],I=d+12*a+U;if(v==0)w=i.readUnicode(t,I,A/2);else if(v==3&&m==0)w=i.readUnicode(t,I,A/2);else if(m==0)w=i.readASCII(t,I,A);else if(m==1)w=i.readUnicode(t,I,A/2);else if(m==3)w=i.readUnicode(t,I,A/2);else{if(v!=1)throw"unknown encoding "+m+", platformID: "+v;w=i.readASCII(t,I,A),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var C="p"+v+","+g.toString(16);o[C]==null&&(o[C]={}),o[C][T!==void 0?T:R]=w,o[C]._lang=g}for(var D in o)if(o[D].postScriptName!=null&&o[D]._lang==1033)return o[D];for(var D in o)if(o[D].postScriptName!=null&&o[D]._lang==0)return o[D];for(var D in o)if(o[D].postScriptName!=null&&o[D]._lang==3084)return o[D];for(var D in o)if(o[D].postScriptName!=null)return o[D];for(var D in o){l=D;break}return console.debug("returning name table with languageID "+o[l]._lang),o[l]},n["OS/2"]={},n["OS/2"].parse=function(t,e,r){var i=n._bin.readUshort(t,e);e+=2;var o={};if(i==0)n["OS/2"].version0(t,e,o);else if(i==1)n["OS/2"].version1(t,e,o);else if(i==2||i==3||i==4)n["OS/2"].version2(t,e,o);else{if(i!=5)throw"unknown OS/2 table version: "+i;n["OS/2"].version5(t,e,o)}return o},n["OS/2"].version0=function(t,e,r){var i=n._bin;return r.xAvgCharWidth=i.readShort(t,e),e+=2,r.usWeightClass=i.readUshort(t,e),e+=2,r.usWidthClass=i.readUshort(t,e),e+=2,r.fsType=i.readUshort(t,e),e+=2,r.ySubscriptXSize=i.readShort(t,e),e+=2,r.ySubscriptYSize=i.readShort(t,e),e+=2,r.ySubscriptXOffset=i.readShort(t,e),e+=2,r.ySubscriptYOffset=i.readShort(t,e),e+=2,r.ySuperscriptXSize=i.readShort(t,e),e+=2,r.ySuperscriptYSize=i.readShort(t,e),e+=2,r.ySuperscriptXOffset=i.readShort(t,e),e+=2,r.ySuperscriptYOffset=i.readShort(t,e),e+=2,r.yStrikeoutSize=i.readShort(t,e),e+=2,r.yStrikeoutPosition=i.readShort(t,e),e+=2,r.sFamilyClass=i.readShort(t,e),e+=2,r.panose=i.readBytes(t,e,10),e+=10,r.ulUnicodeRange1=i.readUint(t,e),e+=4,r.ulUnicodeRange2=i.readUint(t,e),e+=4,r.ulUnicodeRange3=i.readUint(t,e),e+=4,r.ulUnicodeRange4=i.readUint(t,e),e+=4,r.achVendID=[i.readInt8(t,e),i.readInt8(t,e+1),i.readInt8(t,e+2),i.readInt8(t,e+3)],e+=4,r.fsSelection=i.readUshort(t,e),e+=2,r.usFirstCharIndex=i.readUshort(t,e),e+=2,r.usLastCharIndex=i.readUshort(t,e),e+=2,r.sTypoAscender=i.readShort(t,e),e+=2,r.sTypoDescender=i.readShort(t,e),e+=2,r.sTypoLineGap=i.readShort(t,e),e+=2,r.usWinAscent=i.readUshort(t,e),e+=2,r.usWinDescent=i.readUshort(t,e),e+=2},n["OS/2"].version1=function(t,e,r){var i=n._bin;return e=n["OS/2"].version0(t,e,r),r.ulCodePageRange1=i.readUint(t,e),e+=4,r.ulCodePageRange2=i.readUint(t,e),e+=4},n["OS/2"].version2=function(t,e,r){var i=n._bin;return e=n["OS/2"].version1(t,e,r),r.sxHeight=i.readShort(t,e),e+=2,r.sCapHeight=i.readShort(t,e),e+=2,r.usDefault=i.readUshort(t,e),e+=2,r.usBreak=i.readUshort(t,e),e+=2,r.usMaxContext=i.readUshort(t,e),e+=2},n["OS/2"].version5=function(t,e,r){var i=n._bin;return e=n["OS/2"].version2(t,e,r),r.usLowerOpticalPointSize=i.readUshort(t,e),e+=2,r.usUpperOpticalPointSize=i.readUshort(t,e),e+=2},n.post={},n.post.parse=function(t,e,r){var i=n._bin,o={};return o.version=i.readFixed(t,e),e+=4,o.italicAngle=i.readFixed(t,e),e+=4,o.underlinePosition=i.readShort(t,e),e+=2,o.underlineThickness=i.readShort(t,e),e+=2,o},n==null&&(n={}),n.U==null&&(n.U={}),n.U.codeToGlyph=function(t,e){var r=t.cmap,i=-1;if(r.p0e4!=null?i=r.p0e4:r.p3e1!=null?i=r.p3e1:r.p1e0!=null?i=r.p1e0:r.p0e3!=null&&(i=r.p0e3),i==-1)throw"no familiar platform and encoding!";var o=r.tables[i];if(o.format==0)return e>=o.map.length?0:o.map[e];if(o.format==4){for(var a=-1,l=0;l<o.endCount.length;l++)if(e<=o.endCount[l]){a=l;break}return a==-1||o.startCount[a]>e?0:65535&(o.idRangeOffset[a]!=0?o.glyphIdArray[e-o.startCount[a]+(o.idRangeOffset[a]>>1)-(o.idRangeOffset.length-a)]:e+o.idDelta[a])}if(o.format==12){if(e>o.groups[o.groups.length-1][1])return 0;for(l=0;l<o.groups.length;l++){var c=o.groups[l];if(c[0]<=e&&e<=c[1])return c[2]+(e-c[0])}return 0}throw"unknown cmap table format "+o.format},n.U.glyphToPath=function(t,e){var r={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var i=t.SVG.entries[e];return i==null?r:(typeof i=="string"&&(i=n.SVG.toPath(i),t.SVG.entries[e]=i),i)}if(t.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},a=t.CFF,l=t.CFF.Private;if(a.ROS){for(var c=0;a.FDSelect[c+2]<=e;)c+=2;l=a.FDArray[a.FDSelect[c+1]].Private}n.U._drawCFF(t.CFF.CharStrings[e],o,a,l,r)}else t.glyf&&n.U._drawGlyf(e,t,r);return r},n.U._drawGlyf=function(t,e,r){var i=e.glyf[t];i==null&&(i=e.glyf[t]=n.glyf._parseGlyf(e,t)),i!=null&&(i.noc>-1?n.U._simpleGlyph(i,r):n.U._compoGlyph(i,e,r))},n.U._simpleGlyph=function(t,e){for(var r=0;r<t.noc;r++){for(var i=r==0?0:t.endPts[r-1]+1,o=t.endPts[r],a=i;a<=o;a++){var l=a==i?o:a-1,c=a==o?i:a+1,d=1&t.flags[a],h=1&t.flags[l],v=1&t.flags[c],m=t.xs[a],g=t.ys[a];if(a==i)if(d){if(!h){n.U.P.moveTo(e,m,g);continue}n.U.P.moveTo(e,t.xs[l],t.ys[l])}else h?n.U.P.moveTo(e,t.xs[l],t.ys[l]):n.U.P.moveTo(e,(t.xs[l]+m)/2,(t.ys[l]+g)/2);d?h&&n.U.P.lineTo(e,m,g):v?n.U.P.qcurveTo(e,m,g,t.xs[c],t.ys[c]):n.U.P.qcurveTo(e,m,g,(m+t.xs[c])/2,(g+t.ys[c])/2)}n.U.P.closePath(e)}},n.U._compoGlyph=function(t,e,r){for(var i=0;i<t.parts.length;i++){var o={cmds:[],crds:[]},a=t.parts[i];n.U._drawGlyf(a.glyphIndex,e,o);for(var l=a.m,c=0;c<o.crds.length;c+=2){var d=o.crds[c],h=o.crds[c+1];r.crds.push(d*l.a+h*l.b+l.tx),r.crds.push(d*l.c+h*l.d+l.ty)}for(c=0;c<o.cmds.length;c++)r.cmds.push(o.cmds[c])}},n.U._getGlyphClass=function(t,e){var r=n._lctf.getInterval(e,t);return r==-1?0:e[r+2]},n.U._applySubs=function(t,e,r,i){for(var o=t.length-e-1,a=0;a<r.tabs.length;a++)if(r.tabs[a]!=null){var l,c=r.tabs[a];if(!c.coverage||(l=n._lctf.coverageIndex(c.coverage,t[e]))!=-1){if(r.ltype==1)t[e],c.fmt==1?t[e]=t[e]+c.delta:t[e]=c.newg[l];else if(r.ltype==4)for(var d=c.vals[l],h=0;h<d.length;h++){var v=d[h],m=v.chain.length;if(!(m>o)){for(var g=!0,R=0,A=0;A<m;A++){for(;t[e+R+(1+A)]==-1;)R++;v.chain[A]!=t[e+R+(1+A)]&&(g=!1)}if(g){for(t[e]=v.nglyph,A=0;A<m+R;A++)t[e+A+1]=-1;break}}}else if(r.ltype==5&&c.fmt==2)for(var U=n._lctf.getInterval(c.cDef,t[e]),w=c.cDef[U+2],T=c.scset[w],I=0;I<T.length;I++){var C=T[I],D=C.input;if(!(D.length>o)){for(g=!0,A=0;A<D.length;A++){var W=n._lctf.getInterval(c.cDef,t[e+1+A]);if(U==-1&&c.cDef[W+2]!=D[A]){g=!1;break}}if(g){var O=C.substLookupRecords;for(h=0;h<O.length;h+=2)O[h],O[h+1]}}}else if(r.ltype==6&&c.fmt==3){if(!n.U._glsCovered(t,c.backCvg,e-c.backCvg.length)||!n.U._glsCovered(t,c.inptCvg,e)||!n.U._glsCovered(t,c.ahedCvg,e+c.inptCvg.length))continue;var ne=c.lookupRec;for(I=0;I<ne.length;I+=2){U=ne[I];var _=i[ne[I+1]];n.U._applySubs(t,e+U,_,i)}}}}},n.U._glsCovered=function(t,e,r){for(var i=0;i<e.length;i++)if(n._lctf.coverageIndex(e[i],t[r+i])==-1)return!1;return!0},n.U.glyphsToPath=function(t,e,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<e.length;a++){var l=e[a];if(l!=-1){for(var c=a<e.length-1&&e[a+1]!=-1?e[a+1]:0,d=n.U.glyphToPath(t,l),h=0;h<d.crds.length;h+=2)i.crds.push(d.crds[h]+o),i.crds.push(d.crds[h+1]);for(r&&i.cmds.push(r),h=0;h<d.cmds.length;h++)i.cmds.push(d.cmds[h]);r&&i.cmds.push("X"),o+=t.hmtx.aWidth[l],a<e.length-1&&(o+=n.U.getPairAdjustment(t,l,c))}}return i},n.U.P={},n.U.P.moveTo=function(t,e,r){t.cmds.push("M"),t.crds.push(e,r)},n.U.P.lineTo=function(t,e,r){t.cmds.push("L"),t.crds.push(e,r)},n.U.P.curveTo=function(t,e,r,i,o,a,l){t.cmds.push("C"),t.crds.push(e,r,i,o,a,l)},n.U.P.qcurveTo=function(t,e,r,i,o){t.cmds.push("Q"),t.crds.push(e,r,i,o)},n.U.P.closePath=function(t){t.cmds.push("Z")},n.U._drawCFF=function(t,e,r,i,o){for(var a=e.stack,l=e.nStems,c=e.haveWidth,d=e.width,h=e.open,v=0,m=e.x,g=e.y,R=0,A=0,U=0,w=0,T=0,I=0,C=0,D=0,W=0,O=0,ne={val:0,size:0};v<t.length;){n.CFF.getCharString(t,v,ne);var _=ne.val;if(v+=ne.size,_=="o1"||_=="o18")a.length%2!=0&&!c&&(d=a.shift()+i.nominalWidthX),l+=a.length>>1,a.length=0,c=!0;else if(_=="o3"||_=="o23")a.length%2!=0&&!c&&(d=a.shift()+i.nominalWidthX),l+=a.length>>1,a.length=0,c=!0;else if(_=="o4")a.length>1&&!c&&(d=a.shift()+i.nominalWidthX,c=!0),h&&n.U.P.closePath(o),g+=a.pop(),n.U.P.moveTo(o,m,g),h=!0;else if(_=="o5")for(;a.length>0;)m+=a.shift(),g+=a.shift(),n.U.P.lineTo(o,m,g);else if(_=="o6"||_=="o7")for(var P=a.length,k=_=="o6",H=0;H<P;H++){var V=a.shift();k?m+=V:g+=V,k=!k,n.U.P.lineTo(o,m,g)}else if(_=="o8"||_=="o24"){P=a.length;for(var ae=0;ae+6<=P;)R=m+a.shift(),A=g+a.shift(),U=R+a.shift(),w=A+a.shift(),m=U+a.shift(),g=w+a.shift(),n.U.P.curveTo(o,R,A,U,w,m,g),ae+=6;_=="o24"&&(m+=a.shift(),g+=a.shift(),n.U.P.lineTo(o,m,g))}else{if(_=="o11")break;if(_=="o1234"||_=="o1235"||_=="o1236"||_=="o1237")_=="o1234"&&(A=g,U=(R=m+a.shift())+a.shift(),O=w=A+a.shift(),I=w,D=g,m=(C=(T=(W=U+a.shift())+a.shift())+a.shift())+a.shift(),n.U.P.curveTo(o,R,A,U,w,W,O),n.U.P.curveTo(o,T,I,C,D,m,g)),_=="o1235"&&(R=m+a.shift(),A=g+a.shift(),U=R+a.shift(),w=A+a.shift(),W=U+a.shift(),O=w+a.shift(),T=W+a.shift(),I=O+a.shift(),C=T+a.shift(),D=I+a.shift(),m=C+a.shift(),g=D+a.shift(),a.shift(),n.U.P.curveTo(o,R,A,U,w,W,O),n.U.P.curveTo(o,T,I,C,D,m,g)),_=="o1236"&&(R=m+a.shift(),A=g+a.shift(),U=R+a.shift(),O=w=A+a.shift(),I=w,C=(T=(W=U+a.shift())+a.shift())+a.shift(),D=I+a.shift(),m=C+a.shift(),n.U.P.curveTo(o,R,A,U,w,W,O),n.U.P.curveTo(o,T,I,C,D,m,g)),_=="o1237"&&(R=m+a.shift(),A=g+a.shift(),U=R+a.shift(),w=A+a.shift(),W=U+a.shift(),O=w+a.shift(),T=W+a.shift(),I=O+a.shift(),C=T+a.shift(),D=I+a.shift(),Math.abs(C-m)>Math.abs(D-g)?m=C+a.shift():g=D+a.shift(),n.U.P.curveTo(o,R,A,U,w,W,O),n.U.P.curveTo(o,T,I,C,D,m,g));else if(_=="o14"){if(a.length>0&&!c&&(d=a.shift()+r.nominalWidthX,c=!0),a.length==4){var ie=a.shift(),b=a.shift(),M=a.shift(),p=a.shift(),S=n.CFF.glyphBySE(r,M),F=n.CFF.glyphBySE(r,p);n.U._drawCFF(r.CharStrings[S],e,r,i,o),e.x=ie,e.y=b,n.U._drawCFF(r.CharStrings[F],e,r,i,o)}h&&(n.U.P.closePath(o),h=!1)}else if(_=="o19"||_=="o20")a.length%2!=0&&!c&&(d=a.shift()+i.nominalWidthX),l+=a.length>>1,a.length=0,c=!0,v+=l+7>>3;else if(_=="o21")a.length>2&&!c&&(d=a.shift()+i.nominalWidthX,c=!0),g+=a.pop(),m+=a.pop(),h&&n.U.P.closePath(o),n.U.P.moveTo(o,m,g),h=!0;else if(_=="o22")a.length>1&&!c&&(d=a.shift()+i.nominalWidthX,c=!0),m+=a.pop(),h&&n.U.P.closePath(o),n.U.P.moveTo(o,m,g),h=!0;else if(_=="o25"){for(;a.length>6;)m+=a.shift(),g+=a.shift(),n.U.P.lineTo(o,m,g);R=m+a.shift(),A=g+a.shift(),U=R+a.shift(),w=A+a.shift(),m=U+a.shift(),g=w+a.shift(),n.U.P.curveTo(o,R,A,U,w,m,g)}else if(_=="o26")for(a.length%2&&(m+=a.shift());a.length>0;)R=m,A=g+a.shift(),m=U=R+a.shift(),g=(w=A+a.shift())+a.shift(),n.U.P.curveTo(o,R,A,U,w,m,g);else if(_=="o27")for(a.length%2&&(g+=a.shift());a.length>0;)A=g,U=(R=m+a.shift())+a.shift(),w=A+a.shift(),m=U+a.shift(),g=w,n.U.P.curveTo(o,R,A,U,w,m,g);else if(_=="o10"||_=="o29"){var E=_=="o10"?i:r;if(a.length==0)console.debug("error: empty stack");else{var x=a.pop(),G=E.Subrs[x+E.Bias];e.x=m,e.y=g,e.nStems=l,e.haveWidth=c,e.width=d,e.open=h,n.U._drawCFF(G,e,r,i,o),m=e.x,g=e.y,l=e.nStems,c=e.haveWidth,d=e.width,h=e.open}}else if(_=="o30"||_=="o31"){var L=a.length,z=(ae=0,_=="o31");for(ae+=L-(P=-3&L);ae<P;)z?(A=g,U=(R=m+a.shift())+a.shift(),g=(w=A+a.shift())+a.shift(),P-ae==5?(m=U+a.shift(),ae++):m=U,z=!1):(R=m,A=g+a.shift(),U=R+a.shift(),w=A+a.shift(),m=U+a.shift(),P-ae==5?(g=w+a.shift(),ae++):g=w,z=!0),n.U.P.curveTo(o,R,A,U,w,m,g),ae+=4}else{if((_+"").charAt(0)=="o")throw console.debug("Unknown operation: "+_,t),_;a.push(_)}}}e.x=m,e.y=g,e.nStems=l,e.haveWidth=c,e.width=d,e.open=h};var u=n,f={Typr:u};return s.Typr=u,s.default=f,Object.defineProperty(s,"__esModule",{value:!0}),s}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Os(){return function(s){var n=Uint8Array,u=Uint16Array,f=Uint32Array,t=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),r=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=function(_,P){for(var k=new u(31),H=0;H<31;++H)k[H]=P+=1<<_[H-1];var V=new f(k[30]);for(H=1;H<30;++H)for(var ae=k[H];ae<k[H+1];++ae)V[ae]=ae-k[H]<<5|H;return[k,V]},o=i(t,2),a=o[0],l=o[1];a[28]=258,l[258]=28;for(var c=i(e,0)[0],d=new u(32768),h=0;h<32768;++h){var v=(43690&h)>>>1|(21845&h)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,d[h]=((65280&v)>>>8|(255&v)<<8)>>>1}var m=function(_,P,k){for(var H=_.length,V=0,ae=new u(P);V<H;++V)++ae[_[V]-1];var ie,b=new u(P);for(V=0;V<P;++V)b[V]=b[V-1]+ae[V-1]<<1;{ie=new u(1<<P);var M=15-P;for(V=0;V<H;++V)if(_[V])for(var p=V<<4|_[V],S=P-_[V],F=b[_[V]-1]++<<S,E=F|(1<<S)-1;F<=E;++F)ie[d[F]>>>M]=p}return ie},g=new n(288);for(h=0;h<144;++h)g[h]=8;for(h=144;h<256;++h)g[h]=9;for(h=256;h<280;++h)g[h]=7;for(h=280;h<288;++h)g[h]=8;var R=new n(32);for(h=0;h<32;++h)R[h]=5;var A=m(g,9),U=m(R,5),w=function(_){for(var P=_[0],k=1;k<_.length;++k)_[k]>P&&(P=_[k]);return P},T=function(_,P,k){var H=P/8|0;return(_[H]|_[H+1]<<8)>>(7&P)&k},I=function(_,P){var k=P/8|0;return(_[k]|_[k+1]<<8|_[k+2]<<16)>>(7&P)},C=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],D=function(_,P,k){var H=new Error(P||C[_]);if(H.code=_,Error.captureStackTrace&&Error.captureStackTrace(H,D),!k)throw H;return H},W=function(_,P,k){var H=_.length;if(!H||k&&!k.l&&H<5)return P||new n(0);var V=!P||k,ae=!k||k.i;k||(k={}),P||(P=new n(3*H));var ie,b=function(fe){var pe=P.length;if(fe>pe){var _e=new n(Math.max(2*pe,fe));_e.set(P),P=_e}},M=k.f||0,p=k.p||0,S=k.b||0,F=k.l,E=k.d,x=k.m,G=k.n,L=8*H;do{if(!F){k.f=M=T(_,p,1);var z=T(_,p+1,3);if(p+=3,!z){var Z=_[(te=((ie=p)/8|0)+(7&ie&&1)+4)-4]|_[te-3]<<8,re=te+Z;if(re>H){ae&&D(0);break}V&&b(S+Z),P.set(_.subarray(te,re),S),k.b=S+=Z,k.p=p=8*re;continue}if(z==1)F=A,E=U,x=9,G=5;else if(z==2){var J=T(_,p,31)+257,y=T(_,p+10,15)+4,j=J+T(_,p+5,31)+1;p+=14;for(var K=new n(j),X=new n(19),Y=0;Y<y;++Y)X[r[Y]]=T(_,p+3*Y,7);p+=3*y;var Q=w(X),N=(1<<Q)-1,q=m(X,Q);for(Y=0;Y<j;){var te,B=q[T(_,p,N)];if(p+=15&B,(te=B>>>4)<16)K[Y++]=te;else{var se=0,ee=0;for(te==16?(ee=3+T(_,p,3),p+=2,se=K[Y-1]):te==17?(ee=3+T(_,p,7),p+=3):te==18&&(ee=11+T(_,p,127),p+=7);ee--;)K[Y++]=se}}var oe=K.subarray(0,J),$=K.subarray(J);x=w(oe),G=w($),F=m(oe,x),E=m($,G)}else D(1);if(p>L){ae&&D(0);break}}V&&b(S+131072);for(var Se=(1<<x)-1,ue=(1<<G)-1,le=p;;le=p){var ce=(se=F[I(_,p)&Se])>>>4;if((p+=15&se)>L){ae&&D(0);break}if(se||D(2),ce<256)P[S++]=ce;else{if(ce==256){le=p,F=null;break}var me=ce-254;if(ce>264){var ke=t[Y=ce-257];me=T(_,p,(1<<ke)-1)+a[Y],p+=ke}var Fe=E[I(_,p)&ue],he=Fe>>>4;if(Fe||D(3),p+=15&Fe,$=c[he],he>3&&(ke=e[he],$+=I(_,p)&(1<<ke)-1,p+=ke),p>L){ae&&D(0);break}V&&b(S+131072);for(var ge=S+me;S<ge;S+=4)P[S]=P[S-$],P[S+1]=P[S+1-$],P[S+2]=P[S+2-$],P[S+3]=P[S+3-$];S=ge}}k.l=F,k.p=le,k.b=S,F&&(M=1,k.m=x,k.d=E,k.n=G)}while(!M);return S==P.length?P:function(fe,pe,_e){(_e==null||_e>fe.length)&&(_e=fe.length);var Ne=new(fe instanceof u?u:fe instanceof f?f:n)(_e-pe);return Ne.set(fe.subarray(pe,_e)),Ne}(P,0,S)},O=new n(0),ne=typeof TextDecoder<"u"&&new TextDecoder;try{ne.decode(O,{stream:!0})}catch{}return s.convert_streams=function(_){var P=new DataView(_),k=0;function H(){var J=P.getUint16(k);return k+=2,J}function V(){var J=P.getUint32(k);return k+=4,J}function ae(J){Z.setUint16(re,J),re+=2}function ie(J){Z.setUint32(re,J),re+=4}for(var b={signature:V(),flavor:V(),length:V(),numTables:H(),reserved:H(),totalSfntSize:V(),majorVersion:H(),minorVersion:H(),metaOffset:V(),metaLength:V(),metaOrigLength:V(),privOffset:V(),privLength:V()},M=0;Math.pow(2,M)<=b.numTables;)M++;M--;for(var p=16*Math.pow(2,M),S=16*b.numTables-p,F=12,E=[],x=0;x<b.numTables;x++)E.push({tag:V(),offset:V(),compLength:V(),origLength:V(),origChecksum:V()}),F+=16;var G,L=new Uint8Array(12+16*E.length+E.reduce(function(J,y){return J+y.origLength+4},0)),z=L.buffer,Z=new DataView(z),re=0;return ie(b.flavor),ae(b.numTables),ae(p),ae(M),ae(S),E.forEach(function(J){ie(J.tag),ie(J.origChecksum),ie(F),ie(J.origLength),J.outOffset=F,(F+=J.origLength)%4!=0&&(F+=4-F%4)}),E.forEach(function(J){var y,j=_.slice(J.offset,J.offset+J.compLength);if(J.compLength!=J.origLength){var K=new Uint8Array(J.origLength);y=new Uint8Array(j,2),W(y,K)}else K=new Uint8Array(j);L.set(K,J.outOffset);var X=0;(F=J.outOffset+J.origLength)%4!=0&&(X=4-F%4),L.set(new Uint8Array(X).buffer,J.outOffset+J.origLength),G=F+X}),z.slice(0,G)},Object.defineProperty(s,"__esModule",{value:!0}),s}({}).convert_streams}function Ps(s,n){const u={M:2,L:2,Q:4,C:6,Z:0},f={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},t=1,e=2,r=4,i=8,o=16,a=32;let l;function c(C){if(!l){const D={R:e,L:t,D:r,C:o,U:a,T:i};l=new Map;for(let W in f){let O=0;f[W].split(",").forEach(ne=>{let[_,P]=ne.split("+");_=parseInt(_,36),P=P?parseInt(P,36):0,l.set(O+=_,D[W]);for(let k=P;k--;)l.set(++O,D[W])})}}return l.get(C)||a}const d=1,h=2,v=3,m=4,g=[null,"isol","init","fina","medi"];function R(C){const D=new Uint8Array(C.length);let W=a,O=d,ne=-1;for(let _=0;_<C.length;_++){const P=C.codePointAt(_);let k=c(P)|0,H=d;k&i||(W&(t|r|o)?k&(e|r|o)?(H=v,(O===d||O===v)&&D[ne]++):k&(t|a)&&(O===h||O===m)&&D[ne]--:W&(e|a)&&(O===h||O===m)&&D[ne]--,O=D[_]=H,W=k,ne=_,P>65535&&_++)}return D}function A(C,D){const W=[];for(let ne=0;ne<D.length;ne++){const _=D.codePointAt(ne);_>65535&&ne++,W.push(s.U.codeToGlyph(C,_))}const O=C.GSUB;if(O){const{lookupList:ne,featureList:_}=O;let P;const k=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,H=[];_.forEach(V=>{if(k.test(V.tag))for(let ae=0;ae<V.tab.length;ae++){if(H[V.tab[ae]])continue;H[V.tab[ae]]=!0;const ie=ne[V.tab[ae]],b=/^(isol|init|fina|medi)$/.test(V.tag);b&&!P&&(P=R(D));for(let M=0;M<W.length;M++)(!P||!b||g[P[M]]===V.tag)&&s.U._applySubs(W,M,ie,ne)}})}return W}function U(C,D){const W=new Int16Array(D.length*3);let O=0;for(;O<D.length;O++){const k=D[O];if(k===-1)continue;W[O*3+2]=C.hmtx.aWidth[k];const H=C.GPOS;if(H){const V=H.lookupList;for(let ae=0;ae<V.length;ae++){const ie=V[ae];for(let b=0;b<ie.tabs.length;b++){const M=ie.tabs[b];if(ie.ltype===1){if(s._lctf.coverageIndex(M.coverage,k)!==-1&&M.pos){P(M.pos,O);break}}else if(ie.ltype===2){let p=null,S=ne();if(S!==-1){const F=s._lctf.coverageIndex(M.coverage,D[S]);if(F!==-1){if(M.fmt===1){const E=M.pairsets[F];for(let x=0;x<E.length;x++)E[x].gid2===k&&(p=E[x])}else if(M.fmt===2){const E=s.U._getGlyphClass(D[S],M.classDef1),x=s.U._getGlyphClass(k,M.classDef2);p=M.matrix[E][x]}if(p){p.val1&&P(p.val1,S),p.val2&&P(p.val2,O);break}}}}else if(ie.ltype===4){const p=s._lctf.coverageIndex(M.markCoverage,k);if(p!==-1){const S=ne(_),F=S===-1?-1:s._lctf.coverageIndex(M.baseCoverage,D[S]);if(F!==-1){const E=M.markArray[p],x=M.baseArray[F][E.markClass];W[O*3]=x.x-E.x+W[S*3]-W[S*3+2],W[O*3+1]=x.y-E.y+W[S*3+1];break}}}else if(ie.ltype===6){const p=s._lctf.coverageIndex(M.mark1Coverage,k);if(p!==-1){const S=ne();if(S!==-1){const F=D[S];if(w(C,F)===3){const E=s._lctf.coverageIndex(M.mark2Coverage,F);if(E!==-1){const x=M.mark1Array[p],G=M.mark2Array[E][x.markClass];W[O*3]=G.x-x.x+W[S*3]-W[S*3+2],W[O*3+1]=G.y-x.y+W[S*3+1];break}}}}}}}}else if(C.kern&&!C.cff){const V=ne();if(V!==-1){const ae=C.kern.glyph1.indexOf(D[V]);if(ae!==-1){const ie=C.kern.rval[ae].glyph2.indexOf(k);ie!==-1&&(W[V*3+2]+=C.kern.rval[ae].vals[ie])}}}}return W;function ne(k){for(let H=O-1;H>=0;H--)if(D[H]!==-1&&(!k||k(D[H])))return H;return-1}function _(k){return w(C,k)===1}function P(k,H){for(let V=0;V<3;V++)W[H*3+V]+=k[V]||0}}function w(C,D){const W=C.GDEF&&C.GDEF.glyphClassDef;return W?s.U._getGlyphClass(D,W):0}function T(...C){for(let D=0;D<C.length;D++)if(typeof C[D]=="number")return C[D]}function I(C){const D=Object.create(null),W=C["OS/2"],O=C.hhea,ne=C.head.unitsPerEm,_=T(W&&W.sTypoAscender,O&&O.ascender,ne),P={unitsPerEm:ne,ascender:_,descender:T(W&&W.sTypoDescender,O&&O.descender,0),capHeight:T(W&&W.sCapHeight,_),xHeight:T(W&&W.sxHeight,_),lineGap:T(W&&W.sTypoLineGap,O&&O.lineGap),supportsCodePoint(k){return s.U.codeToGlyph(C,k)>0},forEachGlyph(k,H,V,ae){let ie=0;const b=1/P.unitsPerEm*H,M=A(C,k);let p=0;const S=U(C,M);return M.forEach((F,E)=>{if(F!==-1){let x=D[F];if(!x){const{cmds:G,crds:L}=s.U.glyphToPath(C,F);let z="",Z=0;for(let K=0,X=G.length;K<X;K++){const Y=u[G[K]];z+=G[K];for(let Q=1;Q<=Y;Q++)z+=(Q>1?",":"")+L[Z++]}let re,J,y,j;if(L.length){re=J=1/0,y=j=-1/0;for(let K=0,X=L.length;K<X;K+=2){let Y=L[K],Q=L[K+1];Y<re&&(re=Y),Q<J&&(J=Q),Y>y&&(y=Y),Q>j&&(j=Q)}}else re=y=J=j=0;x=D[F]={index:F,advanceWidth:C.hmtx.aWidth[F],xMin:re,yMin:J,xMax:y,yMax:j,path:z}}ae.call(null,x,ie+S[E*3]*b,S[E*3+1]*b,p),ie+=S[E*3+2]*b,V&&(ie+=V*H)}p+=k.codePointAt(p)>65535?2:1}),ie}};return P}return function(D){const W=new Uint8Array(D,0,4),O=s._bin.readASCII(W,0,4);if(O==="wOFF")D=n(D);else if(O==="wOF2")throw new Error("woff2 fonts not supported");return I(s.parse(D)[0])}}const Bs=Xt({name:"Typr Font Parser",dependencies:[Is,Os,Ps],init(s,n,u){const f=s(),t=n();return u(f,t)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function Gs(){return function(s){var n=function(){this.buckets=new Map};n.prototype.add=function(U){var w=U>>5;this.buckets.set(w,(this.buckets.get(w)||0)|1<<(31&U))},n.prototype.has=function(U){var w=this.buckets.get(U>>5);return w!==void 0&&(w&1<<(31&U))!=0},n.prototype.serialize=function(){var U=[];return this.buckets.forEach(function(w,T){U.push((+T).toString(36)+":"+w.toString(36))}),U.join(",")},n.prototype.deserialize=function(U){var w=this;this.buckets.clear(),U.split(",").forEach(function(T){var I=T.split(":");w.buckets.set(parseInt(I[0],36),parseInt(I[1],36))})};var u=Math.pow(2,8),f=u-1,t=~f;function e(U){var w=function(I){return I&t}(U).toString(16),T=function(I){return(I&t)+u-1}(U).toString(16);return"codepoint-index/plane"+(U>>16)+"/"+w+"-"+T+".json"}function r(U,w){var T=U&f,I=w.codePointAt(T/6|0);return((I=(I||48)-48)&1<<T%6)!=0}function i(U,w){var T;(T=U,T.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(I){return I.split("-").map(function(C){return parseInt(C.trim(),16)})})).forEach(function(I){var C=I[0],D=I[1];D===void 0&&(D=C),w(C,D)})}function o(U,w){i(U,function(T,I){for(var C=T;C<=I;C++)w(C)})}var a={},l={},c=new WeakMap,d="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function h(U){var w=c.get(U);return w||(w=new n,o(U.ranges,function(T){return w.add(T)}),c.set(U,w)),w}var v,m=new Map;function g(U,w,T){return U[w]?w:U[T]?T:function(I){for(var C in I)return C}(U)}function R(U,w){var T=w;if(!U.includes(T)){T=1/0;for(var I=0;I<U.length;I++)Math.abs(U[I]-w)<Math.abs(T-w)&&(T=U[I])}return T}function A(U){return v||(v=new Set,o("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(w){v.add(w)})),v.has(U)}return s.CodePointSet=n,s.clearCache=function(){a={},l={}},s.getFontsForString=function(U,w){w===void 0&&(w={});var T,I=w.lang;I===void 0&&(I=new RegExp("\\p{Script=Hangul}","u").test(T=U)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(T)?"ja":"en");var C=w.category;C===void 0&&(C="sans-serif");var D=w.style;D===void 0&&(D="normal");var W=w.weight;W===void 0&&(W=400);var O=(w.dataUrl||d).replace(/\/$/g,""),ne=new Map,_=new Uint8Array(U.length),P={},k={},H=new Array(U.length),V=new Map,ae=!1;function ie(p){var S=m.get(p);return S||(S=fetch(O+"/"+p).then(function(F){if(!F.ok)throw new Error(F.statusText);return F.json().then(function(E){if(!Array.isArray(E)||E[0]!==1)throw new Error("Incorrect schema version; need 1, got "+E[0]);return E[1]})}).catch(function(F){if(O!==d)return ae||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+O+'", trying default CDN. '+F.message),ae=!0),O=d,m.delete(p),ie(p);throw F}),m.set(p,S)),S}for(var b=function(p){var S=U.codePointAt(p),F=e(S);H[p]=F,a[F]||V.has(F)||V.set(F,ie(F).then(function(E){a[F]=E})),S>65535&&(p++,M=p)},M=0;M<U.length;M++)b(M);return Promise.all(V.values()).then(function(){V.clear();for(var p=function(F){var E=U.codePointAt(F),x=null,G=a[H[F]],L=void 0;for(var z in G){var Z=k[z];if(Z===void 0&&(Z=k[z]=new RegExp(z).test(I||"en")),Z){for(var re in L=z,G[z])if(r(E,G[z][re])){x=re;break}break}}if(!x){e:for(var J in G)if(J!==L){for(var y in G[J])if(r(E,G[J][y])){x=y;break e}}}x||(console.debug("No font coverage for U+"+E.toString(16)),x="latin"),H[F]=x,l[x]||V.has(x)||V.set(x,ie("font-meta/"+x+".json").then(function(j){l[x]=j})),E>65535&&(F++,S=F)},S=0;S<U.length;S++)p(S);return Promise.all(V.values())}).then(function(){for(var p,S=null,F=0;F<U.length;F++){var E=U.codePointAt(F);if(S&&(A(E)||h(S).has(E)))_[F]=_[F-1];else{S=l[H[F]];var x=P[S.id];if(!x){var G=S.typeforms,L=g(G,C,"sans-serif"),z=g(G[L],D,"normal"),Z=R((p=G[L])===null||p===void 0?void 0:p[z],W);x=P[S.id]=O+"/font-files/"+S.id+"/"+L+"."+z+"."+Z+".woff"}var re=ne.get(x);re==null&&(re=ne.size,ne.set(x,re)),_[F]=re}E>65535&&(F++,_[F]=_[F-1])}return{fontUrls:Array.from(ne.keys()),chars:_}})},Object.defineProperty(s,"__esModule",{value:!0}),s}({})}function Ns(s,n){const u=Object.create(null),f=Object.create(null);function t(r,i){const o=a=>{console.error(`Failure loading font ${r}`,a)};try{const a=new XMLHttpRequest;a.open("get",r,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status>=400)o(new Error(a.statusText));else if(a.status>0)try{const l=s(a.response);l.src=r,i(l)}catch(l){o(l)}},a.onerror=o,a.send()}catch(a){o(a)}}function e(r,i){let o=u[r];o?i(o):f[r]?f[r].push(i):(f[r]=[i],t(r,a=>{a.src=r,u[r]=a,f[r].forEach(l=>l(a)),delete f[r]}))}return function(r,i,{lang:o,fonts:a=[],style:l="normal",weight:c="normal",unicodeFontsURL:d}={}){const h=new Uint8Array(r.length),v=[];r.length||A();const m=new Map,g=[];if(l!=="italic"&&(l="normal"),typeof c!="number"&&(c=c==="bold"?700:400),a&&!Array.isArray(a)&&(a=[a]),a=a.slice().filter(w=>!w.lang||w.lang.test(o)).reverse(),a.length){let C=0;(function D(W=0){for(let O=W,ne=r.length;O<ne;O++){const _=r.codePointAt(O);if(C===1&&v[h[O-1]].supportsCodePoint(_)||O>0&&/\s/.test(r[O]))h[O]=h[O-1],C===2&&(g[g.length-1][1]=O);else for(let P=h[O],k=a.length;P<=k;P++)if(P===k){const H=C===2?g[g.length-1]:g[g.length]=[O,O];H[1]=O,C=2}else{h[O]=P;const{src:H,unicodeRange:V}=a[P];if(!V||U(_,V)){const ae=u[H];if(!ae){e(H,()=>{D(O)});return}if(ae.supportsCodePoint(_)){let ie=m.get(ae);typeof ie!="number"&&(ie=v.length,v.push(ae),m.set(ae,ie)),h[O]=ie,C=1;break}}}_>65535&&O+1<ne&&(h[O+1]=h[O],O++,C===2&&(g[g.length-1][1]=O))}R()})()}else g.push([0,r.length-1]),R();function R(){if(g.length){const w=g.map(T=>r.substring(T[0],T[1]+1)).join(`
`);n.getFontsForString(w,{lang:o||void 0,style:l,weight:c,dataUrl:d}).then(({fontUrls:T,chars:I})=>{const C=v.length;let D=0;g.forEach(O=>{for(let ne=0,_=O[1]-O[0];ne<=_;ne++)h[O[0]+ne]=I[D++]+C;D++});let W=0;T.forEach((O,ne)=>{e(O,_=>{v[ne+C]=_,++W===T.length&&A()})})})}else A()}function A(){i({chars:h,fonts:v})}function U(w,T){for(let I=0;I<T.length;I++){const[C,D=C]=T[I];if(C<=w&&w<=D)return!0}return!1}}}const zs=Xt({name:"FontResolver",dependencies:[Ns,Bs,Gs],init(s,n,u){return s(n,u())}});function Ws(s,n){const f=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,t="[^\\S\\u00A0]",e=new RegExp(`${t}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function r({text:v,lang:m,fonts:g,style:R,weight:A,preResolvedFonts:U,unicodeFontsURL:w},T){const I=({chars:C,fonts:D})=>{let W,O;const ne=[];for(let _=0;_<C.length;_++)C[_]!==O?(O=C[_],ne.push(W={start:_,end:_,fontObj:D[C[_]]})):W.end=_;T(ne)};U?I(U):s(v,I,{lang:m,fonts:g,style:R,weight:A,unicodeFontsURL:w})}function i({text:v="",font:m,lang:g,sdfGlyphSize:R=64,fontSize:A=400,fontWeight:U=1,fontStyle:w="normal",letterSpacing:T=0,lineHeight:I="normal",maxWidth:C=1/0,direction:D,textAlign:W="left",textIndent:O=0,whiteSpace:ne="normal",overflowWrap:_="normal",anchorX:P=0,anchorY:k=0,metricsOnly:H=!1,unicodeFontsURL:V,preResolvedFonts:ae=null,includeCaretPositions:ie=!1,chunkedBoundsSize:b=8192,colorRanges:M=null},p){const S=c(),F={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),A=+A,T=+T,C=+C,I=I||"normal",O=+O,r({text:v,lang:g,style:w,weight:U,fonts:typeof m=="string"?[{src:m}]:m,unicodeFontsURL:V,preResolvedFonts:ae},E=>{F.fontLoad=c()-S;const x=isFinite(C);let G=null,L=null,z=null,Z=null,re=null,J=null,y=null,j=null,K=0,X=0,Y=ne!=="nowrap";const Q=new Map,N=c();let q=O,te=0,B=new d;const se=[B];E.forEach(ue=>{const{fontObj:le}=ue,{ascender:ce,descender:me,unitsPerEm:ke,lineGap:Fe,capHeight:he,xHeight:ge}=le;let fe=Q.get(le);if(!fe){const ve=A/ke,Ue=I==="normal"?(ce-me+Fe)*ve:I*A,ut=(Ue-(ce-me)*ve)/2,De=Math.min(Ue,(ce-me)*ve),Te=(ce+me)/2*ve+De/2;fe={index:Q.size,src:le.src,fontObj:le,fontSizeMult:ve,unitsPerEm:ke,ascender:ce*ve,descender:me*ve,capHeight:he*ve,xHeight:ge*ve,lineHeight:Ue,baseline:-ut-ce*ve,caretTop:Te,caretBottom:Te-De},Q.set(le,fe)}const{fontSizeMult:pe}=fe,_e=v.slice(ue.start,ue.end+1);let Ne,Ae;le.forEachGlyph(_e,A,T,(ve,Ue,ut,De)=>{Ue+=te,De+=ue.start,Ne=Ue,Ae=ve;const Te=v.charAt(De),Be=ve.advanceWidth*pe,Ee=B.count;let ye;if("isEmpty"in ve||(ve.isWhitespace=!!Te&&new RegExp(t).test(Te),ve.canBreakAfter=!!Te&&e.test(Te),ve.isEmpty=ve.xMin===ve.xMax||ve.yMin===ve.yMax||f.test(Te)),!ve.isWhitespace&&!ve.isEmpty&&X++,Y&&x&&!ve.isWhitespace&&Ue+Be+q>C&&Ee){if(B.glyphAt(Ee-1).glyphObj.canBreakAfter)ye=new d,q=-Ue;else for(let We=Ee;We--;)if(We===0&&_==="break-word"){ye=new d,q=-Ue;break}else if(B.glyphAt(We).glyphObj.canBreakAfter){ye=B.splitAt(We+1);const xe=ye.glyphAt(0).x;q-=xe;for(let Ie=ye.count;Ie--;)ye.glyphAt(Ie).x-=xe;break}ye&&(B.isSoftWrapped=!0,B=ye,se.push(B),K=C)}let Me=B.glyphAt(B.count);Me.glyphObj=ve,Me.x=Ue+q,Me.y=ut,Me.width=Be,Me.charIndex=De,Me.fontData=fe,Te===`
`&&(B=new d,se.push(B),q=-(Ue+Be+T*A)+O)}),te=Ne+Ae.advanceWidth*pe+T*A});let ee=0;se.forEach(ue=>{let le=!0;for(let ce=ue.count;ce--;){const me=ue.glyphAt(ce);le&&!me.glyphObj.isWhitespace&&(ue.width=me.x+me.width,ue.width>K&&(K=ue.width),le=!1);let{lineHeight:ke,capHeight:Fe,xHeight:he,baseline:ge}=me.fontData;ke>ue.lineHeight&&(ue.lineHeight=ke);const fe=ge-ue.baseline;fe<0&&(ue.baseline+=fe,ue.cap+=fe,ue.ex+=fe),ue.cap=Math.max(ue.cap,ue.baseline+Fe),ue.ex=Math.max(ue.ex,ue.baseline+he)}ue.baseline-=ee,ue.cap-=ee,ue.ex-=ee,ee+=ue.lineHeight});let oe=0,$=0;if(P&&(typeof P=="number"?oe=-P:typeof P=="string"&&(oe=-K*(P==="left"?0:P==="center"?.5:P==="right"?1:a(P)))),k&&(typeof k=="number"?$=-k:typeof k=="string"&&($=k==="top"?0:k==="top-baseline"?-se[0].baseline:k==="top-cap"?-se[0].cap:k==="top-ex"?-se[0].ex:k==="middle"?ee/2:k==="bottom"?ee:k==="bottom-baseline"?-se[se.length-1].baseline:a(k)*ee)),!H){const ue=n.getEmbeddingLevels(v,D);G=new Uint16Array(X),L=new Uint8Array(X),z=new Float32Array(X*2),Z={},y=[1/0,1/0,-1/0,-1/0],j=[],ie&&(J=new Float32Array(v.length*4)),M&&(re=new Uint8Array(X*3));let le=0,ce=-1,me=-1,ke,Fe;if(se.forEach((he,ge)=>{let{count:fe,width:pe}=he;if(fe>0){let _e=0;for(let De=fe;De--&&he.glyphAt(De).glyphObj.isWhitespace;)_e++;let Ne=0,Ae=0;if(W==="center")Ne=(K-pe)/2;else if(W==="right")Ne=K-pe;else if(W==="justify"&&he.isSoftWrapped){let De=0;for(let Te=fe-_e;Te--;)he.glyphAt(Te).glyphObj.isWhitespace&&De++;Ae=(K-pe)/De}if(Ae||Ne){let De=0;for(let Te=0;Te<fe;Te++){let Be=he.glyphAt(Te);const Ee=Be.glyphObj;Be.x+=Ne+De,Ae!==0&&Ee.isWhitespace&&Te<fe-_e&&(De+=Ae,Be.width+=Ae)}}const ve=n.getReorderSegments(v,ue,he.glyphAt(0).charIndex,he.glyphAt(he.count-1).charIndex);for(let De=0;De<ve.length;De++){const[Te,Be]=ve[De];let Ee=1/0,ye=-1/0;for(let Me=0;Me<fe;Me++)if(he.glyphAt(Me).charIndex>=Te){let We=Me,xe=Me;for(;xe<fe;xe++){let Ie=he.glyphAt(xe);if(Ie.charIndex>Be)break;xe<fe-_e&&(Ee=Math.min(Ee,Ie.x),ye=Math.max(ye,Ie.x+Ie.width))}for(let Ie=We;Ie<xe;Ie++){const Je=he.glyphAt(Ie);Je.x=ye-(Je.x+Je.width-Ee)}break}}let Ue;const ut=De=>Ue=De;for(let De=0;De<fe;De++){const Te=he.glyphAt(De);Ue=Te.glyphObj;const Be=Ue.index,Ee=ue.levels[Te.charIndex]&1;if(Ee){const ye=n.getMirroredCharacter(v[Te.charIndex]);ye&&Te.fontData.fontObj.forEachGlyph(ye,0,0,ut)}if(ie){const{charIndex:ye,fontData:Me}=Te,We=Te.x+oe,xe=Te.x+Te.width+oe;J[ye*4]=Ee?xe:We,J[ye*4+1]=Ee?We:xe,J[ye*4+2]=he.baseline+Me.caretBottom+$,J[ye*4+3]=he.baseline+Me.caretTop+$;const Ie=ye-ce;Ie>1&&l(J,ce,Ie),ce=ye}if(M){const{charIndex:ye}=Te;for(;ye>me;)me++,M.hasOwnProperty(me)&&(Fe=M[me])}if(!Ue.isWhitespace&&!Ue.isEmpty){const ye=le++,{fontSizeMult:Me,src:We,index:xe}=Te.fontData,Ie=Z[We]||(Z[We]={});Ie[Be]||(Ie[Be]={path:Ue.path,pathBounds:[Ue.xMin,Ue.yMin,Ue.xMax,Ue.yMax]});const Je=Te.x+oe,Ve=Te.y+he.baseline+$;z[ye*2]=Je,z[ye*2+1]=Ve;const pt=Je+Ue.xMin*Me,mt=Ve+Ue.yMin*Me,Tt=Je+Ue.xMax*Me,vt=Ve+Ue.yMax*Me;pt<y[0]&&(y[0]=pt),mt<y[1]&&(y[1]=mt),Tt>y[2]&&(y[2]=Tt),vt>y[3]&&(y[3]=vt),ye%b===0&&(ke={start:ye,end:ye,rect:[1/0,1/0,-1/0,-1/0]},j.push(ke)),ke.end++;const Ke=ke.rect;if(pt<Ke[0]&&(Ke[0]=pt),mt<Ke[1]&&(Ke[1]=mt),Tt>Ke[2]&&(Ke[2]=Tt),vt>Ke[3]&&(Ke[3]=vt),G[ye]=Be,L[ye]=xe,M){const St=ye*3;re[St]=Fe>>16&255,re[St+1]=Fe>>8&255,re[St+2]=Fe&255}}}}}),J){const he=v.length-ce;he>1&&l(J,ce,he)}}const Se=[];Q.forEach(({index:ue,src:le,unitsPerEm:ce,ascender:me,descender:ke,lineHeight:Fe,capHeight:he,xHeight:ge})=>{Se[ue]={src:le,unitsPerEm:ce,ascender:me,descender:ke,lineHeight:Fe,capHeight:he,xHeight:ge}}),F.typesetting=c()-N,p({glyphIds:G,glyphFontIndices:L,glyphPositions:z,glyphData:Z,fontData:Se,caretPositions:J,glyphColors:re,chunkedBounds:j,fontSize:A,topBaseline:$+se[0].baseline,blockBounds:[oe,$-ee,oe+K,$],visibleBounds:y,timings:F})})}function o(v,m){i({...v,metricsOnly:!0},g=>{const[R,A,U,w]=g.blockBounds;m({width:U-R,height:w-A})})}function a(v){let m=v.match(/^([\d.]+)%$/),g=m?parseFloat(m[1]):NaN;return isNaN(g)?0:g/100}function l(v,m,g){const R=v[m*4],A=v[m*4+1],U=v[m*4+2],w=v[m*4+3],T=(A-R)/g;for(let I=0;I<g;I++){const C=(m+I)*4;v[C]=R+T*I,v[C+1]=R+T*(I+1),v[C+2]=U,v[C+3]=w}}function c(){return(self.performance||Date).now()}function d(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(v){let m=d.flyweight;return m.data=this.data,m.index=v,m},splitAt(v){let m=new d;return m.data=this.data.splice(v*h.length),m}},d.flyweight=h.reduce((v,m,g,R)=>(Object.defineProperty(v,m,{get(){return this.data[this.index*h.length+g]},set(A){this.data[this.index*h.length+g]=A}}),v),{data:null,index:0}),{typeset:i,measure:o}}const kt=()=>(self.performance||Date).now(),Hn=ma();let Lo;function Vs(s,n,u,f,t,e,r,i,o,a,l=!0){return l?Xs(s,n,u,f,t,e,r,i,o,a).then(null,c=>(Lo||(console.warn("WebGL SDF generation failed, falling back to JS",c),Lo=!0),Oo(s,n,u,f,t,e,r,i,o,a))):Oo(s,n,u,f,t,e,r,i,o,a)}const Gn=[],js=5;let Dr=0;function _a(){const s=kt();for(;Gn.length&&kt()-s<js;)Gn.shift()();Dr=Gn.length?setTimeout(_a,0):0}const Xs=(...s)=>new Promise((n,u)=>{Gn.push(()=>{const f=kt();try{Hn.webgl.generateIntoCanvas(...s),n({timing:kt()-f})}catch(t){u(t)}}),Dr||(Dr=setTimeout(_a,0))}),Hs=4,Ys=2e3,Io={};let Js=0;function Oo(s,n,u,f,t,e,r,i,o,a){const l="TroikaTextSDFGenerator_JS_"+Js++%Hs;let c=Io[l];return c||(c=Io[l]={workerModule:Xt({name:l,workerId:l,dependencies:[ma,kt],init(d,h){const v=d().javascript.generate;return function(...m){const g=h();return{textureData:v(...m),timing:h()-g}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),c.requests++,clearTimeout(c.idleTimer),c.workerModule(s,n,u,f,t,e).then(({textureData:d,timing:h})=>{const v=kt(),m=new Uint8Array(d.length*4);for(let g=0;g<d.length;g++)m[g*4+a]=d[g];return Hn.webglUtils.renderImageData(r,m,i,o,s,n,1<<3-a),h+=kt()-v,--c.requests===0&&(c.idleTimer=setTimeout(()=>{Us(l)},Ys)),{timing:h}})}function Ks(s){s._warm||(Hn.webgl.isSupported(s),s._warm=!0)}const Qs=Hn.webglUtils.resizeWebGLCanvasWithoutClearing,Ot={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},Zs=new Vn;function Rt(){return(self.performance||Date).now()}const Po=Object.create(null);function qs(s,n){s=el({},s);const u=Rt(),{defaultFontURL:f}=Ot,t=[];if(f&&t.push({label:"default",src:Bo(f)}),s.font&&t.push({label:"user",src:Bo(s.font)}),s.font=t,s.text=""+s.text,s.sdfGlyphSize=s.sdfGlyphSize||Ot.sdfGlyphSize,s.unicodeFontsURL=s.unicodeFontsURL||Ot.unicodeFontsURL,s.colorRanges!=null){let h={};for(let v in s.colorRanges)if(s.colorRanges.hasOwnProperty(v)){let m=s.colorRanges[v];typeof m!="number"&&(m=Zs.set(m).getHex()),h[v]=m}s.colorRanges=h}Object.freeze(s);const{textureWidth:e,sdfExponent:r}=Ot,{sdfGlyphSize:i}=s,o=e/i*4;let a=Po[i];if(!a){const h=document.createElement("canvas");h.width=e,h.height=i*256/o,a=Po[i]={glyphCount:0,sdfGlyphSize:i,sdfCanvas:h,sdfTexture:new Wa(h,void 0,void 0,void 0,uo,uo),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,$s(a)}const{sdfTexture:l,sdfCanvas:c}=a;Ta(s).then(h=>{const{glyphIds:v,glyphFontIndices:m,fontData:g,glyphPositions:R,fontSize:A,timings:U}=h,w=[],T=new Float32Array(v.length*4);let I=0,C=0;const D=Rt(),W=g.map(k=>{let H=a.glyphsByFont.get(k.src);return H||a.glyphsByFont.set(k.src,H=new Map),H});v.forEach((k,H)=>{const V=m[H],{src:ae,unitsPerEm:ie}=g[V];let b=W[V].get(k);if(!b){const{path:E,pathBounds:x}=h.glyphData[ae][k],G=Math.max(x[2]-x[0],x[3]-x[1])/i*(Ot.sdfMargin*i+.5),L=a.glyphCount++,z=[x[0]-G,x[1]-G,x[2]+G,x[3]+G];W[V].set(k,b={path:E,atlasIndex:L,sdfViewBox:z}),w.push(b)}const{sdfViewBox:M}=b,p=R[C++],S=R[C++],F=A/ie;T[I++]=p+M[0]*F,T[I++]=S+M[1]*F,T[I++]=p+M[2]*F,T[I++]=S+M[3]*F,v[H]=b.atlasIndex}),U.quads=(U.quads||0)+(Rt()-D);const O=Rt();U.sdf={};const ne=c.height,_=Math.ceil(a.glyphCount/o),P=Math.pow(2,Math.ceil(Math.log2(_*i)));P>ne&&(console.info(`Increasing SDF texture size ${ne}->${P}`),Qs(c,e,P),l.dispose()),Promise.all(w.map(k=>ya(k,a,s.gpuAccelerateSDF).then(({timing:H})=>{U.sdf[k.atlasIndex]=H}))).then(()=>{w.length&&!a.contextLost&&(ba(a),l.needsUpdate=!0),U.sdfTotal=Rt()-O,U.total=Rt()-u,n(Object.freeze({parameters:s,sdfTexture:l,sdfGlyphSize:i,sdfExponent:r,glyphBounds:T,glyphAtlasIndices:v,glyphColors:h.glyphColors,caretPositions:h.caretPositions,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{a.contextLost||Ks(c)})}function ya({path:s,atlasIndex:n,sdfViewBox:u},{sdfGlyphSize:f,sdfCanvas:t,contextLost:e},r){if(e)return Promise.resolve({timing:-1});const{textureWidth:i,sdfExponent:o}=Ot,a=Math.max(u[2]-u[0],u[3]-u[1]),l=Math.floor(n/4),c=l%(i/f)*f,d=Math.floor(l/(i/f))*f,h=n%4;return Vs(f,f,s,u,a,o,t,c,d,h,r)}function $s(s){const n=s.sdfCanvas;n.addEventListener("webglcontextlost",u=>{console.log("Context Lost",u),u.preventDefault(),s.contextLost=!0}),n.addEventListener("webglcontextrestored",u=>{console.log("Context Restored",u),s.contextLost=!1;const f=[];s.glyphsByFont.forEach(t=>{t.forEach(e=>{f.push(ya(e,s,!0))})}),Promise.all(f).then(()=>{ba(s),s.sdfTexture.needsUpdate=!0})})}function el(s,n){for(let u in n)n.hasOwnProperty(u)&&(s[u]=n[u]);return s}let En;function Bo(s){return En||(En=typeof document>"u"?{}:document.createElement("a")),En.href=s,En.href}function ba(s){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:n,sdfTexture:u}=s,{width:f,height:t}=n,e=s.sdfCanvas.getContext("webgl");let r=u.image.data;(!r||r.length!==f*t*4)&&(r=new Uint8Array(f*t*4),u.image={width:f,height:t,data:r},u.flipY=!1,u.isDataTexture=!0),e.readPixels(0,0,f,t,e.RGBA,e.UNSIGNED_BYTE,r)}}const tl=Xt({name:"Typesetter",dependencies:[Ws,zs,ks],init(s,n,u){return s(n,u())}}),Ta=Xt({name:"Typesetter",dependencies:[tl],init(s){return function(n){return new Promise(u=>{s.typeset(n,u)})}},getTransferables(s){const n=[];for(let u in s)s[u]&&s[u].buffer&&n.push(s[u].buffer);return n}});Ta.onMainThread;const Go={};function nl(s){let n=Go[s];return n||(n=Go[s]=new Rr(1,1,s,s).translate(.5,.5,0)),n}const rl="aTroikaGlyphBounds",No="aTroikaGlyphIndex",ol="aTroikaGlyphColor";class al extends Va{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new ja,this.boundingBox=new Qo}computeBoundingSphere(){}computeBoundingBox(){}set detail(n){if(n!==this._detail){this._detail=n,(typeof n!="number"||n<1)&&(n=1);let u=nl(n);["position","normal","uv"].forEach(f=>{this.attributes[f]=u.attributes[f].clone()}),this.setIndex(u.getIndex().clone())}}get detail(){return this._detail}set curveRadius(n){n!==this._curveRadius&&(this._curveRadius=n,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(n,u,f,t,e){this.updateAttributeData(rl,n,4),this.updateAttributeData(No,u,1),this.updateAttributeData(ol,e,3),this._blockBounds=f,this._chunkedBounds=t,this.instanceCount=u.length,this._updateBounds()}_updateBounds(){const n=this._blockBounds;if(n){const{curveRadius:u,boundingBox:f}=this;if(u){const{PI:t,floor:e,min:r,max:i,sin:o,cos:a}=Math,l=t/2,c=t*2,d=Math.abs(u),h=n[0]/d,v=n[2]/d,m=e((h+l)/c)!==e((v+l)/c)?-d:r(o(h)*d,o(v)*d),g=e((h-l)/c)!==e((v-l)/c)?d:i(o(h)*d,o(v)*d),R=e((h+t)/c)!==e((v+t)/c)?d*2:i(d-a(h)*d,d-a(v)*d);f.min.set(m,n[1],u<0?-R:0),f.max.set(g,n[3],u<0?0:R)}else f.min.set(n[0],n[1],0),f.max.set(n[2],n[3],0);f.getBoundingSphere(this.boundingSphere)}}applyClipRect(n){let u=this.getAttribute(No).count,f=this._chunkedBounds;if(f)for(let t=f.length;t--;){u=f[t].end;let e=f[t].rect;if(e[1]<n.w&&e[3]>n.y&&e[0]<n.z&&e[2]>n.x)break}this.instanceCount=u}updateAttributeData(n,u,f){const t=this.getAttribute(n);u?t&&t.array.length===u.length?(t.array.set(u),t.needsUpdate=!0):(this.setAttribute(n,new Xa(u,f)),delete this._maxInstanceCount,this.dispose()):t&&this.deleteAttribute(n)}}const il=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,sl=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,ll=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,ul=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function fl(s){const n=Ar(s,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Nn},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new fo(0,0,0,0)},uTroikaClipRect:{value:new fo(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Nn},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Vn},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Ha},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:il,vertexTransform:sl,fragmentDefs:ll,fragmentColorTransform:ul,customRewriter({vertexShader:u,fragmentShader:f}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(f)&&(f=f.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(u)||(u=u.replace(ga,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:u,fragmentShader:f}}});return n.transparent=!0,n.forceSinglePass=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),n}const Gr=new Ya({color:16777215,side:Ja,transparent:!0}),zo=8421504,Wo=new Ka,Rn=new Er,br=new Er,on=[],cl=new Er,Tr="+x+y";function Vo(s){return Array.isArray(s)?s[0]:s}let Sa=()=>{const s=new Mr(new Rr(1,1),Gr);return Sa=()=>s,s},wa=()=>{const s=new Mr(new Rr(1,1,32,1),Gr);return wa=()=>s,s};const dl={type:"syncstart"},hl={type:"synccomplete"},xa=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],pl=xa.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class Ua extends Mr{constructor(){const n=new al;super(n,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=zo,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Tr,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(n){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(n):(this._isSyncing=!0,this.dispatchEvent(dl),qs({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},u=>{this._isSyncing=!1,this._textRenderInfo=u,this.geometry.updateGlyphs(u.glyphBounds,u.glyphAtlasIndices,u.blockBounds,u.chunkedBounds,u.glyphColors);const f=this._queuedSyncs;f&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{f.forEach(t=>t&&t())})),this.dispatchEvent(hl),n&&n()})))}onBeforeRender(n,u,f,t,e,r){this.sync(),e.isTroikaTextMaterial&&this._prepareForRender(e)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(n){return fl(n)}get material(){let n=this._derivedMaterial;const u=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Gr.clone());if((!n||!n.isDerivedFrom(u))&&(n=this._derivedMaterial=this.createDerivedMaterial(u),u.addEventListener("dispose",function f(){u.removeEventListener("dispose",f),n.dispose()})),this.hasOutline()){let f=n._outlineMtl;return f||(f=n._outlineMtl=Object.create(n,{id:{value:n.id+.1}}),f.isTextOutlineMaterial=!0,f.depthWrite=!1,f.map=null,n.addEventListener("dispose",function t(){n.removeEventListener("dispose",t),f.dispose()})),[f,n]}else return n}set material(n){n&&n.isTroikaTextMaterial?(this._derivedMaterial=n,this._baseMaterial=n.baseMaterial):this._baseMaterial=n}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(n){this.geometry.detail=n}get curveRadius(){return this.geometry.curveRadius}set curveRadius(n){this.geometry.curveRadius=n}get customDepthMaterial(){return Vo(this.material).getDepthMaterial()}set customDepthMaterial(n){}get customDistanceMaterial(){return Vo(this.material).getDistanceMaterial()}set customDistanceMaterial(n){}_prepareForRender(n){const u=n.isTextOutlineMaterial,f=n.uniforms,t=this.textRenderInfo;if(t){const{sdfTexture:i,blockBounds:o}=t;f.uTroikaSDFTexture.value=i,f.uTroikaSDFTextureSize.value.set(i.image.width,i.image.height),f.uTroikaSDFGlyphSize.value=t.sdfGlyphSize,f.uTroikaSDFExponent.value=t.sdfExponent,f.uTroikaTotalBounds.value.fromArray(o),f.uTroikaUseGlyphColors.value=!u&&!!t.glyphColors;let a=0,l=0,c=0,d,h,v,m=0,g=0;if(u){let{outlineWidth:A,outlineOffsetX:U,outlineOffsetY:w,outlineBlur:T,outlineOpacity:I}=this;a=this._parsePercent(A)||0,l=Math.max(0,this._parsePercent(T)||0),d=I,m=this._parsePercent(U)||0,g=this._parsePercent(w)||0}else c=Math.max(0,this._parsePercent(this.strokeWidth)||0),c&&(v=this.strokeColor,f.uTroikaStrokeColor.value.set(v??zo),h=this.strokeOpacity,h==null&&(h=1)),d=this.fillOpacity;f.uTroikaEdgeOffset.value=a,f.uTroikaPositionOffset.value.set(m,g),f.uTroikaBlurRadius.value=l,f.uTroikaStrokeWidth.value=c,f.uTroikaStrokeOpacity.value=h,f.uTroikaFillOpacity.value=d??1,f.uTroikaCurveRadius.value=this.curveRadius||0;let R=this.clipRect;if(R&&Array.isArray(R)&&R.length===4)f.uTroikaClipRect.value.fromArray(R);else{const A=(this.fontSize||.1)*100;f.uTroikaClipRect.value.set(o[0]-A,o[1]-A,o[2]+A,o[3]+A)}this.geometry.applyClipRect(f.uTroikaClipRect.value)}f.uTroikaSDFDebug.value=!!this.debugSDF,n.polygonOffset=!!this.depthOffset,n.polygonOffsetFactor=n.polygonOffsetUnits=this.depthOffset||0;const e=u?this.outlineColor||0:this.color;if(e==null)delete n.color;else{const i=n.hasOwnProperty("color")?n.color:n.color=new Vn;(e!==i._input||typeof e=="object")&&i.set(i._input=e)}let r=this.orientation||Tr;if(r!==n._orientation){let i=f.uTroikaOrient.value;r=r.replace(/[^-+xyz]/g,"");let o=r!==Tr&&r.match(/^([-+])([xyz])([-+])([xyz])$/);if(o){let[,a,l,c,d]=o;Rn.set(0,0,0)[l]=a==="-"?1:-1,br.set(0,0,0)[d]=c==="-"?-1:1,Wo.lookAt(cl,Rn.cross(br),br),i.setFromMatrix4(Wo)}else i.identity();n._orientation=r}}_parsePercent(n){if(typeof n=="string"){let u=n.match(/^(-?[\d.]+)%$/),f=u?parseFloat(u[1]):NaN;n=(isNaN(f)?0:f/100)*this.fontSize}return n}localPositionToTextCoords(n,u=new Nn){u.copy(n);const f=this.curveRadius;return f&&(u.x=Math.atan2(n.x,Math.abs(f)-Math.abs(n.z))*Math.abs(f)),u}worldPositionToTextCoords(n,u=new Nn){return Rn.copy(n),this.localPositionToTextCoords(this.worldToLocal(Rn),u)}raycast(n,u){const{textRenderInfo:f,curveRadius:t}=this;if(f){const e=f.blockBounds,r=t?wa():Sa(),i=r.geometry,{position:o,uv:a}=i.attributes;for(let l=0;l<a.count;l++){let c=e[0]+a.getX(l)*(e[2]-e[0]);const d=e[1]+a.getY(l)*(e[3]-e[1]);let h=0;t&&(h=t-Math.cos(c/t)*t,c=Math.sin(c/t)*t),o.setXYZ(l,c,d,h)}i.boundingSphere=this.geometry.boundingSphere,i.boundingBox=this.geometry.boundingBox,r.matrixWorld=this.matrixWorld,r.material.side=this.material.side,on.length=0,r.raycast(n,on);for(let l=0;l<on.length;l++)on[l].object=this,u.push(on[l])}}copy(n){const u=this.geometry;return super.copy(n),this.geometry=u,pl.forEach(f=>{this[f]=n[f]}),this}clone(){return new this.constructor().copy(this)}}xa.forEach(s=>{const n="_private_"+s;Object.defineProperty(Ua.prototype,s,{get(){return this[n]},set(u){u!==this[n]&&(this[n]=u,this._needsSync=!0)}})});new Qo;new Vn;const vl=2e3,ml={__name:"Home3D",emits:["bookShow"],setup(s,{emit:n}){const u=jo(),f=n;let t=null,e=null,r={shi:null,fen:null,miao:null},i=null,o=null,a=null,l=null,c=null,d=null,h=null,v=null,m=null,g,R,A,U,w,T,I=!1;const C=window.devicePixelRatio||1;let D=!1;function W(){R=document.getElementById("audio"),g=R.getContext("2d"),R.width=R.clientWidth*C,R.height=R.clientHeight*C,g.scale(C,C)}function O(){T=document.createElement("video"),T.src="/home//public/mp4/test.mp4",T.loop=!0,T.crossOrigin="anonymous",T.addEventListener("play",()=>{D=!0,I||ne(),_()}),T.addEventListener("pause",()=>{D=!1})}function ne(){const y=new AudioContext,j=y.createMediaElementSource(T);A=y.createAnalyser(),U=A.frequencyBinCount,A.fftSize=U/2,j.connect(A),A.connect(y.destination),w=new Uint8Array(U),I=!0}function _(){if(!D)return;requestAnimationFrame(_),g.clearRect(0,0,R.width,R.height),A.getByteFrequencyData(w),g.clearRect(0,0,R.width,R.height);const y=A.frequencyBinCount,j=R.width/y,K=Math.floor(y/2);for(let X=0;X<K;X++){const Y=w[X],Q=Y*(R.height/256),N=Y+50>255?255:Y+50,q=50,te=150;g.fillStyle=`rgb(${N},${q},${te})`;let B=X*j,se=R.height-Q;g.fillRect(B,se,j,Q);let ee=R.width-(X+1)*j,oe=R.height-Q;g.fillRect(ee,oe,j,Q)}}function P(){const y=new Date,j=y.getFullYear(),K=y.getMonth()+1,X=K<10?"0"+K:K,Y=y.getDate(),Q=Y<10?"0"+Y:Y;return{year:j,month:X,day:Q}}function k(y,j=[0,0,0],K=1,X="bold"){const Y=new Ua;return Y.text=y,Y.font="/home/public/fonts/digital7.ttf",Y.fontSize=K,Y.position.set(...j),Y.rotation.y=Math.PI/2,Y.color=0,Y.fontWeight=X,Y.anchorX="center",Y.anchorY="middle",Y.sync(),Y}const H=(y,j)=>{const K=new y.CubeTextureLoader().setPath("/home//public/images/").load(["nx.png","px.png","py.png","ny.png","nz.png","pz.png"]);j.background=K;const X=new Date().getHours();if(X>=18||X<6){j.background=new y.Color(265780);let Q=[{nubmer:1850,color:16777215,size:1.5,scalar:1,multiple:500}];for(let N=0;N<Q.length;N++){const q=ti(Q[N]);q.rotation.x=Math.random()*6,q.rotation.y=Math.random()*6,q.rotation.z=Math.random()*6,q.matrixAutoUpdate=!1,q.updateMatrix(),q.position.set(0,0,0),j.add(q)}}},V=zt(!1),ae=(y,j,K,X)=>{hr.install({THREE:y}),t=new hr(K,X.domElement),t.minZoom=.1,t.maxZoom=15,t.enableTransition=!0,t.transitionTime=1,t.mouseButtons.wheel=hr.ACTION.NONE,t.update(),t.saveState(),j.addEventListener("mouseDown",function(Y){t.enabled=!1}),j.addEventListener("mouseUp",function(Y){t.enabled=!0})},ie=(y,j)=>{const K=new y.AmbientLight(203843,.6);j.add(K);const X=new y.DirectionalLight(16777215,.3);X.position.set(-99.4535,52.788402638514,-25.3826),X.castShadow=!0,j.add(X),i=new y.PointLight(16774827,50,100),i.position.set(27.105,2.1298,-29.157),i.castShadow=!0,j.add(i),o=new y.PointLight(16777215,1,200),o.position.set(11.376385097904176,26.471699160045343,6.353171916870222),o.castShadow=!0,j.add(o);const Y=new y.CylinderGeometry(1.66,1.66,4,32);a=new y.Mesh(Y,new y.MeshStandardMaterial({color:1118481,transparent:!0,opacity:.46,emissive:16711680,emissiveIntensity:100,metalness:0,roughness:.5})),a.position.set(-29.33046480164147,8.629849073395794,-16.21725577998555),a.castShadow=!0,j.add(a)},b=({THREE:y,scene:j,transControls:K,camera:X,renderer:Y})=>{ae(y,K,X,Y),H(y,j),ie(y,j);const Q=new y.Group,N=Qe(j.children,"home");N.position.set(0,-15,0);const q=Qe(N.children,"空箱子大"),te=Qe(N.children,"空箱子001"),B=Qe(N.children,"主体");B.castShadow=!0,B.receiveShadow=!0,l=Qe(N.children,"xiaodeng"),l.material.emissive=new y.Color(1118481),l.material.envMapIntensity=0,l.castShadow=!0,l.receiveShadow=!0;const se=Qe(N.children,"门帘"),ee=Qe(se.children,"门");Q.attach(ee),se.visible=!1;const oe=Qe(N.children,"闹钟"),$=Qe(oe.children,"shi"),Se=Qe(oe.children,"fen"),ue=Qe(oe.children,"miao");r={shi:$,fen:Se,miao:ue},r.shi.rotation.y=0,r.fen.rotation.y=0,r.miao.rotation.y=0;const le=Qe(N.children,"电脑桌");le.castShadow=!0,le.receiveShadow=!0;const{year:ce,month:me,day:ke}=P(),Fe=k(`${ce}`,[-24.21810526958002,6.28957649,17.8168586],1);j.add(Fe);const he=k("Year",[-24.21810526958002,5.06957649,18.2068586],.6,"regular");j.add(he);const ge=k(`${me}`,[-24.21810526958002,6.28957649,15.8168586],1);j.add(ge);const fe=k("Month",[-24.21810526958002,5.06957649,15.8968586],.6,"regular");j.add(fe);const pe=k(`${ke}`,[-24.21810526958002,6.28957649,14.2168586],1);j.add(pe);const _e=k("Day",[-24.21810526958002,5.06957649,14.0468586],.6,"regular");j.add(_e);const Ne=Qe(j.children,"xianshiqi");if(Ne.castShadow=!0,T.src){const xe=new y.VideoTexture(T);xe.flipY=!1;const Ie=new y.MeshBasicMaterial({map:xe});Ne.material=Ie,Ne.castShadow=!0}c=Qe(N.children,"柱体014"),c.name="diannaoyi";const Ae={y:0},ve={y:Math.PI*2};v=new co(Ae).to(ve,3e3).easing(ho.Quadratic.InOut).onUpdate(()=>{c.rotation.y=Ae.y}).delay(1e3).start();const Ue=Qe(N.children,"lanqiu");Ue.position.set(-10,0,0);const ut=new y.CatmullRomCurve3([new y.Vector3(12,3.36,6.09),new y.Vector3(2.12,2.36,2.02),new y.Vector3(.707,2.36,-4.25),new y.Vector3(-5.558,2.36,-10.39)]),De={progress:0};m=new co(De).to({progress:1},5e3).easing(ho.Quadratic.InOut).onUpdate(()=>{const xe=ut.getPoint(De.progress);Ue.position.copy(xe),Ue.rotation.z+=.22}).delay(3e3).start();const Te=[{name:"xc_db",size:[4.2,4.2],position:[25.147446346740253,20.1227880586422,-32.918080391178876],src:"/public/dfsj/db/003.jpg"},{name:"xc_02",size:[4.2,4.2],position:[31.06927073239676,20.1227880586422,-32.918080391178876],src:"/public/dfsj/feixian/web/pc02.jpg"},{name:"xc_03",size:[4.2,4.2],position:[37.0123651221323,20.1227880586422,-32.918080391178876],src:"/public/dfsj/feixian/webnew/004.jpg"},{name:"xc_04",size:[10.2,4.2],position:[28.247028395689476,13.964410131334555,-32.9180803911788],src:"/public/dfsj/feixian/xcx/xcx01.jpg"},{name:"xc_05",size:[4.2,4.2],position:[37.0123651221323,14.035935533501332,-32.918080391178],src:"/public/dfsj/gzb/xcx/003.jpg"},{name:"xc_06",size:[4.2,4.2],position:[25.17463710170653,8.343632646416731,-32.9180803911],src:"/public/dfsj/gzb/xcxweb/001.jpg"},{name:"xc_07",size:[10.2,4.2],position:[34.05277102672005,8.210956138239148,-32.918080391178876],src:"/public/dfsj/gzb/sj/002.png"}],Be=new y.TextureLoader;for(let xe=0;xe<Te.length;xe++){const Ie=Te[xe];Be.load("/home/"+Ie.src,Je=>{const Ve=ei(Te[xe]);Ve.name=Te[xe].name,Ve.material=new y.MeshLambertMaterial({map:Je}),Q.add(Ve)})}const Ee=new y.PlaneGeometry(16,25),ye=new y.MeshBasicMaterial({color:65280,transparent:!0,opacity:0}),Me=new y.Mesh(Ee,ye);Me.rotation.y=Math.PI/2,Me.position.set(-26.75,7.5,29.5),Me.name="shujibox",Q.add(Me),Q.attach(q),Q.attach(te),j.add(Q),t.rotate(72*y.MathUtils.DEG2RAD,0,!0),t.setTarget(-.2176510350531844,.06773081571016058,.014509065832072607,!0);let We=[];d=xe=>{We=[xe.clientX,xe.clientY]},h=async xe=>{const[Ie,Je]=We;if(Math.abs(Ie-xe.clientX)>2||Math.abs(Je-xe.clientY)>2)return;let Ve=await ni({el:"#canvas",camera:X,group:Q,event:xe});Ve!=null&&Ve.object&&(e&&(e=null),e=Ve.object,(e.name=="空箱子大"||e.name=="立方体067_1")&&u.push("/three/demo34"),e.name=="shujibox"&&S(),e.name.indexOf("xc")>-1&&F())},document.body.addEventListener("mousedown",d),document.body.addEventListener("mouseup",h),document.body.addEventListener("keydown",p)};let M=!0;const p=y=>{y.key=="Control"&&(M=!M),y.code=="Space"&&(D?(T.pause(),Ao("#audio",{bottom:"-80px"})):(T.play(),Ao("#audio",{bottom:"0"})),y.preventDefault)},S=()=>{f("bookShow")},F=()=>{V.value=!0,document.body.removeEventListener("mousedown",d),document.body.removeEventListener("mouseup",h),document.body.removeEventListener("keydown",p)},E=()=>{V.value=!1,document.body.addEventListener("mousedown",d),document.body.addEventListener("mouseup",h),document.body.addEventListener("keydown",p)},x=()=>{const y=new Date,j=y.getHours()%12||12,K=y.getMinutes(),X=y.getSeconds();return[j,K,X]},G=()=>{const{shi:y,fen:j,miao:K}=r;if(!y||!j||!K)return;r.shi.rotation.y=0,r.fen.rotation.y=0,r.miao.rotation.y=0;const[X,Y,Q]=x(),N={shi:X*(2*Math.PI/12)+Math.PI/2,fen:-Y*(2*Math.PI/60)+Math.PI/2,miao:Q*(2*Math.PI/60)+Math.PI/2};y.rotation.y=N.shi,j.rotation.y=N.fen,K.rotation.y=N.miao};let L=Date.now();const z=(y,j)=>{const K=Date.now();if(K-L>=vl){const X=new j.Color(Math.random()*16777215);y.material.emissive=X,L=K}y.material.emissiveIntensity=Math.sin(Date.now()*.001*Math.PI)*.5+.5},Z=({THREE:y,scene:j,camera:K,renderer:X,clock:Y,stats:Q})=>{const N=Y.getDelta();t.update(N),Q.update(),G(),M?(i.visible=!0,o.intensity=2e3,l.material.emissive=new y.Color(16777215),l.material.envMapIntensity=1):(i.visible=!1,o.intensity=20,l.material.emissive=new y.Color(1118481),l.material.envMapIntensity=0),D?z(a,y):a.material.emissive=new y.Color(0),v.update(),m.update(),X.render(j,K)},{loading:re,pregress:J}=Qa({el:"#canvas",background:"#111",modelPath:["house.zip"],modelName:["home"],modelZip:!0,modelScale:[2.5,2.5,2.5],cameraPosition:[-20,-0,42],control:!1,helper:!1,light:!1,transformControls:!0,showStats:!0,statsPosition:[0,0],creatMesh:b,animation:Z});return Fr(()=>{W(),O()}),La(()=>{M=!1,document.body.removeEventListener("mousedown",d),document.body.removeEventListener("mouseup",h),document.body.removeEventListener("keydown",p),v&&(v.stop(),ri(v),v=null)}),(y,j)=>(st(),lt(un,null,[fn(Za,{loading:lo(re),pregress:lo(J)},{default:Ia(()=>j[0]||(j[0]=[Oe("canvas",{id:"canvas"},null,-1),Oe("canvas",{id:"audio"},null,-1)])),_:1},8,["loading","pregress"]),fn(xi,{show:V.value,onHandleEvent:E},null,8,["show"])],64))}},gl=hn(ml,[["__scopeId","data-v-67c2419c"]]),_l={__name:"Home",setup(s){const n=Ko(),u=zt([]),f=()=>{u.value=Oa.menus.filter(i=>i.path!=="/"),n.setFlagStatus(!0)};Fr(()=>{f()});const t=zt(!1),e=()=>{t.value=!0},r=()=>{t.value=!1};return(i,o)=>(st(),lt(un,null,[fn(gl,{onBookShow:e}),fn(mi,{show:t.value,menus:u.value,onBookHide:r},null,8,["show","menus"]),o[0]||(o[0]=Oe("div",{class:"tip-right"},[Oe("p",null,"1.点击“书本”查看网站知识库"),Oe("p",null,"2.空格键控制视频播放"),Oe("p",null,"3.点击“相册”查看案例"),Oe("p",null,"4.按Ctrl键-开关灯")],-1))],64))}},Fl=hn(_l,[["__scopeId","data-v-2247e9d7"]]);export{Fl as default};
