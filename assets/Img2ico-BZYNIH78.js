import{F as p}from"./FileSaver.min-BFbnFquq.js";import{_ as g,r as u,o as h,b as v,l as w,d as c,k as f}from"./index-Btwj_PDo.js";import"./_commonjsHelpers-Cpj98o6Y.js";const E={class:"content"},_={__name:"Img2ico",setup(I){const l=u(null),m=n=>{if(!n)return!1;const a=new Image;if(n){const e=new FileReader;e.onload=function(t){a.src=t.target.result},e.readAsDataURL(n)}a.onload=function(){let e=document.createElement("canvas");if(e.width=a.width,e.height=a.height,e.getContext("2d").drawImage(a,0,0),e.width>32||e.height>32){const o=document.createElement("canvas");o.width=32,o.height=32,o.getContext("2d").drawImage(e,0,0,32,32),e=o}const s=e.toDataURL("image/png"),r=d(s);p.saveAs(r,"icon.ico",{type:"image/vnd.microsoft.icon"})};function d(e){const t=e.split(","),s=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let o=r.length;const i=new Uint8Array(o);for(;o--;)i[o]=r.charCodeAt(o);return new Blob([i],{type:s})}};return h(()=>{const n=document.getElementById("dropZone"),a=document.getElementById("fileInput");["dragenter","dragover","dragleave","drop"].forEach(t=>{n.addEventListener(t,d,!1)});function d(t){t.preventDefault(),t.stopPropagation()}["dragenter","dragover"].forEach(t=>{n.addEventListener(t,()=>n.classList.add("hover"),!1)}),["dragleave","drop"].forEach(t=>{n.addEventListener(t,()=>n.classList.remove("hover"),!1)}),n.addEventListener("click",()=>a.click(),!1),a.addEventListener("change",e,!1),n.addEventListener("drop",e,!1);function e(t){let s=t.dataTransfer,r=s?s.files:a.files;r.length>0&&(l.value=r[0],m(l.value))}}),(n,a)=>(v(),w("section",E,a[0]||(a[0]=[c("div",{class:"width50"},[c("h1",null,"PNG/JPG转Ico"),c("div",{id:"dropZone",style:{"margin-top":"1rem"}},[f("将文件拖放到此处"),c("br"),f("或点击选择文件 "),c("input",{type:"file",style:{display:"none"},id:"fileInput"})])],-1)])))}},y=g(_,[["__scopeId","data-v-430c59b9"]]);export{y as default};
