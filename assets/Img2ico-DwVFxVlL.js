import{c as f}from"./_commonjsHelpers-Cpj98o6Y.js";import{_,r as R,i as A,o as j,j as B,a as p,m as L}from"./index-4p0r8sbT.js";var b={exports:{}};(function(g,m){(function(v,r){r()})(f,function(){function v(e,t){return typeof t>"u"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function r(e,t,s){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){l(o.response,t,s)},o.onerror=function(){console.error("could not download file")},o.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return 200<=t.status&&299>=t.status}function d(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof f=="object"&&f.global===f?f:void 0,a=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,s){var o=n.URL||n.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener",typeof e=="string"?(c.href=e,c.origin===location.origin?d(c):i(c.href)?r(e,t,s):d(c,c.target="_blank")):(c.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(c.href)},4e4),setTimeout(function(){d(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,s){if(t=t||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(v(e,s),t);else if(i(e))r(e,t,s);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){d(o)})}}:function(e,t,s,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof e=="string")return r(e,t,s);var c=e.type==="application/octet-stream",x=/constructor/i.test(n.HTMLElement)||n.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||c&&x||a)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var u=w.result;u=E?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=u:location=u,o=null},w.readAsDataURL(e)}else{var y=n.URL||n.webkitURL,h=y.createObjectURL(e);o?o.location=h:location.href=h,o=null,setTimeout(function(){y.revokeObjectURL(h)},4e4)}});n.saveAs=l.saveAs=l,g.exports=l})})(b);var U=b.exports;const I={class:"content"},k={__name:"Img2ico",setup(g){const m=R(null),v=r=>{if(!r)return!1;const i=new Image;if(r){const n=new FileReader;n.onload=function(a){i.src=a.target.result},n.readAsDataURL(r)}i.onload=function(){let n=document.createElement("canvas");if(n.width=i.width,n.height=i.height,n.getContext("2d").drawImage(i,0,0),n.width>32||n.height>32){const t=document.createElement("canvas");t.width=32,t.height=32,t.getContext("2d").drawImage(n,0,0,32,32),n=t}const l=n.toDataURL("image/png"),e=d(l);U.saveAs(e,"icon.ico",{type:"image/vnd.microsoft.icon"})};function d(n){const a=n.split(","),l=a[0].match(/:(.*?);/)[1],e=atob(a[1]);let t=e.length;const s=new Uint8Array(t);for(;t--;)s[t]=e.charCodeAt(t);return new Blob([s],{type:l})}};return A(()=>{const r=document.getElementById("dropZone"),i=document.getElementById("fileInput");["dragenter","dragover","dragleave","drop"].forEach(a=>{r.addEventListener(a,d,!1)});function d(a){a.preventDefault(),a.stopPropagation()}["dragenter","dragover"].forEach(a=>{r.addEventListener(a,()=>r.classList.add("hover"),!1)}),["dragleave","drop"].forEach(a=>{r.addEventListener(a,()=>r.classList.remove("hover"),!1)}),r.addEventListener("click",()=>i.click(),!1),i.addEventListener("change",n,!1),r.addEventListener("drop",n,!1);function n(a){let l=a.dataTransfer,e=l?l.files:i.files;e.length>0&&(m.value=e[0],v(m.value))}}),(r,i)=>(j(),B("section",I,i[0]||(i[0]=[p("div",{class:"width50"},[p("h1",null,"PNG/JPG转Ico"),p("div",{id:"dropZone",style:{"margin-top":"1rem"}},[L("将文件拖放到此处"),p("br"),L("或点击选择文件 "),p("input",{type:"file",style:{display:"none"},id:"fileInput"})])],-1)])))}},F=_(k,[["__scopeId","data-v-c7a60daf"]]);export{F as default};
