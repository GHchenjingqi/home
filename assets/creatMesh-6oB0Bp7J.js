import{J as R,K as W,T as q,b as H,X as $,c as m,Y as N,Z as L,V as F,B as M,F as O,_ as A,$ as G,a0 as S,a1 as y,M as x,a2 as J,a3 as b,a4 as K,a5 as T,a6 as V,a7 as j,a8 as Z,a9 as C,a as B,aa as k,e as P,ab as E,d as Q,D as z,G as U,ac as X,ad as Y,ae as ee,af as te}from"./Loading-CyCpiNBK.js";class ne extends R{constructor(t){super(t)}load(t,e,n,a){const r=this,i=new W(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,function(o){const c=r.parse(JSON.parse(o));e&&e(c)},n,a)}parse(t){return new ae(t)}}class ae{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],a=se(t,e,this.data);for(let r=0,i=a.length;r<i;r++)n.push(...a[r].toShapes());return n}}function se(s,t,e){const n=Array.from(s),a=t/e.resolution,r=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*a,i=[];let o=0,c=0;for(let l=0;l<n.length;l++){const u=n[l];if(u===`
`)o=0,c-=r;else{const d=re(u,a,o,c,e);o+=d.offsetX,i.push(d.path)}}return i}function re(s,t,e,n,a){const r=a.glyphs[s]||a.glyphs["?"];if(!r){console.error('THREE.Font: character "'+s+'" does not exists in font family '+a.familyName+".");return}const i=new q;let o,c,l,u,d,w,p,g;if(r.o){const h=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let f=0,_=h.length;f<_;)switch(h[f++]){case"m":o=h[f++]*t+e,c=h[f++]*t+n,i.moveTo(o,c);break;case"l":o=h[f++]*t+e,c=h[f++]*t+n,i.lineTo(o,c);break;case"q":l=h[f++]*t+e,u=h[f++]*t+n,d=h[f++]*t+e,w=h[f++]*t+n,i.quadraticCurveTo(d,w,l,u);break;case"b":l=h[f++]*t+e,u=h[f++]*t+n,d=h[f++]*t+e,w=h[f++]*t+n,p=h[f++]*t+e,g=h[f++]*t+n,i.bezierCurveTo(d,w,p,g,l,u);break}}return{offsetX:r.ha*t,path:i}}class ie extends H{constructor(t,e={}){const n=e.font;if(n===void 0)super();else{const a=n.generateShapes(t,e.size);e.depth===void 0&&e.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),e.depth=e.depth!==void 0?e.depth:e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(a,e)}this.type="TextGeometry"}}const fe=({size:s,position:t,scale:e,rotation:n,shadow:a,type:r,...i})=>{const o=new $(s[0],s[1],s[2]),c=v(r,i),l=new m(o,c);return t&&t.length===3&&l.position.set(t[0],t[1],t[2]),e&&e.length===3&&l.scale.set(e[0],e[1],e[2]),n&&n.length===3&&l.rotation.set(n[0],n[1],n[2]),a&&(l.castShadow=!0),l},de=({size:s,position:t,scale:e,rotation:n,shadow:a,type:r,...i})=>{const o=new m(new N(s[0],s[1]),v(r,i));return t&&t.length===3&&o.position.set(t[0],t[1],t[2]),e&&e.length===3&&o.scale.set(e[0],e[1],e[2]),n&&n.length===3&&o.rotation.set(n[0],n[1],n[2]),a&&(o.receiveShadow=!0),o},we=({size:s,position:t,scale:e,rotation:n,shadow:a,type:r,...i})=>{const o=new m(new L(s[0],s[1]),v(r,i));return t&&t.length===3&&o.position.set(t[0],t[1],t[2]),e&&e.length===3&&o.scale.set(e[0],e[1],e[2]),n&&n.length===3&&o.rotation.set(n[0],n[1],n[2]),a&&(o.receiveShadow=!0),o},pe=({position:s,type:t,shadow:e,...n})=>{const a=oe(t,n);return a.position.set(s[0],s[1],s[2]),e&&(a.castShadow=!0),a},ge=({nubmer:s=600,color:t=10263708,size:e=1,scalar:n=1e3})=>{const a=[],r=new F;for(let c=0;c<s;c++)r.x=Math.random()*2-1,r.y=Math.random()*2-1,r.z=Math.random()*2-1,r.multiplyScalar(n),a.push(r.x,r.y,r.z);const i=new M;i.setAttribute("position",new O(a,3));const o=new A({color:t,size:e,sizeAttenuation:!1});return new G(i,o)},me=(s,t=100,e="#ffffff")=>{const n=document.createElement("canvas"),a=n.getContext("2d");a.font=`${t}px Arial`,a.fillStyle=e,a.fillText(s,10,80);let r=new S(n);return r.wrapS=y,r.wrapT=y,r.repeat.set(1,1),r},v=(s,t)=>{switch(s){case"basic":return new x(t);case"lambert":return new K(t);case"phong":return new b(t);case"standard":return new J(t);default:return new x(t)}},oe=(s,{color:t,intensity:e,distance:n,angle:a,penumbra:r,decay:i}={})=>{switch(s){case"ambient":return new T(t,e);case"spot":return new Z(t,e,n,a,r,i);case"directional":return new j(t,e);case"point":return new V(t,e,n,i);default:return new T(t,e)}},Me=(s,t)=>{let e={};return s.forEach(n=>{n.name===t&&(e=n)}),e},ye=({lineArr:s,index:t=0,num:e=20,startColor:n=16777215,endColor:a=16777215})=>{if(!s.length)return!1;let r=1e3,{points:i,newLine:o}=D(s,t,e),c=new M({maxBufferSize:r*3*Float32Array.BYTES_PER_ELEMENT});for(var l=[],u=0;u<o.length;u++)l.push(u/o.length);for(var d=new C(new Float32Array(l),1),w=[],u=0;u<101;u++){var p=new B(n),g=new B(a),h=p.lerp(g,u/o.length);w.push(h.r,h.g,h.b)}c.setFromPoints(o),c.attributes.percent=d,c.attributes.color=new C(new Float32Array(w),3);const f=new A({size:.1,vertexColors:!0});return{line:new G(c,f),points:i,bufferGeometry:c}},xe=({lineArr:s,color:t=16777215,...e})=>{if(!s.length)return!1;let{points:n}=D(s);const a=new k({color:t,...e}),r=new M().setFromPoints(n),i=new P(r,a);return r.dispose(),i.computeLineDistances(),i},D=(s,t=0,e=20)=>{let a=new E(s).getPoints(101),r=new E(a.slice(t,t+e));return r.getSpacedPoints(1e3),{points:a,newLine:r}},I=async(s,t,e)=>{switch(s){case"Line":return new P(t,e);case"LineLoop":return new te(t,e);case"LineSegments":return new ee(t,e);default:return new P(t,e)}},be=async({lineType:s="Line",point:t=50,lineMater:e,curve:n})=>{if(!n)return!1;const a=n.getPoints(t),r=new M().setFromPoints(a),i=new Q(e);return I(s,r,i)},Pe=async({lineType:s="Line",point:t=101,lineMater:e,curve:n})=>{if(!n)return!1;const a=n.getPoints(t),r=new M().setFromPoints(a),i=new k({...e});let o=await I(s,r,i);return o.computeLineDistances(),o},Le=({r:s,size:t,color:e,side:n=z,...a})=>{const r=new L(s,t),i=new x({color:e,side:n,...a}),o=new m(r,i);return o.rotation.x=Math.PI/2,o},Se=({r:s,circle:t,color:e,position:n})=>{const a=ce(t,e);let r=new m(new L(s,36),a);return r.rotation.x=-Math.PI/2,r.position.set(...n),r};function ce(s,t){const e=document.createElement("canvas");let n=3;e.height=s*2,e.width=s*2;const a=e.getContext("2d");a.clearRect(0,0,e.width,e.height),a.strokeStyle=t||"#ffff00",a.lineWidth=2,a.beginPath();let r=s-n*2;a.arc(e.width*.5,e.height*.5,r,0,2*Math.PI),a.closePath(),a.stroke(),a.lineWidth=2,a.beginPath(),r=s-n*1,a.arc(e.width*.5,e.height*.5,r,0,2*Math.PI),a.closePath(),a.stroke(),a.lineWidth=2,a.beginPath(),r=s,a.arc(e.width*.5,e.height*.5,r,0,2*Math.PI),a.closePath(),a.stroke();const i=new S(e);return i.wrapS=y,i.wrapT=y,new x({map:i,transparent:!0,opacity:1,side:z})}const he=async(s="/public/fonts/KaiTi_Regular.json")=>{let t=new ne;return new Promise((e,n)=>{t.load(s,function(a){try{e(a)}catch(r){n(r,"字体引入失败")}},void 0,a=>{n(a,"字体引入失败")})})},ve=async({text:s,font:t,fontSize:e,color:n,backColor:a,depth:r})=>{let i=new U,o=null;const c=await he(t);let l=[new b({color:n||16777215,flatShading:!0}),new b({color:a||16711680})];!Array.isArray(s)&&typeof s=="string"&&(s=s.split(""));for(let u=0;u<s.length;u++){const d=s[u];let w=new ie(d,{font:c,size:e,depth:r,curveSegments:12,bevelEnabled:!0,bevelThickness:.01,bevelSize:0,bevelSegments:3});w.computeBoundingBox(),o=new m(w,l);let p=s.length>30?Math.random()*18-8:Math.random()*10-6,g=s.length>30?Math.random()*18-8:Math.random()*10-6,h=(s.length>30,Math.random()*10-3);o.position.set(p,g,h),o.rotation.y=Math.PI*2,i.add(o)}return i},Te=(s,t,e)=>{const n=document.createElement("canvas"),a=n.getContext("2d"),r=14;n.width=s.length*r*1.5,n.height=r*3,a.font=`${r}px Arial`,a.fillStyle=e,a.textAlign="center",a.textBaseline="middle",a.fillText(s,n.width/2,n.height/2);const i=new S(n),o=new X({map:i}),c=new Y(o);return c.scale.set(.6,.6,1),c.position.copy(t),c},Ce=(s,t,e)=>{let n=t*Math.PI/180;const a=e*Math.PI/180;n=-n;const r=s*Math.cos(a)*Math.cos(n),i=s*Math.sin(a),o=s*Math.cos(a)*Math.sin(n);return new F(r,i,o)};export{fe as a,ye as b,Le as c,xe as d,Se as e,ve as f,be as g,Pe as h,ge as i,Te as j,Me as k,Ce as l,we as m,me as n,de as o,pe as p};
