import{J as W,K as q,T as H,b as $,X as N,c as m,Y as O,Z as L,V as E,a as x,B as M,F as C,_ as G,$ as k,a0 as S,a1 as b,M as y,a2 as J,a3 as P,a4 as K,a5 as B,a6 as V,a7 as j,a8 as Z,a9 as F,aa as z,e as v,ab as A,d as Q,D,G as U,ac as X,ad as Y,ae as ee,af as te}from"./Loading-CMMGbIOt.js";class ne extends W{constructor(t){super(t)}load(t,e,s,n){const r=this,o=new q(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(i){const h=r.parse(JSON.parse(i));e&&e(h)},s,n)}parse(t){return new se(t)}}class se{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const s=[],n=ae(t,e,this.data);for(let r=0,o=n.length;r<o;r++)s.push(...n[r].toShapes());return s}}function ae(a,t,e){const s=Array.from(a),n=t/e.resolution,r=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n,o=[];let i=0,h=0;for(let c=0;c<s.length;c++){const u=s[c];if(u===`
`)i=0,h-=r;else{const d=re(u,n,i,h,e);i+=d.offsetX,o.push(d.path)}}return o}function re(a,t,e,s,n){const r=n.glyphs[a]||n.glyphs["?"];if(!r){console.error('THREE.Font: character "'+a+'" does not exists in font family '+n.familyName+".");return}const o=new H;let i,h,c,u,d,w,p,g;if(r.o){const l=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let f=0,R=l.length;f<R;)switch(l[f++]){case"m":i=l[f++]*t+e,h=l[f++]*t+s,o.moveTo(i,h);break;case"l":i=l[f++]*t+e,h=l[f++]*t+s,o.lineTo(i,h);break;case"q":c=l[f++]*t+e,u=l[f++]*t+s,d=l[f++]*t+e,w=l[f++]*t+s,o.quadraticCurveTo(d,w,c,u);break;case"b":c=l[f++]*t+e,u=l[f++]*t+s,d=l[f++]*t+e,w=l[f++]*t+s,p=l[f++]*t+e,g=l[f++]*t+s,o.bezierCurveTo(d,w,p,g,c,u);break}}return{offsetX:r.ha*t,path:o}}class oe extends ${constructor(t,e={}){const s=e.font;if(s===void 0)super();else{const n=s.generateShapes(t,e.size);e.depth===void 0&&e.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),e.depth=e.depth!==void 0?e.depth:e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(n,e)}this.type="TextGeometry"}}const de=({size:a,position:t,scale:e,rotation:s,shadow:n,type:r="basic",...o})=>{const i=new N(a[0],a[1],a[2]),h=T(r,o),c=new m(i,h);return t&&t.length===3&&c.position.set(t[0],t[1],t[2]),e&&e.length===3&&c.scale.set(e[0],e[1],e[2]),s&&s.length===3&&c.rotation.set(s[0],s[1],s[2]),n&&(c.castShadow=!0),c},we=({size:a,position:t,scale:e,rotation:s,shadow:n,type:r="basic",...o})=>{const{src:i,...h}=o,c=new m(new O(a[0],a[1]),T(r,h));return t&&t.length===3&&c.position.set(t[0],t[1],t[2]),e&&e.length===3&&c.scale.set(e[0],e[1],e[2]),s&&s.length===3&&c.rotation.set(s[0],s[1],s[2]),n&&(c.receiveShadow=!0),c},pe=({size:a,position:t,scale:e,rotation:s,shadow:n,type:r,...o})=>{const i=new m(new L(a[0],a[1]),T(r,o));return t&&t.length===3&&i.position.set(t[0],t[1],t[2]),e&&e.length===3&&i.scale.set(e[0],e[1],e[2]),s&&s.length===3&&i.rotation.set(s[0],s[1],s[2]),n&&(i.receiveShadow=!0),i},ge=({position:a,type:t,shadow:e,...s})=>{const n=ie(t,s);return n.position.set(a[0],a[1],a[2]),e&&(n.castShadow=!0),n},me=({nubmer:a=600,color:t=10263708,size:e=1,scalar:s=1e3,multiple:n=1})=>{const r=[],o=[],i=new E,h=new x(t);for(let d=0;d<a;d++){i.x=Math.random()*2*n-1*n,i.y=Math.random()*2*n-1*n,i.z=Math.random()*2*n-1*n,i.multiplyScalar(s),r.push(i.x,i.y,i.z);const w=h.clone(),p=Math.random();o.push(w.r,w.g,w.b,p)}const c=new M;c.setAttribute("position",new C(r,3)),c.setAttribute("color",new C(o,4));const u=new G({size:e,sizeAttenuation:!1,vertexColors:!0,transparent:!0,depthWrite:!1});return new k(c,u)},Me=(a,t=100,e="#ffffff")=>{const s=document.createElement("canvas"),n=s.getContext("2d");n.font=`${t}px Arial`,n.fillStyle=e,n.fillText(a,10,80);let r=new S(s);return r.wrapS=b,r.wrapT=b,r.repeat.set(1,1),r},T=(a,t)=>{switch(a){case"basic":return new y(t);case"lambert":return new K(t);case"phong":return new P(t);case"standard":return new J(t);default:return new y(t)}},ie=(a,{color:t,intensity:e,distance:s,angle:n,penumbra:r,decay:o}={})=>{switch(a){case"ambient":return new B(t,e);case"spot":return new Z(t,e,s,n,r,o);case"directional":return new j(t,e);case"point":return new V(t,e,s,o);default:return new B(t,e)}},ce=(a,t)=>{for(const e of a){if(e.name===t)return e;if(e.children&&e.children.length>0){const s=ce(e.children,t);if(s)return s}}return null},be=({lineArr:a,index:t=0,num:e=20,startColor:s=16777215,endColor:n=16777215})=>{if(!a.length)return!1;let r=1e3,{points:o,newLine:i}=I(a,t,e),h=new M({maxBufferSize:r*3*Float32Array.BYTES_PER_ELEMENT});for(var c=[],u=0;u<i.length;u++)c.push(u/i.length);for(var d=new F(new Float32Array(c),1),w=[],u=0;u<101;u++){var p=new x(s),g=new x(n),l=p.lerp(g,u/i.length);w.push(l.r,l.g,l.b)}h.setFromPoints(i),h.attributes.percent=d,h.attributes.color=new F(new Float32Array(w),3);const f=new G({size:.1,vertexColors:!0});return{line:new k(h,f),points:o,bufferGeometry:h}},ye=({lineArr:a,color:t=16777215,...e})=>{if(!a.length)return!1;let{points:s}=I(a);const n=new z({color:t,...e}),r=new M().setFromPoints(s),o=new v(r,n);return r.dispose(),o.computeLineDistances(),o},I=(a,t=0,e=20)=>{let n=new A(a).getPoints(101),r=new A(n.slice(t,t+e));return r.getSpacedPoints(1e3),{points:n,newLine:r}},_=async(a,t,e)=>{switch(a){case"Line":return new v(t,e);case"LineLoop":return new te(t,e);case"LineSegments":return new ee(t,e);default:return new v(t,e)}},xe=async({lineType:a="Line",point:t=50,lineMater:e,curve:s})=>{if(!s)return!1;const n=s.getPoints(t),r=new M().setFromPoints(n),o=new Q(e);return _(a,r,o)},Pe=async({lineType:a="Line",point:t=101,lineMater:e,curve:s})=>{if(!s)return!1;const n=s.getPoints(t),r=new M().setFromPoints(n),o=new z({...e});let i=await _(a,r,o);return i.computeLineDistances(),i},ve=({r:a,size:t,color:e,side:s=D,...n})=>{const r=new L(a,t),o=new y({color:e,side:s,...n}),i=new m(r,o);return i.rotation.x=Math.PI/2,i},Le=({r:a,circle:t,color:e,position:s})=>{const n=he(t,e);let r=new m(new L(a,36),n);return r.rotation.x=-Math.PI/2,r.position.set(...s),r};function he(a,t){const e=document.createElement("canvas");let s=3;e.height=a*2,e.width=a*2;const n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.strokeStyle=t||"#ffff00",n.lineWidth=2,n.beginPath();let r=a-s*2;n.arc(e.width*.5,e.height*.5,r,0,2*Math.PI),n.closePath(),n.stroke(),n.lineWidth=2,n.beginPath(),r=a-s*1,n.arc(e.width*.5,e.height*.5,r,0,2*Math.PI),n.closePath(),n.stroke(),n.lineWidth=2,n.beginPath(),r=a,n.arc(e.width*.5,e.height*.5,r,0,2*Math.PI),n.closePath(),n.stroke();const o=new S(e);return o.wrapS=b,o.wrapT=b,new y({map:o,transparent:!0,opacity:1,side:D})}const le=async(a="/public/fonts/KaiTi_Regular.json")=>{let t=new ne;return new Promise((e,s)=>{t.load(a,function(n){try{e(n)}catch(r){s(r,"字体引入失败")}},void 0,n=>{s(n,"字体引入失败")})})},Se=async({text:a,font:t,fontSize:e,color:s,backColor:n,depth:r})=>{let o=new U,i=null;const h=await le(t);let c=[new P({color:s||16777215,flatShading:!0}),new P({color:n||16711680})];!Array.isArray(a)&&typeof a=="string"&&(a=a.split(""));for(let u=0;u<a.length;u++){const d=a[u];let w=new oe(d,{font:h,size:e,depth:r,curveSegments:12,bevelEnabled:!0,bevelThickness:.01,bevelSize:0,bevelSegments:3});w.computeBoundingBox(),i=new m(w,c);let p=a.length>30?Math.random()*18-8:Math.random()*10-6,g=a.length>30?Math.random()*18-8:Math.random()*10-6,l=(a.length>30,Math.random()*10-3);i.position.set(p,g,l),i.rotation.y=Math.PI*2,o.add(i)}return o},Te=(a,t,e)=>{const s=document.createElement("canvas"),n=s.getContext("2d"),r=14;s.width=a.length*r*1.5,s.height=r*3,n.font=`${r}px Arial`,n.fillStyle=e,n.textAlign="center",n.textBaseline="middle",n.fillText(a,s.width/2,s.height/2);const o=new S(s),i=new X({map:o}),h=new Y(i);return h.scale.set(.6,.6,1),h.position.copy(t),h},Ce=(a,t,e)=>{let s=t*Math.PI/180;const n=e*Math.PI/180;s=-s;const r=a*Math.cos(n)*Math.cos(s),o=a*Math.sin(n),i=a*Math.cos(n)*Math.sin(s);return new E(r,o,i)};export{de as a,be as b,ve as c,ye as d,Le as e,Se as f,xe as g,Pe as h,me as i,Te as j,ce as k,Ce as l,pe as m,Me as n,we as o,ge as p};
