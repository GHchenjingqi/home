import{I as W,J as _,K as q,b as H,T as $,c as m,X as O,V as F,B as M,F as J,Y as G,Z as A,_ as L,$ as y,M as x,a0 as K,a1 as b,a2 as N,a3 as v,a4 as V,a5 as j,a6 as Z,a7 as S,C as T,a8 as B,e as P,a9 as C,d as Q,aa as k,D as z,G as U,ab as X,ac as Y,ad as ee,ae as te}from"./Loading-ZeL5atX1.js";class ne extends W{constructor(t){super(t)}load(t,e,a,n){const r=this,o=new _(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(i){const c=r.parse(JSON.parse(i));e&&e(c)},a,n)}parse(t){return new ae(t)}}class ae{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const a=[],n=se(t,e,this.data);for(let r=0,o=n.length;r<o;r++)a.push(...n[r].toShapes());return a}}function se(s,t,e){const a=Array.from(s),n=t/e.resolution,r=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n,o=[];let i=0,c=0;for(let l=0;l<a.length;l++){const f=a[l];if(f===`
`)i=0,c-=r;else{const d=re(f,n,i,c,e);i+=d.offsetX,o.push(d.path)}}return o}function re(s,t,e,a,n){const r=n.glyphs[s]||n.glyphs["?"];if(!r){console.error('THREE.Font: character "'+s+'" does not exists in font family '+n.familyName+".");return}const o=new q;let i,c,l,f,d,w,g,p;if(r.o){const h=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let u=0,R=h.length;u<R;)switch(h[u++]){case"m":i=h[u++]*t+e,c=h[u++]*t+a,o.moveTo(i,c);break;case"l":i=h[u++]*t+e,c=h[u++]*t+a,o.lineTo(i,c);break;case"q":l=h[u++]*t+e,f=h[u++]*t+a,d=h[u++]*t+e,w=h[u++]*t+a,o.quadraticCurveTo(d,w,l,f);break;case"b":l=h[u++]*t+e,f=h[u++]*t+a,d=h[u++]*t+e,w=h[u++]*t+a,g=h[u++]*t+e,p=h[u++]*t+a,o.bezierCurveTo(d,w,g,p,l,f);break}}return{offsetX:r.ha*t,path:o}}class oe extends H{constructor(t,e={}){const a=e.font;if(a===void 0)super();else{const n=a.generateShapes(t,e.size);e.depth===void 0&&e.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),e.depth=e.depth!==void 0?e.depth:e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(n,e)}this.type="TextGeometry"}}const fe=({size:s,position:t,scale:e,rotation:a,shadow:n,type:r,...o})=>{const i=new $(s[0],s[1],s[2]),c=E(r,o),l=new m(i,c);return t&&t.length===3&&l.position.set(t[0],t[1],t[2]),e&&e.length===3&&l.scale.set(e[0],e[1],e[2]),a&&a.length===3&&l.rotation.set(a[0],a[1],a[2]),n&&(l.castShadow=!0),l},de=({size:s,position:t,scale:e,rotation:a,shadow:n,type:r,...o})=>{const i=new m(new O(s[0],s[1]),E(r,o));return t&&t.length===3&&i.position.set(t[0],t[1],t[2]),e&&e.length===3&&i.scale.set(e[0],e[1],e[2]),a&&a.length===3&&i.rotation.set(a[0],a[1],a[2]),n&&(i.receiveShadow=!0),i},we=({position:s,type:t,shadow:e,...a})=>{const n=ie(t,a);return n.position.set(s[0],s[1],s[2]),e&&(n.castShadow=!0),n},pe=({nubmer:s=600,color:t=10263708,size:e=1,scalar:a=1e3})=>{const n=[],r=new F;for(let c=0;c<s;c++)r.x=Math.random()*2-1,r.y=Math.random()*2-1,r.z=Math.random()*2-1,r.multiplyScalar(a),n.push(r.x,r.y,r.z);const o=new M;o.setAttribute("position",new J(n,3));const i=new G({color:t,size:e,sizeAttenuation:!1});return new A(o,i)},ge=(s,t=100,e="#ffffff")=>{const a=document.createElement("canvas"),n=a.getContext("2d");n.font=`${t}px Arial`,n.fillStyle=e,n.fillText(s,10,80);let r=new L(a);return r.wrapS=y,r.wrapT=y,r.repeat.set(1,1),r},E=(s,t)=>{switch(s){case"basic":return new x(t);case"lambert":return new N(t);case"phong":return new b(t);case"standard":return new K(t);default:return new x(t)}},ie=(s,{color:t,intensity:e,distance:a,angle:n,penumbra:r,decay:o}={})=>{switch(s){case"ambient":return new v(t,e);case"spot":return new Z(t,e,a,n,r,o);case"directional":return new j(t,e);case"point":return new V(t,e,a,o);default:return new v(t,e)}},me=(s,t)=>{let e={};return s.forEach(a=>{a.name===t&&(e=a)}),e},Me=({lineArr:s,index:t=0,num:e=20,startColor:a=16777215,endColor:n=16777215})=>{if(!s.length)return!1;let{points:r,newLine:o}=I(s,t,e);for(var i=[],c=0;c<o.length;c++)i.push(c/o.length);for(var l=new S(new Float32Array(i),1),f=[],c=0;c<101;c++){var d=new T(a),w=new T(n),g=d.lerp(w,c/101);f.push(g.r,g.g,g.b)}let p=new M().setFromPoints(o);p.attributes.percent=l,p.attributes.color=new S(new Float32Array(f),3);const h=new G({size:.1,vertexColors:!0});return{line:new A(p,h),points:r,bufferGeometry:p}},ye=({lineArr:s,color:t=16777215,...e})=>{if(!s.length)return!1;let{points:a}=I(s);const n=new B({color:t,...e}),r=new M().setFromPoints(a),o=new P(r,n);return o.computeLineDistances(),o},I=(s,t=0,e=20)=>{let n=new C(s).getPoints(101),r=new C(n.slice(t,t+e));return r.getSpacedPoints(1e3),{points:n,newLine:r}},D=async(s,t,e)=>{switch(s){case"Line":return new P(t,e);case"LineLoop":return new te(t,e);case"LineSegments":return new ee(t,e);default:return new P(t,e)}},xe=async({lineType:s="Line",point:t=50,lineMater:e,curve:a})=>{if(!a)return!1;const n=a.getPoints(t),r=new M().setFromPoints(n),o=new Q(e);return D(s,r,o)},be=async({lineType:s="Line",point:t=101,lineMater:e,curve:a})=>{if(!a)return!1;const n=a.getPoints(t),r=new M().setFromPoints(n),o=new B({...e});let i=await D(s,r,o);return i.computeLineDistances(),i},Pe=({r:s,size:t,color:e,side:a=z,...n})=>{const r=new k(s,t),o=new x({color:e,side:a,...n}),i=new m(r,o);return i.rotation.x=Math.PI/2,i},Le=({r:s,circle:t,color:e,position:a})=>{const n=ce(t,e);let r=new m(new k(s,36),n);return r.rotation.x=-Math.PI/2,r.position.set(...a),r};function ce(s,t){const e=document.createElement("canvas");let a=3;e.height=s*2,e.width=s*2;const n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.strokeStyle=t||"#ffff00",n.lineWidth=2,n.beginPath();let r=s-a*2;n.arc(e.width*.5,e.height*.5,r,0,2*Math.PI),n.closePath(),n.stroke(),n.lineWidth=2,n.beginPath(),r=s-a*1,n.arc(e.width*.5,e.height*.5,r,0,2*Math.PI),n.closePath(),n.stroke(),n.lineWidth=2,n.beginPath(),r=s,n.arc(e.width*.5,e.height*.5,r,0,2*Math.PI),n.closePath(),n.stroke();const o=new L(e);return o.wrapS=y,o.wrapT=y,new x({map:o,transparent:!0,opacity:1,side:z})}const he=async(s="/public/fonts/KaiTi_Regular.json")=>{let t=new ne;return new Promise((e,a)=>{t.load(s,function(n){try{e(n)}catch(r){a(r,"字体引入失败")}},void 0,n=>{a(n,"字体引入失败")})})},ve=async({text:s,font:t,fontSize:e,color:a,backColor:n,depth:r})=>{let o=new U,i=null;const c=await he(t);let l=[new b({color:a||16777215,flatShading:!0}),new b({color:n||16711680})];!Array.isArray(s)&&typeof s=="string"&&(s=s.split(""));for(let f=0;f<s.length;f++){const d=s[f];let w=new oe(d,{font:c,size:e,depth:r,curveSegments:12,bevelEnabled:!0,bevelThickness:.01,bevelSize:0,bevelSegments:3});w.computeBoundingBox(),i=new m(w,l);let g=s.length>30?Math.random()*18-8:Math.random()*10-6,p=s.length>30?Math.random()*18-8:Math.random()*10-6,h=(s.length>30,Math.random()*10-3);i.position.set(g,p,h),i.rotation.y=Math.PI*2,o.add(i)}return o},Se=(s,t,e)=>{const a=document.createElement("canvas"),n=a.getContext("2d"),r=14;a.width=s.length*r*1.5,a.height=r*3,n.font=`${r}px Arial`,n.fillStyle=e,n.textAlign="center",n.textBaseline="middle",n.fillText(s,a.width/2,a.height/2);const o=new L(a),i=new X({map:o}),c=new Y(i);return c.scale.set(.6,.6,1),c.position.copy(t),c},Te=(s,t,e)=>{let a=t*Math.PI/180;const n=e*Math.PI/180;a=-a;const r=s*Math.cos(n)*Math.cos(a),o=s*Math.sin(n),i=s*Math.cos(n)*Math.sin(a);return new F(r,o,i)};export{fe as a,Me as b,Pe as c,ye as d,Le as e,ve as f,xe as g,be as h,pe as i,Se as j,ge as k,Te as l,de as m,we as n,me as o};
