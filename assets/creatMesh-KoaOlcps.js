import{x as q,y as R,T as _,b as H,B as M,F as y,a as P,X as k,Y as A,Z as S,M as x,D as B,c as m,_ as $,$ as z,e as v,a0 as G,a1 as O,a2 as L,a3 as j,a4 as T,a5 as b,G as N,d as V,a6 as J,a7 as K,V as E,a8 as Z,a9 as Q,aa as U,ab as F,ac as X,ad as Y,ae as ee}from"./Loading-DqHcFzpL.js";class te extends q{constructor(t){super(t)}load(t,e,s,n){const a=this,i=new R(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,function(o){const c=a.parse(JSON.parse(o));e&&e(c)},s,n)}parse(t){return new ne(t)}}class ne{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const s=[],n=se(t,e,this.data);for(let a=0,i=n.length;a<i;a++)s.push(...n[a].toShapes());return s}}function se(r,t,e){const s=Array.from(r),n=t/e.resolution,a=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n,i=[];let o=0,c=0;for(let h=0;h<s.length;h++){const l=s[h];if(l===`
`)o=0,c-=a;else{const d=re(l,n,o,c,e);o+=d.offsetX,i.push(d.path)}}return i}function re(r,t,e,s,n){const a=n.glyphs[r]||n.glyphs["?"];if(!a){console.error('THREE.Font: character "'+r+'" does not exists in font family '+n.familyName+".");return}const i=new _;let o,c,h,l,d,w,g,p;if(a.o){const u=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let f=0,W=u.length;f<W;)switch(u[f++]){case"m":o=u[f++]*t+e,c=u[f++]*t+s,i.moveTo(o,c);break;case"l":o=u[f++]*t+e,c=u[f++]*t+s,i.lineTo(o,c);break;case"q":h=u[f++]*t+e,l=u[f++]*t+s,d=u[f++]*t+e,w=u[f++]*t+s,i.quadraticCurveTo(d,w,h,l);break;case"b":h=u[f++]*t+e,l=u[f++]*t+s,d=u[f++]*t+e,w=u[f++]*t+s,g=u[f++]*t+e,p=u[f++]*t+s,i.bezierCurveTo(d,w,g,p,h,l);break}}return{offsetX:a.ha*t,path:i}}class ae extends H{constructor(t,e={}){const s=e.font;if(s===void 0)super();else{const n=s.generateShapes(t,e.size);e.depth===void 0&&e.height!==void 0&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),e.depth=e.depth!==void 0?e.depth:e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(n,e)}this.type="TextGeometry"}}const fe=({size:r,position:t,scale:e,rotation:s,shadow:n,type:a,...i})=>{const o=new $(r[0],r[1],r[2]),c=C(a,i),h=new m(o,c);return t&&t.length===3&&h.position.set(t[0],t[1],t[2]),e&&e.length===3&&h.scale.set(e[0],e[1],e[2]),s&&s.length===3&&h.rotation.set(s[0],s[1],s[2]),n&&(h.castShadow=!0),h},de=({size:r,position:t,scale:e,rotation:s,shadow:n,type:a,...i})=>{const o=new m(new U(r[0],r[1]),C(a,i));return t&&t.length===3&&o.position.set(t[0],t[1],t[2]),e&&e.length===3&&o.scale.set(e[0],e[1],e[2]),s&&s.length===3&&o.rotation.set(s[0],s[1],s[2]),n&&(o.receiveShadow=!0),o},we=({size:r,position:t,scale:e,rotation:s,shadow:n,type:a,...i})=>{const o=new m(new S(r[0],r[1]),C(a,i));return t&&t.length===3&&o.position.set(t[0],t[1],t[2]),e&&e.length===3&&o.scale.set(e[0],e[1],e[2]),s&&s.length===3&&o.rotation.set(s[0],s[1],s[2]),o.receiveShadow=!0,o},ge=({position:r,type:t,shadow:e,...s})=>{const n=oe(t,s);return n.position.set(r[0],r[1],r[2]),e&&(n.castShadow=!0),n},pe=({nubmer:r=600,color:t=10263708,size:e=1,scalar:s=1e3,multiple:n=1})=>{const a=[],i=[],o=new E,c=new P(t);for(let d=0;d<r;d++){o.x=Math.random()*2*n-1*n,o.y=Math.random()*2*n-1*n,o.z=Math.random()*2*n-1*n,o.multiplyScalar(s),a.push(o.x,o.y,o.z);const w=c.clone(),g=Math.random();i.push(w.r,w.g,w.b,g)}const h=new M;h.setAttribute("position",new y(a,3)),h.setAttribute("color",new y(i,4));const l=new k({size:e,sizeAttenuation:!1,vertexColors:!0,transparent:!0,depthWrite:!1});return new A(h,l)},me=(r,t=100,e="#ffffff")=>{const s=document.createElement("canvas"),n=s.getContext("2d");n.font=`${t}px Arial`,n.fillStyle=e,n.fillText(r,10,80);let a=new T(s);return a.wrapS=b,a.wrapT=b,a.repeat.set(1,1),a},C=(r,t)=>{switch(r){case"basic":return new x(t);case"lambert":return new j(t);case"phong":return new L(t);case"standard":return new O(t);default:return new x}},oe=(r,{color:t,intensity:e,distance:s,angle:n,penumbra:a,decay:i}={})=>{switch(r){case"ambient":return new F(t,e);case"spot":return new ee(t,e,s,n,a,i);case"directional":return new Y(t,e);case"point":return new X(t,e,s,i);default:return new F(t,e)}},ie=(r,t)=>{for(const e of r){if(e.name===t)return e;if(e.children&&e.children.length>0){const s=ie(e.children,t);if(s)return s}}return null},Me=({lineArr:r,index:t=0,num:e=20,startColor:s=16777215,endColor:n=16777215})=>{if(!r.length)return!1;let{points:a,newLine:i}=D(r,t,e);const o=i.length;let c=new M;c.setFromPoints(i);for(var h=[],l=0;l<o;l++)h.push(l/o);c.setAttribute("percent",new y(h,1));for(var d=[],l=0;l<o;l++){var w=new P(s),g=new P(n),p=w.lerp(g,l/(o-1));d.push(p.r,p.g,p.b)}c.setAttribute("color",new y(d,3));const u=new k({size:.1,color:16777215,vertexColors:!0,transparent:!0,opacity:1,depthTest:!0});return{line:new A(c,u),points:a,bufferGeometry:c}},ye=({lineArr:r,color:t=16777215,...e})=>{if(!r.length)return!1;let{points:s}=D(r);const n=new z({color:t,...e}),a=new M().setFromPoints(s),i=new v(a,n);return a.dispose(),i.computeLineDistances(),i},D=(r,t=0,e=20)=>{const n=new G(r).getPoints(101),a=n.slice(t,t+e);if(a.length<2)return{points:n,newLine:a};const o=new G(a).getSpacedPoints(100);return{points:n,newLine:o}},I=async(r,t,e)=>{switch(r){case"Line":return new v(t,e);case"LineLoop":return new K(t,e);case"LineSegments":return new J(t,e);default:return new v(t,e)}},xe=async({lineType:r="Line",point:t=50,lineMater:e,curve:s})=>{if(!s)return!1;const n=s.getPoints(t),a=new M().setFromPoints(n),i=new V(e);return I(r,a,i)},be=async({lineType:r="Line",point:t=101,lineMater:e,curve:s})=>{if(!s)return!1;const n=s.getPoints(t),a=new M().setFromPoints(n),i=new z({...e});let o=await I(r,a,i);return o.computeLineDistances(),o},Pe=({r,size:t,color:e,side:s=B,...n})=>{const a=new S(r,t),i=new x({color:e,side:s,...n}),o=new m(a,i);return o.rotation.x=Math.PI/2,o},ve=({r,circle:t,color:e,position:s})=>{const n=ce(t,e);let a=new m(new S(r,36),n);return a.rotation.x=-Math.PI/2,a.position.set(...s),a};function ce(r,t){const e=document.createElement("canvas");let s=3;e.height=r*2,e.width=r*2;const n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.strokeStyle=t||"#ffff00",n.lineWidth=2,n.beginPath();let a=r-s*2;n.arc(e.width*.5,e.height*.5,a,0,2*Math.PI),n.closePath(),n.stroke(),n.lineWidth=2,n.beginPath(),a=r-s*1,n.arc(e.width*.5,e.height*.5,a,0,2*Math.PI),n.closePath(),n.stroke(),n.lineWidth=2,n.beginPath(),a=r,n.arc(e.width*.5,e.height*.5,a,0,2*Math.PI),n.closePath(),n.stroke();const i=new T(e);return i.wrapS=b,i.wrapT=b,new x({map:i,transparent:!0,opacity:1,side:B})}const he=async(r="https://ghchenjingqi.github.io/resources/fonts/KaiTi_Regular.json")=>{let t=new te;return new Promise((e,s)=>{t.load(r,function(n){try{e(n)}catch(a){s(a,"字体引入失败")}},void 0,n=>{s(n,"字体引入失败")})})},Le=async({text:r,font:t,fontSize:e,color:s,backColor:n,depth:a})=>{let i=new N,o=null;const c=await he(t);let h=[new L({color:s,flatShading:!0}),new L({color:n})];!Array.isArray(r)&&typeof r=="string"&&(r=r.split(""));for(let l=0;l<r.length;l++){const d=r[l];let w=new ae(d,{font:c,size:e,depth:a,curveSegments:12,bevelEnabled:!0,bevelThickness:.01,bevelSize:0,bevelSegments:3});w.computeBoundingBox(),o=new m(w,h);let g=r.length>30?Math.random()*18-8:Math.random()*10-6,p=r.length>30?Math.random()*18-8:Math.random()*10-6,u=(r.length>30,Math.random()*10-3);o.position.set(g,p,u),o.rotation.y=Math.PI*2,i.add(o)}return i},Se=(r,t,e)=>{const s=document.createElement("canvas"),n=s.getContext("2d"),a=14;s.width=r.length*a*1.5,s.height=a*3,n.font=`${a}px Arial`,n.fillStyle=e,n.textAlign="center",n.textBaseline="middle",n.fillText(r,s.width/2,s.height/2);const i=new T(s),o=new Z({map:i}),c=new Q(o);return c.scale.set(.6,.6,1),c.position.copy(t),c},Te=(r,t,e)=>{let s=t*Math.PI/180;const n=e*Math.PI/180;s=-s;const a=r*Math.cos(n)*Math.cos(s),i=r*Math.sin(n),o=r*Math.cos(n)*Math.sin(s);return new E(a,i,o)};export{Pe as a,fe as b,Me as c,ye as d,ve as e,Le as f,xe as g,be as h,pe as i,Se as j,ie as k,Te as l,we as m,me as n,de as o,ge as p};
