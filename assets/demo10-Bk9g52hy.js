import{i as b,r as m}from"./linesGL-D8slxU7S.js";import{_ as v,r as w,i as S,o as p,j as h,a as x,y as F,F as j,g as z}from"./index-BrgrUAU6.js";const B={__name:"demo10",setup(C){const y=async({adcode:n,lastlevel:e},o)=>{const a=e==0?`https://geo.datav.aliyun.com/areas_v3/bound/geojson?code=${n}`:`https://geo.datav.aliyun.com/areas_v3/bound/geojson?code=${n}_full`,s=await fetch(a);if(s.status==200){const u=await s.json();o(u)}else console.error("地图数据获取失败"),o(null)},l=(n,e)=>{const o={tooltip:{trigger:"item",position:"inside",formatter:"{b}",backgroundColor:"rgba(50, 50, 50, 0.7)",textStyle:{color:"#FFFFFF",textAlign:"center",fontSize:"12px"}},series:[{type:"map3D",map:e,roam:!0,label:{show:!0,distance:5,formatter:function(a){return a.name?a.name:" "},textStyle:{color:"#fff",fontSize:12}},emphasis:{label:{show:!0,textStyle:{color:"#fff",fontSize:14}},itemStyle:{color:"#fb5021"}},itemStyle:{color:"#0b59c1",opacity:1,borderWidth:.5,borderColor:"#fff"},light:{main:{color:"#ffffff",intensity:1.2,shadow:!0,shadowQuality:"high",alpha:48,beta:10}}}]};n.setOption(o)},c=w(!1),g=()=>{t&&(t.clear(),m("china",r),l(t,"china"),i=r.features,f=null,c.value=!1)};let t=null,i=null,f=null,r=null;const _=async()=>{r=await fetch("https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json").then(e=>e.json()),t=b(document.getElementById("chart")),m("china",r),l(t,"china"),i=r.features;const n=()=>{t&&t.resize()};window.addEventListener("resize",n),z(()=>{window.removeEventListener("resize",n)}),t.on("click",function(e){if(e.data){const{name:o}=e.data,a=i.find(s=>s.properties.name===o);if(a&&o!=f){const s=a.properties.adcode,u=a.properties.childrenNum;y({adcode:s,lastlevel:u},async d=>{d&&(t.clear(),f=o,m(o,d),i=d.features,l(t,o),c.value=!0)})}}})};return S(()=>{_()}),(n,e)=>(p(),h(j,null,[e[0]||(e[0]=x("div",{class:"chart",id:"chart"},null,-1)),c.value?(p(),h("button",{key:0,onClick:g,class:"reset-button"},"返回")):F("",!0)],64))}},E=v(B,[["__scopeId","data-v-5829a11b"]]);export{E as default};
