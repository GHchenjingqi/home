import{i as _,r as d}from"./linesGL-vcI7uULo.js";import{_ as b}from"./index-k_b31qc0.js";import{s as w,i as S,c as p,o as h,g as x,f as F,F as z,v as j}from"./vue-vendor-C-eO5OHd.js";import"http://115.190.117.177:10086/mds/pathList.js";const B={__name:"demo10",setup(C){const g=async({adcode:n,lastlevel:e},o)=>{const a=e==0?`https://geo.datav.aliyun.com/areas_v3/bound/geojson?code=${n}`:`https://geo.datav.aliyun.com/areas_v3/bound/geojson?code=${n}_full`,s=await fetch(a);if(s.status==200){const u=await s.json();o(u)}else console.error("地图数据获取失败"),o(null)},l=(n,e)=>{const o={tooltip:{trigger:"item",position:"inside",formatter:"{b}",backgroundColor:"rgba(50, 50, 50, 0.7)",textStyle:{color:"#FFFFFF",textAlign:"center",fontSize:"12px"}},series:[{type:"map3D",map:e,roam:!0,label:{show:!0,distance:5,formatter:function(a){return a.name?a.name:" "},textStyle:{color:"#fff",fontSize:12}},emphasis:{label:{show:!0,textStyle:{color:"#fff",fontSize:14}},itemStyle:{color:"#fb5021"}},itemStyle:{color:"#0b59c1",opacity:1,borderWidth:.5,borderColor:"#fff"},light:{main:{color:"#ffffff",intensity:1.2,shadow:!0,shadowQuality:"high",alpha:48,beta:10}}}]};n.setOption(o)},c=w(!1),y=()=>{t&&(t.clear(),d("china",r),l(t,"china"),i=r.features,f=null,c.value=!1)};let t=null,i=null,f=null,r=null;const v=async()=>{r=await fetch("https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json").then(e=>e.json()),t=_(document.getElementById("chart")),d("china",r),l(t,"china"),i=r.features;const n=()=>{t&&t.resize()};window.addEventListener("resize",n),j(()=>{window.removeEventListener("resize",n)}),t.on("click",function(e){if(e.data){const{name:o}=e.data,a=i.find(s=>s.properties.name===o);if(a&&o!=f){const s=a.properties.adcode,u=a.properties.childrenNum;g({adcode:s,lastlevel:u},async m=>{m&&(t.clear(),f=o,d(o,m),i=m.features,l(t,o),c.value=!0)})}}})};return S(()=>{v()}),(n,e)=>(h(),p(z,null,[e[0]||(e[0]=x("div",{class:"chart",id:"chart"},null,-1)),c.value?(h(),p("button",{key:0,onClick:y,class:"reset-button"},"返回")):F("",!0)],64))}},O=b(B,[["__scopeId","data-v-212baf8c"]]);export{O as default};
