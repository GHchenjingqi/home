import{u as U,L as J}from"./Loading-DX6OrYVO.js";import{W as O,N as Q,B as X,V as _,M as u,a as w,S as Y,P as Z,C as $}from"./cannon-es-DfQPZTbc.js";import{_ as T,a as H,c as R,b as E,w as ee,u as v,d as M}from"./index-DpGVNEm0.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-Ccov-lO2.js";import"./loading-Vx-oxiet.js";import"https://ghchenjingqi.github.io/resources/mds/pathList.js";const ae={__name:"demo14",setup(te){let a,o,s,p,c,y=[];const L=async({THREE:e,scene:t,controls:g,transControls:k,camera:S,renderer:r})=>{r.shadowMap.enabled=!0,r.shadowMap.type=e.PCFSoftShadowMap;const l=new e.SphereGeometry(1),C=new e.TextureLoader().load("/home/https://ghchenjingqi.github.io/resources/images/lq.gif"),A=new e.MeshPhongMaterial({color:13199362,map:C});o=new e.Mesh(l,A),o.position.y=15,o.castShadow=!0,t.add(o);const h=new e.Group,N=new e.PlaneGeometry(100,50),f=new e.MeshLambertMaterial({color:8947848}),i=new e.Mesh(N,f);i.quaternion.setFromAxisAngle(new e.Vector3(1,0,0),-Math.PI/2),i.castShadow=!0,i.receiveShadow=!0,h.add(i);let F=80,V=new e.BoxGeometry(1,1,1,10,10);for(let n=0;n<F;n++){const d=new e.Mesh(V,f);d.castShadow=!0,d.position.set(Math.random()*10-5,0,Math.random()*10-2),y.push(d),h.add(d)}t.add(h);let m=new e.PointLight(16777215,500,100);m.position.set(0,10,5),t.add(m),m.castShadow=!0,a=new O,a.gravity.set(0,-9.82,0),a.quatNormalizeSkip=0,a.quatNormalizeFast=!1,a.broadphase=new Q;const I=new X(new _(.5,.5,.5));let z=new u;p=new w({mass:5,shape:I,material:z}),p.position.set(0,10,2),a.addBody(p);const W=new Y(1),b=new u;s=new w({mass:1,shape:W,material:b}),s.position.set(0,15,0),a.addBody(s);const j=new Z,x=new u,B=new w({mass:0,shape:j,material:x});B.quaternion.setFromAxisAngle(new _(1,0,0),-Math.PI/2),a.addBody(B);const D=new $(x,b,{restitution:.8});a.addContactMaterial(D);const K=()=>{o.position.y=15,s.position.set(0,15,0),y.forEach(n=>{n.position.set(Math.random()*10-5,0,Math.random()*10-5)})};c=function(n){switch(n.code){case"Space":K();break}},document.body.addEventListener("keydown",c)},P=({THREE:e,scene:t,controls:g,transControls:k,camera:S,renderer:r,stats:l})=>{a.step(.016666666666666666),o.position.copy(s.position),o.quaternion.copy(s.quaternion),g.update(),r.render(t,S),l.update()},{loading:q,pregress:G}=U({el:"#canvas",background:"#111",cameraPosition:[0,10,20],control:!0,controlAutoSpeed:!0,helper:!1,light:!1,creatMesh:L,animation:P});return H(()=>{a=null,document.body.removeEventListener("keydown",c)}),(e,t)=>(E(),R(J,{loading:v(q),pregress:v(G)},{default:ee(()=>[...t[0]||(t[0]=[M("canvas",{id:"canvas"},null,-1),M("div",{class:"text-box"},[M("p",null,"按”空格“重复播放碰撞动画")],-1)])]),_:1},8,["loading","pregress"]))}},he=T(ae,[["__scopeId","data-v-3dbb458d"]]);export{he as default};
