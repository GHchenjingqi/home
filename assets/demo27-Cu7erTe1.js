import{u as ut,L as gt}from"./Loading-DGjTkfcT.js";import{m as ht,k as S,i as pt}from"./creatMesh-Durcvu_A.js";import{u as ft}from"./useRay-By-uhnPZ.js";import{u as yt,K as G}from"./keyCodes-CbMTanEj.js";import{C as q}from"./camera-controls.module-CggtOxtI.js";import{W as xt}from"./Water-B2UU_Q24.js";import{_ as wt,g as zt,c as vt,b as bt,w as Mt,u as $,d as p}from"./index-DWzOzQnM.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-CIebAk-_.js";import"./loading-B9d2b6vW.js";import"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/mds/pathList.js";const J=[{url:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/images/2.jpg",rotation:{x:0,y:Math.PI,z:0},scale:{x:1.6,y:1.6,z:1},position:{x:-2.480360132066057,y:1.02914583548867,z:-3.8840465703459124}},{url:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/images/1.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.616760671057668,y:1.0103806696280644,z:-2.9235002018346625}},{url:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/images/3.jpg",rotation:{x:0,y:-Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:-5.263541604983203,y:.9416043550166153,z:-.8699767840378825}},{url:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/images/4.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.516760671057668,y:1.0103806696280644,z:-.5235002018346626}},{url:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/images/5.jpg",rotation:{x:0,y:-Math.PI*2,z:0},scale:{x:1,y:1,z:1},position:{x:-3.997948866131494,y:.8198050714546645,z:2.5871518341211726}},{url:"https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/images/6.jpg",position:{x:1.363645229509038,y:.9849856905460515,z:2},scale:{x:.6,y:.6,z:1},rotation:{x:0,y:1.5707963267948966,z:0}}];let _=!1,b=!1,y,A,l;const e={config:{}};e.mount=function(a={}){const o=document.getElementById("zoomtastic-container");o&&o.remove(),e.config.size=a.size||"95%",e.config.easing=a.easing||"ease",e.config.duration=a.duration||300,e.config.background=a.background||"rgba(0, 0, 0, 0.9)",e.config.filter=a.filter||"drop-shadow(0 2px 16px rgba(0, 0, 0, 0.3))",e.config.animation=a.animation||"slide",y=W("zoomtastic-container",{top:"0",left:"0",width:"100%",height:"100vh",display:"flex",position:"fixed",alignItems:"center",justifyContent:"center",maxHeight:"100dvh",cursor:"zoom-out",zIndex:"16777271",visibility:"hidden"}),A=W("zoomtastic-background",{width:"100%",height:"100%",zIndex:"0",opacity:"0",userSelect:"none",position:"absolute",background:e.config.background,transitionProperty:"opacity",transitionTimingFunction:e.config.easing,transitionDuration:parseInt(e.config.duration*.75)+"ms"}),l=W("zoomtastic-image",{width:e.config.size,height:e.config.size,opacity:"0",zIndex:"16777271",userSelect:"none",pointerEvents:"none",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",transitionProperty:"all",transitionTimingFunction:e.config.easing,transitionDuration:parseInt(e.config.duration)+"ms",transform:"translateY(0) scale(1)",filter:e.config.filter}),e.config.animation==="slide"&&(l.style.transform="translateY(5%) scale(1)"),e.config.animation==="zoom"&&(l.style.transform="scale(0.95)"),e.config.animation==="drop"&&(l.style.transform="scale(1.1)"),y.addEventListener("click",()=>{b||(b=!0,e.hide())}),y.appendChild(l),y.appendChild(A),document.body.appendChild(y),b=!1,_=!0};e.listen=function(a="[zoomtastic]",o="src"){if(_||e.mount(),typeof a=="string"&&(a=document.querySelectorAll(a)),a instanceof HTMLElement&&(a=[a]),!!a)for(let d=0;d<a.length;d++){const g=a[d];g.style.cursor="zoom-in",g.addEventListener("click",m=>{m.preventDefault();const z=g.getAttribute(o);z&&e.show(z)})}};e.show=function(a){if(!a)throw new TypeError("URL is not specified");_||e.mount(),l.style.backgroundImage=`url("${encodeURI(a)}")`,y.style.visibility="visible",setTimeout(()=>{e.config.animation==="slide"&&(l.style.transform="translateY(0) scale(1)"),(e.config.animation==="zoom"||e.config.animation==="drop")&&(l.style.transform="translateY(0) scale(1)"),l.style.opacity="1",A.style.opacity="1",b=!1})};e.hide=function(){_||e.mount(),setTimeout(()=>{e.config.animation==="slide"&&(l.style.transform="translateY(5%) scale(1)"),e.config.animation==="zoom"&&(l.style.transform="translateY(0) scale(0.95)"),e.config.animation==="drop"&&(l.style.transform="translateY(0) scale(1.1)"),l.style.opacity="0",A.style.opacity="0"}),setTimeout(()=>{l.style.backgroundImage="none",y.style.visibility="hidden",b=!1},parseInt(e.config.duration))};function W(a,o={}){const d=document.createElement("div");for(const g in o)d.style[g]=o[g];return d.id=a,d}const Q=!1,Lt={__name:"demo27",setup(a){let o=null,d=-1,g=null,m=null,z=null,x=null,D=null;const T=async({THREE:n,scene:s,transControls:O,renderer:V,camera:M,gridHelper:Y,axesHelper:K})=>{q.install({THREE:n}),e.mount();const{keyEvent:L,clearKeys:tt,getKeyTime:jt}=await yt();z=tt;const j=new n.Group;let w=J[0].position;const k=ht({size:[10,64],position:[0,0,0],shadow:!0,type:"standard",color:13606249});k.rotation.x=-Math.PI/2,k.position.y=d-.05,k.name="plane",j.add(k);const B=S(s.children,"home");B.rotation.y=-Math.PI/8,B.scale.set(15,15,15),B.position.set(0,2.8,-4);const N=S(s.children,"tree");N.scale.set(15,15,15),N.position.set(5.55,2.707,-2.471),D=S(s.children,"michelle"),D.scale.set(1.2,1.2,1.2),D.position.set(3.8736,-1,4.935);const I=new n.Group,U=S(s.children,"light");U.scale.set(3,3,3),I.add(U);const P=new n.PointLight(16777215,80,0);P.position.set(0,d,.7),P.lookAt(0,-3,.7),P.castShadow=!0;const et=new n.SphereGeometry(20,32,32),ot=new n.MeshStandardMaterial({color:15114812,emissive:15114812,emissiveIntensity:1e3,roughness:.5,metalness:0}),X=new n.Mesh(et,ot);X.position.set(0,250,1e3),s.background=new n.Color(265780),s.add(X);const nt=new n.AmbientLight(16777215,.4);s.add(nt);let Z=[{nubmer:1850,color:16777215,size:1.5,scalar:1,multiple:1e3}];for(let t=0;t<Z.length;t++){const i=pt(Z[t]);i.rotation.x=Math.random()*6,i.rotation.y=Math.random()*6,i.rotation.z=Math.random()*6,i.matrixAutoUpdate=!1,i.updateMatrix(),i.position.set(0,0,0),s.add(i)}const at=new n.PlaneGeometry(1e3,1e3);x=new xt(at,{textureWidth:512,textureHeight:512,waterNormals:new n.TextureLoader().load("/home/https://fastly.jsdelivr.net/gh/GHchenjingqi/resources/images/waternormals.jpg",function(t){t.wrapS=t.wrapT=n.RepeatWrapping}),sunDirection:new n.Vector3,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:s.fog!==void 0}),x.rotation.x=-Math.PI/2,x.position.y=d-.25,s.add(x),o=new q(M,V.domElement),o.enableTransition=!0,o.transitionTime=1,o.minZoom=.5,o.maxZoom=1,o.mouseButtons.wheel=q.ACTION.ZOOM,o.saveState(),o.update(),I.position.set(-2.0809,4.78445,-1.37862),I.add(P),s.add(I);const it=L(G.W,16.666),st=L(G.A,16.666),rt=L(G.S,16.666),lt=L(G.D,16.666);st.addEventListener("holding",function(t){o.truck(-.001,0,!1)}),lt.addEventListener("holding",function(t){o.truck(.001,0,!1)}),it.addEventListener("holding",function(t){o.forward(.001,!1)}),rt.addEventListener("holding",function(t){o.forward(-.001,!1)});const ct=new n.TextureLoader,dt=1,C=1.5;J.forEach(t=>{ct.load("/home/"+t.url,i=>{const{width:v,height:h}=i.image;i.image.width>C?(t.width=C,t.height=C/v*h):(t.height=dt,t.width=C/h*v);const r=new n.BoxGeometry(t.width,t.height,.05),f=new n.MeshLambertMaterial({map:i,color:16777215}),u=new n.MeshBasicMaterial({color:"#ffffff"}),c=new n.Mesh(r,[u,u,u,u,u,f]);c.name="pic",c.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),c.scale.set(t.scale.x,t.scale.y,t.scale.z),c.position.set(t.position.x,t.position.y,t.position.z),c.orginData=t,w=c.position,j.add(c)})}),s.add(j),o.setLookAt(1,1,1,w.x,w.y,w.z,!0);const mt=(t,i,v)=>{if(!o)return;o.saveState();const h=.01,r=new n.Vector3(t.x,t.y,t.z);r.lerp(new n.Vector3(i.x,i.y,i.z),h);const f=new n.Vector3,u=new n.Vector3;o.getPosition(f),o.getTarget(u),new n.Vector3(t.x,t.y,t.z).lerp(new n.Vector3(i.x,i.y,i.z),h),o.setLookAt(t.x,t.y,t.z,r.x,r.y,r.z,!0)};let F=[];document.body.addEventListener("mousedown",t=>{F=[t.clientX,t.clientY]}),document.body.addEventListener("mouseup",async t=>{const[i,v]=F;if(Math.abs(i-t.clientX)>2||Math.abs(v-t.clientY)>2)return;let h=await ft({el:"#canvas",camera:M,group:j,event:t});if(h?.object){if(m&&(m=null),m=h.object,m.name=="plane"){const r=h.point;if(r.x<1.64&&r.x>-5.04&&r.z>-3.96&&r.z<1.977){const f={x:r.x,y:.5,z:r.z};mt(f,w)}}if(m.name=="pic"){let{x:r,y:f,z:u}=m.position;w={x:r,y:f,z:u};let c=o.getPosition();o.setLookAt(c.x,c.y,c.z,r,f,u,!0)}m?.orginData&&e.show("/home/"+m?.orginData.url)}})},H=({renderer:n,scene:s,clock:O,camera:V,stats:M,mixer:Y})=>{const K=O.getDelta();o?.update(K),M?.update(),x&&(x.material.uniforms.time.value+=1/60),Y&&Y.update(K),n.render(s,V)},{loading:R,pregress:E}=ut({el:"#canvas",background:"#111111",cameraPosition:[0,1.5,1],modelPath:["home.glb","light2.glb","tree.glb","michelle.glb"],modelName:["home","light","tree","michelle"],control:!1,transformControls:Q,helper:Q,light:!1,showStats:!1,creatMesh:T,animation:H});return zt(()=>{z(),document.body.removeEventListener("click",g),g=null,o=null}),(n,s)=>(bt(),vt(gt,{loading:$(R),pregress:$(E)},{default:Mt(()=>[...s[0]||(s[0]=[p("canvas",{id:"canvas"},null,-1),p("div",{class:"tips"},[p("p",null,"鼠标点击相册，预览图片，点击地面相机视角移动！"),p("p",null,"cameraControls相机控制："),p("ul",null,[p("li",null,"W 前进"),p("li",null,"S 后退"),p("li",null,"A 向左"),p("li",null,"D 向右")])],-1)])]),_:1},8,["loading","pregress"]))}},Bt=wt(Lt,[["__scopeId","data-v-37ae1932"]]);export{Bt as default};
