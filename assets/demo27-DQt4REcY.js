import{u as gt,L as mt}from"./Loading-BOak9VNV.js";import{m as ht,k as S,i as pt}from"./creatMesh-DgDMwag-.js";import{u as ft}from"./useRay-M6zBsg0A.js";import{u as yt,K as A}from"./keyCodes-DdbDBL3F.js";import{C as G}from"./camera-controls.module-CggtOxtI.js";import{W as xt}from"./Water-C_399Ukj.js";import{_ as wt,g as zt,c as bt,b as vt,w as Mt,u as $,d as p}from"./index-3r0CxIdO.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./allscreen-DUqb-iEA.js";import"./loading-Cd1P2AmI.js";import"https://ghchenjingqi.github.io/resources/mds/pathList.js";const J=[{url:"https://ghchenjingqi.github.io/resources/images/2.jpg",rotation:{x:0,y:Math.PI,z:0},scale:{x:1.6,y:1.6,z:1},position:{x:-2.480360132066057,y:1.02914583548867,z:-3.8840465703459124}},{url:"https://ghchenjingqi.github.io/resources/images/1.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.616760671057668,y:1.0103806696280644,z:-2.9235002018346625}},{url:"https://ghchenjingqi.github.io/resources/images/3.jpg",rotation:{x:0,y:-Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:-5.263541604983203,y:.9416043550166153,z:-.8699767840378825}},{url:"https://ghchenjingqi.github.io/resources/images/4.jpg",rotation:{x:0,y:Math.PI/2,z:0},scale:{x:.6,y:.6,z:1},position:{x:1.516760671057668,y:1.0103806696280644,z:-.5235002018346626}},{url:"https://ghchenjingqi.github.io/resources/images/5.jpg",rotation:{x:0,y:-Math.PI*2,z:0},scale:{x:1,y:1,z:1},position:{x:-3.997948866131494,y:.8198050714546645,z:2.5871518341211726}},{url:"https://ghchenjingqi.github.io/resources/images/6.jpg",position:{x:1.363645229509038,y:.9849856905460515,z:2},scale:{x:.6,y:.6,z:1},rotation:{x:0,y:1.5707963267948966,z:0}}];let D=!1,v=!1,y,_,l;const e={config:{}};e.mount=function(i={}){const o=document.getElementById("zoomtastic-container");o&&o.remove(),e.config.size=i.size||"95%",e.config.easing=i.easing||"ease",e.config.duration=i.duration||300,e.config.background=i.background||"rgba(0, 0, 0, 0.9)",e.config.filter=i.filter||"drop-shadow(0 2px 16px rgba(0, 0, 0, 0.3))",e.config.animation=i.animation||"slide",y=W("zoomtastic-container",{top:"0",left:"0",width:"100%",height:"100vh",display:"flex",position:"fixed",alignItems:"center",justifyContent:"center",maxHeight:"100dvh",cursor:"zoom-out",zIndex:"16777271",visibility:"hidden"}),_=W("zoomtastic-background",{width:"100%",height:"100%",zIndex:"0",opacity:"0",userSelect:"none",position:"absolute",background:e.config.background,transitionProperty:"opacity",transitionTimingFunction:e.config.easing,transitionDuration:parseInt(e.config.duration*.75)+"ms"}),l=W("zoomtastic-image",{width:e.config.size,height:e.config.size,opacity:"0",zIndex:"16777271",userSelect:"none",pointerEvents:"none",backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",transitionProperty:"all",transitionTimingFunction:e.config.easing,transitionDuration:parseInt(e.config.duration)+"ms",transform:"translateY(0) scale(1)",filter:e.config.filter}),e.config.animation==="slide"&&(l.style.transform="translateY(5%) scale(1)"),e.config.animation==="zoom"&&(l.style.transform="scale(0.95)"),e.config.animation==="drop"&&(l.style.transform="scale(1.1)"),y.addEventListener("click",()=>{v||(v=!0,e.hide())}),y.appendChild(l),y.appendChild(_),document.body.appendChild(y),v=!1,D=!0};e.listen=function(i="[zoomtastic]",o="src"){if(D||e.mount(),typeof i=="string"&&(i=document.querySelectorAll(i)),i instanceof HTMLElement&&(i=[i]),!!i)for(let d=0;d<i.length;d++){const m=i[d];m.style.cursor="zoom-in",m.addEventListener("click",u=>{u.preventDefault();const z=m.getAttribute(o);z&&e.show(z)})}};e.show=function(i){if(!i)throw new TypeError("URL is not specified");D||e.mount(),l.style.backgroundImage=`url("${encodeURI(i)}")`,y.style.visibility="visible",setTimeout(()=>{e.config.animation==="slide"&&(l.style.transform="translateY(0) scale(1)"),(e.config.animation==="zoom"||e.config.animation==="drop")&&(l.style.transform="translateY(0) scale(1)"),l.style.opacity="1",_.style.opacity="1",v=!1})};e.hide=function(){D||e.mount(),setTimeout(()=>{e.config.animation==="slide"&&(l.style.transform="translateY(5%) scale(1)"),e.config.animation==="zoom"&&(l.style.transform="translateY(0) scale(0.95)"),e.config.animation==="drop"&&(l.style.transform="translateY(0) scale(1.1)"),l.style.opacity="0",_.style.opacity="0"}),setTimeout(()=>{l.style.backgroundImage="none",y.style.visibility="hidden",v=!1},parseInt(e.config.duration))};function W(i,o={}){const d=document.createElement("div");for(const m in o)d.style[m]=o[m];return d.id=i,d}const Q=!1,Lt={__name:"demo27",setup(i){let o=null,d=-1,m=null,u=null,z=null,x=null,V=null;const T=async({THREE:n,scene:s,transControls:O,renderer:Y,camera:M,gridHelper:K,axesHelper:B})=>{G.install({THREE:n}),e.mount();const{keyEvent:L,clearKeys:tt,getKeyTime:kt}=await yt();z=tt;const k=new n.Group;let w=J[0].position;const I=ht({size:[10,64],position:[0,0,0],shadow:!0,type:"standard",color:13606249});I.rotation.x=-Math.PI/2,I.position.y=d-.05,I.name="plane",k.add(I);const q=S(s.children,"home");q.rotation.y=-Math.PI/8,q.scale.set(15,15,15),q.position.set(0,2.8,-4);const N=S(s.children,"tree");N.scale.set(15,15,15),N.position.set(5.55,2.707,-2.471),V=S(s.children,"michelle"),V.scale.set(1.2,1.2,1.2),V.position.set(3.8736,-1,4.935);const P=new n.Group,U=S(s.children,"light");U.scale.set(3,3,3),P.add(U);const j=new n.PointLight(16777215,80,0);j.position.set(0,d,.7),j.lookAt(0,-3,.7),j.castShadow=!0;const et=new n.SphereGeometry(20,32,32),ot=new n.MeshStandardMaterial({color:15114812,emissive:15114812,emissiveIntensity:1e3,roughness:.5,metalness:0}),X=new n.Mesh(et,ot);X.position.set(0,250,1e3),s.background=new n.Color(265780),s.add(X);const nt=new n.AmbientLight(16777215,.4);s.add(nt);let Z=[{nubmer:1850,color:16777215,size:1.5,scalar:1,multiple:1e3}];for(let t=0;t<Z.length;t++){const a=pt(Z[t]);a.rotation.x=Math.random()*6,a.rotation.y=Math.random()*6,a.rotation.z=Math.random()*6,a.matrixAutoUpdate=!1,a.updateMatrix(),a.position.set(0,0,0),s.add(a)}const it=new n.PlaneGeometry(1e3,1e3);x=new xt(it,{textureWidth:512,textureHeight:512,waterNormals:new n.TextureLoader().load("/home/https://ghchenjingqi.github.io/resources/images/waternormals.jpg",function(t){t.wrapS=t.wrapT=n.RepeatWrapping}),sunDirection:new n.Vector3,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:s.fog!==void 0}),x.rotation.x=-Math.PI/2,x.position.y=d-.25,s.add(x),o=new G(M,Y.domElement),o.enableTransition=!0,o.transitionTime=1,o.minZoom=.5,o.maxZoom=1,o.mouseButtons.wheel=G.ACTION.ZOOM,o.saveState(),o.update(),P.position.set(-2.0809,4.78445,-1.37862),P.add(j),s.add(P);const at=L(A.W,16.666),st=L(A.A,16.666),rt=L(A.S,16.666),lt=L(A.D,16.666);st.addEventListener("holding",function(t){o.truck(-.001,0,!1)}),lt.addEventListener("holding",function(t){o.truck(.001,0,!1)}),at.addEventListener("holding",function(t){o.forward(.001,!1)}),rt.addEventListener("holding",function(t){o.forward(-.001,!1)});const ct=new n.TextureLoader,dt=1,C=1.5;J.forEach(t=>{ct.load("/home/"+t.url,a=>{const{width:b,height:h}=a.image;a.image.width>C?(t.width=C,t.height=C/b*h):(t.height=dt,t.width=C/h*b);const r=new n.BoxGeometry(t.width,t.height,.05),f=new n.MeshLambertMaterial({map:a,color:16777215}),g=new n.MeshBasicMaterial({color:"#ffffff"}),c=new n.Mesh(r,[g,g,g,g,g,f]);c.name="pic",c.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),c.scale.set(t.scale.x,t.scale.y,t.scale.z),c.position.set(t.position.x,t.position.y,t.position.z),c.orginData=t,w=c.position,k.add(c)})}),s.add(k),o.setLookAt(1,1,1,w.x,w.y,w.z,!0);const ut=(t,a,b)=>{if(!o)return;o.saveState();const h=.01,r=new n.Vector3(t.x,t.y,t.z);r.lerp(new n.Vector3(a.x,a.y,a.z),h);const f=new n.Vector3,g=new n.Vector3;o.getPosition(f),o.getTarget(g),new n.Vector3(t.x,t.y,t.z).lerp(new n.Vector3(a.x,a.y,a.z),h),o.setLookAt(t.x,t.y,t.z,r.x,r.y,r.z,!0)};let F=[];document.body.addEventListener("mousedown",t=>{F=[t.clientX,t.clientY]}),document.body.addEventListener("mouseup",async t=>{const[a,b]=F;if(Math.abs(a-t.clientX)>2||Math.abs(b-t.clientY)>2)return;let h=await ft({el:"#canvas",camera:M,group:k,event:t});if(h?.object){if(u&&(u=null),u=h.object,u.name=="plane"){const r=h.point;if(r.x<1.64&&r.x>-5.04&&r.z>-3.96&&r.z<1.977){const f={x:r.x,y:.5,z:r.z};ut(f,w)}}if(u.name=="pic"){let{x:r,y:f,z:g}=u.position;w={x:r,y:f,z:g};let c=o.getPosition();o.setLookAt(c.x,c.y,c.z,r,f,g,!0)}u?.orginData&&e.show("/home/"+u?.orginData.url)}})},H=({renderer:n,scene:s,clock:O,camera:Y,stats:M,mixer:K})=>{const B=O.getDelta();o?.update(B),M?.update(),x&&(x.material.uniforms.time.value+=1/60),K&&K.update(B),n.render(s,Y)},{loading:R,pregress:E}=gt({el:"#canvas",background:"#111111",cameraPosition:[0,1.5,1],modelPath:["home.glb","light2.glb","tree.glb","michelle.glb"],modelName:["home","light","tree","michelle"],control:!1,transformControls:Q,helper:Q,light:!1,showStats:!1,creatMesh:T,animation:H});return zt(()=>{z(),document.body.removeEventListener("click",m),m=null,o=null}),(n,s)=>(vt(),bt(mt,{loading:$(R),pregress:$(E)},{default:Mt(()=>[...s[0]||(s[0]=[p("canvas",{id:"canvas"},null,-1),p("div",{class:"tips"},[p("p",null,"鼠标点击相册，预览图片，点击地面相机视角移动！"),p("p",null,"cameraControls相机控制："),p("ul",null,[p("li",null,"W 前进"),p("li",null,"S 后退"),p("li",null,"A 向左"),p("li",null,"D 向右")])],-1)])]),_:1},8,["loading","pregress"]))}},qt=wt(Lt,[["__scopeId","data-v-a3503a1b"]]);export{qt as default};
