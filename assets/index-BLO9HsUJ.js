import{_ as L,r as u,f as A,i as M,b as S,o as d,j as h,a as c,F as k,l as B,n as x,t as C,s as F,x as $,c as T,y as E,q as H,z as R,A as z,B as I}from"./index-DrLlDswB.js";import{N as U}from"./Notification-CAeB26ce.js";import{h as j}from"./highlight.pack-Pye1uBh_.js";import"./_commonjsHelpers-Cpj98o6Y.js";const D={class:"sub-ml"},K=["onClick"],P=["id"],G={__name:"FolderMenu",props:{items:Array},setup(w){const p=u(""),f=w,y=u(!1),n=document.querySelector(".know-box"),s=u([]);A(()=>f.items,l=>{l&&l.length>0&&(s.value=l,s.value&&s.value.length>0&&(p.value=s.value[0].id))},{immediate:!0});const r=l=>{p.value=l.id,n.scrollTo({top:l.pixel,behavior:"smooth"})},m=u(null),i=()=>{let l=n.scrollTop+n.offsetTop+1+135;const v=s.value.reduce((e,g)=>g.pixel<=l&&(e===null||l-g.pixel<l-e.pixel)?g:e,null);if(v){let e=m.value.scrollHeight*v.pixel/n.scrollHeight-10;m.value.scrollTo({top:e,behavior:"smooth"}),p.value=v.id}y.value=!0},_=()=>{n.addEventListener("scroll",i,{passive:!0})};return M(()=>{s.value=f.items,m.value=document.querySelector(".sub-ml"),s.value&&s.value.length>0&&(p.value=s.value[0].id),_()}),S(()=>{y.value&&(n.removeEventListener("scroll",i),y.value=!1)}),(l,v)=>(d(),h(k,null,[v[0]||(v[0]=c("h3",{class:"sub-class"},"导航器",-1)),c("div",D,[c("ul",null,[(d(!0),h(k,null,B(s.value,e=>(d(),h("li",{key:e.id,class:x(e.class),onClick:g=>r(e)},[c("span",{id:e.id,class:x({active:p.value==e.id})},C(e.title),11,P)],10,K))),128))])])],64))}},J=L(G,[["__scopeId","data-v-90747c0e"]]),O=["title","onClick"],Q={class:"content-box"},V=["innerHTML"],W={__name:"index",setup(w){const p=H(),f=u([]),y=u(null),n=u(""),s=async o=>{if(o==n.value)return!1;i.value=-1,l.value=[],r.value&&(r.value.scrollTop=0),y.value=await R(o),n.value=o;let t=setTimeout(()=>{const a=document.querySelectorAll("pre code");a&&a.length>0&&a.forEach(b=>{j.highlightBlock(b)}),clearTimeout(t),v()},0)},r=u(null),m=u(!1),i=u(0),_=()=>{r.value.scrollTop>100?m.value=!0:m.value=!1},l=u([]),v=async()=>{const o=document.querySelector(".contenter");if(!o)return!1;i.value<0?i.value=Math.floor(Math.random()*1e3):i.value++,l.value=await z(o),N()},e=u({show:!1,message:"",type:""}),g=()=>{e.value.show=!1,e.value.message=""},q=async o=>{if(o)try{if(navigator.clipboard)await navigator.clipboard.writeText(o.innerText),e.value.message="复制成功",e.value.type="success";else{const t=document.createElement("input");t.value=o.innerText,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),e.value.message="复制成功",e.value.type="success"}e.value.show=!0}catch{e.value.message="复制失败，请重试",e.value.type="error",e.value.show=!0}else e.value.message="未找到代码块",e.value.type="warning",e.value.show=!0},N=()=>{document.querySelectorAll("pre code").forEach(t=>{const a=document.createElement("button");a.className="copy-btn",a.textContent="复制代码",a.onclick=()=>q(t),t.parentElement.appendChild(a)})};return M(()=>{r.value&&r.value.addEventListener("scroll",_)}),S(()=>{r.value&&r.value.removeEventListener("scroll",_)}),F(async()=>{const t=p.currentRoute.value.query.name||"";f.value=$(),f.value.length>0&&(t?await s(t):await s(f.value[0])),i.value=1001,v()}),(o,t)=>(d(),h("div",{class:"know-box",ref_key:"knowsElement",ref:r},[c("div",{class:x(["mulu",{"fixed-sidebar":m.value}])},[t[0]||(t[0]=c("div",{class:"ml-title"},[c("h4",null,"技术目录")],-1)),c("ul",null,[(d(!0),h(k,null,B(f.value,(a,b)=>(d(),h("li",{style:I({color:a==n.value?"red":""}),key:b,title:a,onClick:X=>s(a)},C(a.charAt(0).toUpperCase()+a.slice(1)),13,O))),128))])],2),c("div",Q,[c("h1",null,C(n.value.charAt(0).toUpperCase()+n.value.slice(1)),1),c("div",{id:"codebox",class:"contenter",innerHTML:y.value},null,8,V)]),i.value>0&&l.value.length>0?(d(),h("div",{key:0,class:x(["sub-mulu",{"fixed-sidebar":m.value}])},[(d(),T(J,{items:l.value,key:i.value},null,8,["items"]))],2)):E("",!0),e.value.show?(d(),T(U,{key:1,message:e.value.message,type:e.value.type,duration:3e3,onClosed:g},null,8,["message","type"])):E("",!0)],512))}},te=L(W,[["__scopeId","data-v-303d1a28"]]);export{te as default};
