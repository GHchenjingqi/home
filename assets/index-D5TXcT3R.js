import{_ as T,r as c,e as C,g as L,b as M,o as i,h as p,a,F as k,m as E,s as x,t as b,x as S,y as w,c as B,j as q,q as $,z as F,A as H,B as R}from"./index-CAQZDU1Q.js";import{h as z}from"./highlight.pack-Ddia5PR7.js";import"./_commonjsHelpers-CqkleIqs.js";const A={class:"sub-ml"},N=["onClick"],j=["id"],I={__name:"FolderMenu",props:{items:Array},setup(g){const d=c(""),v=g,o=c([]);C(()=>v.items,l=>{l&&l.length>0&&(o.value=l,d.value=o.value[0].id)},{immediate:!0});const n=document.querySelector(".know-box"),h=l=>{d.value=l.id,n.scrollTo({top:l.pixel,behavior:"smooth"})},s=c(null),m=()=>{let l=n.scrollTop+n.offsetTop+1+135;const u=o.value.reduce((e,t)=>t.pixel<=l&&(e===null||l-t.pixel<l-e.pixel)?t:e,null);if(u){let e=s.value.scrollHeight*u.pixel/n.scrollHeight-10;s.value.scrollTo({top:e,behavior:"smooth"}),d.value=u.id}},_=()=>{n.addEventListener("scroll",m,{passive:!0})};return L(()=>{o.value=v.items,o.value&&o.value.length>0&&(d.value=o.value[0].id,_(),s.value=document.querySelector(".sub-ml"))}),M(()=>{n.removeEventListener("scroll",m)}),(l,u)=>(i(),p(k,null,[u[0]||(u[0]=a("h3",{class:"sub-class"},"导航器",-1)),a("div",A,[a("ul",null,[(i(!0),p(k,null,E(o.value,e=>(i(),p("li",{key:e.id,class:x(e.class),onClick:t=>h(e)},[a("span",{id:e.id,class:x({active:d.value==e.id})},b(e.title),11,j)],10,N))),128))])])],64))}},D=T(I,[["__scopeId","data-v-ccc31b82"]]),K=["title","onClick"],U={class:"content-box"},G=["innerHTML"],J={__name:"index",setup(g){const d=$(),v=c([]),o=c(null),n=c(""),h=async t=>{if(t==n.value)return!1;u.value=[],s.value&&(s.value.scrollTop=0),o.value=await F(t),n.value=t;let f=setTimeout(()=>{const r=document.querySelectorAll("pre code");r&&r.length>0&&r.forEach(y=>{z.highlightBlock(y)}),clearTimeout(f),e()},0)},s=c(null),m=c(!1),_=c(0),l=()=>{s.value.scrollTop>100?m.value=!0:m.value=!1},u=c([]),e=async()=>{const t=document.querySelector(".contenter");if(!t)return!1;_.value++,u.value=await H(t)};return L(()=>{s.value&&s.value.addEventListener("scroll",l)}),M(()=>{s.value&&s.value.removeEventListener("scroll",l)}),S(async()=>{const f=d.currentRoute.value.query.name||"";v.value=w(),v.value.length>0&&(f?await h(f):await h(v.value[0])),_.value=1001,e()}),(t,f)=>(i(),p("div",{class:"know-box",ref_key:"knowsElement",ref:s},[a("div",{class:x(["mulu",{"fixed-sidebar":m.value}])},[f[0]||(f[0]=a("div",{class:"ml-title"},[a("h4",null,"技术目录")],-1)),a("ul",null,[(i(!0),p(k,null,E(v.value,(r,y)=>(i(),p("li",{style:R({color:r==n.value?"red":""}),key:y,title:r,onClick:O=>h(r)},b(r),13,K))),128))])],2),a("div",U,[a("h1",null,b(n.value),1),a("div",{id:"codebox",class:"contenter",innerHTML:o.value},null,8,G)]),_.value>0?(i(),p("div",{key:0,class:x(["sub-mulu",{"fixed-sidebar":m.value}])},[(i(),B(D,{items:u.value,key:_.value},null,8,["items"]))],2)):q("",!0)],512))}},W=T(J,[["__scopeId","data-v-492f8ab4"]]);export{W as default};
