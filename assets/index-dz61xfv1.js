import{_ as L,r as n,f as F,i as M,b as S,o as d,j as h,a as c,F as k,p as B,n as x,t as w,y as $,z as A,c as T,k as E,x as H,A as R,B as z,C as I}from"./index-4p0r8sbT.js";import{N as j}from"./Notification-AlhMwASL.js";import{h as D}from"./highlight.pack-Pye1uBh_.js";import"./_commonjsHelpers-Cpj98o6Y.js";const K={class:"sub-ml"},P=["onClick"],U=["id"],G={__name:"FolderMenu",props:{items:Array},setup(C){const p=n(""),f=C,y=n(!1),u=document.querySelector(".know-box"),s=n([]);F(()=>f.items,t=>{t&&t.length>0&&(s.value=t,s.value&&s.value.length>0&&(p.value=s.value[0].id))},{immediate:!0});const r=t=>{p.value=t.id,u.scrollTo({top:t.pixel,behavior:"smooth"})},m=n(null),i=()=>{let t=u.scrollTop+u.offsetTop+1+135;const v=s.value.reduce((e,_)=>_.pixel<=t&&(e===null||t-_.pixel<t-e.pixel)?_:e,null);if(v){let e=m.value.scrollHeight*v.pixel/u.scrollHeight-10;m.value.scrollTo({top:e,behavior:"smooth"}),p.value=v.id}y.value=!0},g=()=>{u.addEventListener("scroll",i,{passive:!0})};return M(()=>{s.value=f.items,m.value=document.querySelector(".sub-ml"),s.value&&s.value.length>0&&(p.value=s.value[0].id),g()}),S(()=>{y.value&&(u.removeEventListener("scroll",i),y.value=!1)}),(t,v)=>(d(),h(k,null,[v[0]||(v[0]=c("h3",{class:"sub-class"},"导航器",-1)),c("div",K,[c("ul",null,[(d(!0),h(k,null,B(s.value,e=>(d(),h("li",{key:e.id,class:x(e.class),onClick:_=>r(e)},[c("span",{id:e.id,class:x({active:p.value==e.id})},w(e.title),11,U)],10,P))),128))])])],64))}},J=L(G,[["__scopeId","data-v-78adb7bb"]]),O=["title","onClick"],Q={class:"content-box"},V=["innerHTML"],W={__name:"index",setup(C){const p=H(),f=n([]),y=n(null),u=n(""),s=async o=>{if(o==u.value)return!1;i.value=-1,t.value=[],r.value&&(r.value.scrollTop=0),y.value=await R(o),u.value=o;let l=setTimeout(()=>{const a=document.querySelectorAll("pre code");a&&a.length>0&&a.forEach(b=>{D.highlightBlock(b)}),clearTimeout(l),v()},0)},r=n(null),m=n(!1),i=n(0),g=()=>{r.value.scrollTop>100?m.value=!0:m.value=!1},t=n([]),v=async()=>{const o=document.querySelector(".contenter");if(!o)return!1;i.value<0?i.value=Math.floor(Math.random()*1e3):i.value++,t.value=await z(o),q()},e=n({show:!1,message:"",type:""}),_=()=>{e.value.show=!1,e.value.message=""},N=async o=>{if(o)try{if(navigator.clipboard)await navigator.clipboard.writeText(o.innerText),e.value.message="复制成功",e.value.type="success";else{const l=document.createElement("input");l.value=o.innerText,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),e.value.message="复制成功",e.value.type="success"}e.value.show=!0}catch{e.value.message="复制失败，请重试",e.value.type="error",e.value.show=!0}else e.value.message="未找到代码块",e.value.type="warning",e.value.show=!0},q=()=>{document.querySelectorAll("pre code").forEach(l=>{const a=document.createElement("button");a.className="copy-btn",a.textContent="复制代码",a.onclick=()=>N(l),l.parentElement.appendChild(a)})};return M(()=>{r.value&&r.value.addEventListener("scroll",g)}),S(()=>{r.value&&r.value.removeEventListener("scroll",g)}),$(async()=>{const l=p.currentRoute.value.query.name||"";f.value=A(),f.value.length>0&&(l?await s(l):await s(f.value[0])),i.value=1001,v()}),(o,l)=>(d(),h("div",{class:"know-box",ref_key:"knowsElement",ref:r},[c("div",{class:x(["mulu",{"fixed-sidebar":m.value}])},[l[0]||(l[0]=c("div",{class:"ml-title"},[c("h4",null,"技术目录")],-1)),c("ul",null,[(d(!0),h(k,null,B(f.value,(a,b)=>(d(),h("li",{style:I({color:a==u.value?"red":""}),key:b,title:a,onClick:X=>s(a)},w(a),13,O))),128))])],2),c("div",Q,[c("h1",null,w(u.value),1),c("div",{id:"codebox",class:"contenter",innerHTML:y.value},null,8,V)]),i.value>0?(d(),h("div",{key:0,class:x(["sub-mulu",{"fixed-sidebar":m.value}])},[(d(),T(J,{items:t.value,key:i.value},null,8,["items"]))],2)):E("",!0),e.value.show?(d(),T(j,{key:1,message:e.value.message,type:e.value.type,duration:3e3,onClosed:_},null,8,["message","type"])):E("",!0)],512))}},te=L(W,[["__scopeId","data-v-e16820a3"]]);export{te as default};
