import{r as A}from"./index-ykgXmFBY.js";class h{constructor(e,i=500,n=16.666){this.keyCode=e,this.holdTime=i,this.throttleTime=n,this.isHolding=!1,this.isMoving=!1,this.timeoutId=null,this.holdIntervalId=null,this.listeners={start:[],holding:[],end:[]}}addEventListener(e,i){this.listeners[e]&&this.listeners[e].push(i)}removeEventListener(e,i){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(n=>n!==i))}triggerEvent(e,i){this.listeners[e]&&this.listeners[e].forEach(n=>n(i))}handleKeyDown(e){e.keyCode===this.keyCode&&(this.triggerEvent("start",e),this.isHolding=!0,this.startHolding(e))}handleKeyUp(e){e.keyCode===this.keyCode&&(this.triggerEvent("end",e),this.stopHolding())}startHolding(e){this.timeoutId=setTimeout(()=>{this.isMoving=!0,this.triggerEvent("holding",e),this.holdIntervalId=setInterval(()=>{this.isMoving&&this.triggerEvent("holding",e)},this.throttleTime)},this.holdTime)}stopHolding(){this.isHolding=!1,this.isMoving=!1,clearTimeout(this.timeoutId),clearInterval(this.holdIntervalId)}static init(){const e={},i=s=>{for(const t in e)e[t].handleKeyDown(s)},n=s=>{for(const t in e)e[t].handleKeyUp(s)};return document.addEventListener("keydown",i),document.addEventListener("keyup",n),{registerKey:(s,t=500,l=16.666)=>{const o=new h(s,t,l);return e[s]=o,o},unregisterKey:s=>{e[s]&&(e[s].stopHolding(),e[s].removeAllListeners(),delete e[s])},registerComponent:s=>{var l;const t=()=>{for(const o in e)e[o].stopHolding(),e[o].removeAllListeners();document.removeEventListener("keydown",i),document.removeEventListener("keyup",n)};(l=s.exposed)!=null&&l.cleanup?s.exposed.cleanup=t:s.cleanup=t}}}}h.prototype.removeAllListeners=function(){for(const r in this.listeners)this.listeners[r]=[]};const{registerKey:E,unregisterKey:M,registerComponent:U}=h.init(),c=async()=>{let r={};const e=A({}),i=(t,l=500,o=16.666)=>{const d=E(t,l,o);return r[t]=d,e.value[t]=1,d.addEventListener("holding",a=>{e.value[t]+=a.deltaTime}),d},n=t=>e.value[t]||0,s=()=>{for(const t in r)r[t]&&(r[t].stopHolding(),r[t].removeAllListeners(),M(t));e.value={}};return U({cleanup:s}),{keyEvent:i,getKeyTime:n,clearKeys:s}},g={NUM_0:48,NUM_1:49,NUM_2:50,NUM_3:51,NUM_4:52,NUM_5:53,NUM_6:54,NUM_7:55,NUM_8:56,NUM_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,NUM_LOCK:144,SCROLL_LOCK:145,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,SEMICOLON:186,EQUAL:187,COMMA:188,MINUS:189,PERIOD:190,SLASH:191,BACKTICK:192,LEFT_BRACKET:219,BACKSLASH:220,RIGHT_BRACKET:221,QUOTE:222};export{g as K,c as u};
