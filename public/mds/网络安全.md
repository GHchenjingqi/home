### 1.XSS 攻击 及防护

#### 什么是xss?

Cross-Site Scripting（跨站脚本攻击）简称 XSS，是一种**代码注入攻击**。攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全。

#### XSS常见注入方法

- 在 HTML 中内嵌的文本中，恶意内容以 script 标签形成注入。

- 在内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）。

- 在标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签。

- 在标签的 href、src 等属性中，包含 `javascript:` (伪协议)等可执行代码。

- 在 onload、onerror、onclick 等事件中，注入不受控制代码。

- 在 style 属性和标签中，包含类似 `background-image:url("javascript:...");` 的代码（新版本浏览器已经可以防范）。

- 在 style 属性和标签中，包含类似 `expression(...)` 的 CSS 表达式代码（新版本浏览器已经可以防范）。

#### XSS攻击类型

根据攻击的来源，分为存储型、反射型和 DOM 型三种

- 存储型 ，恶意代码被注入到数据库中，打开网站时从数据库携带出，并被浏览器执行，从而实现恶意代码窃取用户数据攻击网站的效果。
- 反射性 ，恶意代码被隐藏在url路径中，当用户打开链接时，代码被拼接到浏览器中执行，最后实现攻击网站窃取数据。
- DOM型，恶意代码隐藏在前端、url、后端数据库，当DOM被解析执行时暴漏出来，开始攻击。

#### 防御XSS方法

- 输入框录入时数据校验，限制长度
- 输入框录入时过滤JavaScript 特殊字段
- 过滤不必要的事件：onclick,onerror,onfoucs
- 对渲染内容编码转义
- 将cookie设置成 http only



### 2.CSRF 跨站请求伪造

#### 什么是CSRF?

跨站请求伪造（英语：Cross-site request forgery），也被称为 one-click attack 或者 session riding，通常缩写为 CSRF 或者 XSRF， 是一种挟制用户在当前已登录的 Web 应用程序上执行非本意的操作的攻击方法。

要完成一次CSRF攻击，受害者必须依次完成两个步骤：

- 1.登录受信任网站A，并在本地生成Cookie。
- 2.在不登出A的情况下，访问危险网站B。

#### CSRF常见攻击类型

- Get请求，数据被拼在get请求的url中
- Post请求，页面会自动提交表单，将数据提交到危险网站
- 链接，通过夸张的关键字，点击之后将数据携带到危险网站

#### 防御CSRF方法

- 新增验证码，提交数据需要输入验证码
- 请求来源限制
- token，验证token是最佳CSRF的防御方案